# Response Filter Interface - Redesign Plan

## üìä –ê–Ω–∞–ª–∏–∑ Best Practices (Postman, Insomnia, REST Clients)

### 1. **Visual Field Selection** (–ù–∞—à —Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ ‚úì)
- ‚úÖ Checkbox tree –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª–µ–π
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π
- ‚ùå –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç: –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–≤—ã–±—Ä–∞—Ç—å –≤—Å–µ/—Å–Ω—è—Ç—å –≤—Å–µ)

### 2. **JMESPath/JSONPath** (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ä–µ–∂–∏–º)
- –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã:
  - `[*].{id: id, name: name}` - –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ id –∏ name
  - `[?priceRub > 2000]` - –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —É—Å–ª–æ–≤–∏—é
  - `[0:2]` - –≤–∑—è—Ç—å –ø–µ—Ä–≤—ã–µ 2 —ç–ª–µ–º–µ–Ω—Ç–∞

### 3. **Live Preview** (–ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–Ω–æ!)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞: "–î–æ: 5.2KB ‚Üí –ü–æ—Å–ª–µ: 1.1KB (79% —ç–∫–æ–Ω–æ–º–∏–∏)"
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ JSON

### 4. **Quick Actions**
- "Select All" / "Deselect All"
- "Only Required Fields" (–ø–æ–º–µ—á–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è)
- "Flatten Structure" (—É–±—Ä–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å)

---

## üéØ –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–π –£–ª—É—á—à–µ–Ω–Ω—ã–π –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### **Layout: 2 –∫–æ–ª–æ–Ω–∫–∏**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Tab: –§–∏–ª—å—Ç—Ä –æ—Ç–≤–µ—Ç–∞                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê   ‚îÇ  –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê                      ‚îÇ
‚îÇ  (–í—ã–±–æ—Ä –ø–æ–ª–µ–π)   ‚îÇ  (Preview —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)                ‚îÇ
‚îÇ                  ‚îÇ                                      ‚îÇ
‚îÇ  ‚òë items [4]     ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ    ‚òë id          ‚îÇ  ‚îÇ –ü—Ä–µ–≤—å—é (—á—Ç–æ —É–≤–∏–¥–∏—Ç LLM)      ‚îÇ   ‚îÇ
‚îÇ    ‚òë name        ‚îÇ  ‚îÇ üü¢ –°–∂–∞—Ç–æ –Ω–∞ 65%              ‚îÇ   ‚îÇ
‚îÇ    ‚òë category    ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îÇ
‚îÇ    ‚òê duration... ‚îÇ  ‚îÇ [                             ‚îÇ   ‚îÇ
‚îÇ    ‚òê priceRub    ‚îÇ  ‚îÇ   {                           ‚îÇ   ‚îÇ
‚îÇ    ‚òê isAvailable ‚îÇ  ‚îÇ     "id": 1,                  ‚îÇ   ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ     "name": "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è",   ‚îÇ   ‚îÇ
‚îÇ  [Select All]    ‚îÇ  ‚îÇ     "category": "–º–µ–¥–∏—Ü–∏–Ω–∞"    ‚îÇ   ‚îÇ
‚îÇ  [Only ID+Name]  ‚îÇ  ‚îÇ   }, ...                      ‚îÇ   ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ ]                             ‚îÇ   ‚îÇ
‚îÇ  Mode:           ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  ‚óè Visual        ‚îÇ                                      ‚îÇ
‚îÇ  ‚óã JMESPath      ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ –ò—Å—Ö–æ–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 2.4 KB      ‚îÇ   ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ –ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞: 0.85 KB       ‚îÇ   ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤: ~65%       ‚îÇ   ‚îÇ
‚îÇ                  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üöÄ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ü–æ—à–∞–≥–æ–≤–æ)

### **–§–∞–∑–∞ 1: –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞** (30 –º–∏–Ω)

1. ‚úÖ –î–≤—É—Ö–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π layout (–≤—ã–±–æ—Ä –ø–æ–ª–µ–π —Å–ª–µ–≤–∞, preview —Å–ø—Ä–∞–≤–∞)
2. ‚úÖ –ö–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π:
   - "–í—ã–±—Ä–∞—Ç—å –≤—Å–µ"
   - "–°–Ω—è—Ç—å –≤—Å–µ"
   - "–¢–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ" (id, name, category)
3. ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ —ç–∫–æ–Ω–æ–º–∏–∏ (—Ä–∞–∑–º–µ—Ä –¥–æ/–ø–æ—Å–ª–µ, % —Å–∂–∞—Ç–∏—è)
4. ‚úÖ Live preview —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π JSON

### **–§–∞–∑–∞ 2: –£–ª—É—á—à–µ–Ω–∏–µ UX** (20 –º–∏–Ω)

1. ‚úÖ Sticky header –≤ —Ç–∞–±–ª–∏—Ü–µ –ø–æ–ª–µ–π (–Ω–µ —Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è)
2. ‚úÖ –°—á–µ—Ç—á–∏–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π: "–í—ã–±—Ä–∞–Ω–æ: 3 –∏–∑ 6"
3. ‚úÖ –ò–∫–æ–Ω–∫–∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö (üî¢ number, üìù string, ‚úÖ boolean, üì¶ object, üìã array)
4. ‚úÖ Hover tooltip —Å –ø–æ–ª–Ω—ã–º –ø—É—Ç–µ–º –∫ –ø–æ–ª—é

### **–§–∞–∑–∞ 3: JMESPath —Ä–µ–∂–∏–º** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)

1. ‚è≥ Toggle –º–µ–∂–¥—É Visual / JMESPath —Ä–µ–∂–∏–º–∞–º–∏
2. ‚è≥ –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è JMESPath –≤—ã—Ä–∞–∂–µ–Ω–∏—è
3. ‚è≥ –ü—Ä–∏–º–µ—Ä—ã —à–∞–±–ª–æ–Ω–æ–≤:
   - `[*].{id: id, name: name}` - —Ç–æ–ª—å–∫–æ id –∏ name
   - `[?priceRub > 2000]` - –¥–æ—Ä–æ–≥–∏–µ —É—Å–ª—É–≥–∏
   - `[0:3]` - –ø–µ—Ä–≤—ã–µ 3 —ç–ª–µ–º–µ–Ω—Ç–∞
4. ‚è≥ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ JMESPath
5. ‚è≥ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É Visual ‚ÜîÔ∏è JMESPath

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—à–∫–∏

### **–î–ª—è –º–∞—Å—Å–∏–≤–æ–≤:**
- –ö–Ω–æ–ø–∫–∞ "Apply to all items" (–ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –∫–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º –º–∞—Å—Å–∏–≤–∞)
- Limit –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: `[0:10]` (–ø–µ—Ä–≤—ã–µ 10)

### **Smart Suggestions:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å —É–±—Ä–∞—Ç—å —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å, –∫–∞–∫–∏–µ –ø–æ–ª—è –∑–∞–Ω–∏–º–∞—é—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –º–µ—Å—Ç–∞

### **Presets:**
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä" (id, name)
- "–ü–æ–ª–Ω—ã–π" (–≤—Å–µ –ø–æ–ª—è)
- "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π"

---

## üé® Mockup Code (–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)

```vue
<template>
  <div class="response-filter-container">
    <!-- Mode Toggle -->
    <div class="mode-toggle">
      <button :class="{ active: mode === 'visual' }" @click="mode = 'visual'">
        üìä –í–∏–∑—É–∞–ª—å–Ω—ã–π
      </button>
      <button :class="{ active: mode === 'jmespath' }" @click="mode = 'jmespath'">
        üîß JMESPath
      </button>
    </div>

    <!-- Visual Mode -->
    <div v-if="mode === 'visual'" class="two-column-layout">
      <!-- Left: Field Selection -->
      <div class="field-selection">
        <div class="quick-actions">
          <button @click="selectAll">‚úì –í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
          <button @click="deselectAll">‚úó –°–Ω—è—Ç—å –≤—Å–µ</button>
          <button @click="selectOnlyBasic">‚≠ê –¢–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ</button>
        </div>
        
        <div class="field-counter">
          –í—ã–±—Ä–∞–Ω–æ: {{ selectedCount }} –∏–∑ {{ totalCount }}
        </div>

        <!-- Field Tree -->
        <FieldNode 
          v-for="field in fieldTree" 
          :key="field.path"
          :field="field"
          @toggle="handleToggle"
        />
      </div>

      <!-- Right: Live Preview -->
      <div class="live-preview">
        <div class="preview-header">
          <span>–ü—Ä–µ–≤—å—é (—á—Ç–æ —É–≤–∏–¥–∏—Ç LLM)</span>
          <span class="badge">
            üü¢ –°–∂–∞—Ç–æ –Ω–∞ {{ compressionPercent }}%
          </span>
        </div>
        
        <div class="preview-json">
          <pre>{{ formattedPreview }}</pre>
        </div>

        <div class="metrics">
          <div>üì¶ –ò—Å—Ö–æ–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä: {{ originalSize }}</div>
          <div>‚ú® –ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞: {{ filteredSize }}</div>
          <div>üí∞ –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤: ~{{ compressionPercent }}%</div>
        </div>
      </div>
    </div>

    <!-- JMESPath Mode -->
    <div v-else class="jmespath-mode">
      <textarea v-model="jmespathQuery" placeholder="[*].{id: id, name: name}"></textarea>
      <div class="jmespath-examples">
        <button @click="applyExample('[*].{id: id, name: name}')">–¢–æ–ª—å–∫–æ ID –∏ Name</button>
        <button @click="applyExample('[?priceRub > 2000]')">–¶–µ–Ω–∞ > 2000</button>
      </div>
      <div class="preview-json">
        <pre>{{ jmespathResult }}</pre>
      </div>
    </div>
  </div>
</template>
```

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ù–∞—á–∞—Ç—å —Å –§–∞–∑—ã 1

**–ß—Ç–æ –¥–µ–ª–∞–µ–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:**
1. ‚úÖ –î–≤—É—Ö–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π layout (–≤—ã–±–æ—Ä —Å–ª–µ–≤–∞, preview —Å–ø—Ä–∞–≤–∞)
2. ‚úÖ –ö–Ω–æ–ø–∫–∏ "–í—ã–±—Ä–∞—Ç—å –≤—Å–µ" / "–°–Ω—è—Ç—å –≤—Å–µ" / "–¢–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ"
3. ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ —ç–∫–æ–Ω–æ–º–∏–∏ (—Ä–∞–∑–º–µ—Ä, %)
4. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π live preview

JMESPath –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞–ø—Ä–æ—Å—è—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ä–µ–∂–∏–º.
