{"openapi":"3.1.0","info":{"title":"agent-platform","version":"0.1.0"},"paths":{"/api/v1/health":{"get":{"tags":["health"],"summary":"Health","description":"Базовая проверка здоровья сервиса (без зависимостей от БД)","operationId":"health_api_v1_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Health Api V1 Health Get"}}}}}}},"/api/v1/health/db":{"get":{"tags":["health"],"summary":"Db Health","description":"Проверка здоровья базы данных и пула соединений","operationId":"db_health_api_v1_health_db_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Db Health Api V1 Health Db Get"}}}}}}},"/api/v1/auth/token":{"post":{"tags":["auth"],"summary":"Issue Token","operationId":"issue_token_api_v1_auth_token_post","parameters":[{"name":"x-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/refresh":{"post":{"tags":["auth"],"summary":"Refresh Token","description":"Обновляет access token используя refresh token.","operationId":"refresh_token_api_v1_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/test-token":{"get":{"tags":["auth"],"summary":"Get Test Token","description":"Генерирует временный токен для тестирования в Swagger","operationId":"get_test_token_api_v1_auth_test_token_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/auth/register":{"post":{"tags":["auth"],"summary":"Register","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegister"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthTokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["auth"],"summary":"Login","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthTokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/me":{"get":{"tags":["auth"],"summary":"Get Me","operationId":"get_me_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSession"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/api-keys":{"post":{"tags":["api-keys"],"summary":"Create Api Key","operationId":"create_api_key_api_v1_api_keys_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKeyCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKeyCreated"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["api-keys"],"summary":"List Api Keys","operationId":"list_api_keys_api_v1_api_keys_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"include_revoked","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Revoked"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ApiKeyRead"},"title":"Response List Api Keys Api V1 Api Keys Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api-keys/{api_key_id}":{"delete":{"tags":["api-keys"],"summary":"Revoke Api Key","operationId":"revoke_api_key_api_v1_api_keys__api_key_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"api_key_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Api Key Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/credentials":{"post":{"tags":["credentials"],"summary":"Create Credential","operationId":"create_credential_api_v1_credentials_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CredentialCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CredentialRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["credentials"],"summary":"List Credentials","operationId":"list_credentials_api_v1_credentials_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Inactive"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CredentialRead"},"title":"Response List Credentials Api V1 Credentials Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/credentials/{credential_id}":{"get":{"tags":["credentials"],"summary":"Get Credential","operationId":"get_credential_api_v1_credentials__credential_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"credential_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Credential Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CredentialRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["credentials"],"summary":"Update Credential","operationId":"update_credential_api_v1_credentials__credential_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"credential_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Credential Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CredentialUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CredentialRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["credentials"],"summary":"Delete Credential","operationId":"delete_credential_api_v1_credentials__credential_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"credential_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Credential Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/credentials/{credential_id}/test":{"post":{"tags":["credentials"],"summary":"Test Credential","operationId":"test_credential_api_v1_credentials__credential_id__test_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"credential_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Credential Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CredentialTestRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CredentialTestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents":{"post":{"tags":["agents"],"summary":"Create Agent","operationId":"create_agent_api_v1_agents_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["agents"],"summary":"List Agents","operationId":"list_agents_api_v1_agents_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AgentRead"},"title":"Response List Agents Api V1 Agents Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}":{"get":{"tags":["agents"],"summary":"Get Agent","operationId":"get_agent_api_v1_agents__agent_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["agents"],"summary":"Update Agent","operationId":"update_agent_api_v1_agents__agent_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["agents"],"summary":"Delete Agent","operationId":"delete_agent_api_v1_agents__agent_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/publish":{"post":{"tags":["agents"],"summary":"Publish Agent","operationId":"publish_agent_api_v1_agents__agent_id__publish_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/channels":{"get":{"tags":["agents"],"summary":"Список доступных каналов","operationId":"list_available_channels_api_v1_agents__agent_id__channels_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Доступные типы каналов для подключения","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"},"title":"Response List Available Channels Api V1 Agents  Agent Id  Channels Get"},"example":["Telegram_Bot","Whatsapp_Phone"]}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["agents"],"summary":"Подключить канал","operationId":"connect_channel_api_v1_agents__agent_id__channels_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelConnectionPayload"}}}},"responses":{"201":{"description":"Подключенный канал","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["agents"],"summary":"Обновить канал","operationId":"update_channel_api_v1_agents__agent_id__channels_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelConnectionPayload"}}}},"responses":{"200":{"description":"Обновленный канал","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["agents"],"summary":"Отключить канал (тип в теле)","description":"Удаляет привязку канала. Тип в теле: type = Telegram_Bot | Whatsapp_Phone.","operationId":"disconnect_channel_api_v1_agents__agent_id__channels_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelDisconnectPayload"}}}},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/channels/active":{"get":{"tags":["agents"],"summary":"Активные каналы агента","operationId":"list_active_channels_api_v1_agents__agent_id__channels_active_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Подключенные каналы с токеном и webhook-данными","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelRead"},"title":"Response List Active Channels Api V1 Agents  Agent Id  Channels Active Get"},"example":[{"id":"2b96bfe0-2f1e-4f50-9b9e-5a2b4d7c18b2","type":"telegram","telegram_bot_token":"123456:ABCDEF","telegram_webhook_enabled":true,"telegram_webhook_endpoint":"/api/v1/webhooks/telegram/abc123","created_at":"2026-02-02T10:00:00Z"}]}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/channels/{channel_type}":{"delete":{"tags":["agents"],"summary":"Отключить канал по типу (из пути)","description":"Удаляет привязку канала к агенту. Тип в пути: telegram или whatsapp.","operationId":"disconnect_channel_by_type_api_v1_agents__agent_id__channels__channel_type__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"channel_type","in":"path","required":true,"schema":{"type":"string","title":"Channel Type"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/directories":{"get":{"tags":["agents","directories"],"summary":"List Directories","description":"Получить список справочников агента.","operationId":"list_directories_api_v1_agents__agent_id__directories_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DirectoryRead"},"title":"Response List Directories Api V1 Agents  Agent Id  Directories Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["agents","directories"],"summary":"Create Directory","description":"Создать новый справочник.","operationId":"create_directory_api_v1_agents__agent_id__directories_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/directories/{directory_id}":{"get":{"tags":["agents","directories"],"summary":"Get Directory","description":"Получить справочник по ID.","operationId":"get_directory_api_v1_agents__agent_id__directories__directory_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["agents","directories"],"summary":"Update Directory","description":"Обновить справочник.","operationId":"update_directory_api_v1_agents__agent_id__directories__directory_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["agents","directories"],"summary":"Delete Directory","description":"Удалить справочник (hard delete).","operationId":"delete_directory_api_v1_agents__agent_id__directories__directory_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/directories/{directory_id}/toggle":{"patch":{"tags":["agents","directories"],"summary":"Toggle Directory","description":"Быстрое включение/выключение справочника.","operationId":"toggle_directory_api_v1_agents__agent_id__directories__directory_id__toggle_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryToggle"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/directories/{directory_id}/items":{"get":{"tags":["agents","directories"],"summary":"List Directory Items","description":"Получить записи справочника с пагинацией и поиском.","operationId":"list_directory_items_api_v1_agents__agent_id__directories__directory_id__items_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Search"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryItemsListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["agents","directories"],"summary":"Create Directory Item","description":"Добавить одну запись в справочник.","operationId":"create_directory_item_api_v1_agents__agent_id__directories__directory_id__items_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryItemCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryItemRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["agents","directories"],"summary":"Bulk Delete Directory Items","description":"Массовое удаление записей.","operationId":"bulk_delete_directory_items_api_v1_agents__agent_id__directories__directory_id__items_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryItemsBulkDelete"}}}},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/directories/{directory_id}/items/bulk":{"post":{"tags":["agents","directories"],"summary":"Bulk Create Directory Items","description":"Массовое добавление записей.","operationId":"bulk_create_directory_items_api_v1_agents__agent_id__directories__directory_id__items_bulk_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryItemsBulkCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryItemsBulkCreateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/directories/{directory_id}/items/{item_id}":{"put":{"tags":["agents","directories"],"summary":"Update Directory Item","description":"Обновить запись справочника.","operationId":"update_directory_item_api_v1_agents__agent_id__directories__directory_id__items__item_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}},{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryItemUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectoryItemRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["agents","directories"],"summary":"Delete Directory Item","description":"Удалить одну запись справочника.","operationId":"delete_directory_item_api_v1_agents__agent_id__directories__directory_id__items__item_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}},{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/directories/{directory_id}/search":{"post":{"tags":["agents","directories"],"summary":"Search Directory","description":"Поиск по справочнику.","operationId":"search_directory_api_v1_agents__agent_id__directories__directory_id__search_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectorySearchRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectorySearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/directories/knowledge/search":{"post":{"tags":["agents","directories"],"summary":"Search All Directories","description":"Поиск по ВСЕМ справочникам агента.","operationId":"search_all_directories_api_v1_agents__agent_id__directories_knowledge_search_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DirectorySearchRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/directories/{directory_id}/import/preview":{"post":{"tags":["agents","directories"],"summary":"Preview Import","description":"Превью импорта — парсинг файла без сохранения.\n\nВозвращает колонки файла, количество строк и предложенный маппинг.","operationId":"preview_import_api_v1_agents__agent_id__directories__directory_id__import_preview_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_preview_import_api_v1_agents__agent_id__directories__directory_id__import_preview_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportPreviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/directories/{directory_id}/import":{"post":{"tags":["agents","directories"],"summary":"Import Directory","description":"Импорт данных из CSV/Excel файла.\n\nПараметры:\n- file: CSV или XLSX файл\n- mapping: JSON маппинг колонок файла → колонки справочника\n- has_header: есть ли заголовок в файле\n- replace_all: заменить все существующие данные","operationId":"import_directory_api_v1_agents__agent_id__directories__directory_id__import_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_import_directory_api_v1_agents__agent_id__directories__directory_id__import_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/directories/{directory_id}/export":{"get":{"tags":["agents","directories"],"summary":"Export Directory","description":"Экспорт справочника в CSV или XLSX.\n\nВозвращает файл для скачивания.\n\nАвторизация: Authorization: Bearer <token>","operationId":"export_directory_api_v1_agents__agent_id__directories__directory_id__export_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"directory_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Directory Id"}},{"name":"format","in":"query","required":false,"schema":{"type":"string","pattern":"^(csv|xlsx)$","default":"csv","title":"Format"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/enable":{"post":{"tags":["agents"],"summary":"Enable Sqns Integration","operationId":"enable_sqns_integration_api_v1_agents__agent_id__sqns_enable_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentSQNSEnable"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns":{"get":{"tags":["agents"],"summary":"Get Sqns Status","description":"Получить статус интеграции SQNS для агента.","operationId":"get_sqns_status_api_v1_agents__agent_id__sqns_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SqnsStatus"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["agents"],"summary":"Disable Sqns Integration","description":"Отключить SQNS интеграцию и выполнить HARD DELETE всех кэшированных данных.\n\nУдаляются:\n- sqns_resources (специалисты)\n- sqns_services (услуги)\n- sqns_service_resources (связи)\n- sqns_service_categories (категории)\n\nУдаление происходит автоматически через ON DELETE CASCADE.","operationId":"disable_sqns_integration_api_v1_agents__agent_id__sqns_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/enable-by-password":{"post":{"tags":["agents"],"summary":"Enable Sqns By Password","description":"Включить SQNS по email и паролю. Бэкенд запрашивает токен\n(POST {host}/api/v2/auth с JSON {email, password, defaultResourceId?}).\nОтвет: [{ \"status\": \"success\", \"token\": \"...\", \"user\": {...} }]. Токен сохраняется (direct_bearer).","operationId":"enable_sqns_by_password_api_v1_agents__agent_id__sqns_enable_by_password_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentSQNSEnableByPassword"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/disable":{"post":{"tags":["agents"],"summary":"Disable Sqns Integration","description":"Отключить SQNS интеграцию и выполнить HARD DELETE всех кэшированных данных.\n\nУдаляются:\n- sqns_resources (специалисты)\n- sqns_services (услуги)\n- sqns_service_resources (связи)\n- sqns_service_categories (категории)\n\nУдаление происходит автоматически через ON DELETE CASCADE.","operationId":"disable_sqns_integration_api_v1_agents__agent_id__sqns_disable_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/resources":{"get":{"tags":["agents"],"summary":"Sqns Resources","operationId":"sqns_resources_api_v1_agents__agent_id__sqns_resources_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Sqns Resources Api V1 Agents  Agent Id  Sqns Resources Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/services":{"get":{"tags":["agents"],"summary":"Sqns Services","operationId":"sqns_services_api_v1_agents__agent_id__sqns_services_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Sqns Services Api V1 Agents  Agent Id  Sqns Services Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/slots":{"get":{"tags":["agents"],"summary":"Sqns Slots","operationId":"sqns_slots_api_v1_agents__agent_id__sqns_slots_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"resource_id","in":"query","required":true,"schema":{"type":"integer","title":"Resource Id"}},{"name":"date","in":"query","required":true,"schema":{"type":"string","title":"Date"}},{"name":"serviceIds","in":"query","required":true,"schema":{"type":"array","items":{"type":"integer"},"title":"Serviceids"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Sqns Slots Api V1 Agents  Agent Id  Sqns Slots Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/visits":{"get":{"tags":["agents"],"summary":"Sqns Visits","operationId":"sqns_visits_api_v1_agents__agent_id__sqns_visits_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"date_from","in":"query","required":true,"schema":{"type":"string","title":"Date From"}},{"name":"date_till","in":"query","required":true,"schema":{"type":"string","title":"Date Till"}},{"name":"peerPage","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Peerpage"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Sqns Visits Api V1 Agents  Agent Id  Sqns Visits Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/client/{phone}":{"get":{"tags":["agents"],"summary":"Sqns Client By Phone","operationId":"sqns_client_by_phone_api_v1_agents__agent_id__sqns_client__phone__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"phone","in":"path","required":true,"schema":{"type":"string","title":"Phone"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Sqns Client By Phone Api V1 Agents  Agent Id  Sqns Client  Phone  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/sync":{"post":{"tags":["agents"],"summary":"Sqns Sync Services","description":"Ручная синхронизация услуг и специалистов из SQNS в локальный кэш.\n\nВыполняет:\n1. Загрузку всех услуг из SQNS API\n2. Извлечение и upsert специалистов\n3. Upsert услуг с обновлением данных\n4. Синхронизацию связей услуга-специалист\n5. Обновление категорий","operationId":"sqns_sync_services_api_v1_agents__agent_id__sqns_sync_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/services/cached":{"get":{"tags":["agents"],"summary":"Sqns List Cached Services","description":"Получить список услуг из кэша с фильтрацией для управления на frontend.\n\nQuery Parameters:\n- search: поиск по названию/описанию (ILIKE)\n- category: фильтр по категории\n- is_enabled: фильтр по статусу (включена/отключена)\n- limit: максимум результатов (1-1000)\n- offset: смещение для пагинации","operationId":"sqns_list_cached_services_api_v1_agents__agent_id__sqns_services_cached_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"}},{"name":"is_enabled","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Enabled"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Максимум результатов (1-1000)","default":100,"title":"Limit"},"description":"Максимум результатов (1-1000)"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Смещение для пагинации","default":0,"title":"Offset"},"description":"Смещение для пагинации"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/services/{service_id}":{"patch":{"tags":["agents"],"summary":"Sqns Update Service","description":"Обновить настройки одной услуги (is_enabled, priority).","operationId":"sqns_update_service_api_v1_agents__agent_id__sqns_services__service_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"service_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Service Id"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/SqnsServiceUpdate"},{"type":"null"}],"title":"Payload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/services/bulk-update":{"post":{"tags":["agents"],"summary":"Sqns Bulk Update Services","description":"Массовое обновление услуг (включить/отключить, изменить приоритет).","operationId":"sqns_bulk_update_services_api_v1_agents__agent_id__sqns_services_bulk_update_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SqnsServiceBulkUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/categories":{"get":{"tags":["agents"],"summary":"Sqns List Categories","description":"Получить список категорий услуг с настройками.","operationId":"sqns_list_categories_api_v1_agents__agent_id__sqns_categories_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/categories/{category_id}":{"patch":{"tags":["agents"],"summary":"Sqns Update Category","description":"Обновить настройки категории (is_enabled, priority).","operationId":"sqns_update_category_api_v1_agents__agent_id__sqns_categories__category_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"category_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Category Id"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/SqnsCategoryUpdate"},{"type":"null"}],"title":"Payload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/sqns/disable-preview":{"get":{"tags":["agents"],"summary":"Sqns Disable Preview","description":"Предпросмотр данных, которые будут удалены при отключении SQNS.","operationId":"sqns_disable_preview_api_v1_agents__agent_id__sqns_disable_preview_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/dialogs/debug/all-runs":{"get":{"tags":["agents","dialogs"],"summary":"Debug All Runs","description":"DEBUG: Получить вообще все записи из таблицы runs.","operationId":"debug_all_runs_api_v1_agents__agent_id__dialogs_debug_all_runs_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/agents/{agent_id}/dialogs":{"get":{"tags":["agents","dialogs"],"summary":"List Dialogs","description":"Получить список диалогов (сессий) для конкретного агента.","operationId":"list_dialogs_api_v1_agents__agent_id__dialogs_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["agents","dialogs"],"summary":"Create Dialog","description":"Создать новый диалог (просто генерирует новый session_id).","operationId":"create_dialog_api_v1_agents__agent_id__dialogs_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DialogRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/dialogs/{dialog_id}":{"delete":{"tags":["agents","dialogs"],"summary":"Delete Dialog","description":"Удалить диалог и всю его историю.","operationId":"delete_dialog_api_v1_agents__agent_id__dialogs__dialog_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"dialog_id","in":"path","required":true,"schema":{"type":"string","title":"Dialog Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/dialogs/events":{"get":{"tags":["agents","messages"],"summary":"Agent Events","description":"SSE канал для получения ВСЕХ событий агента (новые сообщения из любых каналов).","operationId":"agent_events_api_v1_agents__agent_id__dialogs_events_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/dialogs/debug/session/{session_id}":{"get":{"tags":["agents","messages"],"summary":"Debug Session Messages","description":"DEBUG: Получить сырые сообщения из session_messages для конкретной сессии.","operationId":"debug_session_messages_api_v1_agents__agent_id__dialogs_debug_session__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/dialogs/{dialog_id}/messages":{"get":{"tags":["agents","messages"],"summary":"List Messages","description":"Загрузить историю сообщений для диалога.","operationId":"list_messages_api_v1_agents__agent_id__dialogs__dialog_id__messages_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"dialog_id","in":"path","required":true,"schema":{"type":"string","title":"Dialog Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}},{"name":"before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Before"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["agents","messages"],"summary":"Send Message","description":"Отправить сообщение в диалог. \nИспользует существующий эндпоинт создания рана.","operationId":"send_message_api_v1_agents__agent_id__dialogs__dialog_id__messages_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"dialog_id","in":"path","required":true,"schema":{"type":"string","title":"Dialog Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Send Message Api V1 Agents  Agent Id  Dialogs  Dialog Id  Messages Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/dialogs/{dialog_id}/messages/stream":{"post":{"tags":["agents","messages"],"summary":"Stream Message","description":"Стриминг ответа агента.","operationId":"stream_message_api_v1_agents__agent_id__dialogs__dialog_id__messages_stream_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"dialog_id","in":"path","required":true,"schema":{"type":"string","title":"Dialog Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StreamRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tools":{"post":{"tags":["tools"],"summary":"Create Tool","operationId":"create_tool_api_v1_tools_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToolCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToolRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["tools"],"summary":"List Tools","operationId":"list_tools_api_v1_tools_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ToolRead"},"title":"Response List Tools Api V1 Tools Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tools/{tool_id}":{"get":{"tags":["tools"],"summary":"Get Tool","operationId":"get_tool_api_v1_tools__tool_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tool_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Tool Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToolRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["tools"],"summary":"Update Tool","operationId":"update_tool_api_v1_tools__tool_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tool_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Tool Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToolUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToolRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["tools"],"summary":"Delete Tool","operationId":"delete_tool_api_v1_tools__tool_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tool_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Tool Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/tools/{tool_id}":{"post":{"tags":["bindings"],"summary":"Bind Tool","operationId":"bind_tool_api_v1_agents__agent_id__tools__tool_id__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"tool_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Tool Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BindingCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BindingRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["bindings"],"summary":"Unbind Tool","operationId":"unbind_tool_api_v1_agents__agent_id__tools__tool_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}},{"name":"tool_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Tool Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agents/{agent_id}/tools":{"get":{"tags":["bindings"],"summary":"List Bindings","operationId":"list_bindings_api_v1_agents__agent_id__tools_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BindingRead"},"title":"Response List Bindings Api V1 Agents  Agent Id  Tools Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runs":{"post":{"tags":["runs"],"summary":"Create Run","operationId":"create_run_api_v1_runs_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/runs/stream":{"post":{"tags":["runs"],"summary":"Stream Run","operationId":"stream_run_api_v1_runs_stream_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/runs/{run_id}":{"get":{"tags":["runs"],"summary":"Get Run","operationId":"get_run_api_v1_runs__run_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"run_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Run Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RunRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/runs/session/{session_id}":{"delete":{"tags":["runs"],"summary":"Delete Session History","operationId":"delete_session_history_api_v1_runs_session__session_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/webhooks/telegram/{webhook_token}":{"post":{"tags":["webhooks"],"summary":"Telegram Webhook","operationId":"telegram_webhook_api_v1_webhooks_telegram__webhook_token__post","parameters":[{"name":"webhook_token","in":"path","required":true,"schema":{"type":"string","title":"Webhook Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"boolean"},"title":"Response Telegram Webhook Api V1 Webhooks Telegram  Webhook Token  Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AgentCreate":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"system_prompt":{"type":"string","title":"System Prompt","default":""},"model":{"type":"string","maxLength":200,"minLength":1,"title":"Model","description":"Модель LLM в формате 'openai:model-name'. Примеры: openai:gpt-4.1, openai:gpt-4.1-mini, openai:gpt-4.1-nano, openai:gpt-4o, openai:gpt-4o-mini, openai:gpt-5.2","default":"openai:gpt-4.1"},"llm_params":{"anyOf":[{"$ref":"#/components/schemas/LLMParams"},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Llm Params"},"status":{"type":"string","enum":["draft","published"],"title":"Status","default":"draft"},"version":{"type":"integer","title":"Version","default":1},"max_history_messages":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Max History Messages","description":"Количество сообщений истории для хранения","default":50}},"type":"object","required":["name"],"title":"AgentCreate"},"AgentRead":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"system_prompt":{"type":"string","title":"System Prompt","default":""},"model":{"type":"string","maxLength":200,"minLength":1,"title":"Model","description":"Модель LLM в формате 'openai:model-name'. Примеры: openai:gpt-4.1, openai:gpt-4.1-mini, openai:gpt-4.1-nano, openai:gpt-4o, openai:gpt-4o-mini, openai:gpt-5.2","default":"openai:gpt-4.1"},"llm_params":{"anyOf":[{"$ref":"#/components/schemas/LLMParams"},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Llm Params"},"status":{"type":"string","enum":["draft","published"],"title":"Status","default":"draft"},"version":{"type":"integer","title":"Version","default":1},"max_history_messages":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Max History Messages","description":"Количество сообщений истории для хранения","default":50},"id":{"type":"string","format":"uuid","title":"Id"},"tenant_id":{"type":"string","format":"uuid","title":"Tenant Id"},"owner_user_id":{"type":"string","format":"uuid","title":"Owner User Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"sqns_enabled":{"type":"boolean","title":"Sqns Enabled","default":false},"sqns_configured":{"type":"boolean","title":"Sqns Configured","default":false},"sqns_host":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sqns Host"},"sqns_credential_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Sqns Credential Id"},"sqns_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sqns Status"},"sqns_last_sync_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sqns Last Sync At"},"sqns_error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sqns Error"},"sqns_warning":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sqns Warning"}},"type":"object","required":["name","id","tenant_id","owner_user_id","created_at"],"title":"AgentRead"},"AgentSQNSEnable":{"properties":{"host":{"type":"string","maxLength":2083,"minLength":1,"format":"uri","title":"Host"},"api_key":{"type":"string","minLength":1,"title":"Api Key"},"token_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Token Path"},"direct_bearer":{"type":"boolean","title":"Direct Bearer","default":false}},"type":"object","required":["host","api_key"],"title":"AgentSQNSEnable"},"AgentSQNSEnableByPassword":{"properties":{"host":{"type":"string","minLength":1,"title":"Host","description":"Хост SQNS, например crmexchange.1denta.ru"},"email":{"type":"string","minLength":1,"title":"Email"},"password":{"type":"string","minLength":1,"title":"Password"},"defaultResourceId":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Defaultresourceid","description":"Опционально"}},"type":"object","required":["host","email","password"],"title":"AgentSQNSEnableByPassword","description":"Фронт: host, email, password; бэкенд получает токен через login и сохраняет его."},"AgentUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Name"},"system_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"System Prompt"},"model":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Model"},"llm_params":{"anyOf":[{"$ref":"#/components/schemas/LLMParams"},{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Llm Params"},"status":{"anyOf":[{"type":"string","enum":["draft","published"]},{"type":"null"}],"title":"Status"},"version":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Version"},"max_history_messages":{"anyOf":[{"type":"integer","maximum":1000.0,"minimum":1.0},{"type":"null"}],"title":"Max History Messages"},"sqns_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Sqns Enabled"},"sqns_configured":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Sqns Configured"},"sqns_host":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sqns Host"},"sqns_credential_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Sqns Credential Id"},"sqns_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sqns Status"},"sqns_last_sync_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sqns Last Sync At"},"sqns_error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sqns Error"}},"type":"object","title":"AgentUpdate"},"ApiKeyCreate":{"properties":{"scopes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Scopes"}},"type":"object","title":"ApiKeyCreate"},"ApiKeyCreated":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"tenant_id":{"type":"string","format":"uuid","title":"Tenant Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"last4":{"type":"string","title":"Last4"},"scopes":{"items":{"type":"string"},"type":"array","title":"Scopes"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"revoked_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Revoked At"},"last_used_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Used At"},"api_key":{"type":"string","title":"Api Key"}},"type":"object","required":["id","tenant_id","user_id","last4","scopes","created_at","api_key"],"title":"ApiKeyCreated"},"ApiKeyRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"tenant_id":{"type":"string","format":"uuid","title":"Tenant Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"last4":{"type":"string","title":"Last4"},"scopes":{"items":{"type":"string"},"type":"array","title":"Scopes"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"revoked_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Revoked At"},"last_used_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Used At"}},"type":"object","required":["id","tenant_id","user_id","last4","scopes","created_at"],"title":"ApiKeyRead"},"AuthTokenResponse":{"properties":{"token":{"type":"string","title":"Token"},"refresh_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refresh Token"},"user":{"$ref":"#/components/schemas/UserRead"},"tenant":{"$ref":"#/components/schemas/TenantRead"}},"type":"object","required":["token","user","tenant"],"title":"AuthTokenResponse"},"BindingCreate":{"properties":{"permission_scope":{"type":"string","enum":["read","write"],"title":"Permission Scope","default":"read"},"timeout_ms":{"anyOf":[{"type":"integer","maximum":60000.0,"minimum":1000.0},{"type":"null"}],"title":"Timeout Ms"},"rate_limit":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Rate Limit"},"allowed_domains":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Allowed Domains"},"secrets_ref":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Secrets Ref"},"credential_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Credential Id"}},"type":"object","title":"BindingCreate"},"BindingRead":{"properties":{"permission_scope":{"type":"string","enum":["read","write"],"title":"Permission Scope","default":"read"},"timeout_ms":{"anyOf":[{"type":"integer","maximum":60000.0,"minimum":1000.0},{"type":"null"}],"title":"Timeout Ms"},"rate_limit":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Rate Limit"},"allowed_domains":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Allowed Domains"},"secrets_ref":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Secrets Ref"},"credential_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Credential Id"},"id":{"type":"string","format":"uuid","title":"Id"},"tenant_id":{"type":"string","format":"uuid","title":"Tenant Id"},"agent_id":{"type":"string","format":"uuid","title":"Agent Id"},"tool_id":{"type":"string","format":"uuid","title":"Tool Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","tenant_id","agent_id","tool_id","created_at"],"title":"BindingRead"},"Body_import_directory_api_v1_agents__agent_id__directories__directory_id__import_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"mapping":{"type":"string","title":"Mapping","description":"JSON маппинг колонок файла → колонки справочника"},"has_header":{"type":"boolean","title":"Has Header","default":true},"replace_all":{"type":"boolean","title":"Replace All","default":false}},"type":"object","required":["file","mapping"],"title":"Body_import_directory_api_v1_agents__agent_id__directories__directory_id__import_post"},"Body_preview_import_api_v1_agents__agent_id__directories__directory_id__import_preview_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_preview_import_api_v1_agents__agent_id__directories__directory_id__import_preview_post"},"ChannelConnectionPayload":{"properties":{"type":{"type":"string","enum":["Telegram_Bot","Whatsapp_Phone"],"title":"Type","description":"Тип канала"},"telegram_bot_token":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Telegram Bot Token","description":"Токен Telegram-бота"},"whatsapp_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whatsapp Phone","description":"Телефон WhatsApp"}},"additionalProperties":false,"type":"object","required":["type"],"title":"ChannelConnectionPayload"},"ChannelDisconnectPayload":{"properties":{"type":{"type":"string","enum":["Telegram_Bot","Whatsapp_Phone"],"title":"Type","description":"Тип канала"}},"additionalProperties":false,"type":"object","required":["type"],"title":"ChannelDisconnectPayload"},"ChannelRead":{"properties":{"type":{"type":"string","enum":["telegram","whatsapp"],"title":"Type","description":"Тип канала"},"telegram_bot_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Telegram Bot Token","description":"Токен Telegram-бота"},"telegram_webhook_enabled":{"type":"boolean","title":"Telegram Webhook Enabled","description":"Активен ли webhook","default":false},"telegram_webhook_endpoint":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Telegram Webhook Endpoint","description":"Webhook endpoint для Telegram"},"id":{"type":"string","format":"uuid","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["type","id","created_at","updated_at"],"title":"ChannelRead"},"ColumnDefinition":{"properties":{"name":{"type":"string","maxLength":50,"minLength":1,"title":"Name"},"label":{"type":"string","maxLength":100,"minLength":1,"title":"Label"},"type":{"type":"string","title":"Type","description":"Column type: text, number, date, bool","default":"text"},"required":{"type":"boolean","title":"Required","default":false},"searchable":{"type":"boolean","title":"Searchable","default":false}},"type":"object","required":["name","label"],"title":"ColumnDefinition","description":"Определение колонки справочника.\n\nПоддерживаемые типы:\n- text: строка любой длины\n- number: число (целое или дробное)\n- date: дата в формате YYYY-MM-DD\n- bool: true/false"},"CredentialCreate":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"auth_type":{"type":"string","enum":["none","api_key","bearer_token","basic_auth","custom_header","query_param","oauth2","service"],"title":"Auth Type"},"config":{"additionalProperties":true,"type":"object","title":"Config"},"is_active":{"type":"boolean","title":"Is Active","default":true}},"type":"object","required":["name","auth_type"],"title":"CredentialCreate"},"CredentialRead":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"auth_type":{"type":"string","enum":["none","api_key","bearer_token","basic_auth","custom_header","query_param","oauth2","service"],"title":"Auth Type"},"config":{"additionalProperties":true,"type":"object","title":"Config"},"is_active":{"type":"boolean","title":"Is Active","default":true},"id":{"type":"string","format":"uuid","title":"Id"},"tenant_id":{"type":"string","format":"uuid","title":"Tenant Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["name","auth_type","id","tenant_id","created_at"],"title":"CredentialRead"},"CredentialTestRequest":{"properties":{"endpoint":{"type":"string","maxLength":2000,"minLength":1,"title":"Endpoint"},"method":{"type":"string","enum":["GET","POST","PUT","PATCH","DELETE"],"title":"Method","default":"GET"},"headers":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Headers"},"params":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Params"},"json":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Json"},"timeout_seconds":{"type":"integer","maximum":60.0,"minimum":1.0,"title":"Timeout Seconds","default":10},"allowed_domains":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Allowed Domains"}},"type":"object","required":["endpoint"],"title":"CredentialTestRequest"},"CredentialTestResponse":{"properties":{"status_code":{"type":"integer","title":"Status Code"},"body":{"type":"string","title":"Body"}},"type":"object","required":["status_code","body"],"title":"CredentialTestResponse"},"CredentialUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Name"},"auth_type":{"anyOf":[{"type":"string","enum":["none","api_key","bearer_token","basic_auth","custom_header","query_param","oauth2","service"]},{"type":"null"}],"title":"Auth Type"},"config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Config"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"CredentialUpdate"},"DialogRead":{"properties":{"id":{"type":"string","title":"Id","description":"ID сессии (session_id)"},"agent_id":{"type":"string","format":"uuid","title":"Agent Id","description":"UUID агента"},"title":{"type":"string","title":"Title","description":"Заголовок диалога"},"last_message_preview":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Message Preview","description":"Превью последнего сообщения"},"last_message_at":{"type":"string","format":"date-time","title":"Last Message At","description":"Время последнего сообщения"},"unread_count":{"type":"integer","title":"Unread Count","description":"Количество непрочитанных (заглушка)","default":0},"is_pinned":{"type":"boolean","title":"Is Pinned","description":"Закреплен ли чат (заглушка)","default":false},"status":{"type":"string","title":"Status","description":"Статус чата","default":"NORMAL"}},"type":"object","required":["id","agent_id","title","last_message_at"],"title":"DialogRead","description":"Схема для чтения диалога (сессии)."},"DirectoryCreate":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"tool_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Tool Name"},"tool_description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Tool Description"},"template":{"type":"string","enum":["qa","service_catalog","product_catalog","company_info","custom"],"title":"Template","default":"custom"},"columns":{"anyOf":[{"items":{"$ref":"#/components/schemas/ColumnDefinition"},"type":"array"},{"type":"null"}],"title":"Columns"},"response_mode":{"type":"string","enum":["function_result","direct_message"],"title":"Response Mode","default":"function_result"},"search_type":{"type":"string","enum":["exact","fuzzy","semantic"],"title":"Search Type","default":"fuzzy"}},"type":"object","required":["name"],"title":"DirectoryCreate","description":"Схема создания справочника."},"DirectoryItemCreate":{"properties":{"data":{"additionalProperties":true,"type":"object","title":"Data"}},"type":"object","required":["data"],"title":"DirectoryItemCreate","description":"Схема создания записи."},"DirectoryItemRead":{"properties":{"data":{"additionalProperties":true,"type":"object","title":"Data"},"id":{"type":"string","format":"uuid","title":"Id"},"directory_id":{"type":"string","format":"uuid","title":"Directory Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["data","id","directory_id","created_at"],"title":"DirectoryItemRead","description":"Схема чтения записи."},"DirectoryItemUpdate":{"properties":{"data":{"additionalProperties":true,"type":"object","title":"Data"}},"type":"object","required":["data"],"title":"DirectoryItemUpdate","description":"Схема обновления записи."},"DirectoryItemsBulkCreate":{"properties":{"items":{"items":{"$ref":"#/components/schemas/DirectoryItemCreate"},"type":"array","title":"Items"},"replace_all":{"type":"boolean","title":"Replace All","default":false}},"type":"object","required":["items"],"title":"DirectoryItemsBulkCreate","description":"Схема массового создания записей."},"DirectoryItemsBulkCreateResponse":{"properties":{"created":{"type":"integer","title":"Created"},"errors":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Errors","default":[]}},"type":"object","required":["created"],"title":"DirectoryItemsBulkCreateResponse","description":"Ответ на массовое создание."},"DirectoryItemsBulkDelete":{"properties":{"ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Ids"}},"type":"object","required":["ids"],"title":"DirectoryItemsBulkDelete","description":"Схема массового удаления записей."},"DirectoryItemsListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/DirectoryItemRead"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"}},"type":"object","required":["items","total","limit","offset"],"title":"DirectoryItemsListResponse","description":"Ответ с пагинацией записей справочника."},"DirectoryRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"tenant_id":{"type":"string","format":"uuid","title":"Tenant Id"},"agent_id":{"type":"string","format":"uuid","title":"Agent Id"},"name":{"type":"string","title":"Name"},"slug":{"type":"string","title":"Slug"},"tool_name":{"type":"string","title":"Tool Name"},"tool_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tool Description"},"template":{"type":"string","enum":["qa","service_catalog","product_catalog","company_info","custom"],"title":"Template"},"columns":{"items":{"$ref":"#/components/schemas/ColumnDefinition"},"type":"array","title":"Columns"},"response_mode":{"type":"string","enum":["function_result","direct_message"],"title":"Response Mode"},"search_type":{"type":"string","enum":["exact","fuzzy","semantic"],"title":"Search Type"},"is_enabled":{"type":"boolean","title":"Is Enabled"},"items_count":{"type":"integer","title":"Items Count"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","tenant_id","agent_id","name","slug","tool_name","tool_description","template","columns","response_mode","search_type","is_enabled","items_count","created_at"],"title":"DirectoryRead","description":"Схема чтения справочника."},"DirectorySearchRequest":{"properties":{"query":{"type":"string","maxLength":500,"minLength":1,"title":"Query"},"limit":{"type":"integer","maximum":20.0,"minimum":1.0,"title":"Limit","default":5}},"type":"object","required":["query"],"title":"DirectorySearchRequest","description":"Запрос поиска по справочнику."},"DirectorySearchResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/DirectorySearchResultItem"},"type":"array","title":"Results"}},"type":"object","required":["results"],"title":"DirectorySearchResponse","description":"Ответ поиска по справочнику."},"DirectorySearchResultItem":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"data":{"additionalProperties":true,"type":"object","title":"Data"},"relevance":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Relevance"}},"type":"object","required":["id","data","relevance"],"title":"DirectorySearchResultItem","description":"Один результат поиска."},"DirectoryToggle":{"properties":{"is_enabled":{"type":"boolean","title":"Is Enabled"}},"type":"object","required":["is_enabled"],"title":"DirectoryToggle","description":"Схема для быстрого включения/выключения справочника."},"DirectoryUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Name"},"tool_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Tool Name"},"tool_description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Tool Description"},"columns":{"anyOf":[{"items":{"$ref":"#/components/schemas/ColumnDefinition"},"type":"array"},{"type":"null"}],"title":"Columns"},"response_mode":{"anyOf":[{"type":"string","enum":["function_result","direct_message"]},{"type":"null"}],"title":"Response Mode"},"search_type":{"anyOf":[{"type":"string","enum":["exact","fuzzy","semantic"]},{"type":"null"}],"title":"Search Type"},"is_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Enabled"}},"type":"object","title":"DirectoryUpdate","description":"Схема обновления справочника."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ImportPreviewResponse":{"properties":{"columns":{"items":{"type":"string"},"type":"array","title":"Columns"},"rows_count":{"type":"integer","title":"Rows Count"},"preview":{"items":{"items":{},"type":"array"},"type":"array","title":"Preview"},"suggested_mapping":{"additionalProperties":{"anyOf":[{"type":"string"},{"type":"null"}]},"type":"object","title":"Suggested Mapping"}},"type":"object","required":["columns","rows_count","preview","suggested_mapping"],"title":"ImportPreviewResponse","description":"Ответ превью импорта."},"ImportResponse":{"properties":{"created":{"type":"integer","title":"Created"},"skipped":{"type":"integer","title":"Skipped","default":0},"errors":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Errors","default":[]}},"type":"object","required":["created"],"title":"ImportResponse","description":"Ответ импорта."},"KnowledgeSearchResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/KnowledgeSearchResultItem"},"type":"array","title":"Results"}},"type":"object","required":["results"],"title":"KnowledgeSearchResponse","description":"Ответ универсального поиска."},"KnowledgeSearchResultItem":{"properties":{"directory_id":{"type":"string","format":"uuid","title":"Directory Id"},"directory_name":{"type":"string","title":"Directory Name"},"item":{"$ref":"#/components/schemas/DirectorySearchResultItem"},"relevance":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Relevance"}},"type":"object","required":["directory_id","directory_name","item","relevance"],"title":"KnowledgeSearchResultItem","description":"Результат универсального поиска по всем справочникам."},"LLMParams":{"properties":{"temperature":{"anyOf":[{"type":"number","maximum":2.0,"minimum":0.0},{"type":"null"}],"title":"Temperature","description":"Контролирует случайность ответов. Выше = более креативно, ниже = более детерминировано."},"max_tokens":{"anyOf":[{"type":"integer","maximum":100000.0,"minimum":1.0},{"type":"null"}],"title":"Max Tokens","description":"Максимальное количество токенов в ответе."},"top_p":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Top P","description":"Nucleus sampling. Альтернатива temperature для контроля разнообразия."},"top_k":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Top K","description":"Количество токенов для рассмотрения при семплировании (для некоторых моделей)."},"frequency_penalty":{"anyOf":[{"type":"number","maximum":2.0,"minimum":-2.0},{"type":"null"}],"title":"Frequency Penalty","description":"Штраф за частое повторение токенов. Положительные значения уменьшают повторения."},"presence_penalty":{"anyOf":[{"type":"number","maximum":2.0,"minimum":-2.0},{"type":"null"}],"title":"Presence Penalty","description":"Штраф за использование уже встречавшихся токенов. Стимулирует новые темы."},"stop":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"string"},{"type":"null"}],"title":"Stop","description":"Стоп-последовательности. Модель остановится при их генерации."},"seed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Seed","description":"Seed для детерминированной генерации (если поддерживается моделью)."}},"additionalProperties":true,"type":"object","title":"LLMParams","description":"Параметры модели LLM.\n\nПоддерживаемые параметры для моделей OpenAI."},"MessageCreate":{"properties":{"content":{"type":"string","minLength":1,"title":"Content","description":"Текст сообщения"},"type":{"type":"string","enum":["text","image","voice"],"title":"Type","description":"Тип сообщения","default":"text"}},"type":"object","required":["content"],"title":"MessageCreate","description":"Схема для создания сообщения."},"RefreshTokenRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshTokenRequest"},"RunCreate":{"properties":{"agent_id":{"type":"string","format":"uuid","title":"Agent Id","description":"UUID агента для запуска"},"session_id":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Session Id","description":"ID сессии диалога (для истории сообщений)"},"input_message":{"type":"string","minLength":1,"title":"Input Message","description":"Входное сообщение пользователя"}},"type":"object","required":["agent_id","input_message"],"title":"RunCreate","description":"Схема для создания нового запуска агента."},"RunRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"UUID запуска"},"tenant_id":{"type":"string","format":"uuid","title":"Tenant Id","description":"UUID арендатора"},"agent_id":{"type":"string","format":"uuid","title":"Agent Id","description":"UUID агента"},"session_id":{"type":"string","title":"Session Id","description":"ID сессии диалога (для группировки сообщений)"},"trace_id":{"type":"string","title":"Trace Id","description":"ID для трассировки запроса"},"status":{"type":"string","enum":["queued","running","succeeded","failed"],"title":"Status","description":"Статус выполнения"},"input_message":{"type":"string","title":"Input Message","description":"Входное сообщение пользователя"},"output_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Output Message","description":"Ответ агента (заполняется при status='succeeded')"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message","description":"Сообщение об ошибке (заполняется при status='failed')"},"messages":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Messages","description":"Полная история сообщений от pydantic-ai (JSONB)"},"prompt_tokens":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Prompt Tokens","description":"Количество токенов во входном промпте"},"completion_tokens":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Completion Tokens","description":"Количество токенов в ответе"},"total_tokens":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Tokens","description":"Общее количество токенов (prompt + completion)"},"tools_called":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Tools Called","description":"Список инструментов, вызванных агентом. Формат: [{'name': str, 'tool_call_id': str | None, 'args': dict}]"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Время создания запуска (ISO 8601)"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Время последнего обновления (ISO 8601)"}},"type":"object","required":["id","tenant_id","agent_id","session_id","trace_id","status","input_message","created_at"],"title":"RunRead","description":"Схема ответа для запуска агента.\n\nСодержит полную информацию о выполненном запуске:\n- Статус выполнения и сообщения\n- Использование токенов LLM\n- Список вызванных инструментов\n- Полная история сообщений"},"SqnsCategoryUpdate":{"properties":{"isEnabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Isenabled","description":"Включить/отключить категорию"},"priority":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Priority","description":"Изменить приоритет"}},"additionalProperties":false,"type":"object","title":"SqnsCategoryUpdate","description":"Схема для обновления категории."},"SqnsServiceBulkUpdate":{"properties":{"service_ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Service Ids","description":"Список ID услуг для обновления"},"is_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Enabled","description":"Включить/отключить услуги"},"priority":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Priority","description":"Установить приоритет"}},"type":"object","required":["service_ids"],"title":"SqnsServiceBulkUpdate","description":"Схема для массового обновления услуг."},"SqnsServiceUpdate":{"properties":{"is_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Enabled","description":"Включить/отключить услугу"},"priority":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Priority","description":"Изменить приоритет"}},"type":"object","title":"SqnsServiceUpdate","description":"Схема для обновления услуги."},"SqnsStatus":{"properties":{"sqnsEnabled":{"type":"boolean","title":"Sqnsenabled"},"sqnsHost":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sqnshost"},"sqnsLastSyncAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sqnslastsyncat"},"sqnsStatus":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sqnsstatus"},"sqnsError":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sqnserror"},"sqnsTools":{"items":{"$ref":"#/components/schemas/SqnsTool"},"type":"array","title":"Sqnstools"}},"type":"object","required":["sqnsEnabled"],"title":"SqnsStatus"},"SqnsTool":{"properties":{"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"requiredFields":{"items":{"type":"string"},"type":"array","title":"Requiredfields"},"dataSources":{"additionalProperties":{"type":"string"},"type":"object","title":"Datasources"}},"type":"object","required":["name","description"],"title":"SqnsTool"},"StreamRequest":{"properties":{"user_message_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Message Id","description":"ID отправленного сообщения (опционально)"}},"type":"object","title":"StreamRequest","description":"Запрос на стриминг ответа."},"TenantRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"plan":{"type":"string","title":"Plan"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","name","plan","is_active","created_at"],"title":"TenantRead"},"TokenRequest":{"properties":{"api_key":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Api Key"}},"type":"object","title":"TokenRequest"},"TokenResponse":{"properties":{"token":{"type":"string","title":"Token"},"refresh_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refresh Token"}},"type":"object","required":["token"],"title":"TokenResponse"},"ToolCreate":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"description":{"type":"string","title":"Description","default":""},"input_schema":{"additionalProperties":true,"type":"object","title":"Input Schema"},"execution_type":{"type":"string","enum":["http_webhook","internal"],"title":"Execution Type","default":"http_webhook"},"endpoint":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Endpoint"},"auth_type":{"type":"string","enum":["none","api_key","bearer_token","basic_auth","custom_header","query_param","oauth2","service"],"title":"Auth Type","default":"none"},"status":{"type":"string","enum":["active","deprecated"],"title":"Status","default":"active"},"version":{"type":"integer","title":"Version","default":1}},"type":"object","required":["name","input_schema"],"title":"ToolCreate"},"ToolRead":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"description":{"type":"string","title":"Description","default":""},"input_schema":{"additionalProperties":true,"type":"object","title":"Input Schema"},"execution_type":{"type":"string","enum":["http_webhook","internal"],"title":"Execution Type","default":"http_webhook"},"endpoint":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Endpoint"},"auth_type":{"type":"string","enum":["none","api_key","bearer_token","basic_auth","custom_header","query_param","oauth2","service"],"title":"Auth Type","default":"none"},"status":{"type":"string","enum":["active","deprecated"],"title":"Status","default":"active"},"version":{"type":"integer","title":"Version","default":1},"id":{"type":"string","format":"uuid","title":"Id"},"tenant_id":{"type":"string","format":"uuid","title":"Tenant Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["name","input_schema","id","tenant_id","created_at"],"title":"ToolRead"},"ToolUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"input_schema":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Input Schema"},"execution_type":{"anyOf":[{"type":"string","enum":["http_webhook","internal"]},{"type":"null"}],"title":"Execution Type"},"endpoint":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Endpoint"},"auth_type":{"anyOf":[{"type":"string","enum":["none","api_key","bearer_token","basic_auth","custom_header","query_param","oauth2","service"]},{"type":"null"}],"title":"Auth Type"},"status":{"anyOf":[{"type":"string","enum":["active","deprecated"]},{"type":"null"}],"title":"Status"},"version":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Version"}},"type":"object","title":"ToolUpdate"},"UserLogin":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","maxLength":128,"minLength":8,"title":"Password"}},"type":"object","required":["email","password"],"title":"UserLogin"},"UserRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"tenant_id":{"type":"string","format":"uuid","title":"Tenant Id"},"email":{"type":"string","format":"email","title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"role":{"type":"string","title":"Role"},"scopes":{"items":{"type":"string"},"type":"array","title":"Scopes"},"is_active":{"type":"boolean","title":"Is Active"},"last_login_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","tenant_id","email","role","scopes","is_active","created_at"],"title":"UserRead"},"UserRegister":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","maxLength":128,"minLength":8,"title":"Password"},"full_name":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Full Name"},"tenant_name":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Tenant Name"}},"type":"object","required":["email","password"],"title":"UserRegister"},"UserSession":{"properties":{"user":{"$ref":"#/components/schemas/UserRead"},"tenant":{"$ref":"#/components/schemas/TenantRead"}},"type":"object","required":["user","tenant"],"title":"UserSession"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}