import{a as R,u as M}from"./useAuth.Bu6P1IiJ.js";import{bd as u,k as i}from"./entry.CVvpXMAV.js";const x=()=>{R();const n=M(),o=i(!1),c=i(null),g=i([]),y=i(null),v=i([]),h=i([]),f=i([]),l=i(!1),r=i(null),d=async s=>{try{o.value=!0,c.value=null;const e=new URLSearchParams;s!=null&&s.limit&&e.append("limit",s.limit.toString()),s!=null&&s.offset&&e.append("offset",s.offset.toString());const t=await n("/agents",{query:Object.fromEntries(e)});return g.value=t,t}catch(e){throw c.value=e.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≥–µ–Ω—Ç–æ–≤",e}finally{o.value=!1}},S=async s=>{try{o.value=!0,c.value=null;const e=await n("/agents",{method:"POST",headers:{"Content-Type":"application/json"},body:s});return g.value.unshift(e),e}catch(e){throw c.value=e.message||"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞",e}finally{o.value=!1}},q=async s=>{try{return o.value=!0,c.value=null,await n(`/agents/${s}`)}catch(e){throw c.value=e.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≥–µ–Ω—Ç–∞",e}finally{o.value=!1}},p=async(s,e)=>{try{o.value=!0,c.value=null;const t=await n(`/agents/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:e}),a=g.value.findIndex(Q=>Q.id===s);return a!==-1&&(g.value[a]=t),t}catch(t){throw c.value=t.message||"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞",t}finally{o.value=!1}},w=async s=>{try{o.value=!0,c.value=null,await n(`/agents/${s}`,{method:"DELETE"}),g.value=g.value.filter(e=>e.id!==s)}catch(e){throw c.value=e.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞",e}finally{o.value=!1}},m=async s=>{try{l.value=!0,r.value=null;const e=await n(`/agents/${s}/sqns`);return y.value=e,e}catch(e){throw r.value=e.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ SQNS-—Å—Ç–∞—Ç—É—Å–∞",e}finally{l.value=!1}},b=async(s,e)=>{try{l.value=!0,r.value=null;const t=await n(`/agents/${s}/sqns/enable-by-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:e});return y.value=t,t}catch(t){throw r.value=t.message||"–û—à–∏–±–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è SQNS",t}finally{l.value=!1}},T=async s=>{try{l.value=!0,r.value=null,await n(`/agents/${s}/sqns`,{method:"DELETE"}),y.value={sqnsEnabled:!1}}catch(e){throw r.value=e.message||"–û—à–∏–±–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è SQNS",e}finally{l.value=!1}},C=async s=>{try{const e=await n(`/agents/${s}/sqns/resources`);return v.value=e.resources??[],v.value}catch(e){throw r.value=e.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ SQNS",e}},$=async s=>{try{const e=await n(`/agents/${s}/sqns/services`);return h.value=e.services??[],h.value}catch(e){throw r.value=e.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É—Å–ª—É–≥ SQNS",e}},P=async s=>{try{return l.value=!0,r.value=null,await n(`/agents/${s}/sqns/sync`,{method:"POST"})}catch(e){throw r.value=e.message||"–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ SQNS",e}finally{l.value=!1}},A=async(s,e)=>{try{const t=new URLSearchParams;return e.search&&t.append("search",e.search),e.category&&t.append("category",e.category),e.is_enabled!==void 0&&t.append("is_enabled",e.is_enabled.toString()),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),await n(`/agents/${s}/sqns/services/cached`,{query:Object.fromEntries(t)})}catch(t){throw r.value=t.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—Å–ª—É–≥",t}},E=async(s,e,t)=>{try{const a=`/agents/${s}/sqns/services/${e}`;console.log("üöÄ PATCH request:",{url:a,serviceId:e,serviceIdType:typeof e,data:t,dataStringified:JSON.stringify(t)}),await n(a,{method:"PATCH",body:t}),console.log("‚úÖ PATCH success")}catch(a){throw console.error("‚ùå PATCH failed:",{error:a,message:a.message,data:a.data,statusCode:a.statusCode,statusMessage:a.statusMessage}),r.value=a.message||"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥–∏",a}},H=async(s,e)=>{try{await n(`/agents/${s}/sqns/services/bulk`,{method:"POST",headers:{"Content-Type":"application/json"},body:e})}catch(t){throw r.value=t.message||"–û—à–∏–±–∫–∞ –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥",t}},L=async s=>{try{return(await n(`/agents/${s}/sqns/categories`)).categories}catch(e){throw r.value=e.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π",e}},N=async s=>{try{return(await n(`/agents/${s}/sqns/specialists`)).specialists}catch(e){throw r.value=e.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤",e}},O=async(s,e,t)=>{try{const a=`/agents/${s}/sqns/categories/${e}`;console.log("üöÄ PATCH category request:",{url:a,categoryId:e,categoryIdType:typeof e,data:t,dataStringified:JSON.stringify(t)}),await n(a,{method:"PATCH",body:t}),console.log("‚úÖ PATCH category success")}catch(a){throw console.error("‚ùå PATCH category failed:",{error:a,message:a.message,data:a.data,statusCode:a.statusCode,statusMessage:a.statusMessage}),r.value=a.message||"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",a}},j=async s=>{try{return await n(`/agents/${s}/sqns/disable-preview`)}catch(e){throw r.value=e.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ–≤—å—é —É–¥–∞–ª–µ–Ω–∏—è",e}};return{agents:u(g),isLoading:u(o),error:u(c),fetchAgents:d,createAgent:S,getAgent:q,updateAgent:p,deleteAgent:w,sqnsStatus:u(y),sqnsResources:u(v),sqnsServices:u(h),sqnsSlots:u(f),isSqnsLoading:u(l),sqnsError:u(r),fetchSqnsStatus:m,enableSqns:b,disableSqns:T,fetchSqnsResources:C,fetchSqnsServices:$,syncSqns:P,fetchSqnsServicesCached:A,updateSqnsService:E,bulkUpdateSqnsServices:H,fetchSqnsCategories:L,fetchSqnsSpecialists:N,updateSqnsCategory:O,getSqnsDisablePreview:j}};export{x as u};
