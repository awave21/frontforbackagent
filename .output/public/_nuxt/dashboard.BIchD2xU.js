import{_ as U,u as z}from"./useDashboardData.OROQfF4M.js";import{_ as j}from"./nuxt-link.ChvxNO41.js";import{B as I}from"./bot.DYtIoycp.js";import{M as P,m as w,o as l,n as k,w as _,a as t,A as x,b as i,u as o,t as g,L as h,c as d,J as E,bV as H,B as J,f as q,p as G,F as L,C as B,k as K,d as O}from"./entry.CBkKRCnV.js";import{U as F}from"./user-check.Cn_7imEa.js";import{A as Q}from"./activity.DvKgEOk5.js";import{_ as R}from"./AuthModal.vue.DxMXnGuG.js";import{u as W}from"./useLayoutState.B8IzXTUd.js";import{u as X}from"./useAuth.CHSuA4zA.js";import{u as Y}from"./useAgents.C6xV-JRH.js";import{A as Z}from"./alert-circle.DcUsP5Lj.js";import{P as M}from"./plus.CAbVbV7B.js";import{L as tt}from"./loader-2.CrTaI3Us.js";import"./file-text.CJ5NiI8H.js";import"./calendar.eMfHWHyy.js";import"./eye.DUCx08TH.js";import"./useApiFetch.B9YviUBz.js";import"./authSessionManager.BK0upO_P.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=P("FileCheckIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),st={class:"flex items-center gap-3 sm:gap-4 mb-4 sm:mb-5"},ot={class:"min-w-0 flex-1"},nt={class:"text-base sm:text-lg font-bold text-slate-900 truncate"},rt={class:"flex items-center gap-1.5 mt-1"},it={class:"grid grid-cols-2 gap-3 sm:gap-4"},lt={class:"text-sm sm:text-base font-semibold text-slate-900 truncate"},at={class:"text-sm sm:text-base font-semibold text-slate-900"},dt=w({__name:"AgentCard",props:{agent:{}},setup(s){const a=s,c=["from-sky-500 to-cyan-500","from-purple-500 to-pink-500","from-emerald-500 to-cyan-500","from-indigo-500 to-purple-600","from-amber-500 to-orange-500","from-rose-500 to-pink-500"],f=["border-sky-100","border-purple-100","border-emerald-100","border-indigo-100","border-amber-100","border-rose-100"],m=h(()=>{let p=0;for(const n of a.agent.id)p=(p<<5)-p+n.charCodeAt(0)|0;return Math.abs(p)%c.length}),u=h(()=>c[m.value]),b=h(()=>f[m.value]);return(p,n)=>{const v=j;return l(),k(v,{to:`/agents/${s.agent.id}/prompt`,class:x(["bg-white rounded-xl border p-4 sm:p-6 hover:shadow-md transition-shadow cursor-pointer block",b.value])},{default:_(()=>[t("div",st,[t("div",{class:x(["flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 rounded-lg bg-gradient-to-br flex-shrink-0",u.value])},[i(o(I),{class:"h-6 w-6 sm:h-7 sm:w-7 text-white"})],2),t("div",ot,[t("h3",nt,g(s.agent.name),1),t("div",rt,[t("div",{class:x(["w-2 h-2 rounded-full flex-shrink-0",s.agent.status==="published"?"bg-green-500":"bg-slate-400"])},null,2),t("span",{class:x(["text-xs sm:text-sm font-medium",s.agent.status==="published"?"text-green-600":"text-slate-500"])},g(s.agent.status==="published"?"Активен":"Черновик"),3)])])]),t("div",it,[t("div",null,[t("p",lt,g(s.agent.model||"—"),1),n[0]||(n[0]=t("p",{class:"text-xs font-normal text-slate-500"}," Модель ",-1))]),t("div",null,[t("p",at," v"+g(s.agent.version),1),n[1]||(n[1]=t("p",{class:"text-xs font-normal text-slate-500"}," Версия ",-1))])])]),_:1},8,["to","class"])}}}),ct={class:"px-4 sm:px-6 py-3 sm:py-4"},mt={class:"flex items-center gap-3 sm:gap-4"},ut={class:"flex-1 min-w-0"},pt={class:"text-xs sm:text-sm font-semibold text-slate-900"},gt={class:"text-xs sm:text-sm text-slate-600"},xt=w({__name:"ActivityItem",props:{activity:{}},setup(s){const a=s,c=h(()=>{switch(a.activity.icon){case"UserCheck":return F;case"Activity":return Q;case"FileCheck":return et;default:return F}});return(f,m)=>(l(),d("div",ct,[t("div",mt,[t("div",{class:x(["flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-gradient-to-br flex-shrink-0",s.activity.color])},[(l(),k(E(c.value),{class:"h-4 w-4 sm:h-5 sm:w-5 text-white"}))],2),t("div",ut,[t("p",pt,g(s.activity.title),1),t("p",gt,g(s.activity.time),1)])])]))}}),ft={class:"w-full px-5 py-5 flex flex-col gap-5"},ht={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},bt={class:"flex items-center justify-between"},vt={class:"flex items-center"},yt={class:"flex gap-2"},_t={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-5"},wt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 lg:mb-6 gap-3 sm:gap-0"},kt={key:0,class:"flex justify-center py-8"},Ct={key:1,class:"bg-background rounded-xl border border-border p-12 text-center"},At={key:2,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-5"},$t={class:"bg-background rounded-xl border border-border overflow-hidden"},Lt={class:"divide-y divide-border"},Kt=w({__name:"dashboard",async setup(s){let a,c;const{pageTitle:f}=W(),{isAuthenticated:m}=X(),u=K(!1),b=()=>{u.value=!1},{data:p}=([a,c]=H(()=>z()),a=await a,c(),a),{agents:n,fetchAgents:v,isLoading:N}=Y(),C=()=>{m.value&&v()};J(()=>{f.value="Панель управления",C()}),q(m,A=>{A&&C()});const V=[{id:1,title:"Агент Записи обработал запрос",time:"2 минуты назад",icon:"UserCheck",color:"from-sky-500 to-cyan-500"},{id:2,title:"Агент Диагностики завершил анализ",time:"15 минут назад",icon:"Activity",color:"from-purple-500 to-pink-500"},{id:3,title:"Агент Документации создал отчет",time:"1 час назад",icon:"FileCheck",color:"from-emerald-500 to-cyan-500"}];return(A,e)=>{const y=U,$=j,D=dt,S=xt,T=R;return l(),d("div",ft,[o(m)?G("",!0):(l(),d("div",ht,[t("div",bt,[t("div",vt,[i(o(Z),{class:"h-5 w-5 text-yellow-400 mr-3"}),e[2]||(e[2]=t("div",null,[t("h3",{class:"text-sm font-medium text-yellow-800"}," Требуется аутентификация "),t("p",{class:"text-sm text-yellow-700 mt-1"}," Зарегистрируйтесь или войдите в систему ")],-1))]),t("div",yt,[t("button",{onClick:e[0]||(e[0]=r=>u.value=!0),class:"px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700 transition-colors"}," Войти ")])])])),t("div",_t,[i(y,{title:"Всего агентов",value:String(o(n).length),description:"Все зарегистрированные агенты",trend:o(n).filter(r=>r.status==="published").length+" активных",type:"info",icon:"BarChart2"},null,8,["value","trend"]),i(y,{title:"Активных агентов",value:String(o(n).filter(r=>r.status==="published").length),description:"Опубликованные и работающие",trend:"Все системы в норме",type:"positive",icon:"Target"},null,8,["value"]),i(y,{title:"Черновики",value:String(o(n).filter(r=>r.status==="draft").length),description:"Агенты в разработке",trend:"Ожидают публикации",type:"warning",icon:"FileText"},null,8,["value"])]),t("div",null,[t("div",wt,[e[5]||(e[5]=t("h2",{class:"text-lg sm:text-xl font-bold text-foreground"}," Подключенные агенты ",-1)),i($,{to:"/agents/new",class:"flex items-center justify-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 transition-colors text-sm sm:text-base"},{default:_(()=>[i(o(M),{class:"h-4 w-4"}),e[3]||(e[3]=t("span",{class:"hidden sm:inline"},"Добавить агента",-1)),e[4]||(e[4]=t("span",{class:"sm:hidden"},"Добавить",-1))]),_:1})]),o(N)?(l(),d("div",kt,[i(o(tt),{class:"h-8 w-8 text-primary animate-spin"})])):o(n).length===0?(l(),d("div",Ct,[i(o(I),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e[7]||(e[7]=t("h3",{class:"text-lg font-medium text-foreground mb-2"},"Нет агентов",-1)),e[8]||(e[8]=t("p",{class:"text-muted-foreground text-sm mb-4"},"Создайте своего первого AI-агента",-1)),i($,{to:"/agents/new",class:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors text-sm"},{default:_(()=>[i(o(M),{class:"h-4 w-4"}),e[6]||(e[6]=O(" Создать агента ",-1))]),_:1})])):(l(),d("div",At,[(l(!0),d(L,null,B(o(n),r=>(l(),k(D,{key:r.id,agent:r},null,8,["agent"]))),128))]))]),t("div",null,[e[9]||(e[9]=t("h2",{class:"text-lg sm:text-xl font-bold text-foreground mb-4 lg:mb-6"}," Недавняя активность ",-1)),t("div",$t,[t("div",Lt,[(l(),d(L,null,B(V,r=>i(S,{key:r.id,activity:r},null,8,["activity"])),64))])])]),i(T,{"is-open":u.value,onClose:e[1]||(e[1]=r=>u.value=!1),onAuthenticated:b},null,8,["is-open"])])}}});export{Kt as default};
