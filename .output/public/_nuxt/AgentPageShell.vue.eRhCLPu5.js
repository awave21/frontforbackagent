import{u as w}from"./useLayoutState.sNd_KhK0.js";import{m as A,y as _,f as u,b6 as k,c as l,a as s,u as a,b as m,p as C,K as S,k as B,P as N,o as n}from"./entry.B2IFVgKF.js";import{u as $}from"./useAuth.Vyp_2ZYp.js";import{u as L}from"./usePermissions.DULBQwpP.js";import{u as P}from"./useAgentEditorStore.CwKcWoqV.js";import{_ as V}from"./AuthModal.vue.S1p1aqV_.js";import{A as j}from"./alert-circle.CK50UZ1-.js";const E={class:"h-full px-5 py-5"},R={class:"h-full flex flex-col"},T={key:0,class:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},I={class:"flex items-center justify-between"},K={class:"flex items-center"},M={key:1,class:"flex justify-center py-12"},U={key:2,class:"flex flex-col flex-1 min-h-0 gap-4"},Q=A({__name:"AgentPageShell",props:{title:{},hideActions:{type:Boolean}},setup(c){const f=c,o=B(!1),p=N(),r=P(),{agent:v,isLoading:y,isSaving:q}=_(r),{isAuthenticated:h}=$();L();const{breadcrumbTitle:i,breadcrumbAgentName:d}=w();i.value=f.title,u(()=>{var e;return(e=v.value)==null?void 0:e.name},e=>{d.value=e||""},{immediate:!0}),k(()=>{i.value="",d.value=""});const x=e=>Array.isArray(e)?e[0]:e;u(()=>p.params.id,e=>{const t=x(e);t&&r.ensureAgentLoaded(t)},{immediate:!0});const b=()=>{o.value=!1,window.location.reload()};return(e,t)=>(n(),l("div",E,[s("div",R,[a(h)?C("",!0):(n(),l("div",T,[s("div",I,[s("div",K,[m(a(j),{class:"h-5 w-5 text-yellow-400 mr-3"}),t[2]||(t[2]=s("div",null,[s("h3",{class:"text-sm font-medium text-yellow-800"}," Требуется аутентификация "),s("p",{class:"text-sm text-yellow-700 mt-1"}," Войдите в систему для редактирования агента ")],-1))]),s("button",{onClick:t[0]||(t[0]=g=>o.value=!0),class:"px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700 transition-colors"}," Войти ")])])),a(y)?(n(),l("div",M,[...t[3]||(t[3]=[s("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1)])])):(n(),l("div",U,[S(e.$slots,"default")])),m(V,{"is-open":o.value,onClose:t[1]||(t[1]=g=>o.value=!1),onAuthenticated:b},null,8,["is-open"])])]))}});export{Q as _};
