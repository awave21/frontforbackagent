import{M as ie,_ as re,U as de}from"./DashboardSidebar.vue.DOkVJfRK.js";import{bY as F,m as K,b_ as Q,n as D,b as c,q as A,w as B,T as ce,o as a,c as n,s as z,a as e,u as d,X as q,v as G,x as ue,bO as pe,t as v,p as m,d as C,k as p,z as W,B as ve,F as H,C as X,A as xe,L as me}from"./entry.y5yLHWNp.js";import{u as Z,a as be}from"./useAuth.BWm64aWw.js";import{u as fe}from"./usePermissions.CdRrkOuC.js";import{L}from"./loader-2.DOh2Ovky.js";import{A as Y}from"./alert-circle.SgXs8mYp.js";import{P as J}from"./plus.D3iy-8jP.js";import{T as ge}from"./trash-2.C-Muv_5J.js";import"./nuxt-link.BHnduGdP.js";import"./index.DZzovHIe.js";import"./chevron-right.DqtZabJi.js";import"./link.K6HIKV_r.js";import"./database.BPVfquzR.js";import"./cpu.Br7iJb3g.js";import"./message-square.tVyQNL6I.js";import"./settings.BT2-odI4.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=F("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=F("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=F("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),_e={key:0,class:"p-6"},ke={class:"flex items-center justify-between mb-6"},Ce={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-3"},$e={class:"text-sm text-red-800"},Ue={class:"flex gap-3 justify-end pt-4"},Te=["disabled"],je={key:1,class:"p-6"},Me={class:"flex items-center justify-between mb-6"},Le={class:"space-y-4"},De={class:"flex gap-2"},Ee=["value"],Se=["disabled"],Ie=K({__name:"InviteUserModal",props:{isOpen:{type:Boolean}},emits:["close","invited"],setup(R,{emit:$}){const M=$,U=Z(),b=W(),{public:{siteUrl:k}}=Q(),g=p({email:"",role:"manager"}),y=p(!1),h=p(null),x=p(null),w=p(!1),f=()=>k&&!k.includes("localhost")&&!k.includes("127.0.0.1")?k:typeof window<"u"?window.location.origin:k||"",E=r=>{if(!r)return r;const l=f();try{const u=l?new URL(r,l):new URL(r);if(l){const j=new URL(l);u.host&&j.host&&u.host!==j.host&&(u.protocol=j.protocol,u.host=j.host)}return u.toString()}catch{return r}},V=async()=>{var r;y.value=!0,h.value=null;try{const l=await U("/invitations",{method:"POST",headers:{"Content-Type":"application/json"},body:{email:g.value.email,role:g.value.role}});x.value=E(l.invite_link),b.success("Приглашение создано","Ссылка для приглашения готова к использованию")}catch(l){const u=(l==null?void 0:l.apiError)||l,j=(l==null?void 0:l.status)||(l==null?void 0:l.statusCode)||((r=l==null?void 0:l.response)==null?void 0:r.status);let _;j===409?_="Приглашение для этого email уже существует. Удалите старое или используйте другой email.":_=(u==null?void 0:u.message)||"Не удалось создать приглашение",h.value=_,b.error("Ошибка",_)}finally{y.value=!1}},S=async()=>{if(x.value)try{await navigator.clipboard.writeText(x.value),w.value=!0,b.success("Скопировано","Ссылка скопирована в буфер обмена"),setTimeout(()=>{w.value=!1},2e3)}catch{b.error("Ошибка","Не удалось скопировать ссылку")}},T=()=>{g.value={email:"",role:"manager"},h.value=null,x.value=null,w.value=!1,M("close")};return(r,l)=>(a(),D(ce,{to:"body"},[c(A,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:B(()=>[R.isOpen?(a(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",onClick:l[5]||(l[5]=z(u=>r.$emit("close"),["self"]))},[c(A,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:B(()=>[R.isOpen?(a(),n("div",{key:0,class:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",onClick:l[4]||(l[4]=z(()=>{},["stop"]))},[x.value?(a(),n("div",je,[e("div",Me,[l[10]||(l[10]=e("h2",{class:"text-xl font-bold text-slate-900"}," Приглашение создано ",-1)),e("button",{onClick:T,class:"p-2 text-slate-400 hover:text-slate-600 transition-colors"},[c(d(q),{class:"h-5 w-5"})])]),e("div",Le,[e("div",null,[l[11]||(l[11]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"}," Ссылка для приглашения ",-1)),e("div",De,[e("input",{value:x.value,readonly:"",class:"flex-1 px-3 py-2 text-slate-900 border border-slate-300 rounded-lg bg-slate-50 text-sm"},null,8,Ee),e("button",{onClick:S,disabled:w.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors whitespace-nowrap"},v(w.value?"Скопировано":"Копировать"),9,Se)])]),l[12]||(l[12]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},[e("p",{class:"text-sm text-blue-800"},[e("strong",null,"Важно:"),C(" Email не отправляется автоматически. Скопируйте ссылку и отправьте её пользователю вручную. ")])],-1)),e("div",{class:"flex justify-end pt-4"},[e("button",{onClick:T,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"}," Готово ")])])])):(a(),n("div",_e,[e("div",ke,[l[6]||(l[6]=e("h2",{class:"text-xl font-bold text-slate-900"}," Пригласить пользователя ",-1)),e("button",{onClick:l[0]||(l[0]=u=>r.$emit("close")),class:"p-2 text-slate-400 hover:text-slate-600 transition-colors"},[c(d(q),{class:"h-5 w-5"})])]),e("form",{onSubmit:z(V,["prevent"]),class:"space-y-4"},[e("div",null,[l[7]||(l[7]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"}," Email ",-1)),G(e("input",{"onUpdate:modelValue":l[1]||(l[1]=u=>g.value.email=u),type:"email",required:"",class:"w-full px-3 py-2 text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"user@example.com"},null,512),[[ue,g.value.email]])]),e("div",null,[l[9]||(l[9]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"}," Роль ",-1)),G(e("select",{"onUpdate:modelValue":l[2]||(l[2]=u=>g.value.role=u),required:"",class:"w-full px-3 py-2 text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...l[8]||(l[8]=[e("option",{value:"admin"},"Администратор",-1),e("option",{value:"manager"},"Менеджер",-1)])],512),[[pe,g.value.role]])]),h.value?(a(),n("div",Ce,[e("p",$e,v(h.value),1)])):m("",!0),e("div",Ue,[e("button",{type:"button",onClick:l[3]||(l[3]=u=>r.$emit("close")),class:"px-4 py-2 text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors"}," Отмена "),e("button",{type:"submit",disabled:y.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[y.value?(a(),D(d(L),{key:0,class:"h-4 w-4 animate-spin"})):m("",!0),C(" "+v(y.value?"Создание...":"Создать приглашение"),1)],8,Te)])],32)]))])):m("",!0)]),_:1})])):m("",!0)]),_:1})]))}}),ze={class:"min-h-screen bg-slate-50"},Ae={class:"lg:hidden bg-white border-b border-slate-200 px-4 py-3"},Be={class:"flex items-center justify-between"},Re={class:"flex"},Ve={key:0,class:"lg:hidden fixed inset-0 z-50 w-full"},Fe={class:"flex-1 bg-slate-50 p-4 sm:p-6 lg:p-10"},Oe={class:"max-w-6xl mx-auto"},Pe={key:0,class:"bg-white rounded-xl border border-slate-200 p-8 text-center"},Ne={class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},qe={key:1},Ge={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 lg:mb-8"},He={key:0,class:"bg-white rounded-xl border border-slate-200 p-12 text-center"},Xe={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Ye={class:"flex items-center"},Je={class:"text-sm text-red-700 mt-1"},Ke={key:2,class:"bg-white rounded-xl border border-slate-200 overflow-hidden"},Qe={class:"overflow-x-auto"},We={class:"w-full"},Ze={class:"bg-white divide-y divide-slate-200"},et={class:"px-6 py-4 whitespace-nowrap"},tt={class:"flex items-center"},st={class:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center shrink-0"},lt={class:"text-white font-bold text-sm"},ot={class:"ml-4"},at={class:"text-sm font-medium text-slate-900"},nt={class:"text-sm text-slate-500"},it={class:"px-6 py-4 whitespace-nowrap"},rt={class:"flex items-center gap-2"},dt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},ct=["value","onChange","disabled"],ut={class:"px-6 py-4 whitespace-nowrap text-sm text-slate-500"},pt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},vt=["onClick","disabled"],xt={key:1},mt={key:3,class:"bg-white rounded-xl border border-slate-200 p-12 text-center"},bt={class:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"},ft={key:4,class:"mt-8"},gt={class:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2"},yt={class:"text-sm font-normal text-slate-500"},ht={class:"bg-white rounded-xl border border-slate-200 overflow-hidden"},wt={class:"divide-y divide-slate-200"},_t={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-3"},kt={class:"flex-1 min-w-0"},Ct={class:"flex items-center gap-2 mb-1"},$t={class:"font-medium text-slate-900 truncate"},Ut={class:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-slate-500"},Tt={class:"flex items-center gap-1"},jt={class:"flex items-center gap-2 shrink-0"},Mt=["onClick","disabled"],Lt=["onClick","disabled"],Dt={key:0,class:"mt-2"},Et={class:"flex items-center gap-2"},St=["value"],It={key:5,class:"mt-8"},zt={class:"flex items-center gap-2 text-slate-500"},At={class:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4"},Bt={class:"p-6"},Rt={class:"text-slate-600 mb-6"},Vt={class:"flex gap-3 justify-end"},Ft=["disabled"],ls=K({__name:"team",setup(R){const $=p(!1),M=p(!1),U=p([]),b=p([]),k=p(!1),g=p(!1),y=p(null),h=p(new Set),x=p(new Set),w=p(new Set),f=p(null),E=p(null),{user:V}=be(),{canManageMembers:S}=fe(),T=Z(),r=W(),{public:{siteUrl:l}}=Q(),u=me(()=>{var o;return((o=V.value)==null?void 0:o.id)??null}),j=o=>{if(!o)return o;const t=l&&!l.includes("localhost")?l:typeof window<"u"?window.location.origin:"";try{const i=t?new URL(o,t):new URL(o);if(t){const s=new URL(t);i.host!==s.host&&(i.protocol=s.protocol,i.host=s.host)}return i.toString()}catch{return o}},_=o=>new Date(o)<new Date,O=o=>{if(!o)return"Никогда";try{return new Date(o).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Неизвестно"}},P=async()=>{if(S.value){k.value=!0,y.value=null;try{const o=await T("/users",{method:"GET"});U.value=o||[]}catch(o){const t=(o==null?void 0:o.apiError)||o,i=(t==null?void 0:t.message)||"Не удалось загрузить список участников";y.value=i,r.error("Ошибка",i)}finally{k.value=!1}}},N=async()=>{if(S.value){g.value=!0;try{const o=await T("/invitations",{method:"GET"});b.value=(o||[]).map(t=>({...t,invite_link:j(t.invite_link)}))}catch(o){console.warn("Failed to fetch invitations:",o),b.value=[]}finally{g.value=!1}}},ee=async o=>{try{await navigator.clipboard.writeText(o.invite_link),E.value=o.id,r.success("Скопировано","Ссылка скопирована в буфер обмена"),setTimeout(()=>{E.value=null},2e3)}catch{r.error("Ошибка","Не удалось скопировать ссылку")}},te=async o=>{w.value.add(o);try{await T(`/invitations/${o}`,{method:"DELETE"}),b.value=b.value.filter(t=>t.id!==o),r.success("Приглашение удалено","Приглашение успешно отменено")}catch(t){const i=(t==null?void 0:t.apiError)||t;r.error("Ошибка",(i==null?void 0:i.message)||"Не удалось удалить приглашение")}finally{w.value.delete(o)}},se=async(o,t)=>{if(t!=="admin"&&t!=="manager"){r.error("Ошибка","Некорректная роль");return}h.value.add(o);try{await T(`/users/${o}/role`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:{role:t}});const i=U.value.find(s=>s.id===o);i&&(i.role=t),r.success("Роль обновлена",`Роль участника успешно изменена на "${t==="admin"?"Администратор":"Менеджер"}"`)}catch(i){const s=(i==null?void 0:i.apiError)||i;r.error("Ошибка",(s==null?void 0:s.message)||"Не удалось обновить роль")}finally{h.value.delete(o)}},le=o=>{f.value=o},oe=async o=>{x.value.add(o);try{await T(`/users/${o}`,{method:"DELETE"}),U.value=U.value.filter(t=>t.id!==o),f.value=null,r.success("Участник удален","Участник успешно удален из организации")}catch(t){const i=(t==null?void 0:t.apiError)||t;r.error("Ошибка",(i==null?void 0:i.message)||"Не удалось удалить участника")}finally{x.value.delete(o)}},ae=()=>{M.value=!1,P(),N()},ne=o=>({admin:"Администратор",manager:"Менеджер",owner:"Владелец"})[o]||o;return ve(()=>{S.value&&(P(),N())}),(o,t)=>{const i=re;return a(),n("div",ze,[e("div",Ae,[e("div",Be,[t[9]||(t[9]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-bold text-xs"},"М")]),e("span",{class:"text-slate-900 font-bold"},"МедиАИ")],-1)),e("button",{onClick:t[0]||(t[0]=s=>$.value=!$.value),class:"p-2 rounded-lg text-slate-600 hover:bg-slate-100"},[c(d(ie),{class:"h-5 w-5"})])])]),e("div",Re,[c(i,{class:"hidden lg:block"}),c(A,{"enter-active-class":"transition-all duration-400 ease-out","enter-from-class":"opacity-0 backdrop-blur-0","enter-to-class":"opacity-100 backdrop-blur-sm","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"opacity-100 backdrop-blur-sm","leave-to-class":"opacity-0 backdrop-blur-0"},{default:B(()=>[$.value?(a(),n("div",{key:0,class:"lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50",onClick:t[1]||(t[1]=s=>$.value=!1)})):m("",!0)]),_:1}),c(A,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.34, 1.56, 0.64, 1)","enter-from-class":"-translate-x-full opacity-0 scale-95","enter-to-class":"translate-x-0 opacity-100 scale-100","leave-active-class":"transition-all duration-400 ease-in","leave-from-class":"translate-x-0 opacity-100 scale-100","leave-to-class":"-translate-x-full opacity-0 scale-95"},{default:B(()=>[$.value?(a(),n("div",Ve,[c(i,{onClose:t[2]||(t[2]=s=>$.value=!1)})])):m("",!0)]),_:1}),e("main",Fe,[e("div",Oe,[d(S)?(a(),n("div",qe,[e("div",Ge,[t[13]||(t[13]=e("div",{class:"mb-4 sm:mb-0"},[e("h1",{class:"text-2xl sm:text-3xl font-bold text-slate-900"}," Участники организации "),e("p",{class:"text-slate-600 mt-1 sm:mt-2 text-sm sm:text-base"}," Управление участниками и их ролями ")],-1)),e("button",{onClick:t[3]||(t[3]=s=>M.value=!0),class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"},[c(d(J),{class:"h-4 w-4"}),t[12]||(t[12]=e("span",null,"Пригласить",-1))])]),k.value?(a(),n("div",He,[c(d(L),{class:"h-8 w-8 text-indigo-600 animate-spin mx-auto mb-4"}),t[14]||(t[14]=e("p",{class:"text-slate-600"},"Загрузка участников...",-1))])):y.value?(a(),n("div",Xe,[e("div",Ye,[c(d(Y),{class:"h-5 w-5 text-red-400 mr-3"}),e("div",null,[t[15]||(t[15]=e("h3",{class:"text-sm font-medium text-red-800"},"Ошибка загрузки",-1)),e("p",Je,v(y.value),1)])])])):U.value.length>0?(a(),n("div",Ke,[e("div",Qe,[e("table",We,[t[17]||(t[17]=e("thead",{class:"bg-slate-50 border-b border-slate-200"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"}," Пользователь "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"}," Роль "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"}," Дата входа "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider"}," Действия ")])],-1)),e("tbody",Ze,[(a(!0),n(H,null,X(U.value,s=>(a(),n("tr",{key:s.id,class:"hover:bg-slate-50"},[e("td",et,[e("div",tt,[e("div",st,[e("span",lt,v(s.full_name?s.full_name.split(" ").map(I=>I.charAt(0)).join("").toUpperCase():s.email.charAt(0).toUpperCase()),1)]),e("div",ot,[e("div",at,v(s.full_name||"Без имени"),1),e("div",nt,v(s.email),1)])])]),e("td",it,[e("div",rt,[s.role==="owner"?(a(),n("span",dt," Владелец ")):(a(),n("select",{key:1,value:s.role,onChange:I=>se(s.id,I.target.value),disabled:h.value.has(s.id),class:"text-sm border border-slate-300 rounded-lg px-3 py-1.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[16]||(t[16]=[e("option",{value:"admin"},"Администратор",-1),e("option",{value:"manager"},"Менеджер",-1)])],40,ct)),h.value.has(s.id)?(a(),D(d(L),{key:2,class:"h-4 w-4 text-indigo-600 animate-spin"})):m("",!0)])]),e("td",ut,v(O(s.last_login_at)),1),e("td",pt,[s.role!=="owner"&&s.id!==u.value?(a(),n("button",{key:0,onClick:I=>le(s),disabled:x.value.has(s.id),class:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed"},[x.value.has(s.id)?(a(),D(d(L),{key:0,class:"h-4 w-4 animate-spin inline"})):(a(),n("span",xt,"Удалить"))],8,vt)):m("",!0)])]))),128))])])])])):(a(),n("div",mt,[e("div",bt,[c(d(de),{class:"h-8 w-8 text-slate-400"})]),t[19]||(t[19]=e("h3",{class:"text-lg font-semibold text-slate-900 mb-2"}," Нет участников ",-1)),t[20]||(t[20]=e("p",{class:"text-slate-600 text-sm mb-4"}," Пригласите первого участника в организацию ",-1)),e("button",{onClick:t[4]||(t[4]=s=>M.value=!0),class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"},[c(d(J),{class:"h-4 w-4"}),t[18]||(t[18]=e("span",null,"Пригласить",-1))])])),b.value.length>0?(a(),n("div",ft,[e("h2",gt,[c(d(we),{class:"h-5 w-5 text-slate-500"}),t[21]||(t[21]=C(" Ожидающие приглашения ",-1)),e("span",yt,"("+v(b.value.length)+")",1)]),e("div",ht,[e("div",wt,[(a(!0),n(H,null,X(b.value,s=>(a(),n("div",{key:s.id,class:"p-4 hover:bg-slate-50 transition-colors"},[e("div",_t,[e("div",kt,[e("div",Ct,[e("span",$t,v(s.email),1),e("span",{class:xe(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",_(s.expires_at)?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},v(_(s.expires_at)?"Истекло":"Ожидает"),3)]),e("div",Ut,[e("span",null,"Роль: "+v(ne(s.role)),1),e("span",Tt,[c(d(ye),{class:"h-3.5 w-3.5"}),C(" "+v(_(s.expires_at)?"Истекло":"До")+": "+v(O(s.expires_at)),1)])])]),e("div",jt,[_(s.expires_at)?m("",!0):(a(),n("button",{key:0,onClick:I=>ee(s),disabled:E.value===s.id,class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 disabled:opacity-50 transition-colors"},[c(d(he),{class:"h-4 w-4"}),C(" "+v(E.value===s.id?"Скопировано":"Копировать"),1)],8,Mt)),e("button",{onClick:I=>te(s.id),disabled:w.value.has(s.id),class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm text-red-600 bg-red-50 rounded-lg hover:bg-red-100 disabled:opacity-50 transition-colors"},[w.value.has(s.id)?(a(),D(d(L),{key:0,class:"h-4 w-4 animate-spin"})):(a(),D(d(ge),{key:1,class:"h-4 w-4"})),t[22]||(t[22]=C(" Удалить ",-1))],8,Lt)])]),_(s.expires_at)?m("",!0):(a(),n("div",Dt,[e("div",Et,[e("input",{value:s.invite_link,readonly:"",class:"flex-1 px-3 py-1.5 text-xs text-slate-600 bg-slate-50 border border-slate-200 rounded-lg truncate"},null,8,St)])]))]))),128))])])])):g.value?(a(),n("div",It,[e("div",zt,[c(d(L),{class:"h-4 w-4 animate-spin"}),t[23]||(t[23]=e("span",{class:"text-sm"},"Загрузка приглашений...",-1))])])):m("",!0)])):(a(),n("div",Pe,[e("div",Ne,[c(d(Y),{class:"h-8 w-8 text-red-600"})]),t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-slate-900 mb-2"}," Недостаточно прав ",-1)),t[11]||(t[11]=e("p",{class:"text-slate-600 text-sm"}," У вас нет доступа к управлению участниками организации ",-1))]))])])]),c(Ie,{"is-open":M.value,onClose:t[5]||(t[5]=s=>M.value=!1),onInvited:ae},null,8,["is-open"]),f.value?(a(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:t[8]||(t[8]=z(s=>f.value=null,["self"]))},[e("div",At,[e("div",Bt,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold text-slate-900 mb-4"}," Подтверждение удаления ",-1)),e("p",Rt,[t[24]||(t[24]=C(" Вы уверены, что хотите удалить участника ",-1)),e("strong",null,v(f.value.full_name||f.value.email),1),t[25]||(t[25]=C("? Это действие нельзя отменить. ",-1))]),e("div",Vt,[e("button",{onClick:t[6]||(t[6]=s=>f.value=null),class:"px-4 py-2 text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors"}," Отмена "),e("button",{onClick:t[7]||(t[7]=s=>oe(f.value.id)),disabled:x.value.has(f.value.id),class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[x.value.has(f.value.id)?(a(),D(d(L),{key:0,class:"h-4 w-4 animate-spin"})):m("",!0),t[26]||(t[26]=C(" Удалить ",-1))],8,Ft)])])])])):m("",!0)])}}});export{ls as default};
