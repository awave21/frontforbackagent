import{_ as g}from"./AgentPageShell.vue.DS72lrn9.js";import{m as u,y as v,o as l,c as d,a as e,u as s,b as i,d as b,p as m,v as _,x as y,A as p,M as w,n as k,w as C}from"./entry.C3vEAWma.js";import{u as h}from"./usePermissions.kc3596Ar.js";import{u as A}from"./useAgentEditorStore.q8CjWIk4.js";import{L as V}from"./loader-2.C7JGwsi9.js";import{C as B}from"./check.CwYc9Emf.js";import"./useAuth.aSDdTJTL.js";import"./AuthModal.vue.TJWQo2PL.js";import"./eye.DZxrhfv6.js";import"./alert-circle.CL9BFDlJ.js";import"./useAgents.lyQ9pZ6U.js";import"./index.B9hQrX5B.js";const N={class:"bg-background rounded-md border border-border p-4 sm:p-5 space-y-6"},S={class:"flex items-center justify-end mb-4"},T={key:0,class:"flex items-center gap-1.5 text-xs text-blue-600"},$={key:1,class:"flex items-center gap-1.5 text-xs text-green-600"},E={class:"max-w-2xl space-y-8"},D=["disabled"],L={class:"flex gap-4"},M=["disabled"],P=["disabled"],j={key:0,class:"pt-8 border-t border-red-50"},z=u({__name:"AgentSettingsPanel",setup(x){const r=A(),{form:o}=v(r),{canEditAgents:a}=h(),c=async()=>{if(!confirm("Вы уверены, что хотите удалить этого агента? Это действие нельзя отменить."))return;await r.removeAgent()&&w("/agents")};return(f,t)=>(l(),d("div",N,[e("div",S,[s(r).isAutoSaving?(l(),d("span",T,[i(s(V),{class:"h-3 w-3 animate-spin"}),t[3]||(t[3]=b(" Сохранение... ",-1))])):s(r).lastAutoSavedAt?(l(),d("span",$,[i(s(B),{class:"h-3 w-3"}),t[4]||(t[4]=b(" Сохранено ",-1))])):m("",!0)]),e("div",E,[e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-bold text-slate-900 mb-3"},"Название агента",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>s(o).name=n),disabled:!s(a),type:"text",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-md focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all disabled:opacity-60 disabled:cursor-not-allowed",placeholder:"Введите название..."},null,8,D),[[y,s(o).name]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-bold text-slate-900 mb-3"},"Статус агента",-1)),e("div",L,[e("button",{type:"button",disabled:!s(a),onClick:t[1]||(t[1]=n=>s(o).status="draft"),class:p(["flex-1 flex flex-col p-4 border-2 rounded-lg transition-all text-left disabled:opacity-60 disabled:cursor-not-allowed",[s(o).status==="draft"?"border-indigo-600 bg-indigo-50/50 ring-4 ring-indigo-50":"border-slate-100 hover:border-slate-200 bg-white"]])},[...t[6]||(t[6]=[e("span",{class:"font-bold text-slate-900"},"Черновик",-1),e("span",{class:"text-xs text-slate-500 mt-1"},"Агент доступен только вам для тестирования",-1)])],10,M),e("button",{type:"button",disabled:!s(a),onClick:t[2]||(t[2]=n=>s(o).status="published"),class:p(["flex-1 flex flex-col p-4 border-2 rounded-lg transition-all text-left disabled:opacity-60 disabled:cursor-not-allowed",[s(o).status==="published"?"border-emerald-500 bg-emerald-50/50 ring-4 ring-emerald-50":"border-slate-100 hover:border-slate-200 bg-white"]])},[...t[7]||(t[7]=[e("span",{class:"font-bold text-slate-900"},"Опубликован",-1),e("span",{class:"text-xs text-slate-500 mt-1"},"Агент доступен всем сотрудникам клиники",-1)])],10,P)])]),s(a)?(l(),d("div",j,[t[9]||(t[9]=e("h4",{class:"text-sm font-bold text-red-600 mb-2"},"Опасная зона",-1)),t[10]||(t[10]=e("p",{class:"text-xs text-slate-500 mb-4"},"Удаление агента приведет к безвозвратной потере всех его настроек и истории.",-1)),e("button",{type:"button",onClick:c,class:"px-6 py-2.5 bg-white border border-red-200 text-red-600 rounded-md text-sm font-bold hover:bg-red-50 transition-colors"}," Удалить агента ")])):m("",!0)])]))}}),X=u({__name:"settings",setup(x){return(r,o)=>(l(),k(g,{title:"Настройки","hide-actions":!0},{default:C(()=>[i(z)]),_:1}))}});export{X as default};
