import{_ as ys}from"./AgentPageShell.vue.5C6xw8L8.js";import{R as bs,S as xs,U as Ss,V as ws,W as Cs,Y as $s,Z as Es,F as Ue,$ as Rs,a0 as Is,a1 as Ds,a2 as Os,T as Ps,a3 as Ts,a4 as Ms,q as ta,a5 as Fs,a6 as As,a7 as Vs,a8 as Bs,a9 as Ls,aa as Ns,ab as js,ac as ks,ad as Us,ae as Gs,L as xe,af as zs,n as Y,p as ue,c as M,a as v,ag as Hs,ah as _s,ai as Ks,aj as Ws,ak as Xs,D as br,d as oe,b as w,al as Ys,am as qs,m as q,an as Qs,ao as Js,ap as Zs,aq as el,ar as tl,as as nl,at as ol,au as rl,av as al,aw as sl,ax as ll,l as il,ay as ul,az as dl,aA as cl,aB as rt,aC as fl,aD as pl,aE as gl,aF as vl,aG as ml,aH as hl,aI as yl,aJ as bl,aK as xl,aL as Sl,aM as xr,aN as wl,aO as Cl,aP as $l,aQ as El,G as Sr,aR as Rl,aS as Il,aT as Dl,aU as Ol,aV as na,aW as Pl,aX as ye,H as St,aY as Tl,A as Fe,aZ as et,a_ as Sn,j as Ml,a$ as Fl,g as Al,b0 as Vl,h as Bl,b1 as Ll,B as Xt,b2 as Nl,b3 as jl,b4 as kl,b5 as Ul,b6 as mo,b7 as Gl,b8 as zl,o as $,b9 as Hl,ba as _l,bb as oa,bc as Kl,bd as Wl,be as Xl,bf as Yl,bg as ql,k as G,bh as Ql,bi as Jl,C as _e,K as ne,N as Zl,bj as ei,J as ho,bk as ti,bl as ni,bm as oi,bn as ri,bo as ai,bp as si,bq as li,br as ra,bs as ii,bt as ui,bu as di,t as W,bv as ci,bw as fi,bx as pi,by as gi,I as Yt,bz as vi,bA as mi,bB as hi,u as f,bC as Mt,bD as yi,bE as bi,bF as xi,bG as Si,bH as wi,bI as Ci,bJ as $i,bK as Ei,bL as Ri,bM as Ii,bN as on,bO as Di,bP as Oi,O as pn,x as We,bQ as aa,bR as Pi,bS as Ti,f as Xe,e as sa,bT as Mi,bU as Fi,bV as Ai,w as C,bW as Vi,v as Ae,E as kn,bX as Bi,s as Ft,bY as Li,M as ft,_ as la,X as yo,z as ia,bZ as Ni,b_ as ji,y as ki,Q as Ui}from"./entry.Dw2909n2.js";import{u as Gi}from"./useAgentEditorStore.C_-cPj_T.js";import{_ as ua}from"./Switch.vue.Dv3TmH1w.js";import{S as da}from"./settings.DdVzARvN.js";import{T as ca,_ as bo,a as xo,b as So,c as wo,d as wr,M as zi}from"./SheetClose.vue.BbSP_uPD.js";import{P as Co}from"./plus.DTMN2fIW.js";import{S as In}from"./search.DVEG5Gql.js";import{L as qt}from"./loader-2.D-f1OOw-.js";import{A as fa}from"./alert-circle.CFB8cae4.js";import{W as Hi,q as _i,U as Ki,H as Wi,j as Xi}from"./index.DT79k1l5.js";import{T as gn}from"./trash-2.Dv1Ml6au.js";import{u as $o,c as rn,a as Ge,P as Bt,g as jn,b as io,D as pa,F as ga,d as Un,e as va,f as Cr,h as ma,T as ha,i as Eo,j as ya,k as Yi,E as qi,l as Qi,m as Ji,n as Zi,o as Br,p as eu,q as tu,r as nu,s as ou,t as ru,v as Et,w as dt,x as mn}from"./utils.D-sPm7x9.js";import{r as Rt}from"./index.0dLU0aXR.js";import{C as au}from"./chevron-down.8AIWZq2w.js";import{E as ba}from"./eye.B5oT6PQ0.js";import{P as Zo}from"./pencil.QlFcg03D.js";import{C as Lr}from"./copy.u-n3Saot.js";import{A as er,C as xa,a as Sa}from"./chevron-right.Dt1o7IKv.js";import{F as su}from"./file-text.DH5BfTvK.js";import{S as lu}from"./sparkles.CVmRtpTC.js";import{C as iu}from"./check-circle.BpTuMu2h.js";import{u as uu}from"./useAgents.B7UkyiZ0.js";import{g as sn}from"./useApiFetch.sBSRwplN.js";import{L as du}from"./link.DpqSbqvX.js";import{D as cu}from"./database.CDLRhh8b.js";import"./useAuth.jgUYoTAC.js";import"./authSessionManager.CAWbIGEs.js";import"./usePermissions.B76kzDEP.js";import"./AuthModal.vue.BSzxuO2s.js";import"./check.CexbSXYH.js";import"./floating-ui.vue.VILNG3-i.js";/**
* vue v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const fu=()=>{},pu=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:bs,BaseTransitionPropsValidators:xs,Comment:Ss,DeprecationTypes:ws,EffectScope:Cs,ErrorCodes:$s,ErrorTypeStrings:Es,Fragment:Ue,KeepAlive:Rs,ReactiveEffect:Is,Static:Ds,Suspense:Os,Teleport:Ps,Text:Ts,TrackOpTypes:Ms,Transition:ta,TransitionGroup:Fs,TriggerOpTypes:As,VueElement:Vs,assertNumber:Bs,callWithAsyncErrorHandling:Ls,callWithErrorHandling:Ns,camelize:js,capitalize:ks,cloneVNode:Us,compatUtils:Gs,compile:fu,computed:xe,createApp:zs,createBlock:Y,createCommentVNode:ue,createElementBlock:M,createElementVNode:v,createHydrationRenderer:Hs,createPropsRestProxy:_s,createRenderer:Ks,createSSRApp:Ws,createSlots:Xs,createStaticVNode:br,createTextVNode:oe,createVNode:w,customRef:Ys,defineAsyncComponent:qs,defineComponent:q,defineCustomElement:Qs,defineEmits:Js,defineExpose:Zs,defineModel:el,defineOptions:tl,defineProps:nl,defineSSRCustomElement:ol,defineSlots:rl,devtools:al,effect:sl,effectScope:ll,getCurrentInstance:il,getCurrentScope:ul,getCurrentWatcher:dl,getTransitionRawChildren:cl,guardReactiveProps:rt,h:fl,handleError:pl,hasInjectionContext:gl,hydrate:vl,hydrateOnIdle:ml,hydrateOnInteraction:hl,hydrateOnMediaQuery:yl,hydrateOnVisible:bl,initCustomFormatter:xl,initDirectivesForSSR:Sl,inject:xr,isMemoSame:wl,isProxy:Cl,isReactive:$l,isReadonly:El,isRef:Sr,isRuntimeOnly:Rl,isShallow:Il,isVNode:Dl,markRaw:Ol,mergeDefaults:na,mergeModels:Pl,mergeProps:ye,nextTick:St,nodeOps:Tl,normalizeClass:Fe,normalizeProps:et,normalizeStyle:Sn,onActivated:Ml,onBeforeMount:Fl,onBeforeUnmount:Al,onBeforeUpdate:Vl,onDeactivated:Bl,onErrorCaptured:Ll,onMounted:Xt,onRenderTracked:Nl,onRenderTriggered:jl,onScopeDispose:kl,onServerPrefetch:Ul,onUnmounted:mo,onUpdated:Gl,onWatcherCleanup:zl,openBlock:$,patchProp:Hl,popScopeId:_l,provide:oa,proxyRefs:Kl,pushScopeId:Wl,queuePostFlushCb:Xl,reactive:Yl,readonly:ql,ref:G,registerRuntimeCompiler:Ql,render:Jl,renderList:_e,renderSlot:ne,resolveComponent:Zl,resolveDirective:ei,resolveDynamicComponent:ho,resolveFilter:ti,resolveTransitionHooks:ni,setBlockTracking:oi,setDevtoolsHook:ri,setTransitionHooks:ai,shallowReactive:si,shallowReadonly:li,shallowRef:ra,ssrContextKey:ii,ssrUtils:ui,stop:di,toDisplayString:W,toHandlerKey:ci,toHandlers:fi,toRaw:pi,toRef:gi,toRefs:Yt,toValue:vi,transformVNodeArgs:mi,triggerRef:hi,unref:f,useAttrs:Mt,useCssModule:yi,useCssVars:bi,useHost:xi,useId:Si,useModel:wi,useSSRContext:Ci,useShadowRoot:$i,useSlots:Ei,useTemplateRef:Ri,useTransitionState:Ii,vModelCheckbox:on,vModelDynamic:Di,vModelRadio:Oi,vModelSelect:pn,vModelText:We,vShow:aa,version:Pi,warn:Ti,watch:Xe,watchEffect:sa,watchPostEffect:Mi,watchSyncEffect:Fi,withAsyncContext:Ai,withCtx:C,withDefaults:Vi,withDirectives:Ae,withKeys:kn,withMemo:Bi,withModifiers:Ft,withScopeId:Li},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=ft("AlertTriangleIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=ft("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=ft("BookOpenIcon",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=ft("Building2Icon",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=ft("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=ft("FileSpreadsheetIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=ft("GripVerticalIcon",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=ft("HelpCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=ft("ListIcon",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=ft("MousePointerIcon",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=ft("PackageIcon",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=ft("Redo2Icon",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13",key:"19mnr4"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=ft("RefreshCwIcon",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=ft("Undo2Icon",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=ft("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Cu={class:"flex items-center gap-1 border-b border-slate-200 mb-6"},$u=["onClick"],Eu={class:"flex items-center gap-2"},Ru={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"},Iu=q({__name:"KnowledgeSubTabs",props:{modelValue:{},tabs:{}},emits:["update:modelValue"],setup(e){return(n,t)=>($(),M("div",Cu,[($(!0),M(Ue,null,_e(e.tabs,r=>($(),M("button",{key:r.id,onClick:a=>n.$emit("update:modelValue",r.id),class:Fe(["px-4 py-2.5 text-sm font-medium transition-all relative",[e.modelValue===r.id?"text-indigo-600":"text-slate-500 hover:text-slate-700"]])},[v("span",Eu,[oe(W(r.label)+" ",1),r.count!==void 0?($(),M("span",{key:0,class:Fe(["text-xs px-1.5 py-0.5 rounded-full",[e.modelValue===r.id?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-500"]])},W(r.count),3)):ue("",!0)]),e.modelValue===r.id?($(),M("div",Ru)):ue("",!0)],10,$u))),128))]))}}),Ia=(e,n)=>{const t=Math.abs(e)%100,r=t%10;return t>=11&&t<=19?n[2]:r===1?n[0]:r>=2&&r<=4?n[1]:n[2]},Du={class:"flex items-center justify-between gap-4"},Ou={class:"flex items-center gap-4 min-w-0"},Pu={class:"w-11 h-11 bg-indigo-50 rounded-md flex items-center justify-center flex-shrink-0 group-hover:bg-indigo-100 transition-colors"},Tu={class:"min-w-0"},Mu={class:"font-bold text-slate-900 truncate"},Fu={class:"text-xs text-slate-500 mt-0.5"},Au={class:"font-mono text-slate-400"},Vu=q({__name:"DirectoryCard",props:{directory:{}},emits:["click","toggle","settings"],setup(e,{emit:n}){const t=e,r=xe(()=>({qa:$a,service_catalog:ca,product_catalog:Ea,company_info:wa,custom:tr})[t.directory.template]||tr),a=xe(()=>Ia(t.directory.items_count,["запись","записи","записей"]));return(s,o)=>($(),M("div",{class:"bg-background rounded-md border border-border p-4 hover:border-slate-300 transition-all cursor-pointer group",onClick:o[3]||(o[3]=l=>s.$emit("click"))},[v("div",Du,[v("div",Ou,[v("div",Pu,[($(),Y(ho(r.value),{class:"w-5 h-5 text-indigo-600"}))]),v("div",Tu,[v("h4",Mu,W(e.directory.name),1),v("p",Fu,[v("span",Au,W(e.directory.tool_name),1),o[4]||(o[4]=v("span",{class:"mx-1.5"},"•",-1)),v("span",null,W(e.directory.items_count)+" "+W(a.value),1)])])]),v("div",{class:"flex items-center gap-3",onClick:o[2]||(o[2]=Ft(()=>{},["stop"]))},[v("button",{onClick:o[0]||(o[0]=l=>s.$emit("settings")),class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Настройки"},[w(f(da),{class:"w-4 h-4"})]),w(f(ua),{"model-value":e.directory.is_enabled,"onUpdate:modelValue":o[1]||(o[1]=l=>s.$emit("toggle",l)),title:e.directory.is_enabled?"Выключить":"Включить"},null,8,["model-value","title"])])])]))}}),Bu={class:"space-y-4"},Lu={class:"flex items-center justify-between gap-4"},Nu={key:0,class:"relative"},ju={key:0,class:"flex justify-center py-12"},ku={key:1,class:"bg-red-50 rounded-md border border-red-200 p-8 text-center"},Uu={class:"max-w-md mx-auto"},Gu={class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},zu={class:"text-red-600 mt-2 mb-4"},Hu={key:2,class:"bg-background rounded-md border border-border p-12 text-center"},_u={class:"max-w-md mx-auto"},Ku={class:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"},Wu={key:3,class:"bg-background rounded-md border border-border p-8 text-center"},Xu={class:"text-slate-500"},Yu={key:4,class:"grid gap-3"},qu=q({__name:"DirectoriesList",props:{directories:{},loading:{type:Boolean},error:{}},emits:["create","select","toggle","settings","retry"],setup(e){const n=e,t=G(""),r=xe(()=>{if(!t.value.trim())return n.directories;const a=t.value.toLowerCase();return n.directories.filter(s=>s.name.toLowerCase().includes(a)||s.tool_name.toLowerCase().includes(a))});return(a,s)=>($(),M("div",Bu,[v("div",Lu,[v("button",{onClick:s[0]||(s[0]=o=>a.$emit("create")),class:"flex items-center gap-2 px-5 py-2.5 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 transition-colors"},[w(f(Co),{class:"w-4 h-4"}),s[4]||(s[4]=oe(" Создать справочник ",-1))]),e.directories.length>0?($(),M("div",Nu,[w(f(In),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),Ae(v("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>t.value=o),type:"text",placeholder:"Поиск...",class:"pl-9 pr-4 py-2 w-48 text-sm border border-slate-200 rounded-md bg-slate-50 focus:bg-white focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition-all"},null,512),[[We,t.value]])])):ue("",!0)]),e.loading?($(),M("div",ju,[w(f(qt),{class:"w-8 h-8 animate-spin text-indigo-600"})])):e.error?($(),M("div",ku,[v("div",Uu,[v("div",Gu,[w(f(fa),{class:"h-8 w-8 text-red-500"})]),s[5]||(s[5]=v("h3",{class:"text-lg font-bold text-red-900"},"Ошибка загрузки",-1)),v("p",zu,W(e.error),1),s[6]||(s[6]=v("p",{class:"text-sm text-red-500 mb-4"}," Убедитесь, что API справочников реализован на бэкенде ",-1)),v("button",{onClick:s[2]||(s[2]=o=>a.$emit("retry")),class:"px-5 py-2.5 bg-red-600 text-white rounded-md text-sm font-bold hover:bg-red-700 transition-colors"}," Повторить ")])])):e.directories.length===0?($(),M("div",Hu,[v("div",_u,[v("div",Ku,[w(f(mu),{class:"h-8 w-8 text-slate-400"})]),s[7]||(s[7]=v("h3",{class:"text-lg font-bold text-slate-900"},"Справочников пока нет",-1)),s[8]||(s[8]=v("p",{class:"text-slate-500 mt-2 mb-6"}," Создайте справочник для хранения FAQ, каталога услуг или другой структурированной информации ",-1)),v("button",{onClick:s[3]||(s[3]=o=>a.$emit("create")),class:"px-6 py-3 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 transition-colors"}," Создать справочник ")])])):r.value.length===0?($(),M("div",Wu,[v("p",Xu,'Ничего не найдено по запросу "'+W(t.value)+'"',1)])):($(),M("div",Yu,[($(!0),M(Ue,null,_e(r.value,o=>($(),Y(Vu,{key:o.id,directory:o,onClick:l=>a.$emit("select",o),onToggle:l=>a.$emit("toggle",o.id,l),onSettings:l=>a.$emit("settings",o)},null,8,["directory","onClick","onToggle","onSettings"]))),128))]))]))}});/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function _t(e,n){return typeof e=="function"?e(n):e}function wt(e,n){return t=>{n.setState(r=>({...r,[e]:_t(t,r[e])}))}}function Ro(e){return e instanceof Function}function Qu(e){return Array.isArray(e)&&e.every(n=>typeof n=="number")}function Ju(e,n){const t=[],r=a=>{a.forEach(s=>{t.push(s);const o=n(s);o!=null&&o.length&&r(o)})};return r(e),t}function me(e,n,t){let r=[],a;return s=>{let o;t.key&&t.debug&&(o=Date.now());const l=e(s);if(!(l.length!==r.length||l.some((d,c)=>r[c]!==d)))return a;r=l;let u;if(t.key&&t.debug&&(u=Date.now()),a=n(...l),t==null||t.onChange==null||t.onChange(a),t.key&&t.debug&&t!=null&&t.debug()){const d=Math.round((Date.now()-o)*100)/100,c=Math.round((Date.now()-u)*100)/100,g=c/16,p=(m,h)=>{for(m=String(m);m.length<h;)m=" "+m;return m};console.info(`%c⏱ ${p(c,5)} /${p(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,t==null?void 0:t.key)}return a}}function he(e,n,t,r){return{debug:()=>{var a;return(a=e==null?void 0:e.debugAll)!=null?a:e[n]},key:!1,onChange:r}}function Zu(e,n,t,r){const a=()=>{var o;return(o=s.getValue())!=null?o:e.options.renderFallbackValue},s={id:`${n.id}_${t.id}`,row:n,column:t,getValue:()=>n.getValue(r),renderValue:a,getContext:me(()=>[e,t,n,s],(o,l,i,u)=>({table:o,column:l,row:i,cell:u,getValue:u.getValue,renderValue:u.renderValue}),he(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(s,t,n,e)},{}),s}function ed(e,n,t,r){var a,s;const l={...e._getDefaultColumnDef(),...n},i=l.accessorKey;let u=(a=(s=l.id)!=null?s:i?typeof String.prototype.replaceAll=="function"?i.replaceAll(".","_"):i.replace(/\./g,"_"):void 0)!=null?a:typeof l.header=="string"?l.header:void 0,d;if(l.accessorFn?d=l.accessorFn:i&&(i.includes(".")?d=g=>{let p=g;for(const h of i.split(".")){var m;p=(m=p)==null?void 0:m[h]}return p}:d=g=>g[l.accessorKey]),!u)throw new Error;let c={id:`${String(u)}`,accessorFn:d,parent:r,depth:t,columnDef:l,columns:[],getFlatColumns:me(()=>[!0],()=>{var g;return[c,...(g=c.columns)==null?void 0:g.flatMap(p=>p.getFlatColumns())]},he(e.options,"debugColumns")),getLeafColumns:me(()=>[e._getOrderColumnsFn()],g=>{var p;if((p=c.columns)!=null&&p.length){let m=c.columns.flatMap(h=>h.getLeafColumns());return g(m)}return[c]},he(e.options,"debugColumns"))};for(const g of e._features)g.createColumn==null||g.createColumn(c,e);return c}const st="debugHeaders";function Nr(e,n,t){var r;let s={id:(r=t.id)!=null?r:n.id,column:n,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],l=i=>{i.subHeaders&&i.subHeaders.length&&i.subHeaders.map(l),o.push(i)};return l(s),o},getContext:()=>({table:e,header:s,column:n})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(s,e)}),s}const td={createTable:e=>{e.getHeaderGroups=me(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,t,r,a)=>{var s,o;const l=(s=r==null?void 0:r.map(c=>t.find(g=>g.id===c)).filter(Boolean))!=null?s:[],i=(o=a==null?void 0:a.map(c=>t.find(g=>g.id===c)).filter(Boolean))!=null?o:[],u=t.filter(c=>!(r!=null&&r.includes(c.id))&&!(a!=null&&a.includes(c.id)));return Kn(n,[...l,...u,...i],e)},he(e.options,st)),e.getCenterHeaderGroups=me(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,t,r,a)=>(t=t.filter(s=>!(r!=null&&r.includes(s.id))&&!(a!=null&&a.includes(s.id))),Kn(n,t,e,"center")),he(e.options,st)),e.getLeftHeaderGroups=me(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(n,t,r)=>{var a;const s=(a=r==null?void 0:r.map(o=>t.find(l=>l.id===o)).filter(Boolean))!=null?a:[];return Kn(n,s,e,"left")},he(e.options,st)),e.getRightHeaderGroups=me(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(n,t,r)=>{var a;const s=(a=r==null?void 0:r.map(o=>t.find(l=>l.id===o)).filter(Boolean))!=null?a:[];return Kn(n,s,e,"right")},he(e.options,st)),e.getFooterGroups=me(()=>[e.getHeaderGroups()],n=>[...n].reverse(),he(e.options,st)),e.getLeftFooterGroups=me(()=>[e.getLeftHeaderGroups()],n=>[...n].reverse(),he(e.options,st)),e.getCenterFooterGroups=me(()=>[e.getCenterHeaderGroups()],n=>[...n].reverse(),he(e.options,st)),e.getRightFooterGroups=me(()=>[e.getRightHeaderGroups()],n=>[...n].reverse(),he(e.options,st)),e.getFlatHeaders=me(()=>[e.getHeaderGroups()],n=>n.map(t=>t.headers).flat(),he(e.options,st)),e.getLeftFlatHeaders=me(()=>[e.getLeftHeaderGroups()],n=>n.map(t=>t.headers).flat(),he(e.options,st)),e.getCenterFlatHeaders=me(()=>[e.getCenterHeaderGroups()],n=>n.map(t=>t.headers).flat(),he(e.options,st)),e.getRightFlatHeaders=me(()=>[e.getRightHeaderGroups()],n=>n.map(t=>t.headers).flat(),he(e.options,st)),e.getCenterLeafHeaders=me(()=>[e.getCenterFlatHeaders()],n=>n.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),he(e.options,st)),e.getLeftLeafHeaders=me(()=>[e.getLeftFlatHeaders()],n=>n.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),he(e.options,st)),e.getRightLeafHeaders=me(()=>[e.getRightFlatHeaders()],n=>n.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),he(e.options,st)),e.getLeafHeaders=me(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(n,t,r)=>{var a,s,o,l,i,u;return[...(a=(s=n[0])==null?void 0:s.headers)!=null?a:[],...(o=(l=t[0])==null?void 0:l.headers)!=null?o:[],...(i=(u=r[0])==null?void 0:u.headers)!=null?i:[]].map(d=>d.getLeafHeaders()).flat()},he(e.options,st))}};function Kn(e,n,t,r){var a,s;let o=0;const l=function(g,p){p===void 0&&(p=1),o=Math.max(o,p),g.filter(m=>m.getIsVisible()).forEach(m=>{var h;(h=m.columns)!=null&&h.length&&l(m.columns,p+1)},0)};l(e);let i=[];const u=(g,p)=>{const m={depth:p,id:[r,`${p}`].filter(Boolean).join("_"),headers:[]},h=[];g.forEach(y=>{const b=[...h].reverse()[0],S=y.column.depth===m.depth;let R,O=!1;if(S&&y.column.parent?R=y.column.parent:(R=y.column,O=!0),b&&(b==null?void 0:b.column)===R)b.subHeaders.push(y);else{const T=Nr(t,R,{id:[r,p,R.id,y==null?void 0:y.id].filter(Boolean).join("_"),isPlaceholder:O,placeholderId:O?`${h.filter(V=>V.column===R).length}`:void 0,depth:p,index:h.length});T.subHeaders.push(y),h.push(T)}m.headers.push(y),y.headerGroup=m}),i.push(m),p>0&&u(h,p-1)},d=n.map((g,p)=>Nr(t,g,{depth:o,index:p}));u(d,o-1),i.reverse();const c=g=>g.filter(m=>m.column.getIsVisible()).map(m=>{let h=0,y=0,b=[0];m.subHeaders&&m.subHeaders.length?(b=[],c(m.subHeaders).forEach(R=>{let{colSpan:O,rowSpan:T}=R;h+=O,b.push(T)})):h=1;const S=Math.min(...b);return y=y+S,m.colSpan=h,m.rowSpan=y,{colSpan:h,rowSpan:y}});return c((a=(s=i[0])==null?void 0:s.headers)!=null?a:[]),i}const $r=(e,n,t,r,a,s,o)=>{let l={id:n,index:r,original:t,depth:a,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:i=>{if(l._valuesCache.hasOwnProperty(i))return l._valuesCache[i];const u=e.getColumn(i);if(u!=null&&u.accessorFn)return l._valuesCache[i]=u.accessorFn(l.original,r),l._valuesCache[i]},getUniqueValues:i=>{if(l._uniqueValuesCache.hasOwnProperty(i))return l._uniqueValuesCache[i];const u=e.getColumn(i);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(l._uniqueValuesCache[i]=u.columnDef.getUniqueValues(l.original,r),l._uniqueValuesCache[i]):(l._uniqueValuesCache[i]=[l.getValue(i)],l._uniqueValuesCache[i])},renderValue:i=>{var u;return(u=l.getValue(i))!=null?u:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Ju(l.subRows,i=>i.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let i=[],u=l;for(;;){const d=u.getParentRow();if(!d)break;i.push(d),u=d}return i.reverse()},getAllCells:me(()=>[e.getAllLeafColumns()],i=>i.map(u=>Zu(e,l,u,u.id)),he(e.options,"debugRows")),_getAllCellsByColumnId:me(()=>[l.getAllCells()],i=>i.reduce((u,d)=>(u[d.column.id]=d,u),{}),he(e.options,"debugRows"))};for(let i=0;i<e._features.length;i++){const u=e._features[i];u==null||u.createRow==null||u.createRow(l,e)}return l},nd={createColumn:(e,n)=>{e._getFacetedRowModel=n.options.getFacetedRowModel&&n.options.getFacetedRowModel(n,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():n.getPreFilteredRowModel(),e._getFacetedUniqueValues=n.options.getFacetedUniqueValues&&n.options.getFacetedUniqueValues(n,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=n.options.getFacetedMinMaxValues&&n.options.getFacetedMinMaxValues(n,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Da=(e,n,t)=>{var r,a;const s=t==null||(r=t.toString())==null?void 0:r.toLowerCase();return!!(!((a=e.getValue(n))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(s))};Da.autoRemove=e=>Tt(e);const Oa=(e,n,t)=>{var r;return!!(!((r=e.getValue(n))==null||(r=r.toString())==null)&&r.includes(t))};Oa.autoRemove=e=>Tt(e);const Pa=(e,n,t)=>{var r;return((r=e.getValue(n))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(t==null?void 0:t.toLowerCase())};Pa.autoRemove=e=>Tt(e);const Ta=(e,n,t)=>{var r;return(r=e.getValue(n))==null?void 0:r.includes(t)};Ta.autoRemove=e=>Tt(e);const Ma=(e,n,t)=>!t.some(r=>{var a;return!((a=e.getValue(n))!=null&&a.includes(r))});Ma.autoRemove=e=>Tt(e)||!(e!=null&&e.length);const Fa=(e,n,t)=>t.some(r=>{var a;return(a=e.getValue(n))==null?void 0:a.includes(r)});Fa.autoRemove=e=>Tt(e)||!(e!=null&&e.length);const Aa=(e,n,t)=>e.getValue(n)===t;Aa.autoRemove=e=>Tt(e);const Va=(e,n,t)=>e.getValue(n)==t;Va.autoRemove=e=>Tt(e);const Er=(e,n,t)=>{let[r,a]=t;const s=e.getValue(n);return s>=r&&s<=a};Er.resolveFilterValue=e=>{let[n,t]=e,r=typeof n!="number"?parseFloat(n):n,a=typeof t!="number"?parseFloat(t):t,s=n===null||Number.isNaN(r)?-1/0:r,o=t===null||Number.isNaN(a)?1/0:a;if(s>o){const l=s;s=o,o=l}return[s,o]};Er.autoRemove=e=>Tt(e)||Tt(e[0])&&Tt(e[1]);const Lt={includesString:Da,includesStringSensitive:Oa,equalsString:Pa,arrIncludes:Ta,arrIncludesAll:Ma,arrIncludesSome:Fa,equals:Aa,weakEquals:Va,inNumberRange:Er};function Tt(e){return e==null||e===""}const od={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:wt("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,n)=>{e.getAutoFilterFn=()=>{const t=n.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(e.id);return typeof r=="string"?Lt.includesString:typeof r=="number"?Lt.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Lt.equals:Array.isArray(r)?Lt.arrIncludes:Lt.weakEquals},e.getFilterFn=()=>{var t,r;return Ro(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(t=(r=n.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?t:Lt[e.columnDef.filterFn]},e.getCanFilter=()=>{var t,r,a;return((t=e.columnDef.enableColumnFilter)!=null?t:!0)&&((r=n.options.enableColumnFilters)!=null?r:!0)&&((a=n.options.enableFilters)!=null?a:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var t;return(t=n.getState().columnFilters)==null||(t=t.find(r=>r.id===e.id))==null?void 0:t.value},e.getFilterIndex=()=>{var t,r;return(t=(r=n.getState().columnFilters)==null?void 0:r.findIndex(a=>a.id===e.id))!=null?t:-1},e.setFilterValue=t=>{n.setColumnFilters(r=>{const a=e.getFilterFn(),s=r==null?void 0:r.find(d=>d.id===e.id),o=_t(t,s?s.value:void 0);if(jr(a,o,e)){var l;return(l=r==null?void 0:r.filter(d=>d.id!==e.id))!=null?l:[]}const i={id:e.id,value:o};if(s){var u;return(u=r==null?void 0:r.map(d=>d.id===e.id?i:d))!=null?u:[]}return r!=null&&r.length?[...r,i]:[i]})}},createRow:(e,n)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=n=>{const t=e.getAllLeafColumns(),r=a=>{var s;return(s=_t(n,a))==null?void 0:s.filter(o=>{const l=t.find(i=>i.id===o.id);if(l){const i=l.getFilterFn();if(jr(i,o.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=n=>{var t,r;e.setColumnFilters(n?[]:(t=(r=e.initialState)==null?void 0:r.columnFilters)!=null?t:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function jr(e,n,t){return(e&&e.autoRemove?e.autoRemove(n,t):!1)||typeof n>"u"||typeof n=="string"&&!n}const rd=(e,n,t)=>t.reduce((r,a)=>{const s=a.getValue(e);return r+(typeof s=="number"?s:0)},0),ad=(e,n,t)=>{let r;return t.forEach(a=>{const s=a.getValue(e);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},sd=(e,n,t)=>{let r;return t.forEach(a=>{const s=a.getValue(e);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},ld=(e,n,t)=>{let r,a;return t.forEach(s=>{const o=s.getValue(e);o!=null&&(r===void 0?o>=o&&(r=a=o):(r>o&&(r=o),a<o&&(a=o)))}),[r,a]},id=(e,n)=>{let t=0,r=0;if(n.forEach(a=>{let s=a.getValue(e);s!=null&&(s=+s)>=s&&(++t,r+=s)}),t)return r/t},ud=(e,n)=>{if(!n.length)return;const t=n.map(s=>s.getValue(e));if(!Qu(t))return;if(t.length===1)return t[0];const r=Math.floor(t.length/2),a=t.sort((s,o)=>s-o);return t.length%2!==0?a[r]:(a[r-1]+a[r])/2},dd=(e,n)=>Array.from(new Set(n.map(t=>t.getValue(e))).values()),cd=(e,n)=>new Set(n.map(t=>t.getValue(e))).size,fd=(e,n)=>n.length,Po={sum:rd,min:ad,max:sd,extent:ld,mean:id,median:ud,unique:dd,uniqueCount:cd,count:fd},pd={getDefaultColumnDef:()=>({aggregatedCell:e=>{var n,t;return(n=(t=e.getValue())==null||t.toString==null?void 0:t.toString())!=null?n:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:wt("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,n)=>{e.toggleGrouping=()=>{n.setGrouping(t=>t!=null&&t.includes(e.id)?t.filter(r=>r!==e.id):[...t??[],e.id])},e.getCanGroup=()=>{var t,r;return((t=e.columnDef.enableGrouping)!=null?t:!0)&&((r=n.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var t;return(t=n.getState().grouping)==null?void 0:t.includes(e.id)},e.getGroupedIndex=()=>{var t;return(t=n.getState().grouping)==null?void 0:t.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const t=n.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(e.id);if(typeof r=="number")return Po.sum;if(Object.prototype.toString.call(r)==="[object Date]")return Po.extent},e.getAggregationFn=()=>{var t,r;if(!e)throw new Error;return Ro(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(t=(r=n.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?t:Po[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=n=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(n),e.resetGrouping=n=>{var t,r;e.setGrouping(n?[]:(t=(r=e.initialState)==null?void 0:r.grouping)!=null?t:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,n)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=t=>{if(e._groupingValuesCache.hasOwnProperty(t))return e._groupingValuesCache[t];const r=n.getColumn(t);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[t]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[t]):e.getValue(t)},e._groupingValuesCache={}},createCell:(e,n,t,r)=>{e.getIsGrouped=()=>n.getIsGrouped()&&n.id===t.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&n.getIsGrouped(),e.getIsAggregated=()=>{var a;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((a=t.subRows)!=null&&a.length)}}};function gd(e,n,t){if(!(n!=null&&n.length)||!t)return e;const r=e.filter(s=>!n.includes(s.id));return t==="remove"?r:[...n.map(s=>e.find(o=>o.id===s)).filter(Boolean),...r]}const vd={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:wt("columnOrder",e)}),createColumn:(e,n)=>{e.getIndex=me(t=>[Dn(n,t)],t=>t.findIndex(r=>r.id===e.id),he(n.options,"debugColumns")),e.getIsFirstColumn=t=>{var r;return((r=Dn(n,t)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=t=>{var r;const a=Dn(n,t);return((r=a[a.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=n=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(n),e.resetColumnOrder=n=>{var t;e.setColumnOrder(n?[]:(t=e.initialState.columnOrder)!=null?t:[])},e._getOrderColumnsFn=me(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(n,t,r)=>a=>{let s=[];if(!(n!=null&&n.length))s=a;else{const o=[...n],l=[...a];for(;l.length&&o.length;){const i=o.shift(),u=l.findIndex(d=>d.id===i);u>-1&&s.push(l.splice(u,1)[0])}s=[...s,...l]}return gd(s,t,r)},he(e.options,"debugTable"))}},To=()=>({left:[],right:[]}),md={getInitialState:e=>({columnPinning:To(),...e}),getDefaultOptions:e=>({onColumnPinningChange:wt("columnPinning",e)}),createColumn:(e,n)=>{e.pin=t=>{const r=e.getLeafColumns().map(a=>a.id).filter(Boolean);n.setColumnPinning(a=>{var s,o;if(t==="right"){var l,i;return{left:((l=a==null?void 0:a.left)!=null?l:[]).filter(c=>!(r!=null&&r.includes(c))),right:[...((i=a==null?void 0:a.right)!=null?i:[]).filter(c=>!(r!=null&&r.includes(c))),...r]}}if(t==="left"){var u,d;return{left:[...((u=a==null?void 0:a.left)!=null?u:[]).filter(c=>!(r!=null&&r.includes(c))),...r],right:((d=a==null?void 0:a.right)!=null?d:[]).filter(c=>!(r!=null&&r.includes(c)))}}return{left:((s=a==null?void 0:a.left)!=null?s:[]).filter(c=>!(r!=null&&r.includes(c))),right:((o=a==null?void 0:a.right)!=null?o:[]).filter(c=>!(r!=null&&r.includes(c)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var a,s,o;return((a=r.columnDef.enablePinning)!=null?a:!0)&&((s=(o=n.options.enableColumnPinning)!=null?o:n.options.enablePinning)!=null?s:!0)}),e.getIsPinned=()=>{const t=e.getLeafColumns().map(l=>l.id),{left:r,right:a}=n.getState().columnPinning,s=t.some(l=>r==null?void 0:r.includes(l)),o=t.some(l=>a==null?void 0:a.includes(l));return s?"left":o?"right":!1},e.getPinnedIndex=()=>{var t,r;const a=e.getIsPinned();return a?(t=(r=n.getState().columnPinning)==null||(r=r[a])==null?void 0:r.indexOf(e.id))!=null?t:-1:0}},createRow:(e,n)=>{e.getCenterVisibleCells=me(()=>[e._getAllVisibleCells(),n.getState().columnPinning.left,n.getState().columnPinning.right],(t,r,a)=>{const s=[...r??[],...a??[]];return t.filter(o=>!s.includes(o.column.id))},he(n.options,"debugRows")),e.getLeftVisibleCells=me(()=>[e._getAllVisibleCells(),n.getState().columnPinning.left],(t,r)=>(r??[]).map(s=>t.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),he(n.options,"debugRows")),e.getRightVisibleCells=me(()=>[e._getAllVisibleCells(),n.getState().columnPinning.right],(t,r)=>(r??[]).map(s=>t.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),he(n.options,"debugRows"))},createTable:e=>{e.setColumnPinning=n=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(n),e.resetColumnPinning=n=>{var t,r;return e.setColumnPinning(n?To():(t=(r=e.initialState)==null?void 0:r.columnPinning)!=null?t:To())},e.getIsSomeColumnsPinned=n=>{var t;const r=e.getState().columnPinning;if(!n){var a,s;return!!((a=r.left)!=null&&a.length||(s=r.right)!=null&&s.length)}return!!((t=r[n])!=null&&t.length)},e.getLeftLeafColumns=me(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(n,t)=>(t??[]).map(r=>n.find(a=>a.id===r)).filter(Boolean),he(e.options,"debugColumns")),e.getRightLeafColumns=me(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(n,t)=>(t??[]).map(r=>n.find(a=>a.id===r)).filter(Boolean),he(e.options,"debugColumns")),e.getCenterLeafColumns=me(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,t,r)=>{const a=[...t??[],...r??[]];return n.filter(s=>!a.includes(s.id))},he(e.options,"debugColumns"))}};function hd(e){return e||(typeof document<"u"?document:null)}const Wn={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Mo=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),yd={getDefaultColumnDef:()=>Wn,getInitialState:e=>({columnSizing:{},columnSizingInfo:Mo(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:wt("columnSizing",e),onColumnSizingInfoChange:wt("columnSizingInfo",e)}),createColumn:(e,n)=>{e.getSize=()=>{var t,r,a;const s=n.getState().columnSizing[e.id];return Math.min(Math.max((t=e.columnDef.minSize)!=null?t:Wn.minSize,(r=s??e.columnDef.size)!=null?r:Wn.size),(a=e.columnDef.maxSize)!=null?a:Wn.maxSize)},e.getStart=me(t=>[t,Dn(n,t),n.getState().columnSizing],(t,r)=>r.slice(0,e.getIndex(t)).reduce((a,s)=>a+s.getSize(),0),he(n.options,"debugColumns")),e.getAfter=me(t=>[t,Dn(n,t),n.getState().columnSizing],(t,r)=>r.slice(e.getIndex(t)+1).reduce((a,s)=>a+s.getSize(),0),he(n.options,"debugColumns")),e.resetSize=()=>{n.setColumnSizing(t=>{let{[e.id]:r,...a}=t;return a})},e.getCanResize=()=>{var t,r;return((t=e.columnDef.enableResizing)!=null?t:!0)&&((r=n.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>n.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,n)=>{e.getSize=()=>{let t=0;const r=a=>{if(a.subHeaders.length)a.subHeaders.forEach(r);else{var s;t+=(s=a.column.getSize())!=null?s:0}};return r(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=t=>{const r=n.getColumn(e.column.id),a=r==null?void 0:r.getCanResize();return s=>{if(!r||!a||(s.persist==null||s.persist(),Fo(s)&&s.touches&&s.touches.length>1))return;const o=e.getSize(),l=e?e.getLeafHeaders().map(b=>[b.column.id,b.column.getSize()]):[[r.id,r.getSize()]],i=Fo(s)?Math.round(s.touches[0].clientX):s.clientX,u={},d=(b,S)=>{typeof S=="number"&&(n.setColumnSizingInfo(R=>{var O,T;const V=n.options.columnResizeDirection==="rtl"?-1:1,Z=(S-((O=R==null?void 0:R.startOffset)!=null?O:0))*V,U=Math.max(Z/((T=R==null?void 0:R.startSize)!=null?T:0),-.999999);return R.columnSizingStart.forEach(x=>{let[E,F]=x;u[E]=Math.round(Math.max(F+F*U,0)*100)/100}),{...R,deltaOffset:Z,deltaPercentage:U}}),(n.options.columnResizeMode==="onChange"||b==="end")&&n.setColumnSizing(R=>({...R,...u})))},c=b=>d("move",b),g=b=>{d("end",b),n.setColumnSizingInfo(S=>({...S,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=hd(t),m={moveHandler:b=>c(b.clientX),upHandler:b=>{p==null||p.removeEventListener("mousemove",m.moveHandler),p==null||p.removeEventListener("mouseup",m.upHandler),g(b.clientX)}},h={moveHandler:b=>(b.cancelable&&(b.preventDefault(),b.stopPropagation()),c(b.touches[0].clientX),!1),upHandler:b=>{var S;p==null||p.removeEventListener("touchmove",h.moveHandler),p==null||p.removeEventListener("touchend",h.upHandler),b.cancelable&&(b.preventDefault(),b.stopPropagation()),g((S=b.touches[0])==null?void 0:S.clientX)}},y=bd()?{passive:!1}:!1;Fo(s)?(p==null||p.addEventListener("touchmove",h.moveHandler,y),p==null||p.addEventListener("touchend",h.upHandler,y)):(p==null||p.addEventListener("mousemove",m.moveHandler,y),p==null||p.addEventListener("mouseup",m.upHandler,y)),n.setColumnSizingInfo(b=>({...b,startOffset:i,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=n=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(n),e.setColumnSizingInfo=n=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(n),e.resetColumnSizing=n=>{var t;e.setColumnSizing(n?{}:(t=e.initialState.columnSizing)!=null?t:{})},e.resetHeaderSizeInfo=n=>{var t;e.setColumnSizingInfo(n?Mo():(t=e.initialState.columnSizingInfo)!=null?t:Mo())},e.getTotalSize=()=>{var n,t;return(n=(t=e.getHeaderGroups()[0])==null?void 0:t.headers.reduce((r,a)=>r+a.getSize(),0))!=null?n:0},e.getLeftTotalSize=()=>{var n,t;return(n=(t=e.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((r,a)=>r+a.getSize(),0))!=null?n:0},e.getCenterTotalSize=()=>{var n,t;return(n=(t=e.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((r,a)=>r+a.getSize(),0))!=null?n:0},e.getRightTotalSize=()=>{var n,t;return(n=(t=e.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((r,a)=>r+a.getSize(),0))!=null?n:0}}};let Xn=null;function bd(){if(typeof Xn=="boolean")return Xn;let e=!1;try{const n={get passive(){return e=!0,!1}},t=()=>{};window.addEventListener("test",t,n),window.removeEventListener("test",t)}catch{e=!1}return Xn=e,Xn}function Fo(e){return e.type==="touchstart"}const xd={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:wt("columnVisibility",e)}),createColumn:(e,n)=>{e.toggleVisibility=t=>{e.getCanHide()&&n.setColumnVisibility(r=>({...r,[e.id]:t??!e.getIsVisible()}))},e.getIsVisible=()=>{var t,r;const a=e.columns;return(t=a.length?a.some(s=>s.getIsVisible()):(r=n.getState().columnVisibility)==null?void 0:r[e.id])!=null?t:!0},e.getCanHide=()=>{var t,r;return((t=e.columnDef.enableHiding)!=null?t:!0)&&((r=n.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>t=>{e.toggleVisibility==null||e.toggleVisibility(t.target.checked)}},createRow:(e,n)=>{e._getAllVisibleCells=me(()=>[e.getAllCells(),n.getState().columnVisibility],t=>t.filter(r=>r.column.getIsVisible()),he(n.options,"debugRows")),e.getVisibleCells=me(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(t,r,a)=>[...t,...r,...a],he(n.options,"debugRows"))},createTable:e=>{const n=(t,r)=>me(()=>[r(),r().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),he(e.options,"debugColumns"));e.getVisibleFlatColumns=n("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=n("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=n("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=n("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=n("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var r;e.setColumnVisibility(t?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=t=>{var r;t=(r=t)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((a,s)=>({...a,[s.id]:t||!(s.getCanHide!=null&&s.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;e.toggleAllColumnsVisible((r=t.target)==null?void 0:r.checked)}}};function Dn(e,n){return n?n==="center"?e.getCenterVisibleLeafColumns():n==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Sd={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},wd={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:wt("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:n=>{var t;const r=(t=e.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[n.id])==null?void 0:t.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,n)=>{e.getCanGlobalFilter=()=>{var t,r,a,s;return((t=e.columnDef.enableGlobalFilter)!=null?t:!0)&&((r=n.options.enableGlobalFilter)!=null?r:!0)&&((a=n.options.enableFilters)!=null?a:!0)&&((s=n.options.getColumnCanGlobalFilter==null?void 0:n.options.getColumnCanGlobalFilter(e))!=null?s:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Lt.includesString,e.getGlobalFilterFn=()=>{var n,t;const{globalFilterFn:r}=e.options;return Ro(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(n=(t=e.options.filterFns)==null?void 0:t[r])!=null?n:Lt[r]},e.setGlobalFilter=n=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(n)},e.resetGlobalFilter=n=>{e.setGlobalFilter(n?void 0:e.initialState.globalFilter)}}},Cd={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:wt("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let n=!1,t=!1;e._autoResetExpanded=()=>{var r,a;if(!n){e._queue(()=>{n=!0});return}if((r=(a=e.options.autoResetAll)!=null?a:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(t)return;t=!0,e._queue(()=>{e.resetExpanded(),t=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var a,s;e.setExpanded(r?{}:(a=(s=e.initialState)==null?void 0:s.expanded)!=null?a:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(s=>{const o=s.split(".");r=Math.max(r,o.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,n)=>{e.toggleExpanded=t=>{n.setExpanded(r=>{var a;const s=r===!0?!0:!!(r!=null&&r[e.id]);let o={};if(r===!0?Object.keys(n.getRowModel().rowsById).forEach(l=>{o[l]=!0}):o=r,t=(a=t)!=null?a:!s,!s&&t)return{...o,[e.id]:!0};if(s&&!t){const{[e.id]:l,...i}=o;return i}return r})},e.getIsExpanded=()=>{var t;const r=n.getState().expanded;return!!((t=n.options.getIsRowExpanded==null?void 0:n.options.getIsRowExpanded(e))!=null?t:r===!0||r!=null&&r[e.id])},e.getCanExpand=()=>{var t,r,a;return(t=n.options.getRowCanExpand==null?void 0:n.options.getRowCanExpand(e))!=null?t:((r=n.options.enableExpanding)!=null?r:!0)&&!!((a=e.subRows)!=null&&a.length)},e.getIsAllParentsExpanded=()=>{let t=!0,r=e;for(;t&&r.parentId;)r=n.getRow(r.parentId,!0),t=r.getIsExpanded();return t},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},nr=0,or=10,Ao=()=>({pageIndex:nr,pageSize:or}),$d={getInitialState:e=>({...e,pagination:{...Ao(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:wt("pagination",e)}),createTable:e=>{let n=!1,t=!1;e._autoResetPageIndex=()=>{var r,a;if(!n){e._queue(()=>{n=!0});return}if((r=(a=e.options.autoResetAll)!=null?a:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(t)return;t=!0,e._queue(()=>{e.resetPageIndex(),t=!1})}},e.setPagination=r=>{const a=s=>_t(r,s);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(a)},e.resetPagination=r=>{var a;e.setPagination(r?Ao():(a=e.initialState.pagination)!=null?a:Ao())},e.setPageIndex=r=>{e.setPagination(a=>{let s=_t(r,a.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return s=Math.max(0,Math.min(s,o)),{...a,pageIndex:s}})},e.resetPageIndex=r=>{var a,s;e.setPageIndex(r?nr:(a=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?a:nr)},e.resetPageSize=r=>{var a,s;e.setPageSize(r?or:(a=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?a:or)},e.setPageSize=r=>{e.setPagination(a=>{const s=Math.max(1,_t(r,a.pageSize)),o=a.pageSize*a.pageIndex,l=Math.floor(o/s);return{...a,pageIndex:l,pageSize:s}})},e.setPageCount=r=>e.setPagination(a=>{var s;let o=_t(r,(s=e.options.pageCount)!=null?s:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...a,pageCount:o}}),e.getPageOptions=me(()=>[e.getPageCount()],r=>{let a=[];return r&&r>0&&(a=[...new Array(r)].fill(null).map((s,o)=>o)),a},he(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,a=e.getPageCount();return a===-1?!0:a===0?!1:r<a-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},Vo=()=>({top:[],bottom:[]}),Ed={getInitialState:e=>({rowPinning:Vo(),...e}),getDefaultOptions:e=>({onRowPinningChange:wt("rowPinning",e)}),createRow:(e,n)=>{e.pin=(t,r,a)=>{const s=r?e.getLeafRows().map(i=>{let{id:u}=i;return u}):[],o=a?e.getParentRows().map(i=>{let{id:u}=i;return u}):[],l=new Set([...o,e.id,...s]);n.setRowPinning(i=>{var u,d;if(t==="bottom"){var c,g;return{top:((c=i==null?void 0:i.top)!=null?c:[]).filter(h=>!(l!=null&&l.has(h))),bottom:[...((g=i==null?void 0:i.bottom)!=null?g:[]).filter(h=>!(l!=null&&l.has(h))),...Array.from(l)]}}if(t==="top"){var p,m;return{top:[...((p=i==null?void 0:i.top)!=null?p:[]).filter(h=>!(l!=null&&l.has(h))),...Array.from(l)],bottom:((m=i==null?void 0:i.bottom)!=null?m:[]).filter(h=>!(l!=null&&l.has(h)))}}return{top:((u=i==null?void 0:i.top)!=null?u:[]).filter(h=>!(l!=null&&l.has(h))),bottom:((d=i==null?void 0:i.bottom)!=null?d:[]).filter(h=>!(l!=null&&l.has(h)))}})},e.getCanPin=()=>{var t;const{enableRowPinning:r,enablePinning:a}=n.options;return typeof r=="function"?r(e):(t=r??a)!=null?t:!0},e.getIsPinned=()=>{const t=[e.id],{top:r,bottom:a}=n.getState().rowPinning,s=t.some(l=>r==null?void 0:r.includes(l)),o=t.some(l=>a==null?void 0:a.includes(l));return s?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var t,r;const a=e.getIsPinned();if(!a)return-1;const s=(t=a==="top"?n.getTopRows():n.getBottomRows())==null?void 0:t.map(o=>{let{id:l}=o;return l});return(r=s==null?void 0:s.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=n=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(n),e.resetRowPinning=n=>{var t,r;return e.setRowPinning(n?Vo():(t=(r=e.initialState)==null?void 0:r.rowPinning)!=null?t:Vo())},e.getIsSomeRowsPinned=n=>{var t;const r=e.getState().rowPinning;if(!n){var a,s;return!!((a=r.top)!=null&&a.length||(s=r.bottom)!=null&&s.length)}return!!((t=r[n])!=null&&t.length)},e._getPinnedRows=(n,t,r)=>{var a;return((a=e.options.keepPinnedRows)==null||a?(t??[]).map(o=>{const l=e.getRow(o,!0);return l.getIsAllParentsExpanded()?l:null}):(t??[]).map(o=>n.find(l=>l.id===o))).filter(Boolean).map(o=>({...o,position:r}))},e.getTopRows=me(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(n,t)=>e._getPinnedRows(n,t,"top"),he(e.options,"debugRows")),e.getBottomRows=me(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(n,t)=>e._getPinnedRows(n,t,"bottom"),he(e.options,"debugRows")),e.getCenterRows=me(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(n,t,r)=>{const a=new Set([...t??[],...r??[]]);return n.filter(s=>!a.has(s.id))},he(e.options,"debugRows"))}},Rd={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:wt("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=n=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(n),e.resetRowSelection=n=>{var t;return e.setRowSelection(n?{}:(t=e.initialState.rowSelection)!=null?t:{})},e.toggleAllRowsSelected=n=>{e.setRowSelection(t=>{n=typeof n<"u"?n:!e.getIsAllRowsSelected();const r={...t},a=e.getPreGroupedRowModel().flatRows;return n?a.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):a.forEach(s=>{delete r[s.id]}),r})},e.toggleAllPageRowsSelected=n=>e.setRowSelection(t=>{const r=typeof n<"u"?n:!e.getIsAllPageRowsSelected(),a={...t};return e.getRowModel().rows.forEach(s=>{rr(a,s.id,r,!0,e)}),a}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=me(()=>[e.getState().rowSelection,e.getCoreRowModel()],(n,t)=>Object.keys(n).length?Bo(e,t):{rows:[],flatRows:[],rowsById:{}},he(e.options,"debugTable")),e.getFilteredSelectedRowModel=me(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(n,t)=>Object.keys(n).length?Bo(e,t):{rows:[],flatRows:[],rowsById:{}},he(e.options,"debugTable")),e.getGroupedSelectedRowModel=me(()=>[e.getState().rowSelection,e.getSortedRowModel()],(n,t)=>Object.keys(n).length?Bo(e,t):{rows:[],flatRows:[],rowsById:{}},he(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const n=e.getFilteredRowModel().flatRows,{rowSelection:t}=e.getState();let r=!!(n.length&&Object.keys(t).length);return r&&n.some(a=>a.getCanSelect()&&!t[a.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const n=e.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:t}=e.getState();let r=!!n.length;return r&&n.some(a=>!t[a.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var n;const t=Object.keys((n=e.getState().rowSelection)!=null?n:{}).length;return t>0&&t<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const n=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:n.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>n=>{e.toggleAllRowsSelected(n.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>n=>{e.toggleAllPageRowsSelected(n.target.checked)}},createRow:(e,n)=>{e.toggleSelected=(t,r)=>{const a=e.getIsSelected();n.setRowSelection(s=>{var o;if(t=typeof t<"u"?t:!a,e.getCanSelect()&&a===t)return s;const l={...s};return rr(l,e.id,t,(o=r==null?void 0:r.selectChildren)!=null?o:!0,n),l})},e.getIsSelected=()=>{const{rowSelection:t}=n.getState();return Rr(e,t)},e.getIsSomeSelected=()=>{const{rowSelection:t}=n.getState();return ar(e,t)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=n.getState();return ar(e,t)==="all"},e.getCanSelect=()=>{var t;return typeof n.options.enableRowSelection=="function"?n.options.enableRowSelection(e):(t=n.options.enableRowSelection)!=null?t:!0},e.getCanSelectSubRows=()=>{var t;return typeof n.options.enableSubRowSelection=="function"?n.options.enableSubRowSelection(e):(t=n.options.enableSubRowSelection)!=null?t:!0},e.getCanMultiSelect=()=>{var t;return typeof n.options.enableMultiRowSelection=="function"?n.options.enableMultiRowSelection(e):(t=n.options.enableMultiRowSelection)!=null?t:!0},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return r=>{var a;t&&e.toggleSelected((a=r.target)==null?void 0:a.checked)}}}},rr=(e,n,t,r,a)=>{var s;const o=a.getRow(n,!0);t?(o.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),o.getCanSelect()&&(e[n]=!0)):delete e[n],r&&(s=o.subRows)!=null&&s.length&&o.getCanSelectSubRows()&&o.subRows.forEach(l=>rr(e,l.id,t,r,a))};function Bo(e,n){const t=e.getState().rowSelection,r=[],a={},s=function(o,l){return o.map(i=>{var u;const d=Rr(i,t);if(d&&(r.push(i),a[i.id]=i),(u=i.subRows)!=null&&u.length&&(i={...i,subRows:s(i.subRows)}),d)return i}).filter(Boolean)};return{rows:s(n.rows),flatRows:r,rowsById:a}}function Rr(e,n){var t;return(t=n[e.id])!=null?t:!1}function ar(e,n,t){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let a=!0,s=!1;return e.subRows.forEach(o=>{if(!(s&&!a)&&(o.getCanSelect()&&(Rr(o,n)?s=!0:a=!1),o.subRows&&o.subRows.length)){const l=ar(o,n);l==="all"?s=!0:(l==="some"&&(s=!0),a=!1)}}),a?"all":s?"some":!1}const sr=/([0-9]+)/gm,Id=(e,n,t)=>Ba(Wt(e.getValue(t)).toLowerCase(),Wt(n.getValue(t)).toLowerCase()),Dd=(e,n,t)=>Ba(Wt(e.getValue(t)),Wt(n.getValue(t))),Od=(e,n,t)=>Ir(Wt(e.getValue(t)).toLowerCase(),Wt(n.getValue(t)).toLowerCase()),Pd=(e,n,t)=>Ir(Wt(e.getValue(t)),Wt(n.getValue(t))),Td=(e,n,t)=>{const r=e.getValue(t),a=n.getValue(t);return r>a?1:r<a?-1:0},Md=(e,n,t)=>Ir(e.getValue(t),n.getValue(t));function Ir(e,n){return e===n?0:e>n?1:-1}function Wt(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Ba(e,n){const t=e.split(sr).filter(Boolean),r=n.split(sr).filter(Boolean);for(;t.length&&r.length;){const a=t.shift(),s=r.shift(),o=parseInt(a,10),l=parseInt(s,10),i=[o,l].sort();if(isNaN(i[0])){if(a>s)return 1;if(s>a)return-1;continue}if(isNaN(i[1]))return isNaN(o)?-1:1;if(o>l)return 1;if(l>o)return-1}return t.length-r.length}const hn={alphanumeric:Id,alphanumericCaseSensitive:Dd,text:Od,textCaseSensitive:Pd,datetime:Td,basic:Md},Fd={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:wt("sorting",e),isMultiSortEvent:n=>n.shiftKey}),createColumn:(e,n)=>{e.getAutoSortingFn=()=>{const t=n.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const a of t){const s=a==null?void 0:a.getValue(e.id);if(Object.prototype.toString.call(s)==="[object Date]")return hn.datetime;if(typeof s=="string"&&(r=!0,s.split(sr).length>1))return hn.alphanumeric}return r?hn.text:hn.basic},e.getAutoSortDir=()=>{const t=n.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var t,r;if(!e)throw new Error;return Ro(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(t=(r=n.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?t:hn[e.columnDef.sortingFn]},e.toggleSorting=(t,r)=>{const a=e.getNextSortingOrder(),s=typeof t<"u"&&t!==null;n.setSorting(o=>{const l=o==null?void 0:o.find(p=>p.id===e.id),i=o==null?void 0:o.findIndex(p=>p.id===e.id);let u=[],d,c=s?t:a==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&r?l?d="toggle":d="add":o!=null&&o.length&&i!==o.length-1?d="replace":l?d="toggle":d="replace",d==="toggle"&&(s||a||(d="remove")),d==="add"){var g;u=[...o,{id:e.id,desc:c}],u.splice(0,u.length-((g=n.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else d==="toggle"?u=o.map(p=>p.id===e.id?{...p,desc:c}:p):d==="remove"?u=o.filter(p=>p.id!==e.id):u=[{id:e.id,desc:c}];return u})},e.getFirstSortDir=()=>{var t,r;return((t=(r=e.columnDef.sortDescFirst)!=null?r:n.options.sortDescFirst)!=null?t:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=t=>{var r,a;const s=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==s&&((r=n.options.enableSortingRemoval)==null||r)&&(!(t&&(a=n.options.enableMultiRemove)!=null)||a)?!1:o==="desc"?"asc":"desc":s},e.getCanSort=()=>{var t,r;return((t=e.columnDef.enableSorting)!=null?t:!0)&&((r=n.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var t,r;return(t=(r=e.columnDef.enableMultiSort)!=null?r:n.options.enableMultiSort)!=null?t:!!e.accessorFn},e.getIsSorted=()=>{var t;const r=(t=n.getState().sorting)==null?void 0:t.find(a=>a.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var t,r;return(t=(r=n.getState().sorting)==null?void 0:r.findIndex(a=>a.id===e.id))!=null?t:-1},e.clearSorting=()=>{n.setSorting(t=>t!=null&&t.length?t.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const t=e.getCanSort();return r=>{t&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?n.options.isMultiSortEvent==null?void 0:n.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=n=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(n),e.resetSorting=n=>{var t,r;e.setSorting(n?[]:(t=(r=e.initialState)==null?void 0:r.sorting)!=null?t:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Ad=[td,xd,vd,md,nd,od,Sd,wd,Fd,pd,Cd,$d,Ed,Rd,yd];function Vd(e){var n,t;const r=[...Ad,...(n=e._features)!=null?n:[]];let a={_features:r};const s=a._features.reduce((g,p)=>Object.assign(g,p.getDefaultOptions==null?void 0:p.getDefaultOptions(a)),{}),o=g=>a.options.mergeOptions?a.options.mergeOptions(s,g):{...s,...g};let i={...{},...(t=e.initialState)!=null?t:{}};a._features.forEach(g=>{var p;i=(p=g.getInitialState==null?void 0:g.getInitialState(i))!=null?p:i});const u=[];let d=!1;const c={_features:r,options:{...s,...e},initialState:i,_queue:g=>{u.push(g),d||(d=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();d=!1}).catch(p=>setTimeout(()=>{throw p})))},reset:()=>{a.setState(a.initialState)},setOptions:g=>{const p=_t(g,a.options);a.options=o(p)},getState:()=>a.options.state,setState:g=>{a.options.onStateChange==null||a.options.onStateChange(g)},_getRowId:(g,p,m)=>{var h;return(h=a.options.getRowId==null?void 0:a.options.getRowId(g,p,m))!=null?h:`${m?[m.id,p].join("."):p}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(g,p)=>{let m=(p?a.getPrePaginationRowModel():a.getRowModel()).rowsById[g];if(!m&&(m=a.getCoreRowModel().rowsById[g],!m))throw new Error;return m},_getDefaultColumnDef:me(()=>[a.options.defaultColumn],g=>{var p;return g=(p=g)!=null?p:{},{header:m=>{const h=m.header.column.columnDef;return h.accessorKey?h.accessorKey:h.accessorFn?h.id:null},cell:m=>{var h,y;return(h=(y=m.renderValue())==null||y.toString==null?void 0:y.toString())!=null?h:null},...a._features.reduce((m,h)=>Object.assign(m,h.getDefaultColumnDef==null?void 0:h.getDefaultColumnDef()),{}),...g}},he(e,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:me(()=>[a._getColumnDefs()],g=>{const p=function(m,h,y){return y===void 0&&(y=0),m.map(b=>{const S=ed(a,b,y,h),R=b;return S.columns=R.columns?p(R.columns,S,y+1):[],S})};return p(g)},he(e,"debugColumns")),getAllFlatColumns:me(()=>[a.getAllColumns()],g=>g.flatMap(p=>p.getFlatColumns()),he(e,"debugColumns")),_getAllFlatColumnsById:me(()=>[a.getAllFlatColumns()],g=>g.reduce((p,m)=>(p[m.id]=m,p),{}),he(e,"debugColumns")),getAllLeafColumns:me(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(g,p)=>{let m=g.flatMap(h=>h.getLeafColumns());return p(m)},he(e,"debugColumns")),getColumn:g=>a._getAllFlatColumnsById()[g]};Object.assign(a,c);for(let g=0;g<a._features.length;g++){const p=a._features[g];p==null||p.createTable==null||p.createTable(a)}return a}function Bd(){return e=>me(()=>[e.options.data],n=>{const t={rows:[],flatRows:[],rowsById:{}},r=function(a,s,o){s===void 0&&(s=0);const l=[];for(let u=0;u<a.length;u++){const d=$r(e,e._getRowId(a[u],u,o),a[u],u,s,void 0,o==null?void 0:o.id);if(t.flatRows.push(d),t.rowsById[d.id]=d,l.push(d),e.options.getSubRows){var i;d.originalSubRows=e.options.getSubRows(a[u],u),(i=d.originalSubRows)!=null&&i.length&&(d.subRows=r(d.originalSubRows,s+1,d))}}return l};return t.rows=r(n),t},he(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Ld(e){const n=[],t=r=>{var a;n.push(r),(a=r.subRows)!=null&&a.length&&r.getIsExpanded()&&r.subRows.forEach(t)};return e.rows.forEach(t),{rows:n,flatRows:e.flatRows,rowsById:e.rowsById}}function Nd(e,n,t){return t.options.filterFromLeafRows?jd(e,n,t):kd(e,n,t)}function jd(e,n,t){var r;const a=[],s={},o=(r=t.options.maxLeafRowFilterDepth)!=null?r:100,l=function(i,u){u===void 0&&(u=0);const d=[];for(let g=0;g<i.length;g++){var c;let p=i[g];const m=$r(t,p.id,p.original,p.index,p.depth,void 0,p.parentId);if(m.columnFilters=p.columnFilters,(c=p.subRows)!=null&&c.length&&u<o){if(m.subRows=l(p.subRows,u+1),p=m,n(p)&&!m.subRows.length){d.push(p),s[p.id]=p,a.push(p);continue}if(n(p)||m.subRows.length){d.push(p),s[p.id]=p,a.push(p);continue}}else p=m,n(p)&&(d.push(p),s[p.id]=p,a.push(p))}return d};return{rows:l(e),flatRows:a,rowsById:s}}function kd(e,n,t){var r;const a=[],s={},o=(r=t.options.maxLeafRowFilterDepth)!=null?r:100,l=function(i,u){u===void 0&&(u=0);const d=[];for(let g=0;g<i.length;g++){let p=i[g];if(n(p)){var c;if((c=p.subRows)!=null&&c.length&&u<o){const h=$r(t,p.id,p.original,p.index,p.depth,void 0,p.parentId);h.subRows=l(p.subRows,u+1),p=h}d.push(p),a.push(p),s[p.id]=p}}return d};return{rows:l(e),flatRows:a,rowsById:s}}function Ud(){return e=>me(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(n,t,r)=>{if(!n.rows.length||!(t!=null&&t.length)&&!r){for(let g=0;g<n.flatRows.length;g++)n.flatRows[g].columnFilters={},n.flatRows[g].columnFiltersMeta={};return n}const a=[],s=[];(t??[]).forEach(g=>{var p;const m=e.getColumn(g.id);if(!m)return;const h=m.getFilterFn();h&&a.push({id:g.id,filterFn:h,resolvedValue:(p=h.resolveFilterValue==null?void 0:h.resolveFilterValue(g.value))!=null?p:g.value})});const o=(t??[]).map(g=>g.id),l=e.getGlobalFilterFn(),i=e.getAllLeafColumns().filter(g=>g.getCanGlobalFilter());r&&l&&i.length&&(o.push("__global__"),i.forEach(g=>{var p;s.push({id:g.id,filterFn:l,resolvedValue:(p=l.resolveFilterValue==null?void 0:l.resolveFilterValue(r))!=null?p:r})}));let u,d;for(let g=0;g<n.flatRows.length;g++){const p=n.flatRows[g];if(p.columnFilters={},a.length)for(let m=0;m<a.length;m++){u=a[m];const h=u.id;p.columnFilters[h]=u.filterFn(p,h,u.resolvedValue,y=>{p.columnFiltersMeta[h]=y})}if(s.length){for(let m=0;m<s.length;m++){d=s[m];const h=d.id;if(d.filterFn(p,h,d.resolvedValue,y=>{p.columnFiltersMeta[h]=y})){p.columnFilters.__global__=!0;break}}p.columnFilters.__global__!==!0&&(p.columnFilters.__global__=!1)}}const c=g=>{for(let p=0;p<o.length;p++)if(g.columnFilters[o[p]]===!1)return!1;return!0};return Nd(n.rows,c,e)},he(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Gd(e){return n=>me(()=>[n.getState().pagination,n.getPrePaginationRowModel(),n.options.paginateExpandedRows?void 0:n.getState().expanded],(t,r)=>{if(!r.rows.length)return r;const{pageSize:a,pageIndex:s}=t;let{rows:o,flatRows:l,rowsById:i}=r;const u=a*s,d=u+a;o=o.slice(u,d);let c;n.options.paginateExpandedRows?c={rows:o,flatRows:l,rowsById:i}:c=Ld({rows:o,flatRows:l,rowsById:i}),c.flatRows=[];const g=p=>{c.flatRows.push(p),p.subRows.length&&p.subRows.forEach(g)};return c.rows.forEach(g),c},he(n.options,"debugTable"))}/**
   * vue-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Yn(){return!0}const zd=Symbol("merge-proxy"),Hd={get(e,n,t){return n===zd?t:e.get(n)},has(e,n){return e.has(n)},set:Yn,deleteProperty:Yn,getOwnPropertyDescriptor(e,n){return{configurable:!0,enumerable:!0,get(){return e.get(n)},set:Yn,deleteProperty:Yn}},ownKeys(e){return e.keys()}};function Lo(e){return"value"in e?e.value:e}function wn(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return new Proxy({get(r){for(let a=n.length-1;a>=0;a--){const s=Lo(n[a])[r];if(s!==void 0)return s}},has(r){for(let a=n.length-1;a>=0;a--)if(r in Lo(n[a]))return!0;return!1},keys(){const r=[];for(let a=0;a<n.length;a++)r.push(...Object.keys(Lo(n[a])));return[...Array.from(new Set(r))]}},Hd)}function kr(e){return wn(e,{data:f(e.data)})}function _d(e){const n=Sr(e.data),t=wn({state:{},onStateChange:()=>{},renderFallbackValue:null,mergeOptions(s,o){return n?{...s,...o}:wn(s,o)}},n?kr(e):e),r=Vd(t);if(n){const s=ra(e.data);Xe(s,()=>{r.setState(o=>({...o,data:s.value}))},{immediate:!0})}const a=G(r.initialState);return sa(()=>{r.setOptions(s=>{var o;const l=new Proxy({},{get:(i,u)=>a.value[u]});return wn(s,n?kr(e):e,{state:wn(l,(o=e.state)!=null?o:{}),onStateChange:i=>{i instanceof Function?a.value=i(a.value):a.value=i,e.onStateChange==null||e.onStateChange(i)}})})}),r}const On=q({__name:"Table",props:{wrapperClass:{}},setup(e){const n=Mt();return(t,r)=>($(),M("div",{class:Fe(["overflow-x-auto rounded-lg border border-slate-200 bg-white shadow-sm",e.wrapperClass])},[v("table",ye({class:"min-w-full border-collapse text-left table-fixed"},f(n)),[ne(t.$slots,"default")],16)],2))}}),Pn=q({__name:"TableHeader",props:{className:{}},setup(e){const n=Mt();return(t,r)=>($(),M("thead",ye({class:["bg-slate-50/50 border-b border-slate-200",e.className]},f(n)),[ne(t.$slots,"default")],16))}}),Tn=q({__name:"TableBody",props:{className:{}},setup(e){const n=Mt();return(t,r)=>($(),M("tbody",ye({class:["bg-white",e.className]},f(n)),[ne(t.$slots,"default")],16))}}),it=q({__name:"TableRow",props:{className:{}},setup(e){const n=Mt();return(t,r)=>($(),M("tr",ye({class:["border-b border-slate-100 last:border-b-0 hover:bg-slate-50/50 transition-colors duration-150",e.className]},f(n)),[ne(t.$slots,"default")],16))}}),Je=q({__name:"TableHead",props:{className:{}},setup(e){const n=Mt();return(t,r)=>($(),M("th",ye({class:["px-2 py-2.5 text-[11px] font-bold uppercase tracking-wider text-slate-500 border-r border-slate-200 last:border-r-0 bg-slate-50/50 text-left",e.className],scope:"col"},f(n)),[ne(t.$slots,"default")],16))}}),Re=q({__name:"TableCell",props:{className:{}},setup(e){const n=Mt();return(t,r)=>($(),M("td",ye({class:["px-2 py-2 text-sm text-slate-600 border-r border-slate-100 last:border-r-0 align-top text-left",e.className]},f(n)),[ne(t.$slots,"default")],16))}}),lr=q({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(e){const n=e;return(t,r)=>($(),Y(f(Hi),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),ir=q({__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{default:"right"},sideOffset:{default:8},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},class:{}},setup(e){const n=e,t=xe(()=>{const{class:r,...a}=n;return a});return(r,a)=>($(),Y(f(_i),null,{default:C(()=>[w(f(Ki),ye(t.value,{class:"z-[9999] overflow-hidden rounded-md bg-white border border-slate-200 px-3 py-1.5 text-sm text-slate-700 shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=right]:slide-in-from-left-2"}),{default:C(()=>[ne(r.$slots,"default")]),_:3},16)]),_:3}))}}),La=q({__name:"TooltipProvider",props:{delayDuration:{default:0},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(e){const n=e;return(t,r)=>($(),Y(f(Wi),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),ur=q({__name:"TooltipTrigger",props:{asChild:{type:Boolean},as:{}},setup(e){const n=e;return(t,r)=>($(),Y(f(Xi),ye(n,{"as-child":""}),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),Kd=["answer","description","info","specs"],Gn=e=>Kd.includes(e),dr=e=>e?/^[a-z][a-z0-9_]*$/.test(e):!0,Na=(e,n,t)=>e?/^[a-z][a-z0-9_]*$/.test(e)?(t?n.filter(a=>a!==t):n).includes(e)?"Такое имя функции уже существует":"":"Только латиница в нижнем регистре, цифры и _":"",Wd=(e,n)=>e==="bool"?"80px":e==="number"?"100px":e==="date"?"120px":Gn(n)?"200px":"140px",Xd=(e,n)=>{if(e==null||e==="")return"";switch(n){case"number":return typeof e=="number"?e.toLocaleString("ru-RU"):String(e);case"date":if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,r,a]=e.split("-");return`${a}.${r}.${t}`}return String(e);case"bool":return e?"Да":"Нет";default:return String(e)}},ja=(e,n)=>({question:"Введите вопрос...",answer:"Введите ответ...",name:"Введите название...",description:"Введите описание...",topic:"Введите тему...",info:"Введите информацию...",specs:"Введите характеристики..."})[e]||`Введите ${n.toLowerCase()}...`,Yd={class:"flex flex-wrap items-center justify-between gap-3 bg-background rounded-md border border-border p-3"},qd={class:"flex items-center gap-2"},Qd=["disabled"],Jd={disabled:"",class:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-colors opacity-50 cursor-not-allowed"},Zd=["disabled"],ec={class:"flex items-center gap-2"},tc={class:"relative"},nc=["value"],oc=q({__name:"DirectoryDetailToolbar",props:{addDisabled:{type:Boolean},hasItems:{type:Boolean},selectedCount:{},searchQuery:{}},emits:["addRow","import","export","deleteSelected","update:searchQuery"],setup(e){return(n,t)=>($(),M("div",Yd,[v("div",qd,[v("button",{onClick:t[0]||(t[0]=r=>n.$emit("addRow")),disabled:e.addDisabled,class:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[w(f(Co),{class:"w-4 h-4"}),t[4]||(t[4]=oe(" Добавить ",-1))],8,Qd),v("button",Jd,[w(f(Ra),{class:"w-4 h-4"}),t[5]||(t[5]=oe(" Загрузить CSV ",-1))]),v("button",{onClick:t[1]||(t[1]=r=>n.$emit("export")),class:Fe(["flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors",{"opacity-50 cursor-not-allowed":!e.hasItems}]),disabled:!e.hasItems},[w(f(hu),{class:"w-4 h-4"}),t[6]||(t[6]=oe(" Экспорт ",-1))],10,Zd)]),v("div",ec,[e.selectedCount>0?($(),M("button",{key:0,onClick:t[2]||(t[2]=r=>n.$emit("deleteSelected")),class:"flex items-center gap-2 px-4 py-2 bg-red-50 border border-red-200 text-red-600 rounded-lg text-sm font-medium hover:bg-red-100 transition-colors"},[w(f(gn),{class:"w-4 h-4"}),oe(" Удалить ("+W(e.selectedCount)+") ",1)])):ue("",!0),v("div",tc,[w(f(In),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),v("input",{value:e.searchQuery,onInput:t[3]||(t[3]=r=>n.$emit("update:searchQuery",r.target.value)),type:"text",placeholder:"Поиск...",class:"pl-9 pr-4 py-2 w-48 text-sm border border-slate-200 rounded-lg bg-slate-50 focus:bg-white focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition-all"},null,40,nc)])])]))}}),rc={key:0,class:"relative"},ac=["value","placeholder"],sc=["value","placeholder"],lc=["value"],ic={key:3,class:"flex items-center gap-2 px-2 py-1.5 cursor-pointer bg-indigo-50/50 rounded"},uc=["checked"],dc={class:"text-xs font-medium text-indigo-700"},cc=["value","placeholder"],fc={key:5,class:"absolute right-2 top-1/2 -translate-y-1/2"},pc={key:0,class:"flex items-center gap-1.5"},gc={key:1,class:"line-clamp-2 leading-tight"},vc=q({__name:"EditableCell",props:{column:{},displayValue:{},modelValue:{},editing:{type:Boolean},saving:{type:Boolean}},emits:["update:modelValue","startEdit","blur","keydown","save"],setup(e,{expose:n}){const t=e,r=G(null),a=xe(()=>Gn(t.column.name)),s=xe(()=>Xd(t.displayValue,t.column.type));return Xe(()=>t.editing,o=>{o&&St(()=>{var i,u,d,c;const l=r.value;l&&(Array.isArray(l)?((i=l[0])==null||i.focus(),(d=(u=l[0])==null?void 0:u.select)==null||d.call(u)):(l.focus(),(c=l.select)==null||c.call(l)))})}),n({inputRef:r}),(o,l)=>e.editing?($(),M("div",rc,[e.column.type==="text"&&a.value?($(),M("textarea",{key:0,ref_key:"inputRef",ref:r,value:e.modelValue,onInput:l[0]||(l[0]=i=>o.$emit("update:modelValue",i.target.value)),placeholder:e.column.label,rows:"3",class:"w-full px-2 py-1.5 text-sm border-2 border-indigo-500 rounded bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-100 resize-none",onBlur:l[1]||(l[1]=i=>o.$emit("blur")),onKeydown:l[2]||(l[2]=i=>o.$emit("keydown",i))},null,40,ac)):e.column.type==="number"?($(),M("input",{key:1,ref_key:"inputRef",ref:r,value:e.modelValue,onInput:l[3]||(l[3]=i=>o.$emit("update:modelValue",Number(i.target.value))),type:"number",step:"any",placeholder:e.column.label,class:"w-full px-2 py-1.5 text-sm border-2 border-indigo-500 rounded bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-100 font-mono",onBlur:l[4]||(l[4]=i=>o.$emit("blur")),onKeydown:l[5]||(l[5]=i=>o.$emit("keydown",i))},null,40,sc)):e.column.type==="date"?($(),M("input",{key:2,ref_key:"inputRef",ref:r,value:e.modelValue,onInput:l[6]||(l[6]=i=>o.$emit("update:modelValue",i.target.value)),type:"date",class:"w-full px-2 py-1.5 text-sm border-2 border-indigo-500 rounded bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-100",onBlur:l[7]||(l[7]=i=>o.$emit("blur")),onKeydown:l[8]||(l[8]=i=>o.$emit("keydown",i))},null,40,lc)):e.column.type==="bool"?($(),M("label",ic,[v("input",{ref_key:"inputRef",ref:r,checked:!!e.modelValue,onChange:l[9]||(l[9]=i=>{o.$emit("update:modelValue",i.target.checked),o.$emit("save")}),type:"checkbox",class:"w-4 h-4 rounded border-indigo-400 text-indigo-600 focus:ring-indigo-500"},null,40,uc),v("span",dc,W(e.modelValue?"Да":"Нет"),1)])):($(),M("input",{key:4,ref_key:"inputRef",ref:r,value:e.modelValue,onInput:l[10]||(l[10]=i=>o.$emit("update:modelValue",i.target.value)),type:"text",placeholder:e.column.label,class:"w-full px-2 py-1.5 text-sm border-2 border-indigo-500 rounded bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-100",onBlur:l[11]||(l[11]=i=>o.$emit("blur")),onKeydown:l[12]||(l[12]=i=>o.$emit("keydown",i))},null,40,cc)),e.saving?($(),M("div",fc,[w(f(qt),{class:"w-4 h-4 animate-spin text-indigo-500"})])):ue("",!0)])):($(),M("div",{key:1,onClick:l[13]||(l[13]=i=>o.$emit("startEdit")),class:Fe(["px-2 py-1.5 text-sm text-slate-700 rounded cursor-pointer hover:bg-slate-100/80 transition-colors min-h-[32px] flex items-center",{"font-mono":e.column.type==="number","text-slate-400 italic":e.displayValue===null||e.displayValue===void 0||e.displayValue===""}])},[e.column.type==="bool"?($(),M("span",pc,[v("span",{class:Fe(["w-3.5 h-3.5 rounded flex items-center justify-center text-white text-[10px]",e.displayValue?"bg-green-500":"bg-slate-200"])},W(e.displayValue?"✓":""),3),v("span",{class:Fe(["text-xs",e.displayValue?"text-green-700 font-medium":"text-slate-400"])},W(e.displayValue?"Да":"Нет"),3)])):($(),M("span",gc,W(s.value||"Пусто"),1))],2))}}),mc=la(vc,[["__scopeId","data-v-242ce9d8"]]),hc=["INPUT","TEXTAREA"];function yc(e,n,t,r={}){if(!n||r.enableIgnoredElement&&hc.includes(n.nodeName))return null;const{arrowKeyOptions:a="both",attributeName:s="[data-reka-collection-item]",itemsArray:o=[],loop:l=!0,dir:i="ltr",preventScroll:u=!0,focus:d=!1}=r,[c,g,p,m,h,y]=[e.key==="ArrowRight",e.key==="ArrowLeft",e.key==="ArrowUp",e.key==="ArrowDown",e.key==="Home",e.key==="End"],b=p||m,S=c||g;if(!h&&!y&&(!b&&!S||a==="vertical"&&S||a==="horizontal"&&b))return null;const R=t?Array.from(t.querySelectorAll(s)):o;if(!R.length)return null;u&&e.preventDefault();let O=null;return S||b?O=ka(R,n,{goForward:b?m:i==="ltr"?c:g,loop:l}):h?O=R.at(0)||null:y&&(O=R.at(-1)||null),d&&(O==null||O.focus()),O}function ka(e,n,t,r=e.length){if(--r===0)return null;const a=e.indexOf(n),s=t.goForward?a+1:a-1;if(!t.loop&&(s<0||s>=e.length))return null;const o=(s+e.length)%e.length,l=e[o];return l?l.hasAttribute("disabled")&&l.getAttribute("disabled")!=="false"?ka(e,l,t,r):l:null}const[jt,bc]=rn("DialogRoot");var xc=q({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(e,{emit:n}){const t=e,a=$o(t,"open",n,{defaultValue:t.defaultOpen,passive:t.open===void 0}),s=G(),o=G(),{modal:l}=Yt(t);return bc({open:a,modal:l,openModal:()=>{a.value=!0},onOpenChange:i=>{a.value=i},onOpenToggle:()=>{a.value=!a.value},contentId:"",titleId:"",descriptionId:"",triggerElement:s,contentElement:o}),(i,u)=>ne(i.$slots,"default",{open:f(a),close:()=>a.value=!1})}}),Sc=xc,wc=q({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const n=e;Ge();const t=jt();return(r,a)=>($(),Y(f(Bt),ye(n,{type:r.as==="button"?"button":void 0,onClick:a[0]||(a[0]=s=>f(t).onOpenChange(!1))}),{default:C(()=>[ne(r.$slots,"default")]),_:3},16,["type"]))}}),Ua=wc;const Cc="menu.itemSelect",cr=["Enter"," "],$c=["ArrowDown","PageUp","Home"],Ga=["ArrowUp","PageDown","End"],Ec=[...$c,...Ga];[...cr],[...cr];function za(e){return e?"open":"closed"}function Rc(e){const n=jn();for(const t of e)if(t===n||(t.focus(),jn()!==n))return}function Ic(e,n){const{x:t,y:r}=e;let a=!1;for(let s=0,o=n.length-1;s<n.length;o=s++){const l=n[s].x,i=n[s].y,u=n[o].x,d=n[o].y;i>r!=d>r&&t<(u-l)*(r-i)/(d-i)+l&&(a=!a)}return a}function Dc(e,n){if(!n)return!1;const t={x:e.clientX,y:e.clientY};return Ic(t,n)}function fr(e){return e.pointerType==="mouse"}var Oc=q({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:n}){const t=e,r=n,a=jt(),{forwardRef:s,currentElement:o}=Ge();return a.titleId||(a.titleId=io(void 0,"reka-dialog-title")),a.descriptionId||(a.descriptionId=io(void 0,"reka-dialog-description")),Xt(()=>{a.contentElement=o,jn()!==document.body&&(a.triggerElement.value=jn())}),(l,i)=>($(),Y(f(ga),{"as-child":"",loop:"",trapped:t.trapFocus,onMountAutoFocus:i[5]||(i[5]=u=>r("openAutoFocus",u)),onUnmountAutoFocus:i[6]||(i[6]=u=>r("closeAutoFocus",u))},{default:C(()=>[w(f(pa),ye({id:f(a).contentId,ref:f(s),as:l.as,"as-child":l.asChild,"disable-outside-pointer-events":l.disableOutsidePointerEvents,role:"dialog","aria-describedby":f(a).descriptionId,"aria-labelledby":f(a).titleId,"data-state":f(za)(f(a).open.value)},l.$attrs,{onDismiss:i[0]||(i[0]=u=>f(a).onOpenChange(!1)),onEscapeKeyDown:i[1]||(i[1]=u=>r("escapeKeyDown",u)),onFocusOutside:i[2]||(i[2]=u=>r("focusOutside",u)),onInteractOutside:i[3]||(i[3]=u=>r("interactOutside",u)),onPointerDownOutside:i[4]||(i[4]=u=>r("pointerDownOutside",u))}),{default:C(()=>[ne(l.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Ha=Oc,Pc=q({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:n}){const t=e,r=n,a=jt(),s=Un(r),{forwardRef:o,currentElement:l}=Ge();return va(l),(i,u)=>($(),Y(Ha,ye({...t,...f(s)},{ref:f(o),"trap-focus":f(a).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:u[0]||(u[0]=d=>{var c;d.defaultPrevented||(d.preventDefault(),(c=f(a).triggerElement.value)==null||c.focus())}),onPointerDownOutside:u[1]||(u[1]=d=>{const c=d.detail.originalEvent,g=c.button===0&&c.ctrlKey===!0;(c.button===2||g)&&d.preventDefault()}),onFocusOutside:u[2]||(u[2]=d=>{d.preventDefault()})}),{default:C(()=>[ne(i.$slots,"default")]),_:3},16,["trap-focus"]))}}),Tc=Pc,Mc=q({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:n}){const t=e,a=Un(n);Ge();const s=jt(),o=G(!1),l=G(!1);return(i,u)=>($(),Y(Ha,ye({...t,...f(a)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:u[0]||(u[0]=d=>{var c;d.defaultPrevented||(o.value||(c=f(s).triggerElement.value)==null||c.focus(),d.preventDefault()),o.value=!1,l.value=!1}),onInteractOutside:u[1]||(u[1]=d=>{var p;d.defaultPrevented||(o.value=!0,d.detail.originalEvent.type==="pointerdown"&&(l.value=!0));const c=d.target;((p=f(s).triggerElement.value)==null?void 0:p.contains(c))&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&l.value&&d.preventDefault()})}),{default:C(()=>[ne(i.$slots,"default")]),_:3},16))}}),Fc=Mc,Ac=q({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:n}){const t=e,r=n,a=jt(),s=Un(r),{forwardRef:o}=Ge();return(l,i)=>($(),Y(f(Cr),{present:l.forceMount||f(a).open.value},{default:C(()=>[f(a).modal.value?($(),Y(Tc,ye({key:0,ref:f(o)},{...t,...f(s),...l.$attrs}),{default:C(()=>[ne(l.$slots,"default")]),_:3},16)):($(),Y(Fc,ye({key:1,ref:f(o)},{...t,...f(s),...l.$attrs}),{default:C(()=>[ne(l.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Vc=Ac,Bc=q({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(e){const n=e;Ge();const t=jt();return(r,a)=>($(),Y(f(Bt),ye(n,{id:f(t).descriptionId}),{default:C(()=>[ne(r.$slots,"default")]),_:3},16,["id"]))}}),Lc=Bc,Nc=q({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const n=jt();return ma(!0),Ge(),(t,r)=>($(),Y(f(Bt),{as:t.as,"as-child":t.asChild,"data-state":f(n).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:C(()=>[ne(t.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),jc=Nc,kc=q({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const n=jt(),{forwardRef:t}=Ge();return(r,a)=>{var s;return(s=f(n))!=null&&s.modal.value?($(),Y(f(Cr),{key:0,present:r.forceMount||f(n).open.value},{default:C(()=>[w(jc,ye(r.$attrs,{ref:f(t),as:r.as,"as-child":r.asChild}),{default:C(()=>[ne(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):ue("v-if",!0)}}}),Uc=kc,Gc=q({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const n=e;return(t,r)=>($(),Y(f(ha),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),zc=Gc,Hc=q({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(e){const n=e,t=jt();return Ge(),(r,a)=>($(),Y(f(Bt),ye(n,{id:f(t).titleId}),{default:C(()=>[ne(r.$slots,"default")]),_:3},16,["id"]))}}),_c=Hc;const[Dy,Kc]=rn("RovingFocusGroup");var Wc=q({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:n,emit:t}){const r=e,a=t,{loop:s,orientation:o,dir:l}=Yt(r),i=Eo(l),u=$o(r,"currentTabStopId",a,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),d=G(!1),c=G(!1),g=G(0),{getItems:p,CollectionSlot:m}=ya({isProvider:!0});function h(b){const S=!c.value;if(b.currentTarget&&b.target===b.currentTarget&&S&&!d.value){const R=new CustomEvent(qi,Qi);if(b.currentTarget.dispatchEvent(R),a("entryFocus",R),!R.defaultPrevented){const O=p().map(x=>x.ref).filter(x=>x.dataset.disabled!==""),T=O.find(x=>x.getAttribute("data-active")===""),V=O.find(x=>x.getAttribute("data-highlighted")===""),Z=O.find(x=>x.id===u.value),U=[T,V,Z,...O].filter(Boolean);Yi(U,r.preventScrollOnEntryFocus)}}c.value=!1}function y(){setTimeout(()=>{c.value=!1},1)}return n({getItems:p}),Kc({loop:s,dir:i,orientation:o,currentTabStopId:u,onItemFocus:b=>{u.value=b},onItemShiftTab:()=>{d.value=!0},onFocusableItemAdd:()=>{g.value++},onFocusableItemRemove:()=>{g.value--}}),(b,S)=>($(),Y(f(m),null,{default:C(()=>[w(f(Bt),{tabindex:d.value||g.value===0?-1:0,"data-orientation":f(o),as:b.as,"as-child":b.asChild,dir:f(i),style:{outline:"none"},onMousedown:S[0]||(S[0]=R=>c.value=!0),onMouseup:y,onFocus:h,onBlur:S[1]||(S[1]=R=>d.value=!1)},{default:C(()=>[ne(b.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Xc=Wc,Yc=q({__name:"MenuAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const n=e;return(t,r)=>($(),Y(f(Ji),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),_a=Yc;function qc(){const e=G(!1);return Xt(()=>{Br("keydown",()=>{e.value=!0},{capture:!0,passive:!0}),Br(["pointerdown","pointermove"],()=>{e.value=!1},{capture:!0,passive:!0})}),e}const Qc=Zi(qc),[Io,Jc]=rn(["MenuRoot","MenuSub"],"MenuContext"),[Dr,Zc]=rn("MenuRoot");var ef=q({__name:"MenuRoot",props:{open:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(e,{emit:n}){const t=e,r=n,{modal:a,dir:s}=Yt(t),o=Eo(s),l=$o(t,"open",r),i=G(),u=Qc();return Jc({open:l,onOpenChange:d=>{l.value=d},content:i,onContentChange:d=>{i.value=d}}),Zc({onClose:()=>{l.value=!1},isUsingKeyboardRef:u,dir:o,modal:a}),(d,c)=>($(),Y(f(eu),null,{default:C(()=>[ne(d.$slots,"default")]),_:3}))}}),Ka=ef;const[Wa,tf]=rn("MenuContent");var nf=q({__name:"MenuContentImpl",props:na({loop:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},disableOutsideScroll:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...ru}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(e,{emit:n}){const t=e,r=n,a=Io(),s=Dr(),{trapFocus:o,disableOutsidePointerEvents:l,loop:i}=Yt(t);tu(),ma(l.value);const u=G(""),d=G(0),c=G(0),g=G(null),p=G("right"),m=G(0),h=G(null),y=G(),{forwardRef:b,currentElement:S}=Ge(),{handleTypeaheadSearch:R}=nu();Xe(S,x=>{a.onContentChange(x)}),mo(()=>{window.clearTimeout(d.value)});function O(x){var F,ae;return p.value===((F=g.value)==null?void 0:F.side)&&Dc(x,(ae=g.value)==null?void 0:ae.area)}async function T(x){var E;r("openAutoFocus",x),!x.defaultPrevented&&(x.preventDefault(),(E=S.value)==null||E.focus({preventScroll:!0}))}function V(x){var ee;if(x.defaultPrevented)return;const F=x.target.closest("[data-reka-menu-content]")===x.currentTarget,ae=x.ctrlKey||x.altKey||x.metaKey,L=x.key.length===1,j=yc(x,jn(),S.value,{loop:i.value,arrowKeyOptions:"vertical",dir:s==null?void 0:s.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(j)return j==null?void 0:j.focus();if(x.code==="Space")return;const H=((ee=y.value)==null?void 0:ee.getItems())??[];if(F&&(x.key==="Tab"&&x.preventDefault(),!ae&&L&&R(x.key,H)),x.target!==S.value||!Ec.includes(x.key))return;x.preventDefault();const N=[...H.map(de=>de.ref)];Ga.includes(x.key)&&N.reverse(),Rc(N)}function Z(x){var E,F;(F=(E=x==null?void 0:x.currentTarget)==null?void 0:E.contains)!=null&&F.call(E,x.target)||(window.clearTimeout(d.value),u.value="")}function U(x){var ae;if(!fr(x))return;const E=x.target,F=m.value!==x.clientX;if((ae=x==null?void 0:x.currentTarget)!=null&&ae.contains(E)&&F){const L=x.clientX>m.value?"right":"left";p.value=L,m.value=x.clientX}}return tf({onItemEnter:x=>!!O(x),onItemLeave:x=>{var E;O(x)||((E=S.value)==null||E.focus(),h.value=null)},onTriggerLeave:x=>!!O(x),searchRef:u,pointerGraceTimerRef:c,onPointerGraceIntentChange:x=>{g.value=x}}),(x,E)=>($(),Y(f(ga),{"as-child":"",trapped:f(o),onMountAutoFocus:T,onUnmountAutoFocus:E[7]||(E[7]=F=>r("closeAutoFocus",F))},{default:C(()=>[w(f(pa),{"as-child":"","disable-outside-pointer-events":f(l),onEscapeKeyDown:E[2]||(E[2]=F=>r("escapeKeyDown",F)),onPointerDownOutside:E[3]||(E[3]=F=>r("pointerDownOutside",F)),onFocusOutside:E[4]||(E[4]=F=>r("focusOutside",F)),onInteractOutside:E[5]||(E[5]=F=>r("interactOutside",F)),onDismiss:E[6]||(E[6]=F=>r("dismiss"))},{default:C(()=>[w(f(Xc),{ref_key:"rovingFocusGroupRef",ref:y,"current-tab-stop-id":h.value,"onUpdate:currentTabStopId":E[0]||(E[0]=F=>h.value=F),"as-child":"",orientation:"vertical",dir:f(s).dir.value,loop:f(i),onEntryFocus:E[1]||(E[1]=F=>{r("entryFocus",F),f(s).isUsingKeyboardRef.value||F.preventDefault()})},{default:C(()=>[w(f(ou),{ref:f(b),role:"menu",as:x.as,"as-child":x.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":f(za)(f(a).open.value),dir:f(s).dir.value,side:x.side,"side-offset":x.sideOffset,align:x.align,"align-offset":x.alignOffset,"avoid-collisions":x.avoidCollisions,"collision-boundary":x.collisionBoundary,"collision-padding":x.collisionPadding,"arrow-padding":x.arrowPadding,"prioritize-position":x.prioritizePosition,"position-strategy":x.positionStrategy,"update-position-strategy":x.updatePositionStrategy,sticky:x.sticky,"hide-when-detached":x.hideWhenDetached,reference:x.reference,onKeydown:V,onBlur:Z,onPointermove:U},{default:C(()=>[ne(x.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),Xa=nf,of=q({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const n=e,t=Wa(),{forwardRef:r}=Ge(),{CollectionItem:a}=ya(),s=G(!1);async function o(i){if(!i.defaultPrevented&&fr(i)){if(n.disabled)t.onItemLeave(i);else if(!t.onItemEnter(i)){const d=i.currentTarget;d==null||d.focus({preventScroll:!0})}}}async function l(i){await St(),!i.defaultPrevented&&fr(i)&&t.onItemLeave(i)}return(i,u)=>($(),Y(f(a),{value:{textValue:i.textValue}},{default:C(()=>[w(f(Bt),ye({ref:f(r),role:"menuitem",tabindex:"-1"},i.$attrs,{as:i.as,"as-child":i.asChild,"aria-disabled":i.disabled||void 0,"data-disabled":i.disabled?"":void 0,"data-highlighted":s.value?"":void 0,onPointermove:o,onPointerleave:l,onFocus:u[0]||(u[0]=async d=>{await St(),!(d.defaultPrevented||i.disabled)&&(s.value=!0)}),onBlur:u[1]||(u[1]=async d=>{await St(),!d.defaultPrevented&&(s.value=!1)})}),{default:C(()=>[ne(i.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),rf=of,af=q({__name:"MenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(e,{emit:n}){const t=e,r=n,{forwardRef:a,currentElement:s}=Ge(),o=Dr(),l=Wa(),i=G(!1);async function u(){const d=s.value;if(!t.disabled&&d){const c=new CustomEvent(Cc,{bubbles:!0,cancelable:!0});r("select",c),await St(),c.defaultPrevented?i.value=!1:o.onClose()}}return(d,c)=>($(),Y(rf,ye(t,{ref:f(a),onClick:u,onPointerdown:c[0]||(c[0]=()=>{i.value=!0}),onPointerup:c[1]||(c[1]=async g=>{var p;await St(),!g.defaultPrevented&&(i.value||(p=g.currentTarget)==null||p.click())}),onKeydown:c[2]||(c[2]=async g=>{const p=f(l).searchRef.value!=="";d.disabled||p&&g.key===" "||f(cr).includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})}),{default:C(()=>[ne(d.$slots,"default")]),_:3},16))}}),Ya=af,sf=q({__name:"MenuRootContentModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(e,{emit:n}){const t=e,r=n,a=Et(t,r),s=Io(),{forwardRef:o,currentElement:l}=Ge();return va(l),(i,u)=>($(),Y(Xa,ye(f(a),{ref:f(o),"trap-focus":f(s).open.value,"disable-outside-pointer-events":f(s).open.value,"disable-outside-scroll":!0,onDismiss:u[0]||(u[0]=d=>f(s).onOpenChange(!1)),onFocusOutside:u[1]||(u[1]=Ft(d=>r("focusOutside",d),["prevent"]))}),{default:C(()=>[ne(i.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),lf=sf,uf=q({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(e,{emit:n}){const a=Et(e,n),s=Io();return(o,l)=>($(),Y(Xa,ye(f(a),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:l[0]||(l[0]=i=>f(s).onOpenChange(!1))}),{default:C(()=>[ne(o.$slots,"default")]),_:3},16))}}),df=uf,cf=q({__name:"MenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(e,{emit:n}){const a=Et(e,n),s=Io(),o=Dr();return(l,i)=>($(),Y(f(Cr),{present:l.forceMount||f(s).open.value},{default:C(()=>[f(o).modal.value?($(),Y(lf,et(ye({key:0},{...l.$attrs,...f(a)})),{default:C(()=>[ne(l.$slots,"default")]),_:3},16)):($(),Y(df,et(ye({key:1},{...l.$attrs,...f(a)})),{default:C(()=>[ne(l.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),qa=cf,ff=q({__name:"MenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(e){const n=e;return(t,r)=>($(),Y(f(Bt),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),Qa=ff,pf=q({__name:"MenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const n=e;return(t,r)=>($(),Y(f(ha),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),Ja=pf,gf=q({__name:"MenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const n=e;return(t,r)=>($(),Y(f(Bt),ye(n,{role:"separator","aria-orientation":"horizontal"}),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),Za=gf;const[es,vf]=rn("ContextMenuRoot");var mf=q({inheritAttrs:!1,__name:"ContextMenuRoot",props:{pressOpenDelay:{type:Number,required:!1,default:700},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(e,{emit:n}){const t=e,r=n,{dir:a,modal:s,pressOpenDelay:o}=Yt(t);Ge();const l=Eo(a),i=G(!1),u=G();return vf({open:i,onOpenChange:d=>{i.value=d},dir:l,modal:s,triggerElement:u,pressOpenDelay:o}),Xe(i,d=>{r("update:open",d)}),(d,c)=>($(),Y(f(Ka),{open:i.value,"onUpdate:open":c[0]||(c[0]=g=>i.value=g),dir:f(l),modal:f(s)},{default:C(()=>[ne(d.$slots,"default")]),_:3},8,["open","dir","modal"]))}}),hf=mf,yf=q({__name:"ContextMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1,default:0},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1,default:!0},collisionBoundary:{type:null,required:!1,default:()=>[]},collisionPadding:{type:[Number,Object],required:!1,default:0},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1,default:"partial"},hideWhenDetached:{type:Boolean,required:!1,default:!1},positionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(e,{emit:n}){const a=Et(e,n);Ge();const s=es(),o=G(!1);return(l,i)=>($(),Y(f(qa),ye(f(a),{side:"right","side-offset":2,align:"start","update-position-strategy":"always",style:{"--reka-context-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-context-menu-content-available-width":"var(--reka-popper-available-width)","--reka-context-menu-content-available-height":"var(--reka-popper-available-height)","--reka-context-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-context-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:i[0]||(i[0]=u=>{!u.defaultPrevented&&o.value&&u.preventDefault(),o.value=!1}),onInteractOutside:i[1]||(i[1]=u=>{u.detail.originalEvent.button===2&&u.target===f(s).triggerElement.value&&u.preventDefault(),!u.defaultPrevented&&!f(s).modal.value&&(o.value=!0)})}),{default:C(()=>[ne(l.$slots,"default")]),_:3},16))}}),bf=yf,xf=q({__name:"ContextMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(e,{emit:n}){const t=e,a=Un(n);return Ge(),(s,o)=>($(),Y(f(Ya),et(rt({...t,...f(a)})),{default:C(()=>[ne(s.$slots,"default")]),_:3},16))}}),Sf=xf,wf=q({__name:"ContextMenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const n=e;return Ge(),(t,r)=>($(),Y(f(Qa),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),Cf=wf,$f=q({__name:"ContextMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const n=e;return(t,r)=>($(),Y(f(Ja),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),Ef=$f,Rf=q({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const n=e;return Ge(),(t,r)=>($(),Y(f(Za),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),If=Rf;function Ur(e){return e.pointerType!=="mouse"}var Df=q({inheritAttrs:!1,__name:"ContextMenuTrigger",props:{disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){const n=e,{disabled:t}=Yt(n),{forwardRef:r,currentElement:a}=Ge(),s=es(),o=G({x:0,y:0}),l=xe(()=>({getBoundingClientRect:()=>({width:0,height:0,left:o.value.x,right:o.value.x,top:o.value.y,bottom:o.value.y,...o.value})})),i=G(0);function u(){window.clearTimeout(i.value)}function d(m){o.value={x:m.clientX,y:m.clientY},s.onOpenChange(!0)}async function c(m){t.value||(await St(),m.defaultPrevented||(u(),d(m),m.preventDefault()))}async function g(m){t.value||(await St(),Ur(m)&&!m.defaultPrevented&&(u(),i.value=window.setTimeout(()=>d(m),s.pressOpenDelay.value)))}async function p(m){t.value||(await St(),Ur(m)&&!m.defaultPrevented&&u())}return Xt(()=>{a.value&&(s.triggerElement.value=a.value)}),(m,h)=>($(),M(Ue,null,[w(f(_a),{as:"template",reference:l.value},null,8,["reference"]),w(f(Bt),ye({ref:f(r),as:m.as,"as-child":m.asChild,"data-state":f(s).open.value?"open":"closed","data-disabled":f(t)?"":void 0,style:{WebkitTouchCallout:"none",pointerEvents:"auto"}},m.$attrs,{onContextmenu:c,onPointerdown:g,onPointermove:p,onPointercancel:p,onPointerup:p}),{default:C(()=>[ne(m.$slots,"default")]),_:3},16,["as","as-child","data-state","data-disabled"])],64))}}),Of=Df;const[ts,Pf]=rn("DropdownMenuRoot");var Tf=q({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(e,{emit:n}){const t=e,r=n;Ge();const a=$o(t,"open",r,{defaultValue:t.defaultOpen,passive:t.open===void 0}),s=G(),{modal:o,dir:l}=Yt(t),i=Eo(l);return Pf({open:a,onOpenChange:u=>{a.value=u},onOpenToggle:()=>{a.value=!a.value},triggerId:"",triggerElement:s,contentId:"",modal:o,dir:i}),(u,d)=>($(),Y(f(Ka),{open:f(a),"onUpdate:open":d[0]||(d[0]=c=>Sr(a)?a.value=c:null),dir:f(i),modal:f(o)},{default:C(()=>[ne(u.$slots,"default",{open:f(a)})]),_:3},8,["open","dir","modal"]))}}),Mf=Tf,Ff=q({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},hideShiftedArrow:{type:Boolean,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(e,{emit:n}){const a=Et(e,n);Ge();const s=ts(),o=G(!1);function l(i){i.defaultPrevented||(o.value||setTimeout(()=>{var u;(u=s.triggerElement.value)==null||u.focus()},0),o.value=!1,i.preventDefault())}return s.contentId||(s.contentId=io(void 0,"reka-dropdown-menu-content")),(i,u)=>{var d;return $(),Y(f(qa),ye(f(a),{id:f(s).contentId,"aria-labelledby":(d=f(s))==null?void 0:d.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:l,onInteractOutside:u[0]||(u[0]=c=>{var h;if(c.defaultPrevented)return;const g=c.detail.originalEvent,p=g.button===0&&g.ctrlKey===!0,m=g.button===2||p;(!f(s).modal.value||m)&&(o.value=!0),(h=f(s).triggerElement.value)!=null&&h.contains(c.target)&&c.preventDefault()})}),{default:C(()=>[ne(i.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),Af=Ff,Vf=q({__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(e,{emit:n}){const t=e,a=Un(n);return Ge(),(s,o)=>($(),Y(f(Ya),et(rt({...t,...f(a)})),{default:C(()=>[ne(s.$slots,"default")]),_:3},16))}}),Bf=Vf,Lf=q({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const n=e;return Ge(),(t,r)=>($(),Y(f(Qa),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),Nf=Lf,jf=q({__name:"DropdownMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const n=e;return(t,r)=>($(),Y(f(Ja),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),kf=jf,Uf=q({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const n=e;return Ge(),(t,r)=>($(),Y(f(Za),et(rt(n)),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),Gf=Uf,zf=q({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const n=e,t=ts(),{forwardRef:r,currentElement:a}=Ge();return Xt(()=>{t.triggerElement=a}),t.triggerId||(t.triggerId=io(void 0,"reka-dropdown-menu-trigger")),(s,o)=>($(),Y(f(_a),{"as-child":""},{default:C(()=>[w(f(Bt),{id:f(t).triggerId,ref:f(r),type:s.as==="button"?"button":void 0,"as-child":n.asChild,as:s.as,"aria-haspopup":"menu","aria-expanded":f(t).open.value,"aria-controls":f(t).open.value?f(t).contentId:void 0,"data-disabled":s.disabled?"":void 0,disabled:s.disabled,"data-state":f(t).open.value?"open":"closed",onClick:o[0]||(o[0]=async l=>{var i;!s.disabled&&l.button===0&&l.ctrlKey===!1&&((i=f(t))==null||i.onOpenToggle(),await St(),f(t).open.value&&l.preventDefault())}),onKeydown:o[1]||(o[1]=kn(l=>{s.disabled||(["Enter"," "].includes(l.key)&&f(t).onOpenToggle(),l.key==="ArrowDown"&&f(t).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())},["enter","space","arrow-down"]))},{default:C(()=>[ne(s.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),Hf=zf;const _f=q({__name:"DropdownMenu",props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(e,{emit:n}){const a=Et(e,n);return(s,o)=>($(),Y(f(Mf),et(rt(f(a))),{default:C(()=>[ne(s.$slots,"default")]),_:3},16))}}),Kf=q({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},sideFlip:{type:Boolean},align:{},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},hideShiftedArrow:{type:Boolean},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(e,{emit:n}){const t=e,r=n,a=Rt(t,"class"),s=Et(a,r);return(o,l)=>($(),Y(f(kf),null,{default:C(()=>[w(f(Af),ye(f(s),{class:f(dt)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t.class)}),{default:C(()=>[ne(o.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),No=q({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(e){const n=e,t=Rt(n,"class"),r=mn(t);return(a,s)=>($(),Y(f(Bf),ye(f(r),{class:f(dt)("relative flex cursor-default select-none items-center rounded-sm gap-2 px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",e.inset&&"pl-8",n.class)}),{default:C(()=>[ne(a.$slots,"default")]),_:3},16,["class"]))}}),Wf=q({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(e){const n=e,t=Rt(n,"class"),r=mn(t);return(a,s)=>($(),Y(f(Nf),ye(f(r),{class:f(dt)("px-2 py-1.5 text-sm font-semibold",e.inset&&"pl-8",n.class)}),{default:C(()=>[ne(a.$slots,"default")]),_:3},16,["class"]))}}),Gr=q({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const n=e,t=Rt(n,"class");return(r,a)=>($(),Y(f(Gf),ye(f(t),{class:f(dt)("-mx-1 my-1 h-px bg-muted",n.class)}),null,16,["class"]))}}),Xf=q({__name:"DropdownMenuShortcut",props:{class:{}},setup(e){const n=e;return(t,r)=>($(),M("span",{class:Fe(f(dt)("ml-auto text-xs tracking-widest opacity-60",n.class))},[ne(t.$slots,"default")],2))}}),Yf=q({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(e){const t=mn(e);return(r,a)=>($(),Y(f(Hf),ye({class:"outline-none"},f(t)),{default:C(()=>[ne(r.$slots,"default")]),_:3},16))}}),qf={class:"select-none truncate flex-1 text-left"},Qf={key:0,class:"text-[10px] text-slate-400 font-mono shrink-0"},Jf={class:"text-xs"},Zf={class:"font-medium"},ep={class:"text-muted-foreground ml-1"},tp={class:"text-xs text-muted-foreground mt-0.5"},np={key:0},op={key:1},rp={class:"font-mono text-slate-400 ml-1 font-normal"},ap=q({__name:"ColumnHeaderDropdown",props:{column:{},isOnlyColumn:{type:Boolean}},emits:["dragstart","edit","hide","delete"],setup(e){const n=e,t={text:"Aa",number:"#",date:"📅",bool:"☑"},r={text:"Текст",number:"Число",date:"Дата",bool:"Да/Нет"},a=xe(()=>t[n.column.type]??n.column.type),s=xe(()=>r[n.column.type]??n.column.type);return(o,l)=>($(),Y(f(_f),null,{default:C(()=>[w(f(La),{"delay-duration":500},{default:C(()=>[w(f(lr),null,{default:C(()=>[w(f(ur),{"as-child":""},{default:C(()=>[w(f(Yf),{"as-child":""},{default:C(()=>[v("div",{class:"flex items-center gap-1 cursor-pointer group hover:bg-slate-50 -mx-2 px-2 py-1 rounded transition-colors w-full",draggable:"true",onDragstart:l[0]||(l[0]=i=>o.$emit("dragstart",i))},[w(f(Ca),{class:"w-3 h-3 text-slate-300 group-hover:text-slate-500 shrink-0"}),v("span",qf,W(e.column.label),1),e.column.type!=="text"?($(),M("span",Qf,W(a.value),1)):ue("",!0),w(f(au),{class:"w-3 h-3 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity shrink-0"})],32)]),_:1})]),_:1}),w(f(ir),{side:"top","side-offset":8},{default:C(()=>[v("p",Jf,[v("span",Zf,W(e.column.label),1),v("span",ep,"("+W(e.column.name)+")",1)]),v("p",tp,[oe(W(s.value)+" ",1),e.column.required?($(),M("span",np," •  обязательное")):ue("",!0),e.column.searchable?($(),M("span",op," •  поиск")):ue("",!0)])]),_:1})]),_:1})]),_:1}),w(f(Kf),{align:"start",class:"w-52"},{default:C(()=>[w(f(Wf),{class:"text-xs"},{default:C(()=>[oe(' Столбец "'+W(e.column.label)+'" ',1),v("span",rp,W(e.column.name),1)]),_:1}),w(f(Gr)),w(f(No),{onClick:l[1]||(l[1]=i=>o.$emit("edit"))},{default:C(()=>[w(f(da),{class:"w-4 h-4 mr-2"}),l[4]||(l[4]=oe(" Настройки столбца ",-1))]),_:1}),w(f(No),{onClick:l[2]||(l[2]=i=>o.$emit("hide"))},{default:C(()=>[w(f(ba),{class:"w-4 h-4 mr-2"}),l[6]||(l[6]=oe(" Скрыть столбец ",-1)),w(f(Xf),null,{default:C(()=>[...l[5]||(l[5]=[oe("H",-1)])]),_:1})]),_:1}),w(f(Gr)),w(f(No),{disabled:e.isOnlyColumn,class:"text-red-600 focus:text-red-600 focus:bg-red-50",onClick:l[3]||(l[3]=i=>o.$emit("delete"))},{default:C(()=>[w(f(gn),{class:"w-4 h-4 mr-2"}),l[7]||(l[7]=oe(" Удалить столбец ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),sp=q({__name:"ContextMenu",props:{pressOpenDelay:{},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(e,{emit:n}){const a=Et(e,n);return(s,o)=>($(),Y(f(hf),et(rt(f(a))),{default:C(()=>[ne(s.$slots,"default")]),_:3},16))}}),lp=q({__name:"ContextMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideFlip:{type:Boolean},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},hideShiftedArrow:{type:Boolean},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(e,{emit:n}){const t=e,r=n,a=Rt(t,"class"),s=Et(a,r);return(o,l)=>($(),Y(f(Ef),null,{default:C(()=>[w(f(bf),ye(f(s),{class:f(dt)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t.class)}),{default:C(()=>[ne(o.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),jo=q({__name:"ContextMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},emits:["select"],setup(e,{emit:n}){const t=e,r=n,a=Rt(t,"class"),s=Et(a,r);return(o,l)=>($(),Y(f(Sf),ye(f(s),{class:f(dt)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.inset&&"pl-8",t.class)}),{default:C(()=>[ne(o.$slots,"default")]),_:3},16,["class"]))}}),ip=q({__name:"ContextMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(e){const n=e,t=Rt(n,"class");return(r,a)=>($(),Y(f(Cf),ye(f(t),{class:f(dt)("px-2 py-1.5 text-sm font-semibold text-foreground",e.inset&&"pl-8",n.class)}),{default:C(()=>[ne(r.$slots,"default")]),_:3},16,["class"]))}}),zr=q({__name:"ContextMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const n=e,t=Rt(n,"class");return(r,a)=>($(),Y(f(If),ye(f(t),{class:f(dt)("-mx-1 my-1 h-px bg-border",n.class)}),null,16,["class"]))}}),ko=q({__name:"ContextMenuShortcut",props:{class:{}},setup(e){const n=e;return(t,r)=>($(),M("span",{class:Fe(f(dt)("ml-auto text-xs tracking-widest text-muted-foreground",n.class))},[ne(t.$slots,"default")],2))}}),up=q({__name:"ContextMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(e){const t=mn(e);return(r,a)=>($(),Y(f(Of),et(rt(f(t))),{default:C(()=>[ne(r.$slots,"default")]),_:3},16))}}),dp=e=>{const{delay:n=500,onLongPress:t}=e,r=G(null),a=G(!1),s=i=>{a.value=!1,r.value=setTimeout(()=>{a.value=!0,t()},n)},o=()=>{r.value&&(clearTimeout(r.value),r.value=null)},l=i=>{a.value&&i.preventDefault(),o(),a.value=!1};return mo(o),{onTouchstart:s,onTouchend:l,onTouchmove:o,onTouchcancel:o,isLongPressing:a}},cp={class:"py-2 space-y-1"},fp=q({__name:"RowContextMenu",emits:["edit","duplicate","delete"],setup(e,{emit:n}){const t=n,r=G(!1),{onTouchstart:a,onTouchend:s,onTouchmove:o,onTouchcancel:l}=dp({delay:500,onLongPress:()=>{r.value=!0}}),i=xe(()=>({onTouchstart:a,onTouchend:s,onTouchmove:o,onTouchcancel:l}));return(u,d)=>($(),M(Ue,null,[w(f(sp),null,{default:C(()=>[w(f(up),{"as-child":""},{default:C(()=>[v("div",ye(i.value,{class:"contents"}),[ne(u.$slots,"default")],16)]),_:3}),w(f(lp),{class:"w-56"},{default:C(()=>[w(f(ip),{class:"text-xs"},{default:C(()=>[...d[7]||(d[7]=[oe("Действия с записью",-1)])]),_:1}),w(f(zr)),w(f(jo),{onClick:d[0]||(d[0]=c=>t("edit"))},{default:C(()=>[w(f(Zo),{class:"w-4 h-4 mr-2"}),d[9]||(d[9]=oe(" Редактировать ",-1)),w(f(ko),null,{default:C(()=>[...d[8]||(d[8]=[oe("Enter",-1)])]),_:1})]),_:1}),w(f(jo),{onClick:d[1]||(d[1]=c=>t("duplicate"))},{default:C(()=>[w(f(Lr),{class:"w-4 h-4 mr-2"}),d[11]||(d[11]=oe(" Дублировать ",-1)),w(f(ko),null,{default:C(()=>[...d[10]||(d[10]=[oe("Ctrl+D",-1)])]),_:1})]),_:1}),w(f(zr)),w(f(jo),{class:"text-red-600 focus:text-red-600 focus:bg-red-50",onClick:d[2]||(d[2]=c=>t("delete"))},{default:C(()=>[w(f(gn),{class:"w-4 h-4 mr-2"}),d[13]||(d[13]=oe(" Удалить ",-1)),w(f(ko),null,{default:C(()=>[...d[12]||(d[12]=[oe("Del",-1)])]),_:1})]),_:1})]),_:1})]),_:3}),w(f(bo),{open:r.value,"onUpdate:open":d[6]||(d[6]=c=>r.value=c)},{default:C(()=>[w(f(xo),{side:"bottom","class-name":"rounded-t-2xl"},{default:C(()=>[w(f(So),null,{default:C(()=>[w(f(wo),{class:"text-sm"},{default:C(()=>[...d[14]||(d[14]=[oe("Действия с записью",-1)])]),_:1})]),_:1}),v("div",cp,[v("button",{onClick:d[3]||(d[3]=c=>{r.value=!1,t("edit")}),class:"flex items-center gap-3 w-full px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 rounded-lg transition-colors"},[w(f(Zo),{class:"w-5 h-5 text-slate-500"}),d[15]||(d[15]=oe(" Редактировать ",-1))]),v("button",{onClick:d[4]||(d[4]=c=>{r.value=!1,t("duplicate")}),class:"flex items-center gap-3 w-full px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 rounded-lg transition-colors"},[w(f(Lr),{class:"w-5 h-5 text-slate-500"}),d[16]||(d[16]=oe(" Дублировать ",-1))]),d[18]||(d[18]=v("div",{class:"border-t border-slate-100 my-1"},null,-1)),v("button",{onClick:d[5]||(d[5]=c=>{r.value=!1,t("delete")}),class:"flex items-center gap-3 w-full px-4 py-3 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors"},[w(f(gn),{class:"w-5 h-5"}),d[17]||(d[17]=oe(" Удалить ",-1))])])]),_:1})]),_:1},8,["open"])],64))}}),pp={class:"flex items-center justify-between"},gp={class:"flex-1 overflow-y-auto p-6 space-y-6"},vp={class:"flex items-center gap-1.5 text-sm font-medium text-slate-700"},mp={key:0,class:"text-red-500 text-xs"},hp={class:"text-xs text-slate-400 font-mono ml-auto"},yp={key:0,class:"mt-1 flex items-center gap-3 cursor-pointer px-3 py-2 rounded-md border border-slate-200 hover:border-slate-300 transition-all"},bp=["checked","onChange"],xp={class:"text-sm text-slate-700"},Sp=["onUpdate:modelValue","placeholder"],wp=["onUpdate:modelValue","placeholder"],Cp=["onUpdate:modelValue"],$p=["onUpdate:modelValue","placeholder"],Ep={key:0,class:"text-center py-8 text-slate-400 text-sm"},Rp={class:"flex-shrink-0 border-t border-slate-200 bg-white px-6 py-3"},Ip={class:"flex items-center justify-between"},Dp={key:0,class:"text-xs text-green-600"},Op={key:1},Pp={class:"flex items-center gap-2"},Tp=["disabled"],Mp=q({__name:"AddRowSheet",props:{open:{type:Boolean},columns:{},saving:{type:Boolean}},emits:["update:open","save"],setup(e,{emit:n}){const t=e,r=n,a=G({}),s=G(0),o=G({}),l=xe(()=>Object.values(a.value).some(y=>y!=null&&y!==""&&y!==!1)),i=y=>Gn(y),u=(y,b)=>ja(y,b),d=(y,b)=>{o.value[y]=b},c=()=>{const y={};t.columns.forEach(b=>{y[b.name]=b.type==="bool"?!1:""}),a.value=y},g=()=>{St(()=>{var b;const y=t.columns.find(S=>S.type!=="bool");y&&o.value[y.name]&&((b=o.value[y.name])==null||b.focus())})},p=()=>{if(!l.value||t.saving)return;const y={};Object.entries(a.value).forEach(([b,S])=>{S!==""&&S!==null&&S!==void 0&&(y[b]=S)}),r("save",y),s.value++,c(),g()},m=()=>{r("update:open",!1)},h=y=>{y.shiftKey||(y.preventDefault(),p())};return Xe(()=>t.open,y=>{y&&(s.value=0,c(),g())}),(y,b)=>($(),Y(f(bo),{open:e.open,"onUpdate:open":b[0]||(b[0]=S=>!S&&m())},{default:C(()=>[w(f(xo),{side:"right","class-name":"max-w-4xl flex flex-col"},{default:C(()=>[w(f(So),null,{default:C(()=>[v("div",pp,[w(f(wo),null,{default:C(()=>[...b[1]||(b[1]=[oe("Новая запись",-1)])]),_:1}),w(f(wr))]),b[2]||(b[2]=v("p",{class:"text-sm text-slate-500 mt-1"}," Заполните поля и нажмите «Сохранить». Форма останется открытой для добавления следующей записи. ",-1))]),_:1}),v("div",gp,[($(!0),M(Ue,null,_e(e.columns,S=>($(),M("div",{key:S.name},[v("label",vp,[oe(W(S.label)+" ",1),S.required?($(),M("span",mp,"*")):ue("",!0),v("span",hp,W(S.name),1)]),S.type==="bool"?($(),M("label",yp,[v("input",{checked:!!a.value[S.name],onChange:R=>a.value[S.name]=R.target.checked,type:"checkbox",class:"w-5 h-5 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,40,bp),v("span",xp,W(a.value[S.name]?"Да":"Нет"),1)])):S.type==="text"&&i(S.name)?Ae(($(),M("textarea",{key:1,ref_for:!0,ref:R=>d(S.name,R),"onUpdate:modelValue":R=>a.value[S.name]=R,placeholder:u(S.name,S.label),rows:"4",class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all resize-none"},null,8,Sp)),[[We,a.value[S.name]]]):S.type==="number"?Ae(($(),M("input",{key:2,ref_for:!0,ref:R=>d(S.name,R),"onUpdate:modelValue":R=>a.value[S.name]=R,type:"number",step:"any",placeholder:u(S.name,S.label),class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 font-mono focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all"},null,8,wp)),[[We,a.value[S.name],void 0,{number:!0}]]):S.type==="date"?Ae(($(),M("input",{key:3,ref_for:!0,ref:R=>d(S.name,R),"onUpdate:modelValue":R=>a.value[S.name]=R,type:"date",class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all"},null,8,Cp)),[[We,a.value[S.name]]]):Ae(($(),M("input",{key:4,ref_for:!0,ref:R=>d(S.name,R),"onUpdate:modelValue":R=>a.value[S.name]=R,type:"text",placeholder:u(S.name,S.label),class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all",onKeydown:kn(h,["enter"])},null,40,$p)),[[We,a.value[S.name]]])]))),128)),e.columns.length===0?($(),M("div",Ep," Нет столбцов. Сначала добавьте столбцы в справочник. ")):ue("",!0)]),v("div",Rp,[v("div",Ip,[s.value>0?($(),M("p",Dp," Добавлено записей за сессию: "+W(s.value),1)):($(),M("span",Op)),v("div",Pp,[v("button",{onClick:m,class:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-md transition-colors"}," Закрыть "),v("button",{onClick:p,class:"px-5 py-2 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5",disabled:!l.value||e.saving},[e.saving?($(),Y(f(qt),{key:0,class:"w-3.5 h-3.5 animate-spin"})):ue("",!0),oe(" "+W(e.saving?"Сохранение...":"Сохранить"),1)],8,Tp)])])])]),_:1})]),_:1},8,["open"]))}}),Fp={class:"flex items-center justify-between"},Ap={class:"flex-1 overflow-y-auto p-6 space-y-6"},Vp={class:"flex items-center gap-1.5 text-sm font-medium text-slate-700"},Bp={key:0,class:"text-red-500 text-xs"},Lp={class:"text-xs text-slate-400 font-mono ml-auto"},Np={key:0,class:"mt-1 flex items-center gap-3 cursor-pointer px-3 py-2 rounded-md border border-slate-200 hover:border-slate-300 transition-all"},jp=["checked","onChange"],kp={class:"text-sm text-slate-700"},Up=["onUpdate:modelValue","placeholder"],Gp=["onUpdate:modelValue","placeholder"],zp=["onUpdate:modelValue"],Hp=["onUpdate:modelValue","placeholder"],_p={key:0,class:"text-center py-8 text-slate-400 text-sm"},Kp={key:1,class:"text-sm text-red-600"},Wp={class:"flex-shrink-0 border-t border-slate-200 bg-white px-6 py-3"},Xp={class:"flex items-center justify-end gap-2"},Yp=["disabled"],qp=q({__name:"EditRowSheet",props:{open:{type:Boolean},columns:{},item:{},saving:{type:Boolean}},emits:["update:open","save"],setup(e,{expose:n,emit:t}){const r=e,a=t,s=G({}),o=G({}),l=G(""),i=xe(()=>r.columns.some(h=>{const y=s.value[h.name]??"",b=o.value[h.name]??"";return String(y)!==String(b)})),u=h=>Gn(h),d=(h,y)=>ja(h,y),c=()=>{if(!r.item)return;const h={},y={};r.columns.forEach(b=>{const S=r.item.data[b.name];h[b.name]=S??(b.type==="bool"?!1:""),y[b.name]=S??(b.type==="bool"?!1:"")}),s.value=h,o.value=y},g=()=>{if(!i.value||r.saving||!r.item)return;l.value="";const h={};r.columns.forEach(y=>{const b=s.value[y.name];h[y.name]=b===""?null:b}),a("save",r.item.id,h)},p=()=>{l.value="",a("update:open",!1)},m=h=>{h.shiftKey||(h.preventDefault(),g())};return Xe(()=>r.open,h=>{h&&r.item&&(l.value="",c())}),n({setError:h=>{l.value=h}}),(h,y)=>($(),Y(f(bo),{open:e.open,"onUpdate:open":y[0]||(y[0]=b=>!b&&p())},{default:C(()=>[w(f(xo),{side:"right","class-name":"max-w-4xl flex flex-col"},{default:C(()=>[w(f(So),null,{default:C(()=>[v("div",Fp,[w(f(wo),null,{default:C(()=>[...y[1]||(y[1]=[oe("Редактирование записи",-1)])]),_:1}),w(f(wr))])]),_:1}),v("div",Ap,[($(!0),M(Ue,null,_e(e.columns,b=>($(),M("div",{key:b.name},[v("label",Vp,[oe(W(b.label)+" ",1),b.required?($(),M("span",Bp,"*")):ue("",!0),v("span",Lp,W(b.name),1)]),b.type==="bool"?($(),M("label",Np,[v("input",{checked:!!s.value[b.name],onChange:S=>s.value[b.name]=S.target.checked,type:"checkbox",class:"w-5 h-5 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,40,jp),v("span",kp,W(s.value[b.name]?"Да":"Нет"),1)])):b.type==="text"&&u(b.name)?Ae(($(),M("textarea",{key:1,"onUpdate:modelValue":S=>s.value[b.name]=S,placeholder:d(b.name,b.label),rows:"4",class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all resize-none"},null,8,Up)),[[We,s.value[b.name]]]):b.type==="number"?Ae(($(),M("input",{key:2,"onUpdate:modelValue":S=>s.value[b.name]=S,type:"number",step:"any",placeholder:d(b.name,b.label),class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 font-mono focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all"},null,8,Gp)),[[We,s.value[b.name],void 0,{number:!0}]]):b.type==="date"?Ae(($(),M("input",{key:3,"onUpdate:modelValue":S=>s.value[b.name]=S,type:"date",class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all"},null,8,zp)),[[We,s.value[b.name]]]):Ae(($(),M("input",{key:4,"onUpdate:modelValue":S=>s.value[b.name]=S,type:"text",placeholder:d(b.name,b.label),class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all",onKeydown:kn(m,["enter"])},null,40,Hp)),[[We,s.value[b.name]]])]))),128)),e.columns.length===0?($(),M("div",_p," Нет столбцов для редактирования. ")):ue("",!0),l.value?($(),M("p",Kp,W(l.value),1)):ue("",!0)]),v("div",Wp,[v("div",Xp,[v("button",{onClick:p,class:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-md transition-colors"}," Отмена "),v("button",{onClick:g,class:"px-5 py-2 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5",disabled:!i.value||e.saving},[e.saving?($(),Y(f(qt),{key:0,class:"w-3.5 h-3.5 animate-spin"})):ue("",!0),oe(" "+W(e.saving?"Сохранение...":"Сохранить"),1)],8,Yp)])])]),_:1})]),_:1},8,["open"]))}}),Qp={class:"space-y-4"},Jp={class:"flex items-center justify-between gap-4"},Zp={class:"flex items-center gap-3 min-w-0"},eg={class:"min-w-0"},tg={class:"text-lg font-bold text-slate-900 truncate"},ng={class:"text-xs text-slate-500"},og={class:"font-mono text-slate-400"},rg={key:0,class:"flex items-center justify-between gap-4 flex-wrap"},ag={class:"text-xs text-slate-400 flex items-center gap-1.5"},sg={class:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-slate-100 rounded text-slate-500"},lg={class:"flex items-center gap-2"},ig=["disabled"],ug=["disabled"],dg={key:1,class:"flex justify-center py-12"},cg={key:2,class:"shadow-sm"},fg={class:"text-xs font-semibold text-slate-500 uppercase tracking-wide"},pg={class:"flex flex-col items-center"},gg={class:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center mb-3"},vg={key:3,class:"bg-background rounded-md border border-border p-8 text-center"},mg={class:"text-slate-500"},hg={key:4,class:"shadow-sm"},yg={class:"flex items-center justify-center gap-1 h-full"},bg=["checked","indeterminate"],xg=["onMousedown","onTouchstart","onDblclick"],Sg={class:"flex justify-center"},wg={class:"flex items-center justify-center gap-1 h-full"},Cg=["onClick"],$g=["checked","onChange"],Eg={class:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},Rg=["onClick"],Ig={key:0,class:"flex items-center justify-between px-4 py-3 border-t border-slate-100 bg-slate-50"},Dg={class:"text-sm text-slate-500"},Og={class:"flex items-center gap-1"},Pg=["disabled"],Tg=["onClick"],Mg=["disabled"],Fg=50,Ag=q({__name:"DirectoryDetail",props:{directory:{},items:{},loading:{type:Boolean},onUpdateItem:{type:Function}},emits:["back","settings","import","export","update","create","delete","deleteSelected","addColumn","deleteColumn","updateColumns"],setup(e,{emit:n}){const t=e,r=n,a=G(null),s=G(""),o=G(""),l=G(!1),i=G(null),u=G([]),d=G([]),c=G(new Set),g=G(!1),p=G(!1),m=G(!1),h=G(null),y=G(!1),b=G(""),S=G({}),R=xe(()=>t.directory.columns||[]),O=xe(()=>R.value.filter(A=>!c.value.has(A.name))),T=G([]),V=G(null),Z=G(null);Xe(()=>t.directory.columns,A=>{if(A&&A.length>0){const k=T.value.filter(ie=>A.some(I=>I.name===ie)),_=A.map(ie=>ie.name).filter(ie=>!k.includes(ie));T.value=[...k,..._]}},{immediate:!0});const U=xe(()=>{const A=O.value;return T.value.length===0?A:T.value.map(k=>A.find(_=>_.name===k)).filter(k=>k!==void 0)}),x=A=>A.type==="bool"?80:A.type==="number"?100:A.type==="date"?120:Gn(A.name)?200:140,E=xe(()=>U.value.map(A=>({id:A.name,accessorFn:k=>k.data[A.name],header:A.label,meta:A,filterFn:"includesString",size:x(A),minSize:40,maxSize:500}))),F=_d({get data(){return t.items},get columns(){return E.value},state:{get globalFilter(){return b.value},get rowSelection(){return S.value}},onGlobalFilterChange:A=>{b.value=typeof A=="function"?A(b.value):A},onRowSelectionChange:A=>{S.value=typeof A=="function"?A(S.value):A},columnResizeMode:"onChange",getCoreRowModel:Bd(),getFilteredRowModel:Ud(),getPaginationRowModel:Gd(),getRowId:A=>A.id,globalFilterFn:(A,k,_)=>{const ie=String(_).toLowerCase();return R.value.some(I=>{const P=A.original.data[I.name];return P&&String(P).toLowerCase().includes(ie)})},initialState:{pagination:{pageSize:10}}}),ae=xe(()=>Object.keys(S.value).filter(A=>S.value[A])),L=xe(()=>Ia(t.directory.items_count,["запись","записи","записей"])),j=A=>Wd(A.type,A.name),H=A=>{var k;return((k=F.getColumn(A))==null?void 0:k.getSize())??140},N=A=>{A.column.resetSize()},ee=xe(()=>{const A=[],k=F.getPageCount(),_=F.getState().pagination.pageIndex+1;if(k<=5)for(let ie=1;ie<=k;ie++)A.push(ie);else _<=3?A.push(1,2,3,4,5):_>=k-2?A.push(k-4,k-3,k-2,k-1,k):A.push(_-2,_-1,_,_+1,_+2);return A}),de=(A,k)=>{V.value=k,A.dataTransfer&&(A.dataTransfer.effectAllowed="move",A.dataTransfer.setData("text/plain",String(k)))},$e=(A,k)=>{A.preventDefault(),A.dataTransfer&&(A.dataTransfer.dropEffect="move")},Be=()=>{},Te=(A,k)=>{if(A.preventDefault(),V.value===null||V.value===k){De();return}const _=[...T.value],[ie]=_.splice(V.value,1);_.splice(k,0,ie),T.value=_,De()},De=()=>{V.value=null,Z.value=null},Q=()=>{a.value&&X(),g.value=!0},J=async A=>{if(!p.value){p.value=!0;try{r("create",A),await new Promise(k=>setTimeout(k,200))}finally{p.value=!1}}},fe=A=>{a.value&&X(),h.value=A,m.value=!0},ce=async(A,k)=>{y.value=!0;try{t.onUpdateItem?await t.onUpdateItem(A,k):r("update",A,k),m.value=!1}finally{y.value=!1}},Ee=(A,k)=>{var _,ie;return((_=a.value)==null?void 0:_.itemId)===A&&((ie=a.value)==null?void 0:ie.colName)===k},je=(A,k)=>{i.value&&(clearTimeout(i.value),i.value=null),a.value&&D(!0),a.value={itemId:A.id,colName:k.name};const _=A.data[k.name];s.value=_??"",o.value=_??""},X=()=>{a.value=null,s.value="",o.value=""},D=async(A=!1)=>{if(!a.value||l.value)return;const{itemId:k,colName:_}=a.value,ie=s.value;if(ie===o.value){A&&X();return}const I=t.items.find(re=>re.id===k);if(!I){A&&X();return}const P=ie===""?null:ie,B={...I.data,[_]:P},z=o.value;l.value=!0;try{t.onUpdateItem?await t.onUpdateItem(k,B):r("update",k,B),gt({itemId:k,colName:_,oldValue:z,newValue:P,timestamp:Date.now()})}finally{l.value=!1}A&&X()},K=()=>{i.value&&clearTimeout(i.value);const A=a.value?{...a.value}:null;i.value=setTimeout(()=>{i.value=null,a.value&&A&&a.value.itemId===A.itemId&&a.value.colName===A.colName&&D(!0)},150)},Ne=async(A,k,_,ie,I)=>{if(A.key==="Escape"){A.preventDefault(),X();return}if(A.key==="Enter"&&!A.shiftKey){A.preventDefault(),await D(!0);return}A.key==="Tab"&&(A.preventDefault(),await D(!0),St(()=>{const P=U.value,B=F.getRowModel().rows;let z=A.shiftKey?I-1:I+1,re=ie;if(z>=P.length?(z=0,re=ie+1):z<0&&(z=P.length-1,re=ie-1),re>=0&&re<B.length){const pe=B[re].original,Se=P[z];pe&&Se&&je(pe,Se)}}))},Ye=A=>{r("settings")},Oe=A=>{c.value.add(A.name)},nt=()=>{c.value.clear()},pt=A=>{R.value.length<=1||r("deleteColumn",A.name)},gt=A=>{u.value.push(A),u.value.length>Fg&&u.value.shift(),d.value=[]},Qt=xe(()=>u.value.length>0),an=xe(()=>d.value.length>0),vt=async()=>{const A=u.value.pop();if(!A)return;d.value.push(A);const k=t.items.find(ie=>ie.id===A.itemId);if(!k)return;const _={...k.data,[A.colName]:A.oldValue};t.onUpdateItem?await t.onUpdateItem(A.itemId,_):r("update",A.itemId,_)},It=async()=>{const A=d.value.pop();if(!A)return;u.value.push(A);const k=t.items.find(ie=>ie.id===A.itemId);if(!k)return;const _={...k.data,[A.colName]:A.newValue};t.onUpdateItem?await t.onUpdateItem(A.itemId,_):r("update",A.itemId,_)},Ut=A=>{const k=U.value[0];k&&je(A,k)},Jt=A=>{r("create",{...A.data})},Gt=A=>{const k=A.ctrlKey||A.metaKey;if(k&&A.key==="z"&&!A.shiftKey){Qt.value&&(A.preventDefault(),vt());return}if(k&&A.key==="z"&&A.shiftKey||k&&A.key==="y"){an.value&&(A.preventDefault(),It());return}if(k&&A.key==="n"&&!g.value&&!a.value){A.preventDefault(),Q();return}if((A.key==="Delete"||A.key==="Backspace")&&!a.value&&!g.value){const _=ae.value;_.length>0&&(A.preventDefault(),r("deleteSelected",_))}};return Xt(()=>{window.addEventListener("keydown",Gt)}),mo(()=>{window.removeEventListener("keydown",Gt),i.value&&clearTimeout(i.value)}),Xe(()=>t.items,()=>{S.value={}},{deep:!0}),Xe(()=>F.getState().pagination.pageIndex,()=>{X()}),(A,k)=>($(),M("div",Qp,[v("div",Jp,[v("div",Zp,[v("button",{onClick:k[0]||(k[0]=_=>A.$emit("back")),class:"flex items-center gap-2 px-3 py-2 text-slate-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors text-sm font-medium"},[w(f(er),{class:"w-4 h-4"}),k[14]||(k[14]=v("span",null,"Все справочники",-1))]),k[16]||(k[16]=v("div",{class:"w-px h-6 bg-slate-200"},null,-1)),v("div",eg,[v("h3",tg,W(e.directory.name),1),v("p",ng,[v("span",og,W(e.directory.tool_name),1),k[15]||(k[15]=v("span",{class:"mx-1.5"},"•",-1)),v("span",null,W(e.directory.items_count)+" "+W(L.value),1)])])]),v("button",{onClick:k[1]||(k[1]=_=>A.$emit("settings")),class:"flex items-center gap-2 px-3 py-2 text-slate-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors text-sm font-medium"},[w(f(Zo),{class:"w-4 h-4"}),k[17]||(k[17]=v("span",null,"Редактировать",-1))])]),w(oc,{"add-disabled":!1,"has-items":e.items.length>0,"selected-count":Object.keys(S.value).length,"search-query":b.value,onAddRow:Q,onImport:k[2]||(k[2]=_=>A.$emit("import")),onExport:k[3]||(k[3]=_=>A.$emit("export")),onDeleteSelected:k[4]||(k[4]=_=>A.$emit("deleteSelected",ae.value)),"onUpdate:searchQuery":k[5]||(k[5]=_=>b.value=_)},null,8,["has-items","selected-count","search-query"]),e.items.length>0?($(),M("div",rg,[v("p",ag,[v("span",sg,[w(f(bu),{class:"w-3 h-3"}),k[18]||(k[18]=oe(" Клик ",-1))]),k[19]||(k[19]=br(' редактирование <span class="mx-0.5">•</span><span class="px-1.5 py-0.5 bg-slate-100 rounded text-slate-500 font-mono text-[10px]">Tab</span> далее <span class="mx-0.5">•</span><span class="px-1.5 py-0.5 bg-slate-100 rounded text-slate-500 font-mono text-[10px]">Enter</span> сохранить <span class="mx-0.5">•</span><span class="px-1.5 py-0.5 bg-slate-100 rounded text-slate-500 font-mono text-[10px]">Esc</span> отмена <span class="mx-0.5">•</span><span class="px-1.5 py-0.5 bg-slate-100 rounded text-slate-500 font-mono text-[10px]">ПКМ</span> меню ',13))]),v("div",lg,[c.value.size>0?($(),M("button",{key:0,onClick:nt,class:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-700 bg-amber-50 hover:bg-amber-100 border border-amber-200 rounded-lg transition-colors"},[w(f(ba),{class:"w-3 h-3"}),oe(" "+W(c.value.size)+" скрыто ",1),w(f(yo),{class:"w-3 h-3 ml-0.5"})])):ue("",!0),w(f(La),{"delay-duration":300},{default:C(()=>[w(f(lr),null,{default:C(()=>[w(f(ur),{"as-child":""},{default:C(()=>[v("button",{onClick:vt,disabled:!Qt.value,class:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed"},[w(f(wu),{class:"w-3.5 h-3.5"})],8,ig)]),_:1}),w(f(ir),{side:"bottom"},{default:C(()=>[...k[20]||(k[20]=[v("p",{class:"text-xs"},[oe("Отменить "),v("kbd",{class:"ml-1 px-1 py-0.5 bg-slate-700 rounded text-[10px]"},"Ctrl+Z")],-1)])]),_:1})]),_:1}),w(f(lr),null,{default:C(()=>[w(f(ur),{"as-child":""},{default:C(()=>[v("button",{onClick:It,disabled:!an.value,class:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed"},[w(f(xu),{class:"w-3.5 h-3.5"})],8,ug)]),_:1}),w(f(ir),{side:"bottom"},{default:C(()=>[...k[21]||(k[21]=[v("p",{class:"text-xs"},[oe("Повторить "),v("kbd",{class:"ml-1 px-1 py-0.5 bg-slate-700 rounded text-[10px]"},"Ctrl+Shift+Z")],-1)])]),_:1})]),_:1})]),_:1})])])):ue("",!0),e.loading?($(),M("div",dg,[w(f(qt),{class:"w-8 h-8 animate-spin text-indigo-600"})])):e.items.length===0&&!b.value?($(),M("div",cg,[w(f(On),null,{default:C(()=>[w(f(Pn),null,{default:C(()=>[w(f(it),null,{default:C(()=>[w(f(Je),{class:"w-12"}),($(!0),M(Ue,null,_e(U.value,_=>($(),Y(f(Je),{key:_.name,style:Sn({minWidth:j(_)})},{default:C(()=>[v("span",fg,W(_.label),1)]),_:2},1032,["style"]))),128)),w(f(Je),{"class-name":"w-16"})]),_:1})]),_:1}),w(f(Tn),null,{default:C(()=>[w(f(it),null,{default:C(()=>[w(f(Re),{"class-name":"text-center py-12",colspan:U.value.length+2},{default:C(()=>[v("div",pg,[v("div",gg,[w(f(su),{class:"h-6 w-6 text-slate-400"})]),k[22]||(k[22]=v("p",{class:"text-sm font-medium text-slate-900"},"Записей пока нет",-1)),k[23]||(k[23]=v("p",{class:"text-xs text-slate-500 mt-1 mb-4"},"Добавьте первую запись",-1)),v("button",{onClick:Q,class:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 transition-colors"}," Добавить запись ")])]),_:1},8,["colspan"])]),_:1})]),_:1})]),_:1})])):f(F).getRowModel().rows.length===0&&b.value?($(),M("div",vg,[v("p",mg,'Ничего не найдено по запросу "'+W(b.value)+'"',1)])):f(F).getRowModel().rows.length>0?($(),M("div",hg,[w(f(On),{style:Sn({width:`${f(F).getTotalSize()+56}px`,minWidth:"100%"})},{default:C(()=>[w(f(Pn),null,{default:C(()=>[w(f(it),null,{default:C(()=>[w(f(Je),{"class-name":"w-14 !px-0"},{default:C(()=>[v("div",yg,[k[24]||(k[24]=v("span",{class:"w-[26px] shrink-0"},null,-1)),v("input",{type:"checkbox",checked:f(F).getIsAllPageRowsSelected(),indeterminate:f(F).getIsSomePageRowsSelected(),onChange:k[6]||(k[6]=_=>f(F).toggleAllPageRowsSelected()),class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,40,bg)])]),_:1}),($(!0),M(Ue,null,_e(f(F).getHeaderGroups()[0].headers.filter(_=>_.id!=="select"&&_.id!=="actions"),_=>($(),Y(f(Je),{key:_.id,onDragover:Ft(ie=>$e(ie,_.index-1),["prevent"]),onDragenter:Ft(ie=>Z.value=_.index-1,["prevent"]),onDragleave:Be,onDrop:ie=>Te(ie,_.index-1),onDragend:De,"class-name":`relative select-none ${Z.value===_.index-1&&V.value!==_.index-1?"bg-indigo-100":""} ${V.value===_.index-1?"opacity-50":""}`,style:Sn({width:`${_.getSize()}px`})},{default:C(()=>[w(ap,{column:_.column.columnDef.meta,"is-only-column":R.value.length<=1,onDragstart:ie=>de(ie,_.index-1),onEdit:ie=>Ye(_.column.columnDef.meta),onHide:ie=>Oe(_.column.columnDef.meta),onDelete:ie=>pt(_.column.columnDef.meta)},null,8,["column","is-only-column","onDragstart","onEdit","onHide","onDelete"]),v("div",{onMousedown:ie=>{var I;return(I=_.getResizeHandler())==null?void 0:I(ie)},onTouchstart:ie=>{var I;return(I=_.getResizeHandler())==null?void 0:I(ie)},onDblclick:ie=>N(_),class:Fe(["absolute right-0 top-0 h-full w-1 cursor-col-resize select-none touch-none group/resize",_.column.getIsResizing()?"bg-indigo-400":"hover:bg-indigo-300"])},null,42,xg)]),_:2},1032,["onDragover","onDragenter","onDrop","class-name","style"]))),128)),w(f(Je),{"class-name":"w-40"},{default:C(()=>[v("div",Sg,[v("button",{onClick:k[7]||(k[7]=_=>A.$emit("settings")),class:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Добавить столбец"},[w(f(Co),{class:"w-3.5 h-3.5"}),k[25]||(k[25]=oe(" Столбец ",-1))])])]),_:1}),w(f(Je),{"class-name":"w-16"})]),_:1})]),_:1}),w(f(Tn),null,{default:C(()=>[($(!0),M(Ue,null,_e(f(F).getRowModel().rows,_=>($(),Y(fp,{key:_.id,onEdit:ie=>Ut(_.original),onDuplicate:ie=>Jt(_.original),onDelete:ie=>A.$emit("delete",_.original.id)},{default:C(()=>{var ie;return[w(f(it),{class:Fe(["group",{"bg-indigo-50/30":((ie=a.value)==null?void 0:ie.itemId)===_.original.id}])},{default:C(()=>[w(f(Re),{"class-name":"w-14 !px-0"},{default:C(()=>[v("div",wg,[v("button",{onClick:I=>fe(_.original),class:"p-1 text-slate-300 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors opacity-0 group-hover:opacity-100",title:"Развернуть"},[w(f(zi),{class:"w-3.5 h-3.5"})],8,Cg),v("input",{type:"checkbox",checked:_.getIsSelected(),onChange:I=>_.toggleSelected(),class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,40,$g)])]),_:2},1024),($(!0),M(Ue,null,_e(U.value,I=>($(),Y(f(Re),{key:I.name,"class-name":"px-1 py-1",style:Sn({width:`${H(I.name)}px`})},{default:C(()=>{var P,B;return[w(mc,{column:I,"display-value":_.original.data[I.name],"model-value":((P=a.value)==null?void 0:P.itemId)===_.original.id&&((B=a.value)==null?void 0:B.colName)===I.name?s.value:_.original.data[I.name],editing:Ee(_.original.id,I.name),saving:l.value&&Ee(_.original.id,I.name),"onUpdate:modelValue":k[8]||(k[8]=z=>s.value=z),onStartEdit:z=>je(_.original,I),onBlur:K,onKeydown:z=>Ne(z,_.original,I,_.index,U.value.indexOf(I)),onSave:k[9]||(k[9]=z=>D(!0))},null,8,["column","display-value","model-value","editing","saving","onStartEdit","onKeydown"])]}),_:2},1032,["style"]))),128)),w(f(Re),{"class-name":"px-2 py-2 w-40"}),w(f(Re),{"class-name":"px-4 py-2 w-16"},{default:C(()=>[v("div",Eg,[v("button",{onClick:I=>A.$emit("delete",_.original.id),class:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Удалить"},[w(f(gn),{class:"w-4 h-4"})],8,Rg)])]),_:2},1024)]),_:2},1032,["class"])]}),_:2},1032,["onEdit","onDuplicate","onDelete"]))),128))]),_:1})]),_:1},8,["style"]),f(F).getPageCount()>1?($(),M("div",Ig,[v("p",Dg," Показано "+W(f(F).getState().pagination.pageIndex*f(F).getState().pagination.pageSize+1)+"-"+W(Math.min((f(F).getState().pagination.pageIndex+1)*f(F).getState().pagination.pageSize,f(F).getFilteredRowModel().rows.length))+" из "+W(f(F).getFilteredRowModel().rows.length),1),v("div",Og,[v("button",{disabled:!f(F).getCanPreviousPage(),onClick:k[10]||(k[10]=_=>f(F).previousPage()),class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[w(f(xa),{class:"w-4 h-4"})],8,Pg),($(!0),M(Ue,null,_e(ee.value,_=>($(),M("button",{key:_,onClick:ie=>f(F).setPageIndex(_-1),class:Fe(["min-w-[32px] h-8 px-2 text-sm font-medium rounded-lg transition-colors",[f(F).getState().pagination.pageIndex===_-1?"bg-indigo-600 text-white":"text-slate-600 hover:bg-white"]])},W(_),11,Tg))),128)),v("button",{disabled:!f(F).getCanNextPage(),onClick:k[11]||(k[11]=_=>f(F).nextPage()),class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[w(f(Sa),{class:"w-4 h-4"})],8,Mg)])])):ue("",!0)])):ue("",!0),w(Mp,{open:g.value,columns:U.value,saving:p.value,"onUpdate:open":k[12]||(k[12]=_=>g.value=_),onSave:J},null,8,["open","columns","saving"]),w(qp,{open:m.value,columns:U.value,item:h.value,saving:y.value,"onUpdate:open":k[13]||(k[13]=_=>m.value=_),onSave:ce},null,8,["open","columns","item","saving"])]))}}),Or=q({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(e,{emit:n}){const a=Et(e,n);return(s,o)=>($(),Y(f(Sc),ye({"data-slot":"dialog"},f(a)),{default:C(l=>[ne(s.$slots,"default",et(rt(l)))]),_:3},16))}}),no=q({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(e){const n=e;return(t,r)=>($(),Y(f(Ua),ye({"data-slot":"dialog-close"},n),{default:C(()=>[ne(t.$slots,"default")]),_:3},16))}}),Vg=q({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){const n=e,t=Rt(n,"class");return(r,a)=>($(),Y(f(Uc),ye({"data-slot":"dialog-overlay"},f(t),{class:f(dt)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",n.class)}),{default:C(()=>[ne(r.$slots,"default")]),_:3},16,["class"]))}}),Pr=q({inheritAttrs:!1,__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{},showCloseButton:{type:Boolean,default:!0}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:n}){const t=e,r=n,a=Rt(t,"class"),s=Et(a,r);return(o,l)=>($(),Y(f(zc),null,{default:C(()=>[w(Vg),w(f(Vc),ye({"data-slot":"dialog-content"},{...o.$attrs,...f(s)},{class:f(dt)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t.class)}),{default:C(()=>[ne(o.$slots,"default"),e.showCloseButton?($(),Y(f(Ua),{key:0,"data-slot":"dialog-close",class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},{default:C(()=>[w(f(yo)),l[0]||(l[0]=v("span",{class:"sr-only"},"Close",-1))]),_:1})):ue("",!0)]),_:3},16,["class"])]),_:3}))}}),Mn=q({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const n=e,t=Rt(n,"class"),r=mn(t);return(a,s)=>($(),Y(f(Lc),ye({"data-slot":"dialog-description"},f(r),{class:f(dt)("text-muted-foreground text-sm",n.class)}),{default:C(()=>[ne(a.$slots,"default")]),_:3},16,["class"]))}}),pr=q({__name:"DialogFooter",props:{class:{}},setup(e){const n=e;return(t,r)=>($(),M("div",{"data-slot":"dialog-footer",class:Fe(f(dt)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n.class))},[ne(t.$slots,"default")],2))}}),uo=q({__name:"DialogHeader",props:{class:{}},setup(e){const n=e;return(t,r)=>($(),M("div",{"data-slot":"dialog-header",class:Fe(f(dt)("flex flex-col gap-2 text-center sm:text-left",n.class))},[ne(t.$slots,"default")],2))}}),Fn=q({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const n=e,t=Rt(n,"class"),r=mn(t);return(a,s)=>($(),Y(f(_c),ye({"data-slot":"dialog-title"},f(r),{class:f(dt)("text-lg leading-none font-semibold",n.class)}),{default:C(()=>[ne(a.$slots,"default")]),_:3},16,["class"]))}});var Bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ns(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),t}var os={exports:{}};const Ng=ns(pu);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Hr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function Vt(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Hr(Object(t),!0).forEach(function(r){jg(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Hr(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function oo(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oo=function(n){return typeof n}:oo=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oo(e)}function jg(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function $t(){return $t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},$t.apply(this,arguments)}function kg(e,n){if(e==null)return{};var t={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(n.indexOf(a)>=0)&&(t[a]=e[a]);return t}function Ug(e,n){if(e==null)return{};var t=kg(e,n),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function Gg(e){return zg(e)||Hg(e)||_g(e)||Kg()}function zg(e){if(Array.isArray(e))return gr(e)}function Hg(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _g(e,n){if(e){if(typeof e=="string")return gr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gr(e,n)}}function gr(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Kg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Wg="1.14.0";function Nt(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var kt=Nt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),zn=Nt(/Edge/i),_r=Nt(/firefox/i),An=Nt(/safari/i)&&!Nt(/chrome/i)&&!Nt(/android/i),rs=Nt(/iP(ad|od|hone)/i),Xg=Nt(/chrome/i)&&Nt(/android/i),as={capture:!1,passive:!1};function Pe(e,n,t){e.addEventListener(n,t,!kt&&as)}function Ie(e,n,t){e.removeEventListener(n,t,!kt&&as)}function co(e,n){if(n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function Yg(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Pt(e,n,t,r){if(e){t=t||document;do{if(n!=null&&(n[0]===">"?e.parentNode===t&&co(e,n):co(e,n))||r&&e===t)return e;if(e===t)break}while(e=Yg(e))}return null}var Kr=/\s+/g;function Ke(e,n,t){if(e&&n)if(e.classList)e.classList[t?"add":"remove"](n);else{var r=(" "+e.className+" ").replace(Kr," ").replace(" "+n+" "," ");e.className=(r+(t?" "+n:"")).replace(Kr," ")}}function se(e,n,t){var r=e&&e.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),n===void 0?t:t[n];!(n in r)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),r[n]=t+(typeof t=="string"?"":"px")}}function nn(e,n){var t="";if(typeof e=="string")t=e;else do{var r=se(e,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!n&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(t)}function ss(e,n,t){if(e){var r=e.getElementsByTagName(n),a=0,s=r.length;if(t)for(;a<s;a++)t(r[a],a);return r}return[]}function At(){var e=document.scrollingElement;return e||document.documentElement}function He(e,n,t,r,a){if(!(!e.getBoundingClientRect&&e!==window)){var s,o,l,i,u,d,c;if(e!==window&&e.parentNode&&e!==At()?(s=e.getBoundingClientRect(),o=s.top,l=s.left,i=s.bottom,u=s.right,d=s.height,c=s.width):(o=0,l=0,i=window.innerHeight,u=window.innerWidth,d=window.innerHeight,c=window.innerWidth),(n||t)&&e!==window&&(a=a||e.parentNode,!kt))do if(a&&a.getBoundingClientRect&&(se(a,"transform")!=="none"||t&&se(a,"position")!=="static")){var g=a.getBoundingClientRect();o-=g.top+parseInt(se(a,"border-top-width")),l-=g.left+parseInt(se(a,"border-left-width")),i=o+s.height,u=l+s.width;break}while(a=a.parentNode);if(r&&e!==window){var p=nn(a||e),m=p&&p.a,h=p&&p.d;p&&(o/=h,l/=m,c/=m,d/=h,i=o+d,u=l+c)}return{top:o,left:l,bottom:i,right:u,width:c,height:d}}}function Wr(e,n,t){for(var r=Kt(e,!0),a=He(e)[n];r;){var s=He(r)[t],o=void 0;if(o=a>=s,!o)return r;if(r===At())break;r=Kt(r,!1)}return!1}function vn(e,n,t,r){for(var a=0,s=0,o=e.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==ve.ghost&&(r||o[s]!==ve.dragged)&&Pt(o[s],t.draggable,e,!1)){if(a===n)return o[s];a++}s++}return null}function Tr(e,n){for(var t=e.lastElementChild;t&&(t===ve.ghost||se(t,"display")==="none"||n&&!co(t,n));)t=t.previousElementSibling;return t||null}function Ze(e,n){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==ve.clone&&(!n||co(e,n))&&t++;return t}function Xr(e){var n=0,t=0,r=At();if(e)do{var a=nn(e),s=a.a,o=a.d;n+=e.scrollLeft*s,t+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[n,t]}function qg(e,n){for(var t in e)if(e.hasOwnProperty(t)){for(var r in n)if(n.hasOwnProperty(r)&&n[r]===e[t][r])return Number(t)}return-1}function Kt(e,n){if(!e||!e.getBoundingClientRect)return At();var t=e,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var a=se(t);if(t.clientWidth<t.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return At();if(r||n)return t;r=!0}}while(t=t.parentNode);return At()}function Qg(e,n){if(e&&n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function Uo(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var Vn;function ls(e,n){return function(){if(!Vn){var t=arguments,r=this;t.length===1?e.call(r,t[0]):e.apply(r,t),Vn=setTimeout(function(){Vn=void 0},n)}}}function Jg(){clearTimeout(Vn),Vn=void 0}function is(e,n,t){e.scrollLeft+=n,e.scrollTop+=t}function Mr(e){var n=window.Polymer,t=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function Yr(e,n){se(e,"position","absolute"),se(e,"top",n.top),se(e,"left",n.left),se(e,"width",n.width),se(e,"height",n.height)}function Go(e){se(e,"position",""),se(e,"top",""),se(e,"left",""),se(e,"width",""),se(e,"height","")}var ut="Sortable"+new Date().getTime();function Zg(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(a){if(!(se(a,"display")==="none"||a===ve.ghost)){e.push({target:a,rect:He(a)});var s=Vt({},e[e.length-1].rect);if(a.thisAnimationDuration){var o=nn(a,!0);o&&(s.top-=o.f,s.left-=o.e)}a.fromRect=s}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(qg(e,{target:r}),1)},animateAll:function(r){var a=this;if(!this.options.animation){clearTimeout(n),typeof r=="function"&&r();return}var s=!1,o=0;e.forEach(function(l){var i=0,u=l.target,d=u.fromRect,c=He(u),g=u.prevFromRect,p=u.prevToRect,m=l.rect,h=nn(u,!0);h&&(c.top-=h.f,c.left-=h.e),u.toRect=c,u.thisAnimationDuration&&Uo(g,c)&&!Uo(d,c)&&(m.top-c.top)/(m.left-c.left)===(d.top-c.top)/(d.left-c.left)&&(i=tv(m,g,p,a.options)),Uo(c,d)||(u.prevFromRect=d,u.prevToRect=c,i||(i=a.options.animation),a.animate(u,m,c,i)),i&&(s=!0,o=Math.max(o,i),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},i),u.thisAnimationDuration=i)}),clearTimeout(n),s?n=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),e=[]},animate:function(r,a,s,o){if(o){se(r,"transition",""),se(r,"transform","");var l=nn(this.el),i=l&&l.a,u=l&&l.d,d=(a.left-s.left)/(i||1),c=(a.top-s.top)/(u||1);r.animatingX=!!d,r.animatingY=!!c,se(r,"transform","translate3d("+d+"px,"+c+"px,0)"),this.forRepaintDummy=ev(r),se(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),se(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){se(r,"transition",""),se(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function ev(e){return e.offsetWidth}function tv(e,n,t,r){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))*r.animation}var ln=[],zo={initializeByDefault:!0},Hn={mount:function(n){for(var t in zo)zo.hasOwnProperty(t)&&!(t in n)&&(n[t]=zo[t]);ln.forEach(function(r){if(r.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),ln.push(n)},pluginEvent:function(n,t,r){var a=this;this.eventCanceled=!1,r.cancel=function(){a.eventCanceled=!0};var s=n+"Global";ln.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](Vt({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][n]&&t[o.pluginName][n](Vt({sortable:t},r)))})},initializePlugins:function(n,t,r,a){ln.forEach(function(l){var i=l.pluginName;if(!(!n.options[i]&&!l.initializeByDefault)){var u=new l(n,t,n.options);u.sortable=n,u.options=n.options,n[i]=u,$t(r,u.defaults)}});for(var s in n.options)if(n.options.hasOwnProperty(s)){var o=this.modifyOption(n,s,n.options[s]);typeof o<"u"&&(n.options[s]=o)}},getEventProperties:function(n,t){var r={};return ln.forEach(function(a){typeof a.eventProperties=="function"&&$t(r,a.eventProperties.call(t[a.pluginName],n))}),r},modifyOption:function(n,t,r){var a;return ln.forEach(function(s){n[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(a=s.optionListeners[t].call(n[s.pluginName],r))}),a}};function Cn(e){var n=e.sortable,t=e.rootEl,r=e.name,a=e.targetEl,s=e.cloneEl,o=e.toEl,l=e.fromEl,i=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,c=e.newDraggableIndex,g=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(n=n||t&&t[ut],!!n){var h,y=n.options,b="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!kt&&!zn?h=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(h=document.createEvent("Event"),h.initEvent(r,!0,!0)),h.to=o||t,h.from=l||t,h.item=a||t,h.clone=s,h.oldIndex=i,h.newIndex=u,h.oldDraggableIndex=d,h.newDraggableIndex=c,h.originalEvent=g,h.pullMode=p?p.lastPutMode:void 0;var S=Vt(Vt({},m),Hn.getEventProperties(r,n));for(var R in S)h[R]=S[R];t&&t.dispatchEvent(h),y[b]&&y[b].call(n,h)}}var nv=["evt"],ht=function(n,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=r.evt,s=Ug(r,nv);Hn.pluginEvent.bind(ve)(n,t,Vt({dragEl:te,parentEl:qe,ghostEl:Ce,rootEl:ze,nextEl:tn,lastDownEl:ro,cloneEl:Qe,cloneHidden:Ht,dragStarted:$n,putSortable:at,activeSortable:ve.active,originalEvent:a,oldIndex:fn,oldDraggableIndex:Bn,newIndex:xt,newDraggableIndex:zt,hideGhostForTarget:fs,unhideGhostForTarget:ps,cloneNowHidden:function(){Ht=!0},cloneNowShown:function(){Ht=!1},dispatchSortableEvent:function(l){ct({sortable:t,name:l,originalEvent:a})}},s))};function ct(e){Cn(Vt({putSortable:at,cloneEl:Qe,targetEl:te,rootEl:ze,oldIndex:fn,oldDraggableIndex:Bn,newIndex:xt,newDraggableIndex:zt},e))}var te,qe,Ce,ze,tn,ro,Qe,Ht,fn,xt,Bn,zt,qn,at,cn=!1,fo=!1,po=[],Zt,Dt,Ho,_o,qr,Qr,$n,un,Ln,Nn=!1,Qn=!1,ao,lt,Ko=[],vr=!1,go=[],Do=typeof document<"u",Jn=rs,Jr=zn||kt?"cssFloat":"float",ov=Do&&!Xg&&!rs&&"draggable"in document.createElement("div"),us=function(){if(Do){if(kt)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),ds=function(n,t){var r=se(n),a=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=vn(n,0,t),o=vn(n,1,t),l=s&&se(s),i=o&&se(o),u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+He(s).width,d=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+He(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&l.float&&l.float!=="none"){var c=l.float==="left"?"left":"right";return o&&(i.clear==="both"||i.clear===c)?"vertical":"horizontal"}return s&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||u>=a&&r[Jr]==="none"||o&&r[Jr]==="none"&&u+d>a)?"vertical":"horizontal"},rv=function(n,t,r){var a=r?n.left:n.top,s=r?n.right:n.bottom,o=r?n.width:n.height,l=r?t.left:t.top,i=r?t.right:t.bottom,u=r?t.width:t.height;return a===l||s===i||a+o/2===l+u/2},av=function(n,t){var r;return po.some(function(a){var s=a[ut].options.emptyInsertThreshold;if(!(!s||Tr(a))){var o=He(a),l=n>=o.left-s&&n<=o.right+s,i=t>=o.top-s&&t<=o.bottom+s;if(l&&i)return r=a}}),r},cs=function(n){function t(s,o){return function(l,i,u,d){var c=l.options.group.name&&i.options.group.name&&l.options.group.name===i.options.group.name;if(s==null&&(o||c))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(l,i,u,d),o)(l,i,u,d);var g=(o?l:i).options.group.name;return s===!0||typeof s=="string"&&s===g||s.join&&s.indexOf(g)>-1}}var r={},a=n.group;(!a||oo(a)!="object")&&(a={name:a}),r.name=a.name,r.checkPull=t(a.pull,!0),r.checkPut=t(a.put),r.revertClone=a.revertClone,n.group=r},fs=function(){!us&&Ce&&se(Ce,"display","none")},ps=function(){!us&&Ce&&se(Ce,"display","")};Do&&document.addEventListener("click",function(e){if(fo)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),fo=!1,!1},!0);var en=function(n){if(te){n=n.touches?n.touches[0]:n;var t=av(n.clientX,n.clientY);if(t){var r={};for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[ut]._onDragOver(r)}}},sv=function(n){te&&te.parentNode[ut]._isOutsideThisEl(n.target)};function ve(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=$t({},n),e[ut]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ds(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,l){o.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ve.supportPointer!==!1&&"PointerEvent"in window&&!An,emptyInsertThreshold:5};Hn.initializePlugins(this,e,t);for(var r in t)!(r in n)&&(n[r]=t[r]);cs(n);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=n.forceFallback?!1:ov,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?Pe(e,"pointerdown",this._onTapStart):(Pe(e,"mousedown",this._onTapStart),Pe(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Pe(e,"dragover",this),Pe(e,"dragenter",this)),po.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),$t(this,Zg())}ve.prototype={constructor:ve,_isOutsideThisEl:function(n){!this.el.contains(n)&&n!==this.el&&(un=null)},_getDirection:function(n,t){return typeof this.options.direction=="function"?this.options.direction.call(this,n,t,te):this.options.direction},_onTapStart:function(n){if(n.cancelable){var t=this,r=this.el,a=this.options,s=a.preventOnFilter,o=n.type,l=n.touches&&n.touches[0]||n.pointerType&&n.pointerType==="touch"&&n,i=(l||n).target,u=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||i,d=a.filter;if(gv(r),!te&&!(/mousedown|pointerdown/.test(o)&&n.button!==0||a.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&An&&i&&i.tagName.toUpperCase()==="SELECT")&&(i=Pt(i,a.draggable,r,!1),!(i&&i.animated)&&ro!==i)){if(fn=Ze(i),Bn=Ze(i,a.draggable),typeof d=="function"){if(d.call(this,n,i,this)){ct({sortable:t,rootEl:u,name:"filter",targetEl:i,toEl:r,fromEl:r}),ht("filter",t,{evt:n}),s&&n.cancelable&&n.preventDefault();return}}else if(d&&(d=d.split(",").some(function(c){if(c=Pt(u,c.trim(),r,!1),c)return ct({sortable:t,rootEl:c,name:"filter",targetEl:i,fromEl:r,toEl:r}),ht("filter",t,{evt:n}),!0}),d)){s&&n.cancelable&&n.preventDefault();return}a.handle&&!Pt(u,a.handle,r,!1)||this._prepareDragStart(n,l,i)}}},_prepareDragStart:function(n,t,r){var a=this,s=a.el,o=a.options,l=s.ownerDocument,i;if(r&&!te&&r.parentNode===s){var u=He(r);if(ze=s,te=r,qe=te.parentNode,tn=te.nextSibling,ro=r,qn=o.group,ve.dragged=te,Zt={target:te,clientX:(t||n).clientX,clientY:(t||n).clientY},qr=Zt.clientX-u.left,Qr=Zt.clientY-u.top,this._lastX=(t||n).clientX,this._lastY=(t||n).clientY,te.style["will-change"]="all",i=function(){if(ht("delayEnded",a,{evt:n}),ve.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!_r&&a.nativeDraggable&&(te.draggable=!0),a._triggerDragStart(n,t),ct({sortable:a,name:"choose",originalEvent:n}),Ke(te,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){ss(te,d.trim(),Wo)}),Pe(l,"dragover",en),Pe(l,"mousemove",en),Pe(l,"touchmove",en),Pe(l,"mouseup",a._onDrop),Pe(l,"touchend",a._onDrop),Pe(l,"touchcancel",a._onDrop),_r&&this.nativeDraggable&&(this.options.touchStartThreshold=4,te.draggable=!0),ht("delayStart",this,{evt:n}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(zn||kt))){if(ve.eventCanceled){this._onDrop();return}Pe(l,"mouseup",a._disableDelayedDrag),Pe(l,"touchend",a._disableDelayedDrag),Pe(l,"touchcancel",a._disableDelayedDrag),Pe(l,"mousemove",a._delayedDragTouchMoveHandler),Pe(l,"touchmove",a._delayedDragTouchMoveHandler),o.supportPointer&&Pe(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(i,o.delay)}else i()}},_delayedDragTouchMoveHandler:function(n){var t=n.touches?n.touches[0]:n;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){te&&Wo(te),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var n=this.el.ownerDocument;Ie(n,"mouseup",this._disableDelayedDrag),Ie(n,"touchend",this._disableDelayedDrag),Ie(n,"touchcancel",this._disableDelayedDrag),Ie(n,"mousemove",this._delayedDragTouchMoveHandler),Ie(n,"touchmove",this._delayedDragTouchMoveHandler),Ie(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(n,t){t=t||n.pointerType=="touch"&&n,!this.nativeDraggable||t?this.options.supportPointer?Pe(document,"pointermove",this._onTouchMove):t?Pe(document,"touchmove",this._onTouchMove):Pe(document,"mousemove",this._onTouchMove):(Pe(te,"dragend",this),Pe(ze,"dragstart",this._onDragStart));try{document.selection?so(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(n,t){if(cn=!1,ze&&te){ht("dragStarted",this,{evt:t}),this.nativeDraggable&&Pe(document,"dragover",sv);var r=this.options;!n&&Ke(te,r.dragClass,!1),Ke(te,r.ghostClass,!0),ve.active=this,n&&this._appendGhost(),ct({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Dt){this._lastX=Dt.clientX,this._lastY=Dt.clientY,fs();for(var n=document.elementFromPoint(Dt.clientX,Dt.clientY),t=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(Dt.clientX,Dt.clientY),n!==t);)t=n;if(te.parentNode[ut]._isOutsideThisEl(n),t)do{if(t[ut]){var r=void 0;if(r=t[ut]._onDragOver({clientX:Dt.clientX,clientY:Dt.clientY,target:n,rootEl:t}),r&&!this.options.dragoverBubble)break}n=t}while(t=t.parentNode);ps()}},_onTouchMove:function(n){if(Zt){var t=this.options,r=t.fallbackTolerance,a=t.fallbackOffset,s=n.touches?n.touches[0]:n,o=Ce&&nn(Ce,!0),l=Ce&&o&&o.a,i=Ce&&o&&o.d,u=Jn&&lt&&Xr(lt),d=(s.clientX-Zt.clientX+a.x)/(l||1)+(u?u[0]-Ko[0]:0)/(l||1),c=(s.clientY-Zt.clientY+a.y)/(i||1)+(u?u[1]-Ko[1]:0)/(i||1);if(!ve.active&&!cn){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(n,!0)}if(Ce){o?(o.e+=d-(Ho||0),o.f+=c-(_o||0)):o={a:1,b:0,c:0,d:1,e:d,f:c};var g="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");se(Ce,"webkitTransform",g),se(Ce,"mozTransform",g),se(Ce,"msTransform",g),se(Ce,"transform",g),Ho=d,_o=c,Dt=s}n.cancelable&&n.preventDefault()}},_appendGhost:function(){if(!Ce){var n=this.options.fallbackOnBody?document.body:ze,t=He(te,!0,Jn,!0,n),r=this.options;if(Jn){for(lt=n;se(lt,"position")==="static"&&se(lt,"transform")==="none"&&lt!==document;)lt=lt.parentNode;lt!==document.body&&lt!==document.documentElement?(lt===document&&(lt=At()),t.top+=lt.scrollTop,t.left+=lt.scrollLeft):lt=At(),Ko=Xr(lt)}Ce=te.cloneNode(!0),Ke(Ce,r.ghostClass,!1),Ke(Ce,r.fallbackClass,!0),Ke(Ce,r.dragClass,!0),se(Ce,"transition",""),se(Ce,"transform",""),se(Ce,"box-sizing","border-box"),se(Ce,"margin",0),se(Ce,"top",t.top),se(Ce,"left",t.left),se(Ce,"width",t.width),se(Ce,"height",t.height),se(Ce,"opacity","0.8"),se(Ce,"position",Jn?"absolute":"fixed"),se(Ce,"zIndex","100000"),se(Ce,"pointerEvents","none"),ve.ghost=Ce,n.appendChild(Ce),se(Ce,"transform-origin",qr/parseInt(Ce.style.width)*100+"% "+Qr/parseInt(Ce.style.height)*100+"%")}},_onDragStart:function(n,t){var r=this,a=n.dataTransfer,s=r.options;if(ht("dragStart",this,{evt:n}),ve.eventCanceled){this._onDrop();return}ht("setupClone",this),ve.eventCanceled||(Qe=Mr(te),Qe.draggable=!1,Qe.style["will-change"]="",this._hideClone(),Ke(Qe,this.options.chosenClass,!1),ve.clone=Qe),r.cloneId=so(function(){ht("clone",r),!ve.eventCanceled&&(r.options.removeCloneOnHide||ze.insertBefore(Qe,te),r._hideClone(),ct({sortable:r,name:"clone"}))}),!t&&Ke(te,s.dragClass,!0),t?(fo=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Ie(document,"mouseup",r._onDrop),Ie(document,"touchend",r._onDrop),Ie(document,"touchcancel",r._onDrop),a&&(a.effectAllowed="move",s.setData&&s.setData.call(r,a,te)),Pe(document,"drop",r),se(te,"transform","translateZ(0)")),cn=!0,r._dragStartId=so(r._dragStarted.bind(r,t,n)),Pe(document,"selectstart",r),$n=!0,An&&se(document.body,"user-select","none")},_onDragOver:function(n){var t=this.el,r=n.target,a,s,o,l=this.options,i=l.group,u=ve.active,d=qn===i,c=l.sort,g=at||u,p,m=this,h=!1;if(vr)return;function y(de,$e){ht(de,m,Vt({evt:n,isOwner:d,axis:p?"vertical":"horizontal",revert:o,dragRect:a,targetRect:s,canSort:c,fromSortable:g,target:r,completed:S,onMove:function(Te,De){return Zn(ze,t,te,a,Te,He(Te),n,De)},changed:R},$e))}function b(){y("dragOverAnimationCapture"),m.captureAnimationState(),m!==g&&g.captureAnimationState()}function S(de){return y("dragOverCompleted",{insertion:de}),de&&(d?u._hideClone():u._showClone(m),m!==g&&(Ke(te,at?at.options.ghostClass:u.options.ghostClass,!1),Ke(te,l.ghostClass,!0)),at!==m&&m!==ve.active?at=m:m===ve.active&&at&&(at=null),g===m&&(m._ignoreWhileAnimating=r),m.animateAll(function(){y("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(r===te&&!te.animated||r===t&&!r.animated)&&(un=null),!l.dragoverBubble&&!n.rootEl&&r!==document&&(te.parentNode[ut]._isOutsideThisEl(n.target),!de&&en(n)),!l.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),h=!0}function R(){xt=Ze(te),zt=Ze(te,l.draggable),ct({sortable:m,name:"change",toEl:t,newIndex:xt,newDraggableIndex:zt,originalEvent:n})}if(n.preventDefault!==void 0&&n.cancelable&&n.preventDefault(),r=Pt(r,l.draggable,t,!0),y("dragOver"),ve.eventCanceled)return h;if(te.contains(n.target)||r.animated&&r.animatingX&&r.animatingY||m._ignoreWhileAnimating===r)return S(!1);if(fo=!1,u&&!l.disabled&&(d?c||(o=qe!==ze):at===this||(this.lastPutMode=qn.checkPull(this,u,te,n))&&i.checkPut(this,u,te,n))){if(p=this._getDirection(n,r)==="vertical",a=He(te),y("dragOverValid"),ve.eventCanceled)return h;if(o)return qe=ze,b(),this._hideClone(),y("revert"),ve.eventCanceled||(tn?ze.insertBefore(te,tn):ze.appendChild(te)),S(!0);var O=Tr(t,l.draggable);if(!O||dv(n,p,this)&&!O.animated){if(O===te)return S(!1);if(O&&t===n.target&&(r=O),r&&(s=He(r)),Zn(ze,t,te,a,r,s,n,!!r)!==!1)return b(),t.appendChild(te),qe=t,R(),S(!0)}else if(O&&uv(n,p,this)){var T=vn(t,0,l,!0);if(T===te)return S(!1);if(r=T,s=He(r),Zn(ze,t,te,a,r,s,n,!1)!==!1)return b(),t.insertBefore(te,T),qe=t,R(),S(!0)}else if(r.parentNode===t){s=He(r);var V=0,Z,U=te.parentNode!==t,x=!rv(te.animated&&te.toRect||a,r.animated&&r.toRect||s,p),E=p?"top":"left",F=Wr(r,"top","top")||Wr(te,"top","top"),ae=F?F.scrollTop:void 0;un!==r&&(Z=s[E],Nn=!1,Qn=!x&&l.invertSwap||U),V=cv(n,r,s,p,x?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,Qn,un===r);var L;if(V!==0){var j=Ze(te);do j-=V,L=qe.children[j];while(L&&(se(L,"display")==="none"||L===Ce))}if(V===0||L===r)return S(!1);un=r,Ln=V;var H=r.nextElementSibling,N=!1;N=V===1;var ee=Zn(ze,t,te,a,r,s,n,N);if(ee!==!1)return(ee===1||ee===-1)&&(N=ee===1),vr=!0,setTimeout(iv,30),b(),N&&!H?t.appendChild(te):r.parentNode.insertBefore(te,N?H:r),F&&is(F,0,ae-F.scrollTop),qe=te.parentNode,Z!==void 0&&!Qn&&(ao=Math.abs(Z-He(r)[E])),R(),S(!0)}if(t.contains(te))return S(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ie(document,"mousemove",this._onTouchMove),Ie(document,"touchmove",this._onTouchMove),Ie(document,"pointermove",this._onTouchMove),Ie(document,"dragover",en),Ie(document,"mousemove",en),Ie(document,"touchmove",en)},_offUpEvents:function(){var n=this.el.ownerDocument;Ie(n,"mouseup",this._onDrop),Ie(n,"touchend",this._onDrop),Ie(n,"pointerup",this._onDrop),Ie(n,"touchcancel",this._onDrop),Ie(document,"selectstart",this)},_onDrop:function(n){var t=this.el,r=this.options;if(xt=Ze(te),zt=Ze(te,r.draggable),ht("drop",this,{evt:n}),qe=te&&te.parentNode,xt=Ze(te),zt=Ze(te,r.draggable),ve.eventCanceled){this._nulling();return}cn=!1,Qn=!1,Nn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),mr(this.cloneId),mr(this._dragStartId),this.nativeDraggable&&(Ie(document,"drop",this),Ie(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),An&&se(document.body,"user-select",""),se(te,"transform",""),n&&($n&&(n.cancelable&&n.preventDefault(),!r.dropBubble&&n.stopPropagation()),Ce&&Ce.parentNode&&Ce.parentNode.removeChild(Ce),(ze===qe||at&&at.lastPutMode!=="clone")&&Qe&&Qe.parentNode&&Qe.parentNode.removeChild(Qe),te&&(this.nativeDraggable&&Ie(te,"dragend",this),Wo(te),te.style["will-change"]="",$n&&!cn&&Ke(te,at?at.options.ghostClass:this.options.ghostClass,!1),Ke(te,this.options.chosenClass,!1),ct({sortable:this,name:"unchoose",toEl:qe,newIndex:null,newDraggableIndex:null,originalEvent:n}),ze!==qe?(xt>=0&&(ct({rootEl:qe,name:"add",toEl:qe,fromEl:ze,originalEvent:n}),ct({sortable:this,name:"remove",toEl:qe,originalEvent:n}),ct({rootEl:qe,name:"sort",toEl:qe,fromEl:ze,originalEvent:n}),ct({sortable:this,name:"sort",toEl:qe,originalEvent:n})),at&&at.save()):xt!==fn&&xt>=0&&(ct({sortable:this,name:"update",toEl:qe,originalEvent:n}),ct({sortable:this,name:"sort",toEl:qe,originalEvent:n})),ve.active&&((xt==null||xt===-1)&&(xt=fn,zt=Bn),ct({sortable:this,name:"end",toEl:qe,originalEvent:n}),this.save()))),this._nulling()},_nulling:function(){ht("nulling",this),ze=te=qe=Ce=tn=Qe=ro=Ht=Zt=Dt=$n=xt=zt=fn=Bn=un=Ln=at=qn=ve.dragged=ve.ghost=ve.clone=ve.active=null,go.forEach(function(n){n.checked=!0}),go.length=Ho=_o=0},handleEvent:function(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":te&&(this._onDragOver(n),lv(n));break;case"selectstart":n.preventDefault();break}},toArray:function(){for(var n=[],t,r=this.el.children,a=0,s=r.length,o=this.options;a<s;a++)t=r[a],Pt(t,o.draggable,this.el,!1)&&n.push(t.getAttribute(o.dataIdAttr)||pv(t));return n},sort:function(n,t){var r={},a=this.el;this.toArray().forEach(function(s,o){var l=a.children[o];Pt(l,this.options.draggable,a,!1)&&(r[s]=l)},this),t&&this.captureAnimationState(),n.forEach(function(s){r[s]&&(a.removeChild(r[s]),a.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function(n,t){return Pt(n,t||this.options.draggable,this.el,!1)},option:function(n,t){var r=this.options;if(t===void 0)return r[n];var a=Hn.modifyOption(this,n,t);typeof a<"u"?r[n]=a:r[n]=t,n==="group"&&cs(r)},destroy:function(){ht("destroy",this);var n=this.el;n[ut]=null,Ie(n,"mousedown",this._onTapStart),Ie(n,"touchstart",this._onTapStart),Ie(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ie(n,"dragover",this),Ie(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),po.splice(po.indexOf(this.el),1),this.el=n=null},_hideClone:function(){if(!Ht){if(ht("hideClone",this),ve.eventCanceled)return;se(Qe,"display","none"),this.options.removeCloneOnHide&&Qe.parentNode&&Qe.parentNode.removeChild(Qe),Ht=!0}},_showClone:function(n){if(n.lastPutMode!=="clone"){this._hideClone();return}if(Ht){if(ht("showClone",this),ve.eventCanceled)return;te.parentNode==ze&&!this.options.group.revertClone?ze.insertBefore(Qe,te):tn?ze.insertBefore(Qe,tn):ze.appendChild(Qe),this.options.group.revertClone&&this.animate(te,Qe),se(Qe,"display",""),Ht=!1}}};function lv(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Zn(e,n,t,r,a,s,o,l){var i,u=e[ut],d=u.options.onMove,c;return window.CustomEvent&&!kt&&!zn?i=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(i=document.createEvent("Event"),i.initEvent("move",!0,!0)),i.to=n,i.from=e,i.dragged=t,i.draggedRect=r,i.related=a||n,i.relatedRect=s||He(n),i.willInsertAfter=l,i.originalEvent=o,e.dispatchEvent(i),d&&(c=d.call(u,i,o)),c}function Wo(e){e.draggable=!1}function iv(){vr=!1}function uv(e,n,t){var r=He(vn(t.el,0,t.options,!0)),a=10;return n?e.clientX<r.left-a||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-a||e.clientY<r.bottom&&e.clientX<r.left}function dv(e,n,t){var r=He(Tr(t.el,t.options.draggable)),a=10;return n?e.clientX>r.right+a||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+a}function cv(e,n,t,r,a,s,o,l){var i=r?e.clientY:e.clientX,u=r?t.height:t.width,d=r?t.top:t.left,c=r?t.bottom:t.right,g=!1;if(!o){if(l&&ao<u*a){if(!Nn&&(Ln===1?i>d+u*s/2:i<c-u*s/2)&&(Nn=!0),Nn)g=!0;else if(Ln===1?i<d+ao:i>c-ao)return-Ln}else if(i>d+u*(1-a)/2&&i<c-u*(1-a)/2)return fv(n)}return g=g||o,g&&(i<d+u*s/2||i>c-u*s/2)?i>d+u/2?1:-1:0}function fv(e){return Ze(te)<Ze(e)?1:-1}function pv(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,t=n.length,r=0;t--;)r+=n.charCodeAt(t);return r.toString(36)}function gv(e){go.length=0;for(var n=e.getElementsByTagName("input"),t=n.length;t--;){var r=n[t];r.checked&&go.push(r)}}function so(e){return setTimeout(e,0)}function mr(e){return clearTimeout(e)}Do&&Pe(document,"touchmove",function(e){(ve.active||cn)&&e.cancelable&&e.preventDefault()});ve.utils={on:Pe,off:Ie,css:se,find:ss,is:function(n,t){return!!Pt(n,t,n,!1)},extend:Qg,throttle:ls,closest:Pt,toggleClass:Ke,clone:Mr,index:Ze,nextTick:so,cancelNextTick:mr,detectDirection:ds,getChild:vn};ve.get=function(e){return e[ut]};ve.mount=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];n[0].constructor===Array&&(n=n[0]),n.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(ve.utils=Vt(Vt({},ve.utils),r.utils)),Hn.mount(r)})};ve.create=function(e,n){return new ve(e,n)};ve.version=Wg;var ot=[],En,hr,yr=!1,Xo,Yo,vo,Rn;function vv(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?Pe(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Pe(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Pe(document,"touchmove",this._handleFallbackAutoScroll):Pe(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Ie(document,"dragover",this._handleAutoScroll):(Ie(document,"pointermove",this._handleFallbackAutoScroll),Ie(document,"touchmove",this._handleFallbackAutoScroll),Ie(document,"mousemove",this._handleFallbackAutoScroll)),Zr(),lo(),Jg()},nulling:function(){vo=hr=En=yr=Rn=Xo=Yo=null,ot.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var a=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(s,o);if(vo=t,r||this.options.forceAutoScrollFallback||zn||kt||An){qo(t,this.options,l,r);var i=Kt(l,!0);yr&&(!Rn||s!==Xo||o!==Yo)&&(Rn&&Zr(),Rn=setInterval(function(){var u=Kt(document.elementFromPoint(s,o),!0);u!==i&&(i=u,lo()),qo(t,a.options,u,r)},10),Xo=s,Yo=o)}else{if(!this.options.bubbleScroll||Kt(l,!0)===At()){lo();return}qo(t,this.options,Kt(l,!1),!1)}}},$t(e,{pluginName:"scroll",initializeByDefault:!0})}function lo(){ot.forEach(function(e){clearInterval(e.pid)}),ot=[]}function Zr(){clearInterval(Rn)}var qo=ls(function(e,n,t,r){if(n.scroll){var a=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=n.scrollSensitivity,l=n.scrollSpeed,i=At(),u=!1,d;hr!==t&&(hr=t,lo(),En=n.scroll,d=n.scrollFn,En===!0&&(En=Kt(t,!0)));var c=0,g=En;do{var p=g,m=He(p),h=m.top,y=m.bottom,b=m.left,S=m.right,R=m.width,O=m.height,T=void 0,V=void 0,Z=p.scrollWidth,U=p.scrollHeight,x=se(p),E=p.scrollLeft,F=p.scrollTop;p===i?(T=R<Z&&(x.overflowX==="auto"||x.overflowX==="scroll"||x.overflowX==="visible"),V=O<U&&(x.overflowY==="auto"||x.overflowY==="scroll"||x.overflowY==="visible")):(T=R<Z&&(x.overflowX==="auto"||x.overflowX==="scroll"),V=O<U&&(x.overflowY==="auto"||x.overflowY==="scroll"));var ae=T&&(Math.abs(S-a)<=o&&E+R<Z)-(Math.abs(b-a)<=o&&!!E),L=V&&(Math.abs(y-s)<=o&&F+O<U)-(Math.abs(h-s)<=o&&!!F);if(!ot[c])for(var j=0;j<=c;j++)ot[j]||(ot[j]={});(ot[c].vx!=ae||ot[c].vy!=L||ot[c].el!==p)&&(ot[c].el=p,ot[c].vx=ae,ot[c].vy=L,clearInterval(ot[c].pid),(ae!=0||L!=0)&&(u=!0,ot[c].pid=setInterval((function(){r&&this.layer===0&&ve.active._onTouchMove(vo);var H=ot[this.layer].vy?ot[this.layer].vy*l:0,N=ot[this.layer].vx?ot[this.layer].vx*l:0;typeof d=="function"&&d.call(ve.dragged.parentNode[ut],N,H,e,vo,ot[this.layer].el)!=="continue"||is(ot[this.layer].el,N,H)}).bind({layer:c}),24))),c++}while(n.bubbleScroll&&g!==i&&(g=Kt(g,!1)));yr=u}},30),gs=function(n){var t=n.originalEvent,r=n.putSortable,a=n.dragEl,s=n.activeSortable,o=n.dispatchSortableEvent,l=n.hideGhostForTarget,i=n.unhideGhostForTarget;if(t){var u=r||s;l();var d=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(d.clientX,d.clientY);i(),u&&!u.el.contains(c)&&(o("spill"),this.onSpill({dragEl:a,putSortable:r}))}};function Fr(){}Fr.prototype={startIndex:null,dragStart:function(n){var t=n.oldDraggableIndex;this.startIndex=t},onSpill:function(n){var t=n.dragEl,r=n.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var a=vn(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:gs};$t(Fr,{pluginName:"revertOnSpill"});function Ar(){}Ar.prototype={onSpill:function(n){var t=n.dragEl,r=n.putSortable,a=r||this.sortable;a.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),a.animateAll()},drop:gs};$t(Ar,{pluginName:"removeOnSpill"});var Ct;function mv(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(t){var r=t.dragEl;Ct=r},dragOverValid:function(t){var r=t.completed,a=t.target,s=t.onMove,o=t.activeSortable,l=t.changed,i=t.cancel;if(o.options.swap){var u=this.sortable.el,d=this.options;if(a&&a!==u){var c=Ct;s(a)!==!1?(Ke(a,d.swapClass,!0),Ct=a):Ct=null,c&&c!==Ct&&Ke(c,d.swapClass,!1)}l(),r(!0),i()}},drop:function(t){var r=t.activeSortable,a=t.putSortable,s=t.dragEl,o=a||this.sortable,l=this.options;Ct&&Ke(Ct,l.swapClass,!1),Ct&&(l.swap||a&&a.options.swap)&&s!==Ct&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),hv(s,Ct),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){Ct=null}},$t(e,{pluginName:"swap",eventProperties:function(){return{swapItem:Ct}}})}function hv(e,n){var t=e.parentNode,r=n.parentNode,a,s;!t||!r||t.isEqualNode(n)||r.isEqualNode(e)||(a=Ze(e),s=Ze(n),t.isEqualNode(r)&&a<s&&s++,t.insertBefore(n,t.children[a]),r.insertBefore(e,r.children[s]))}var we=[],bt=[],yn,Ot,bn=!1,yt=!1,dn=!1,ke,xn,eo;function yv(){function e(n){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));n.options.supportPointer?Pe(document,"pointerup",this._deselectMultiDrag):(Pe(document,"mouseup",this._deselectMultiDrag),Pe(document,"touchend",this._deselectMultiDrag)),Pe(document,"keydown",this._checkKeyDown),Pe(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(a,s){var o="";we.length&&Ot===n?we.forEach(function(l,i){o+=(i?", ":"")+l.textContent}):o=s.textContent,a.setData("Text",o)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;ke=r},delayEnded:function(){this.isMultiDrag=~we.indexOf(ke)},setupClone:function(t){var r=t.sortable,a=t.cancel;if(this.isMultiDrag){for(var s=0;s<we.length;s++)bt.push(Mr(we[s])),bt[s].sortableIndex=we[s].sortableIndex,bt[s].draggable=!1,bt[s].style["will-change"]="",Ke(bt[s],this.options.selectedClass,!1),we[s]===ke&&Ke(bt[s],this.options.chosenClass,!1);r._hideClone(),a()}},clone:function(t){var r=t.sortable,a=t.rootEl,s=t.dispatchSortableEvent,o=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||we.length&&Ot===r&&(ea(!0,a),s("clone"),o()))},showClone:function(t){var r=t.cloneNowShown,a=t.rootEl,s=t.cancel;this.isMultiDrag&&(ea(!1,a),bt.forEach(function(o){se(o,"display","")}),r(),eo=!1,s())},hideClone:function(t){var r=this;t.sortable;var a=t.cloneNowHidden,s=t.cancel;this.isMultiDrag&&(bt.forEach(function(o){se(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),a(),eo=!0,s())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&Ot&&Ot.multiDrag._deselectMultiDrag(),we.forEach(function(r){r.sortableIndex=Ze(r)}),we=we.sort(function(r,a){return r.sortableIndex-a.sortableIndex}),dn=!0},dragStarted:function(t){var r=this,a=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){we.forEach(function(o){o!==ke&&se(o,"position","absolute")});var s=He(ke,!1,!0,!0);we.forEach(function(o){o!==ke&&Yr(o,s)}),yt=!0,bn=!0}a.animateAll(function(){yt=!1,bn=!1,r.options.animation&&we.forEach(function(o){Go(o)}),r.options.sort&&to()})}},dragOver:function(t){var r=t.target,a=t.completed,s=t.cancel;yt&&~we.indexOf(r)&&(a(!1),s())},revert:function(t){var r=t.fromSortable,a=t.rootEl,s=t.sortable,o=t.dragRect;we.length>1&&(we.forEach(function(l){s.addAnimationState({target:l,rect:yt?He(l):o}),Go(l),l.fromRect=o,r.removeAnimationState(l)}),yt=!1,bv(!this.options.removeCloneOnHide,a))},dragOverCompleted:function(t){var r=t.sortable,a=t.isOwner,s=t.insertion,o=t.activeSortable,l=t.parentEl,i=t.putSortable,u=this.options;if(s){if(a&&o._hideClone(),bn=!1,u.animation&&we.length>1&&(yt||!a&&!o.options.sort&&!i)){var d=He(ke,!1,!0,!0);we.forEach(function(g){g!==ke&&(Yr(g,d),l.appendChild(g))}),yt=!0}if(!a)if(yt||to(),we.length>1){var c=eo;o._showClone(r),o.options.animation&&!eo&&c&&bt.forEach(function(g){o.addAnimationState({target:g,rect:xn}),g.fromRect=xn,g.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,a=t.isOwner,s=t.activeSortable;if(we.forEach(function(l){l.thisAnimationDuration=null}),s.options.animation&&!a&&s.multiDrag.isMultiDrag){xn=$t({},r);var o=nn(ke,!0);xn.top-=o.f,xn.left-=o.e}},dragOverAnimationComplete:function(){yt&&(yt=!1,to())},drop:function(t){var r=t.originalEvent,a=t.rootEl,s=t.parentEl,o=t.sortable,l=t.dispatchSortableEvent,i=t.oldIndex,u=t.putSortable,d=u||this.sortable;if(r){var c=this.options,g=s.children;if(!dn)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Ke(ke,c.selectedClass,!~we.indexOf(ke)),~we.indexOf(ke))we.splice(we.indexOf(ke),1),yn=null,Cn({sortable:o,rootEl:a,name:"deselect",targetEl:ke});else{if(we.push(ke),Cn({sortable:o,rootEl:a,name:"select",targetEl:ke}),r.shiftKey&&yn&&o.el.contains(yn)){var p=Ze(yn),m=Ze(ke);if(~p&&~m&&p!==m){var h,y;for(m>p?(y=p,h=m):(y=m,h=p+1);y<h;y++)~we.indexOf(g[y])||(Ke(g[y],c.selectedClass,!0),we.push(g[y]),Cn({sortable:o,rootEl:a,name:"select",targetEl:g[y]}))}}else yn=ke;Ot=d}if(dn&&this.isMultiDrag){if(yt=!1,(s[ut].options.sort||s!==a)&&we.length>1){var b=He(ke),S=Ze(ke,":not(."+this.options.selectedClass+")");if(!bn&&c.animation&&(ke.thisAnimationDuration=null),d.captureAnimationState(),!bn&&(c.animation&&(ke.fromRect=b,we.forEach(function(O){if(O.thisAnimationDuration=null,O!==ke){var T=yt?He(O):b;O.fromRect=T,d.addAnimationState({target:O,rect:T})}})),to(),we.forEach(function(O){g[S]?s.insertBefore(O,g[S]):s.appendChild(O),S++}),i===Ze(ke))){var R=!1;we.forEach(function(O){if(O.sortableIndex!==Ze(O)){R=!0;return}}),R&&l("update")}we.forEach(function(O){Go(O)}),d.animateAll()}Ot=d}(a===s||u&&u.lastPutMode!=="clone")&&bt.forEach(function(O){O.parentNode&&O.parentNode.removeChild(O)})}},nullingGlobal:function(){this.isMultiDrag=dn=!1,bt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Ie(document,"pointerup",this._deselectMultiDrag),Ie(document,"mouseup",this._deselectMultiDrag),Ie(document,"touchend",this._deselectMultiDrag),Ie(document,"keydown",this._checkKeyDown),Ie(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof dn<"u"&&dn)&&Ot===this.sortable&&!(t&&Pt(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;we.length;){var r=we[0];Ke(r,this.options.selectedClass,!1),we.shift(),Cn({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},$t(e,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[ut];!r||!r.options.multiDrag||~we.indexOf(t)||(Ot&&Ot!==r&&(Ot.multiDrag._deselectMultiDrag(),Ot=r),Ke(t,r.options.selectedClass,!0),we.push(t))},deselect:function(t){var r=t.parentNode[ut],a=we.indexOf(t);!r||!r.options.multiDrag||!~a||(Ke(t,r.options.selectedClass,!1),we.splice(a,1))}},eventProperties:function(){var t=this,r=[],a=[];return we.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;yt&&s!==ke?o=-1:yt?o=Ze(s,":not(."+t.options.selectedClass+")"):o=Ze(s),a.push({multiDragElement:s,index:o})}),{items:Gg(we),clones:[].concat(bt),oldIndicies:r,newIndicies:a}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function bv(e,n){we.forEach(function(t,r){var a=n.children[t.sortableIndex+(e?Number(r):0)];a?n.insertBefore(t,a):n.appendChild(t)})}function ea(e,n){bt.forEach(function(t,r){var a=n.children[t.sortableIndex+(e?Number(r):0)];a?n.insertBefore(t,a):n.appendChild(t)})}function to(){we.forEach(function(e){e!==ke&&e.parentNode&&e.parentNode.removeChild(e)})}ve.mount(new vv);ve.mount(Ar,Fr);const xv=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:yv,Sortable:ve,Swap:mv,default:ve},Symbol.toStringTag,{value:"Module"})),Sv=ns(xv);(function(e,n){(function(r,a){e.exports=a(Ng,Sv)})(typeof self<"u"?self:Bg,function(t,r){return function(a){var s={};function o(l){if(s[l])return s[l].exports;var i=s[l]={i:l,l:!1,exports:{}};return a[l].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=a,o.c=s,o.d=function(l,i,u){o.o(l,i)||Object.defineProperty(l,i,{enumerable:!0,get:u})},o.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.t=function(l,i){if(i&1&&(l=o(l)),i&8||i&4&&typeof l=="object"&&l&&l.__esModule)return l;var u=Object.create(null);if(o.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:l}),i&2&&typeof l!="string")for(var d in l)o.d(u,d,(function(c){return l[c]}).bind(null,d));return u},o.n=function(l){var i=l&&l.__esModule?function(){return l.default}:function(){return l};return o.d(i,"a",i),i},o.o=function(l,i){return Object.prototype.hasOwnProperty.call(l,i)},o.p="",o(o.s="fb15")}({"00ee":function(a,s,o){var l=o("b622"),i=l("toStringTag"),u={};u[i]="z",a.exports=String(u)==="[object z]"},"0366":function(a,s,o){var l=o("1c0b");a.exports=function(i,u,d){if(l(i),u===void 0)return i;switch(d){case 0:return function(){return i.call(u)};case 1:return function(c){return i.call(u,c)};case 2:return function(c,g){return i.call(u,c,g)};case 3:return function(c,g,p){return i.call(u,c,g,p)}}return function(){return i.apply(u,arguments)}}},"057f":function(a,s,o){var l=o("fc6a"),i=o("241c").f,u={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(g){try{return i(g)}catch{return d.slice()}};a.exports.f=function(p){return d&&u.call(p)=="[object Window]"?c(p):i(l(p))}},"06cf":function(a,s,o){var l=o("83ab"),i=o("d1e7"),u=o("5c6c"),d=o("fc6a"),c=o("c04e"),g=o("5135"),p=o("0cfb"),m=Object.getOwnPropertyDescriptor;s.f=l?m:function(y,b){if(y=d(y),b=c(b,!0),p)try{return m(y,b)}catch{}if(g(y,b))return u(!i.f.call(y,b),y[b])}},"0cfb":function(a,s,o){var l=o("83ab"),i=o("d039"),u=o("cc12");a.exports=!l&&!i(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(a,s,o){var l=o("23e7"),i=o("d58f").left,u=o("a640"),d=o("ae40"),c=u("reduce"),g=d("reduce",{1:0});l({target:"Array",proto:!0,forced:!c||!g},{reduce:function(m){return i(this,m,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(a,s,o){var l=o("c6b6"),i=o("9263");a.exports=function(u,d){var c=u.exec;if(typeof c=="function"){var g=c.call(u,d);if(typeof g!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return g}if(l(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return i.call(u,d)}},"159b":function(a,s,o){var l=o("da84"),i=o("fdbc"),u=o("17c2"),d=o("9112");for(var c in i){var g=l[c],p=g&&g.prototype;if(p&&p.forEach!==u)try{d(p,"forEach",u)}catch{p.forEach=u}}},"17c2":function(a,s,o){var l=o("b727").forEach,i=o("a640"),u=o("ae40"),d=i("forEach"),c=u("forEach");a.exports=!d||!c?function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(a,s,o){var l=o("d066");a.exports=l("document","documentElement")},"1c0b":function(a,s){a.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(a,s,o){var l=o("b622"),i=l("iterator"),u=!1;try{var d=0,c={next:function(){return{done:!!d++}},return:function(){u=!0}};c[i]=function(){return this},Array.from(c,function(){throw 2})}catch{}a.exports=function(g,p){if(!p&&!u)return!1;var m=!1;try{var h={};h[i]=function(){return{next:function(){return{done:m=!0}}}},g(h)}catch{}return m}},"1d80":function(a,s){a.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(a,s,o){var l=o("d039"),i=o("b622"),u=o("2d00"),d=i("species");a.exports=function(c){return u>=51||!l(function(){var g=[],p=g.constructor={};return p[d]=function(){return{foo:1}},g[c](Boolean).foo!==1})}},"23cb":function(a,s,o){var l=o("a691"),i=Math.max,u=Math.min;a.exports=function(d,c){var g=l(d);return g<0?i(g+c,0):u(g,c)}},"23e7":function(a,s,o){var l=o("da84"),i=o("06cf").f,u=o("9112"),d=o("6eeb"),c=o("ce4e"),g=o("e893"),p=o("94ca");a.exports=function(m,h){var y=m.target,b=m.global,S=m.stat,R,O,T,V,Z,U;if(b?O=l:S?O=l[y]||c(y,{}):O=(l[y]||{}).prototype,O)for(T in h){if(Z=h[T],m.noTargetGet?(U=i(O,T),V=U&&U.value):V=O[T],R=p(b?T:y+(S?".":"#")+T,m.forced),!R&&V!==void 0){if(typeof Z==typeof V)continue;g(Z,V)}(m.sham||V&&V.sham)&&u(Z,"sham",!0),d(O,T,Z,m)}}},"241c":function(a,s,o){var l=o("ca84"),i=o("7839"),u=i.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(c){return l(c,u)}},"25f0":function(a,s,o){var l=o("6eeb"),i=o("825a"),u=o("d039"),d=o("ad6d"),c="toString",g=RegExp.prototype,p=g[c],m=u(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),h=p.name!=c;(m||h)&&l(RegExp.prototype,c,function(){var b=i(this),S=String(b.source),R=b.flags,O=String(R===void 0&&b instanceof RegExp&&!("flags"in g)?d.call(b):R);return"/"+S+"/"+O},{unsafe:!0})},"2ca0":function(a,s,o){var l=o("23e7"),i=o("06cf").f,u=o("50c4"),d=o("5a34"),c=o("1d80"),g=o("ab13"),p=o("c430"),m="".startsWith,h=Math.min,y=g("startsWith"),b=!p&&!y&&!!function(){var S=i(String.prototype,"startsWith");return S&&!S.writable}();l({target:"String",proto:!0,forced:!b&&!y},{startsWith:function(R){var O=String(c(this));d(R);var T=u(h(arguments.length>1?arguments[1]:void 0,O.length)),V=String(R);return m?m.call(O,V,T):O.slice(T,T+V.length)===V}})},"2d00":function(a,s,o){var l=o("da84"),i=o("342f"),u=l.process,d=u&&u.versions,c=d&&d.v8,g,p;c?(g=c.split("."),p=g[0]+g[1]):i&&(g=i.match(/Edge\/(\d+)/),(!g||g[1]>=74)&&(g=i.match(/Chrome\/(\d+)/),g&&(p=g[1]))),a.exports=p&&+p},"342f":function(a,s,o){var l=o("d066");a.exports=l("navigator","userAgent")||""},"35a1":function(a,s,o){var l=o("f5df"),i=o("3f8c"),u=o("b622"),d=u("iterator");a.exports=function(c){if(c!=null)return c[d]||c["@@iterator"]||i[l(c)]}},"37e8":function(a,s,o){var l=o("83ab"),i=o("9bf2"),u=o("825a"),d=o("df75");a.exports=l?Object.defineProperties:function(g,p){u(g);for(var m=d(p),h=m.length,y=0,b;h>y;)i.f(g,b=m[y++],p[b]);return g}},"3bbe":function(a,s,o){var l=o("861d");a.exports=function(i){if(!l(i)&&i!==null)throw TypeError("Can't set "+String(i)+" as a prototype");return i}},"3ca3":function(a,s,o){var l=o("6547").charAt,i=o("69f3"),u=o("7dd0"),d="String Iterator",c=i.set,g=i.getterFor(d);u(String,"String",function(p){c(this,{type:d,string:String(p),index:0})},function(){var m=g(this),h=m.string,y=m.index,b;return y>=h.length?{value:void 0,done:!0}:(b=l(h,y),m.index+=b.length,{value:b,done:!1})})},"3f8c":function(a,s){a.exports={}},4160:function(a,s,o){var l=o("23e7"),i=o("17c2");l({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"428f":function(a,s,o){var l=o("da84");a.exports=l},"44ad":function(a,s,o){var l=o("d039"),i=o("c6b6"),u="".split;a.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return i(d)=="String"?u.call(d,""):Object(d)}:Object},"44d2":function(a,s,o){var l=o("b622"),i=o("7c73"),u=o("9bf2"),d=l("unscopables"),c=Array.prototype;c[d]==null&&u.f(c,d,{configurable:!0,value:i(null)}),a.exports=function(g){c[d][g]=!0}},"44e7":function(a,s,o){var l=o("861d"),i=o("c6b6"),u=o("b622"),d=u("match");a.exports=function(c){var g;return l(c)&&((g=c[d])!==void 0?!!g:i(c)=="RegExp")}},4930:function(a,s,o){var l=o("d039");a.exports=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())})},"4d64":function(a,s,o){var l=o("fc6a"),i=o("50c4"),u=o("23cb"),d=function(c){return function(g,p,m){var h=l(g),y=i(h.length),b=u(m,y),S;if(c&&p!=p){for(;y>b;)if(S=h[b++],S!=S)return!0}else for(;y>b;b++)if((c||b in h)&&h[b]===p)return c||b||0;return!c&&-1}};a.exports={includes:d(!0),indexOf:d(!1)}},"4de4":function(a,s,o){var l=o("23e7"),i=o("b727").filter,u=o("1dde"),d=o("ae40"),c=u("filter"),g=d("filter");l({target:"Array",proto:!0,forced:!c||!g},{filter:function(m){return i(this,m,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(a,s,o){var l=o("0366"),i=o("7b0b"),u=o("9bdd"),d=o("e95a"),c=o("50c4"),g=o("8418"),p=o("35a1");a.exports=function(h){var y=i(h),b=typeof this=="function"?this:Array,S=arguments.length,R=S>1?arguments[1]:void 0,O=R!==void 0,T=p(y),V=0,Z,U,x,E,F,ae;if(O&&(R=l(R,S>2?arguments[2]:void 0,2)),T!=null&&!(b==Array&&d(T)))for(E=T.call(y),F=E.next,U=new b;!(x=F.call(E)).done;V++)ae=O?u(E,R,[x.value,V],!0):x.value,g(U,V,ae);else for(Z=c(y.length),U=new b(Z);Z>V;V++)ae=O?R(y[V],V):y[V],g(U,V,ae);return U.length=V,U}},"4fad":function(a,s,o){var l=o("23e7"),i=o("6f53").entries;l({target:"Object",stat:!0},{entries:function(d){return i(d)}})},"50c4":function(a,s,o){var l=o("a691"),i=Math.min;a.exports=function(u){return u>0?i(l(u),9007199254740991):0}},5135:function(a,s){var o={}.hasOwnProperty;a.exports=function(l,i){return o.call(l,i)}},5319:function(a,s,o){var l=o("d784"),i=o("825a"),u=o("7b0b"),d=o("50c4"),c=o("a691"),g=o("1d80"),p=o("8aa5"),m=o("14c3"),h=Math.max,y=Math.min,b=Math.floor,S=/\$([$&'`]|\d\d?|<[^>]*>)/g,R=/\$([$&'`]|\d\d?)/g,O=function(T){return T===void 0?T:String(T)};l("replace",2,function(T,V,Z,U){var x=U.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,E=U.REPLACE_KEEPS_$0,F=x?"$":"$0";return[function(j,H){var N=g(this),ee=j==null?void 0:j[T];return ee!==void 0?ee.call(j,N,H):V.call(String(N),j,H)},function(L,j){if(!x&&E||typeof j=="string"&&j.indexOf(F)===-1){var H=Z(V,L,this,j);if(H.done)return H.value}var N=i(L),ee=String(this),de=typeof j=="function";de||(j=String(j));var $e=N.global;if($e){var Be=N.unicode;N.lastIndex=0}for(var Te=[];;){var De=m(N,ee);if(De===null||(Te.push(De),!$e))break;var Q=String(De[0]);Q===""&&(N.lastIndex=p(ee,d(N.lastIndex),Be))}for(var J="",fe=0,ce=0;ce<Te.length;ce++){De=Te[ce];for(var Ee=String(De[0]),je=h(y(c(De.index),ee.length),0),X=[],D=1;D<De.length;D++)X.push(O(De[D]));var K=De.groups;if(de){var Ne=[Ee].concat(X,je,ee);K!==void 0&&Ne.push(K);var Ye=String(j.apply(void 0,Ne))}else Ye=ae(Ee,ee,je,X,K,j);je>=fe&&(J+=ee.slice(fe,je)+Ye,fe=je+Ee.length)}return J+ee.slice(fe)}];function ae(L,j,H,N,ee,de){var $e=H+L.length,Be=N.length,Te=R;return ee!==void 0&&(ee=u(ee),Te=S),V.call(de,Te,function(De,Q){var J;switch(Q.charAt(0)){case"$":return"$";case"&":return L;case"`":return j.slice(0,H);case"'":return j.slice($e);case"<":J=ee[Q.slice(1,-1)];break;default:var fe=+Q;if(fe===0)return De;if(fe>Be){var ce=b(fe/10);return ce===0?De:ce<=Be?N[ce-1]===void 0?Q.charAt(1):N[ce-1]+Q.charAt(1):De}J=N[fe-1]}return J===void 0?"":J})}})},5692:function(a,s,o){var l=o("c430"),i=o("c6cd");(a.exports=function(u,d){return i[u]||(i[u]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:l?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(a,s,o){var l=o("d066"),i=o("241c"),u=o("7418"),d=o("825a");a.exports=l("Reflect","ownKeys")||function(g){var p=i.f(d(g)),m=u.f;return m?p.concat(m(g)):p}},"5a34":function(a,s,o){var l=o("44e7");a.exports=function(i){if(l(i))throw TypeError("The method doesn't accept regular expressions");return i}},"5c6c":function(a,s){a.exports=function(o,l){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:l}}},"5db7":function(a,s,o){var l=o("23e7"),i=o("a2bf"),u=o("7b0b"),d=o("50c4"),c=o("1c0b"),g=o("65f0");l({target:"Array",proto:!0},{flatMap:function(m){var h=u(this),y=d(h.length),b;return c(m),b=g(h,0),b.length=i(b,h,h,y,0,1,m,arguments.length>1?arguments[1]:void 0),b}})},6547:function(a,s,o){var l=o("a691"),i=o("1d80"),u=function(d){return function(c,g){var p=String(i(c)),m=l(g),h=p.length,y,b;return m<0||m>=h?d?"":void 0:(y=p.charCodeAt(m),y<55296||y>56319||m+1===h||(b=p.charCodeAt(m+1))<56320||b>57343?d?p.charAt(m):y:d?p.slice(m,m+2):(y-55296<<10)+(b-56320)+65536)}};a.exports={codeAt:u(!1),charAt:u(!0)}},"65f0":function(a,s,o){var l=o("861d"),i=o("e8b5"),u=o("b622"),d=u("species");a.exports=function(c,g){var p;return i(c)&&(p=c.constructor,typeof p=="function"&&(p===Array||i(p.prototype))?p=void 0:l(p)&&(p=p[d],p===null&&(p=void 0))),new(p===void 0?Array:p)(g===0?0:g)}},"69f3":function(a,s,o){var l=o("7f9a"),i=o("da84"),u=o("861d"),d=o("9112"),c=o("5135"),g=o("f772"),p=o("d012"),m=i.WeakMap,h,y,b,S=function(x){return b(x)?y(x):h(x,{})},R=function(x){return function(E){var F;if(!u(E)||(F=y(E)).type!==x)throw TypeError("Incompatible receiver, "+x+" required");return F}};if(l){var O=new m,T=O.get,V=O.has,Z=O.set;h=function(x,E){return Z.call(O,x,E),E},y=function(x){return T.call(O,x)||{}},b=function(x){return V.call(O,x)}}else{var U=g("state");p[U]=!0,h=function(x,E){return d(x,U,E),E},y=function(x){return c(x,U)?x[U]:{}},b=function(x){return c(x,U)}}a.exports={set:h,get:y,has:b,enforce:S,getterFor:R}},"6eeb":function(a,s,o){var l=o("da84"),i=o("9112"),u=o("5135"),d=o("ce4e"),c=o("8925"),g=o("69f3"),p=g.get,m=g.enforce,h=String(String).split("String");(a.exports=function(y,b,S,R){var O=R?!!R.unsafe:!1,T=R?!!R.enumerable:!1,V=R?!!R.noTargetGet:!1;if(typeof S=="function"&&(typeof b=="string"&&!u(S,"name")&&i(S,"name",b),m(S).source=h.join(typeof b=="string"?b:"")),y===l){T?y[b]=S:d(b,S);return}else O?!V&&y[b]&&(T=!0):delete y[b];T?y[b]=S:i(y,b,S)})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||c(this)})},"6f53":function(a,s,o){var l=o("83ab"),i=o("df75"),u=o("fc6a"),d=o("d1e7").f,c=function(g){return function(p){for(var m=u(p),h=i(m),y=h.length,b=0,S=[],R;y>b;)R=h[b++],(!l||d.call(m,R))&&S.push(g?[R,m[R]]:m[R]);return S}};a.exports={entries:c(!0),values:c(!1)}},"73d9":function(a,s,o){var l=o("44d2");l("flatMap")},7418:function(a,s){s.f=Object.getOwnPropertySymbols},"746f":function(a,s,o){var l=o("428f"),i=o("5135"),u=o("e538"),d=o("9bf2").f;a.exports=function(c){var g=l.Symbol||(l.Symbol={});i(g,c)||d(g,c,{value:u.f(c)})}},7839:function(a,s){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(a,s,o){var l=o("1d80");a.exports=function(i){return Object(l(i))}},"7c73":function(a,s,o){var l=o("825a"),i=o("37e8"),u=o("7839"),d=o("d012"),c=o("1be4"),g=o("cc12"),p=o("f772"),m=">",h="<",y="prototype",b="script",S=p("IE_PROTO"),R=function(){},O=function(x){return h+b+m+x+h+"/"+b+m},T=function(x){x.write(O("")),x.close();var E=x.parentWindow.Object;return x=null,E},V=function(){var x=g("iframe"),E="java"+b+":",F;return x.style.display="none",c.appendChild(x),x.src=String(E),F=x.contentWindow.document,F.open(),F.write(O("document.F=Object")),F.close(),F.F},Z,U=function(){try{Z=document.domain&&new ActiveXObject("htmlfile")}catch{}U=Z?T(Z):V();for(var x=u.length;x--;)delete U[y][u[x]];return U()};d[S]=!0,a.exports=Object.create||function(E,F){var ae;return E!==null?(R[y]=l(E),ae=new R,R[y]=null,ae[S]=E):ae=U(),F===void 0?ae:i(ae,F)}},"7dd0":function(a,s,o){var l=o("23e7"),i=o("9ed3"),u=o("e163"),d=o("d2bb"),c=o("d44e"),g=o("9112"),p=o("6eeb"),m=o("b622"),h=o("c430"),y=o("3f8c"),b=o("ae93"),S=b.IteratorPrototype,R=b.BUGGY_SAFARI_ITERATORS,O=m("iterator"),T="keys",V="values",Z="entries",U=function(){return this};a.exports=function(x,E,F,ae,L,j,H){i(F,E,ae);var N=function(ce){if(ce===L&&Te)return Te;if(!R&&ce in $e)return $e[ce];switch(ce){case T:return function(){return new F(this,ce)};case V:return function(){return new F(this,ce)};case Z:return function(){return new F(this,ce)}}return function(){return new F(this)}},ee=E+" Iterator",de=!1,$e=x.prototype,Be=$e[O]||$e["@@iterator"]||L&&$e[L],Te=!R&&Be||N(L),De=E=="Array"&&$e.entries||Be,Q,J,fe;if(De&&(Q=u(De.call(new x)),S!==Object.prototype&&Q.next&&(!h&&u(Q)!==S&&(d?d(Q,S):typeof Q[O]!="function"&&g(Q,O,U)),c(Q,ee,!0,!0),h&&(y[ee]=U))),L==V&&Be&&Be.name!==V&&(de=!0,Te=function(){return Be.call(this)}),(!h||H)&&$e[O]!==Te&&g($e,O,Te),y[E]=Te,L)if(J={values:N(V),keys:j?Te:N(T),entries:N(Z)},H)for(fe in J)(R||de||!(fe in $e))&&p($e,fe,J[fe]);else l({target:E,proto:!0,forced:R||de},J);return J}},"7f9a":function(a,s,o){var l=o("da84"),i=o("8925"),u=l.WeakMap;a.exports=typeof u=="function"&&/native code/.test(i(u))},"825a":function(a,s,o){var l=o("861d");a.exports=function(i){if(!l(i))throw TypeError(String(i)+" is not an object");return i}},"83ab":function(a,s,o){var l=o("d039");a.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(a,s,o){var l=o("c04e"),i=o("9bf2"),u=o("5c6c");a.exports=function(d,c,g){var p=l(c);p in d?i.f(d,p,u(0,g)):d[p]=g}},"861d":function(a,s){a.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(a,s,o){var l,i,u;(function(d,c){i=[],l=c,u=typeof l=="function"?l.apply(s,i):l,u!==void 0&&(a.exports=u)})(typeof self<"u"?self:this,function(){function d(){var c=Object.getOwnPropertyDescriptor(document,"currentScript");if(!c&&"currentScript"in document&&document.currentScript||c&&c.get!==d&&document.currentScript)return document.currentScript;try{throw new Error}catch(Z){var g=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,p=/@([^@]*):(\d+):(\d+)\s*$/ig,m=g.exec(Z.stack)||p.exec(Z.stack),h=m&&m[1]||!1,y=m&&m[2]||!1,b=document.location.href.replace(document.location.hash,""),S,R,O,T=document.getElementsByTagName("script");h===b&&(S=document.documentElement.outerHTML,R=new RegExp("(?:[^\\n]+?\\n){0,"+(y-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),O=S.replace(R,"$1").trim());for(var V=0;V<T.length;V++)if(T[V].readyState==="interactive"||T[V].src===h||h===b&&T[V].innerHTML&&T[V].innerHTML.trim()===O)return T[V];return null}}return d})},8925:function(a,s,o){var l=o("c6cd"),i=Function.toString;typeof l.inspectSource!="function"&&(l.inspectSource=function(u){return i.call(u)}),a.exports=l.inspectSource},"8aa5":function(a,s,o){var l=o("6547").charAt;a.exports=function(i,u,d){return u+(d?l(i,u).length:1)}},"8bbf":function(a,s){a.exports=t},"90e3":function(a,s){var o=0,l=Math.random();a.exports=function(i){return"Symbol("+String(i===void 0?"":i)+")_"+(++o+l).toString(36)}},9112:function(a,s,o){var l=o("83ab"),i=o("9bf2"),u=o("5c6c");a.exports=l?function(d,c,g){return i.f(d,c,u(1,g))}:function(d,c,g){return d[c]=g,d}},9263:function(a,s,o){var l=o("ad6d"),i=o("9f7f"),u=RegExp.prototype.exec,d=String.prototype.replace,c=u,g=function(){var y=/a/,b=/b*/g;return u.call(y,"a"),u.call(b,"a"),y.lastIndex!==0||b.lastIndex!==0}(),p=i.UNSUPPORTED_Y||i.BROKEN_CARET,m=/()??/.exec("")[1]!==void 0,h=g||m||p;h&&(c=function(b){var S=this,R,O,T,V,Z=p&&S.sticky,U=l.call(S),x=S.source,E=0,F=b;return Z&&(U=U.replace("y",""),U.indexOf("g")===-1&&(U+="g"),F=String(b).slice(S.lastIndex),S.lastIndex>0&&(!S.multiline||S.multiline&&b[S.lastIndex-1]!==`
`)&&(x="(?: "+x+")",F=" "+F,E++),O=new RegExp("^(?:"+x+")",U)),m&&(O=new RegExp("^"+x+"$(?!\\s)",U)),g&&(R=S.lastIndex),T=u.call(Z?O:S,F),Z?T?(T.input=T.input.slice(E),T[0]=T[0].slice(E),T.index=S.lastIndex,S.lastIndex+=T[0].length):S.lastIndex=0:g&&T&&(S.lastIndex=S.global?T.index+T[0].length:R),m&&T&&T.length>1&&d.call(T[0],O,function(){for(V=1;V<arguments.length-2;V++)arguments[V]===void 0&&(T[V]=void 0)}),T}),a.exports=c},"94ca":function(a,s,o){var l=o("d039"),i=/#|\.prototype\./,u=function(m,h){var y=c[d(m)];return y==p?!0:y==g?!1:typeof h=="function"?l(h):!!h},d=u.normalize=function(m){return String(m).replace(i,".").toLowerCase()},c=u.data={},g=u.NATIVE="N",p=u.POLYFILL="P";a.exports=u},"99af":function(a,s,o){var l=o("23e7"),i=o("d039"),u=o("e8b5"),d=o("861d"),c=o("7b0b"),g=o("50c4"),p=o("8418"),m=o("65f0"),h=o("1dde"),y=o("b622"),b=o("2d00"),S=y("isConcatSpreadable"),R=9007199254740991,O="Maximum allowed index exceeded",T=b>=51||!i(function(){var x=[];return x[S]=!1,x.concat()[0]!==x}),V=h("concat"),Z=function(x){if(!d(x))return!1;var E=x[S];return E!==void 0?!!E:u(x)},U=!T||!V;l({target:"Array",proto:!0,forced:U},{concat:function(E){var F=c(this),ae=m(F,0),L=0,j,H,N,ee,de;for(j=-1,N=arguments.length;j<N;j++)if(de=j===-1?F:arguments[j],Z(de)){if(ee=g(de.length),L+ee>R)throw TypeError(O);for(H=0;H<ee;H++,L++)H in de&&p(ae,L,de[H])}else{if(L>=R)throw TypeError(O);p(ae,L++,de)}return ae.length=L,ae}})},"9bdd":function(a,s,o){var l=o("825a");a.exports=function(i,u,d,c){try{return c?u(l(d)[0],d[1]):u(d)}catch(p){var g=i.return;throw g!==void 0&&l(g.call(i)),p}}},"9bf2":function(a,s,o){var l=o("83ab"),i=o("0cfb"),u=o("825a"),d=o("c04e"),c=Object.defineProperty;s.f=l?c:function(p,m,h){if(u(p),m=d(m,!0),u(h),i)try{return c(p,m,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(p[m]=h.value),p}},"9ed3":function(a,s,o){var l=o("ae93").IteratorPrototype,i=o("7c73"),u=o("5c6c"),d=o("d44e"),c=o("3f8c"),g=function(){return this};a.exports=function(p,m,h){var y=m+" Iterator";return p.prototype=i(l,{next:u(1,h)}),d(p,y,!1,!0),c[y]=g,p}},"9f7f":function(a,s,o){var l=o("d039");function i(u,d){return RegExp(u,d)}s.UNSUPPORTED_Y=l(function(){var u=i("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),s.BROKEN_CARET=l(function(){var u=i("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},a2bf:function(a,s,o){var l=o("e8b5"),i=o("50c4"),u=o("0366"),d=function(c,g,p,m,h,y,b,S){for(var R=h,O=0,T=b?u(b,S,3):!1,V;O<m;){if(O in p){if(V=T?T(p[O],O,g):p[O],y>0&&l(V))R=d(c,g,V,i(V.length),R,y-1)-1;else{if(R>=9007199254740991)throw TypeError("Exceed the acceptable array length");c[R]=V}R++}O++}return R};a.exports=d},a352:function(a,s){a.exports=r},a434:function(a,s,o){var l=o("23e7"),i=o("23cb"),u=o("a691"),d=o("50c4"),c=o("7b0b"),g=o("65f0"),p=o("8418"),m=o("1dde"),h=o("ae40"),y=m("splice"),b=h("splice",{ACCESSORS:!0,0:0,1:2}),S=Math.max,R=Math.min,O=9007199254740991,T="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!y||!b},{splice:function(Z,U){var x=c(this),E=d(x.length),F=i(Z,E),ae=arguments.length,L,j,H,N,ee,de;if(ae===0?L=j=0:ae===1?(L=0,j=E-F):(L=ae-2,j=R(S(u(U),0),E-F)),E+L-j>O)throw TypeError(T);for(H=g(x,j),N=0;N<j;N++)ee=F+N,ee in x&&p(H,N,x[ee]);if(H.length=j,L<j){for(N=F;N<E-j;N++)ee=N+j,de=N+L,ee in x?x[de]=x[ee]:delete x[de];for(N=E;N>E-j+L;N--)delete x[N-1]}else if(L>j)for(N=E-j;N>F;N--)ee=N+j-1,de=N+L-1,ee in x?x[de]=x[ee]:delete x[de];for(N=0;N<L;N++)x[N+F]=arguments[N+2];return x.length=E-j+L,H}})},a4d3:function(a,s,o){var l=o("23e7"),i=o("da84"),u=o("d066"),d=o("c430"),c=o("83ab"),g=o("4930"),p=o("fdbf"),m=o("d039"),h=o("5135"),y=o("e8b5"),b=o("861d"),S=o("825a"),R=o("7b0b"),O=o("fc6a"),T=o("c04e"),V=o("5c6c"),Z=o("7c73"),U=o("df75"),x=o("241c"),E=o("057f"),F=o("7418"),ae=o("06cf"),L=o("9bf2"),j=o("d1e7"),H=o("9112"),N=o("6eeb"),ee=o("5692"),de=o("f772"),$e=o("d012"),Be=o("90e3"),Te=o("b622"),De=o("e538"),Q=o("746f"),J=o("d44e"),fe=o("69f3"),ce=o("b727").forEach,Ee=de("hidden"),je="Symbol",X="prototype",D=Te("toPrimitive"),K=fe.set,Ne=fe.getterFor(je),Ye=Object[X],Oe=i.Symbol,nt=u("JSON","stringify"),pt=ae.f,gt=L.f,Qt=E.f,an=j.f,vt=ee("symbols"),It=ee("op-symbols"),Ut=ee("string-to-symbol-registry"),Jt=ee("symbol-to-string-registry"),Gt=ee("wks"),A=i.QObject,k=!A||!A[X]||!A[X].findChild,_=c&&m(function(){return Z(gt({},"a",{get:function(){return gt(this,"a",{value:7}).a}})).a!=7})?function(be,le,ge){var Me=pt(Ye,le);Me&&delete Ye[le],gt(be,le,ge),Me&&be!==Ye&&gt(Ye,le,Me)}:gt,ie=function(be,le){var ge=vt[be]=Z(Oe[X]);return K(ge,{type:je,tag:be,description:le}),c||(ge.description=le),ge},I=p?function(be){return typeof be=="symbol"}:function(be){return Object(be)instanceof Oe},P=function(le,ge,Me){le===Ye&&P(It,ge,Me),S(le);var Ve=T(ge,!0);return S(Me),h(vt,Ve)?(Me.enumerable?(h(le,Ee)&&le[Ee][Ve]&&(le[Ee][Ve]=!1),Me=Z(Me,{enumerable:V(0,!1)})):(h(le,Ee)||gt(le,Ee,V(1,{})),le[Ee][Ve]=!0),_(le,Ve,Me)):gt(le,Ve,Me)},B=function(le,ge){S(le);var Me=O(ge),Ve=U(Me).concat(Le(Me));return ce(Ve,function(mt){(!c||re.call(Me,mt))&&P(le,mt,Me[mt])}),le},z=function(le,ge){return ge===void 0?Z(le):B(Z(le),ge)},re=function(le){var ge=T(le,!0),Me=an.call(this,ge);return this===Ye&&h(vt,ge)&&!h(It,ge)?!1:Me||!h(this,ge)||!h(vt,ge)||h(this,Ee)&&this[Ee][ge]?Me:!0},pe=function(le,ge){var Me=O(le),Ve=T(ge,!0);if(!(Me===Ye&&h(vt,Ve)&&!h(It,Ve))){var mt=pt(Me,Ve);return mt&&h(vt,Ve)&&!(h(Me,Ee)&&Me[Ee][Ve])&&(mt.enumerable=!0),mt}},Se=function(le){var ge=Qt(O(le)),Me=[];return ce(ge,function(Ve){!h(vt,Ve)&&!h($e,Ve)&&Me.push(Ve)}),Me},Le=function(le){var ge=le===Ye,Me=Qt(ge?It:O(le)),Ve=[];return ce(Me,function(mt){h(vt,mt)&&(!ge||h(Ye,mt))&&Ve.push(vt[mt])}),Ve};if(g||(Oe=function(){if(this instanceof Oe)throw TypeError("Symbol is not a constructor");var le=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ge=Be(le),Me=function(Ve){this===Ye&&Me.call(It,Ve),h(this,Ee)&&h(this[Ee],ge)&&(this[Ee][ge]=!1),_(this,ge,V(1,Ve))};return c&&k&&_(Ye,ge,{configurable:!0,set:Me}),ie(ge,le)},N(Oe[X],"toString",function(){return Ne(this).tag}),N(Oe,"withoutSetter",function(be){return ie(Be(be),be)}),j.f=re,L.f=P,ae.f=pe,x.f=E.f=Se,F.f=Le,De.f=function(be){return ie(Te(be),be)},c&&(gt(Oe[X],"description",{configurable:!0,get:function(){return Ne(this).description}}),d||N(Ye,"propertyIsEnumerable",re,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!g,sham:!g},{Symbol:Oe}),ce(U(Gt),function(be){Q(be)}),l({target:je,stat:!0,forced:!g},{for:function(be){var le=String(be);if(h(Ut,le))return Ut[le];var ge=Oe(le);return Ut[le]=ge,Jt[ge]=le,ge},keyFor:function(le){if(!I(le))throw TypeError(le+" is not a symbol");if(h(Jt,le))return Jt[le]},useSetter:function(){k=!0},useSimple:function(){k=!1}}),l({target:"Object",stat:!0,forced:!g,sham:!c},{create:z,defineProperty:P,defineProperties:B,getOwnPropertyDescriptor:pe}),l({target:"Object",stat:!0,forced:!g},{getOwnPropertyNames:Se,getOwnPropertySymbols:Le}),l({target:"Object",stat:!0,forced:m(function(){F.f(1)})},{getOwnPropertySymbols:function(le){return F.f(R(le))}}),nt){var tt=!g||m(function(){var be=Oe();return nt([be])!="[null]"||nt({a:be})!="{}"||nt(Object(be))!="{}"});l({target:"JSON",stat:!0,forced:tt},{stringify:function(le,ge,Me){for(var Ve=[le],mt=1,Oo;arguments.length>mt;)Ve.push(arguments[mt++]);if(Oo=ge,!(!b(ge)&&le===void 0||I(le)))return y(ge)||(ge=function(hs,_n){if(typeof Oo=="function"&&(_n=Oo.call(this,hs,_n)),!I(_n))return _n}),Ve[1]=ge,nt.apply(null,Ve)}})}Oe[X][D]||H(Oe[X],D,Oe[X].valueOf),J(Oe,je),$e[Ee]=!0},a630:function(a,s,o){var l=o("23e7"),i=o("4df4"),u=o("1c7e"),d=!u(function(c){Array.from(c)});l({target:"Array",stat:!0,forced:d},{from:i})},a640:function(a,s,o){var l=o("d039");a.exports=function(i,u){var d=[][i];return!!d&&l(function(){d.call(null,u||function(){throw 1},1)})}},a691:function(a,s){var o=Math.ceil,l=Math.floor;a.exports=function(i){return isNaN(i=+i)?0:(i>0?l:o)(i)}},ab13:function(a,s,o){var l=o("b622"),i=l("match");a.exports=function(u){var d=/./;try{"/./"[u](d)}catch{try{return d[i]=!1,"/./"[u](d)}catch{}}return!1}},ac1f:function(a,s,o){var l=o("23e7"),i=o("9263");l({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(a,s,o){var l=o("825a");a.exports=function(){var i=l(this),u="";return i.global&&(u+="g"),i.ignoreCase&&(u+="i"),i.multiline&&(u+="m"),i.dotAll&&(u+="s"),i.unicode&&(u+="u"),i.sticky&&(u+="y"),u}},ae40:function(a,s,o){var l=o("83ab"),i=o("d039"),u=o("5135"),d=Object.defineProperty,c={},g=function(p){throw p};a.exports=function(p,m){if(u(c,p))return c[p];m||(m={});var h=[][p],y=u(m,"ACCESSORS")?m.ACCESSORS:!1,b=u(m,0)?m[0]:g,S=u(m,1)?m[1]:void 0;return c[p]=!!h&&!i(function(){if(y&&!l)return!0;var R={length:-1};y?d(R,1,{enumerable:!0,get:g}):R[1]=1,h.call(R,b,S)})}},ae93:function(a,s,o){var l=o("e163"),i=o("9112"),u=o("5135"),d=o("b622"),c=o("c430"),g=d("iterator"),p=!1,m=function(){return this},h,y,b;[].keys&&(b=[].keys(),"next"in b?(y=l(l(b)),y!==Object.prototype&&(h=y)):p=!0),h==null&&(h={}),!c&&!u(h,g)&&i(h,g,m),a.exports={IteratorPrototype:h,BUGGY_SAFARI_ITERATORS:p}},b041:function(a,s,o){var l=o("00ee"),i=o("f5df");a.exports=l?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(a,s,o){var l=o("83ab"),i=o("9bf2").f,u=Function.prototype,d=u.toString,c=/^\s*function ([^ (]*)/,g="name";l&&!(g in u)&&i(u,g,{configurable:!0,get:function(){try{return d.call(this).match(c)[1]}catch{return""}}})},b622:function(a,s,o){var l=o("da84"),i=o("5692"),u=o("5135"),d=o("90e3"),c=o("4930"),g=o("fdbf"),p=i("wks"),m=l.Symbol,h=g?m:m&&m.withoutSetter||d;a.exports=function(y){return u(p,y)||(c&&u(m,y)?p[y]=m[y]:p[y]=h("Symbol."+y)),p[y]}},b64b:function(a,s,o){var l=o("23e7"),i=o("7b0b"),u=o("df75"),d=o("d039"),c=d(function(){u(1)});l({target:"Object",stat:!0,forced:c},{keys:function(p){return u(i(p))}})},b727:function(a,s,o){var l=o("0366"),i=o("44ad"),u=o("7b0b"),d=o("50c4"),c=o("65f0"),g=[].push,p=function(m){var h=m==1,y=m==2,b=m==3,S=m==4,R=m==6,O=m==5||R;return function(T,V,Z,U){for(var x=u(T),E=i(x),F=l(V,Z,3),ae=d(E.length),L=0,j=U||c,H=h?j(T,ae):y?j(T,0):void 0,N,ee;ae>L;L++)if((O||L in E)&&(N=E[L],ee=F(N,L,x),m)){if(h)H[L]=ee;else if(ee)switch(m){case 3:return!0;case 5:return N;case 6:return L;case 2:g.call(H,N)}else if(S)return!1}return R?-1:b||S?S:H}};a.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6)}},c04e:function(a,s,o){var l=o("861d");a.exports=function(i,u){if(!l(i))return i;var d,c;if(u&&typeof(d=i.toString)=="function"&&!l(c=d.call(i))||typeof(d=i.valueOf)=="function"&&!l(c=d.call(i))||!u&&typeof(d=i.toString)=="function"&&!l(c=d.call(i)))return c;throw TypeError("Can't convert object to primitive value")}},c430:function(a,s){a.exports=!1},c6b6:function(a,s){var o={}.toString;a.exports=function(l){return o.call(l).slice(8,-1)}},c6cd:function(a,s,o){var l=o("da84"),i=o("ce4e"),u="__core-js_shared__",d=l[u]||i(u,{});a.exports=d},c740:function(a,s,o){var l=o("23e7"),i=o("b727").findIndex,u=o("44d2"),d=o("ae40"),c="findIndex",g=!0,p=d(c);c in[]&&Array(1)[c](function(){g=!1}),l({target:"Array",proto:!0,forced:g||!p},{findIndex:function(h){return i(this,h,arguments.length>1?arguments[1]:void 0)}}),u(c)},c8ba:function(a,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}a.exports=o},c975:function(a,s,o){var l=o("23e7"),i=o("4d64").indexOf,u=o("a640"),d=o("ae40"),c=[].indexOf,g=!!c&&1/[1].indexOf(1,-0)<0,p=u("indexOf"),m=d("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:g||!p||!m},{indexOf:function(y){return g?c.apply(this,arguments)||0:i(this,y,arguments.length>1?arguments[1]:void 0)}})},ca84:function(a,s,o){var l=o("5135"),i=o("fc6a"),u=o("4d64").indexOf,d=o("d012");a.exports=function(c,g){var p=i(c),m=0,h=[],y;for(y in p)!l(d,y)&&l(p,y)&&h.push(y);for(;g.length>m;)l(p,y=g[m++])&&(~u(h,y)||h.push(y));return h}},caad:function(a,s,o){var l=o("23e7"),i=o("4d64").includes,u=o("44d2"),d=o("ae40"),c=d("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:!c},{includes:function(p){return i(this,p,arguments.length>1?arguments[1]:void 0)}}),u("includes")},cc12:function(a,s,o){var l=o("da84"),i=o("861d"),u=l.document,d=i(u)&&i(u.createElement);a.exports=function(c){return d?u.createElement(c):{}}},ce4e:function(a,s,o){var l=o("da84"),i=o("9112");a.exports=function(u,d){try{i(l,u,d)}catch{l[u]=d}return d}},d012:function(a,s){a.exports={}},d039:function(a,s){a.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(a,s,o){var l=o("428f"),i=o("da84"),u=function(d){return typeof d=="function"?d:void 0};a.exports=function(d,c){return arguments.length<2?u(l[d])||u(i[d]):l[d]&&l[d][c]||i[d]&&i[d][c]}},d1e7:function(a,s,o){var l={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,u=i&&!l.call({1:2},1);s.f=u?function(c){var g=i(this,c);return!!g&&g.enumerable}:l},d28b:function(a,s,o){var l=o("746f");l("iterator")},d2bb:function(a,s,o){var l=o("825a"),i=o("3bbe");a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,d={},c;try{c=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,c.call(d,[]),u=d instanceof Array}catch{}return function(p,m){return l(p),i(m),u?c.call(p,m):p.__proto__=m,p}}():void 0)},d3b7:function(a,s,o){var l=o("00ee"),i=o("6eeb"),u=o("b041");l||i(Object.prototype,"toString",u,{unsafe:!0})},d44e:function(a,s,o){var l=o("9bf2").f,i=o("5135"),u=o("b622"),d=u("toStringTag");a.exports=function(c,g,p){c&&!i(c=p?c:c.prototype,d)&&l(c,d,{configurable:!0,value:g})}},d58f:function(a,s,o){var l=o("1c0b"),i=o("7b0b"),u=o("44ad"),d=o("50c4"),c=function(g){return function(p,m,h,y){l(m);var b=i(p),S=u(b),R=d(b.length),O=g?R-1:0,T=g?-1:1;if(h<2)for(;;){if(O in S){y=S[O],O+=T;break}if(O+=T,g?O<0:R<=O)throw TypeError("Reduce of empty array with no initial value")}for(;g?O>=0:R>O;O+=T)O in S&&(y=m(y,S[O],O,b));return y}};a.exports={left:c(!1),right:c(!0)}},d784:function(a,s,o){o("ac1f");var l=o("6eeb"),i=o("d039"),u=o("b622"),d=o("9263"),c=o("9112"),g=u("species"),p=!i(function(){var S=/./;return S.exec=function(){var R=[];return R.groups={a:"7"},R},"".replace(S,"$<a>")!=="7"}),m=function(){return"a".replace(/./,"$0")==="$0"}(),h=u("replace"),y=function(){return/./[h]?/./[h]("a","$0")==="":!1}(),b=!i(function(){var S=/(?:)/,R=S.exec;S.exec=function(){return R.apply(this,arguments)};var O="ab".split(S);return O.length!==2||O[0]!=="a"||O[1]!=="b"});a.exports=function(S,R,O,T){var V=u(S),Z=!i(function(){var L={};return L[V]=function(){return 7},""[S](L)!=7}),U=Z&&!i(function(){var L=!1,j=/a/;return S==="split"&&(j={},j.constructor={},j.constructor[g]=function(){return j},j.flags="",j[V]=/./[V]),j.exec=function(){return L=!0,null},j[V](""),!L});if(!Z||!U||S==="replace"&&!(p&&m&&!y)||S==="split"&&!b){var x=/./[V],E=O(V,""[S],function(L,j,H,N,ee){return j.exec===d?Z&&!ee?{done:!0,value:x.call(j,H,N)}:{done:!0,value:L.call(H,j,N)}:{done:!1}},{REPLACE_KEEPS_$0:m,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}),F=E[0],ae=E[1];l(String.prototype,S,F),l(RegExp.prototype,V,R==2?function(L,j){return ae.call(L,this,j)}:function(L){return ae.call(L,this)})}T&&c(RegExp.prototype[V],"sham",!0)}},d81d:function(a,s,o){var l=o("23e7"),i=o("b727").map,u=o("1dde"),d=o("ae40"),c=u("map"),g=d("map");l({target:"Array",proto:!0,forced:!c||!g},{map:function(m){return i(this,m,arguments.length>1?arguments[1]:void 0)}})},da84:function(a,s,o){(function(l){var i=function(u){return u&&u.Math==Math&&u};a.exports=i(typeof globalThis=="object"&&globalThis)||i(typeof window=="object"&&window)||i(typeof self=="object"&&self)||i(typeof l=="object"&&l)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(a,s,o){var l=o("23e7"),i=o("83ab"),u=o("56ef"),d=o("fc6a"),c=o("06cf"),g=o("8418");l({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(m){for(var h=d(m),y=c.f,b=u(h),S={},R=0,O,T;b.length>R;)T=y(h,O=b[R++]),T!==void 0&&g(S,O,T);return S}})},dbf1:function(a,s,o){(function(l){o.d(s,"a",function(){return u});function i(){return typeof window<"u"?window.console:globalThis.console}var u=i()}).call(this,o("c8ba"))},ddb0:function(a,s,o){var l=o("da84"),i=o("fdbc"),u=o("e260"),d=o("9112"),c=o("b622"),g=c("iterator"),p=c("toStringTag"),m=u.values;for(var h in i){var y=l[h],b=y&&y.prototype;if(b){if(b[g]!==m)try{d(b,g,m)}catch{b[g]=m}if(b[p]||d(b,p,h),i[h]){for(var S in u)if(b[S]!==u[S])try{d(b,S,u[S])}catch{b[S]=u[S]}}}}},df75:function(a,s,o){var l=o("ca84"),i=o("7839");a.exports=Object.keys||function(d){return l(d,i)}},e01a:function(a,s,o){var l=o("23e7"),i=o("83ab"),u=o("da84"),d=o("5135"),c=o("861d"),g=o("9bf2").f,p=o("e893"),m=u.Symbol;if(i&&typeof m=="function"&&(!("description"in m.prototype)||m().description!==void 0)){var h={},y=function(){var V=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),Z=this instanceof y?new m(V):V===void 0?m():m(V);return V===""&&(h[Z]=!0),Z};p(y,m);var b=y.prototype=m.prototype;b.constructor=y;var S=b.toString,R=String(m("test"))=="Symbol(test)",O=/^Symbol\((.*)\)[^)]+$/;g(b,"description",{configurable:!0,get:function(){var V=c(this)?this.valueOf():this,Z=S.call(V);if(d(h,V))return"";var U=R?Z.slice(7,-1):Z.replace(O,"$1");return U===""?void 0:U}}),l({global:!0,forced:!0},{Symbol:y})}},e163:function(a,s,o){var l=o("5135"),i=o("7b0b"),u=o("f772"),d=o("e177"),c=u("IE_PROTO"),g=Object.prototype;a.exports=d?Object.getPrototypeOf:function(p){return p=i(p),l(p,c)?p[c]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?g:null}},e177:function(a,s,o){var l=o("d039");a.exports=!l(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})},e260:function(a,s,o){var l=o("fc6a"),i=o("44d2"),u=o("3f8c"),d=o("69f3"),c=o("7dd0"),g="Array Iterator",p=d.set,m=d.getterFor(g);a.exports=c(Array,"Array",function(h,y){p(this,{type:g,target:l(h),index:0,kind:y})},function(){var h=m(this),y=h.target,b=h.kind,S=h.index++;return!y||S>=y.length?(h.target=void 0,{value:void 0,done:!0}):b=="keys"?{value:S,done:!1}:b=="values"?{value:y[S],done:!1}:{value:[S,y[S]],done:!1}},"values"),u.Arguments=u.Array,i("keys"),i("values"),i("entries")},e439:function(a,s,o){var l=o("23e7"),i=o("d039"),u=o("fc6a"),d=o("06cf").f,c=o("83ab"),g=i(function(){d(1)}),p=!c||g;l({target:"Object",stat:!0,forced:p,sham:!c},{getOwnPropertyDescriptor:function(h,y){return d(u(h),y)}})},e538:function(a,s,o){var l=o("b622");s.f=l},e893:function(a,s,o){var l=o("5135"),i=o("56ef"),u=o("06cf"),d=o("9bf2");a.exports=function(c,g){for(var p=i(g),m=d.f,h=u.f,y=0;y<p.length;y++){var b=p[y];l(c,b)||m(c,b,h(g,b))}}},e8b5:function(a,s,o){var l=o("c6b6");a.exports=Array.isArray||function(u){return l(u)=="Array"}},e95a:function(a,s,o){var l=o("b622"),i=o("3f8c"),u=l("iterator"),d=Array.prototype;a.exports=function(c){return c!==void 0&&(i.Array===c||d[u]===c)}},f5df:function(a,s,o){var l=o("00ee"),i=o("c6b6"),u=o("b622"),d=u("toStringTag"),c=i(function(){return arguments}())=="Arguments",g=function(p,m){try{return p[m]}catch{}};a.exports=l?i:function(p){var m,h,y;return p===void 0?"Undefined":p===null?"Null":typeof(h=g(m=Object(p),d))=="string"?h:c?i(m):(y=i(m))=="Object"&&typeof m.callee=="function"?"Arguments":y}},f772:function(a,s,o){var l=o("5692"),i=o("90e3"),u=l("keys");a.exports=function(d){return u[d]||(u[d]=i(d))}},fb15:function(a,s,o){if(o.r(s),typeof window<"u"){var l=window.document.currentScript;{var i=o("8875");l=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i})}var u=l&&l.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(o.p=u[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function d(I,P,B){return P in I?Object.defineProperty(I,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):I[P]=B,I}function c(I,P){var B=Object.keys(I);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(I);P&&(z=z.filter(function(re){return Object.getOwnPropertyDescriptor(I,re).enumerable})),B.push.apply(B,z)}return B}function g(I){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?c(Object(B),!0).forEach(function(z){d(I,z,B[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(B)):c(Object(B)).forEach(function(z){Object.defineProperty(I,z,Object.getOwnPropertyDescriptor(B,z))})}return I}function p(I){if(Array.isArray(I))return I}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function m(I,P){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(I)))){var B=[],z=!0,re=!1,pe=void 0;try{for(var Se=I[Symbol.iterator](),Le;!(z=(Le=Se.next()).done)&&(B.push(Le.value),!(P&&B.length===P));z=!0);}catch(tt){re=!0,pe=tt}finally{try{!z&&Se.return!=null&&Se.return()}finally{if(re)throw pe}}return B}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function h(I,P){(P==null||P>I.length)&&(P=I.length);for(var B=0,z=new Array(P);B<P;B++)z[B]=I[B];return z}function y(I,P){if(I){if(typeof I=="string")return h(I,P);var B=Object.prototype.toString.call(I).slice(8,-1);if(B==="Object"&&I.constructor&&(B=I.constructor.name),B==="Map"||B==="Set")return Array.from(I);if(B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return h(I,P)}}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(I,P){return p(I)||m(I,P)||y(I,P)||b()}function R(I){if(Array.isArray(I))return h(I)}function O(I){if(typeof Symbol<"u"&&Symbol.iterator in Object(I))return Array.from(I)}function T(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V(I){return R(I)||O(I)||y(I)||T()}var Z=o("a352"),U=o.n(Z);function x(I){I.parentElement!==null&&I.parentElement.removeChild(I)}function E(I,P,B){var z=B===0?I.children[0]:I.children[B-1].nextSibling;I.insertBefore(P,z)}var F=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function ae(I){var P=Object.create(null);return function(z){var re=P[z];return re||(P[z]=I(z))}}var L=/-(\w)/g,j=ae(function(I){return I.replace(L,function(P,B){return B.toUpperCase()})});o("5db7"),o("73d9");var H=["Start","Add","Remove","Update","End"],N=["Choose","Unchoose","Sort","Filter","Clone"],ee=["Move"],de=[ee,H,N].flatMap(function(I){return I}).map(function(I){return"on".concat(I)}),$e={manage:ee,manageAndEmit:H,emit:N};function Be(I){return de.indexOf(I)!==-1}o("caad"),o("2ca0");var Te=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function De(I){return Te.includes(I)}function Q(I){return["transition-group","TransitionGroup"].includes(I)}function J(I){return["id","class","role","style"].includes(I)||I.startsWith("data-")||I.startsWith("aria-")||I.startsWith("on")}function fe(I){return I.reduce(function(P,B){var z=S(B,2),re=z[0],pe=z[1];return P[re]=pe,P},{})}function ce(I){var P=I.$attrs,B=I.componentData,z=B===void 0?{}:B,re=fe(Object.entries(P).filter(function(pe){var Se=S(pe,2),Le=Se[0];return Se[1],J(Le)}));return g(g({},re),z)}function Ee(I){var P=I.$attrs,B=I.callBackBuilder,z=fe(je(P));Object.entries(B).forEach(function(pe){var Se=S(pe,2),Le=Se[0],tt=Se[1];$e[Le].forEach(function(be){z["on".concat(be)]=tt(be)})});var re="[data-draggable]".concat(z.draggable||"");return g(g({},z),{},{draggable:re})}function je(I){return Object.entries(I).filter(function(P){var B=S(P,2),z=B[0];return B[1],!J(z)}).map(function(P){var B=S(P,2),z=B[0],re=B[1];return[j(z),re]}).filter(function(P){var B=S(P,2),z=B[0];return B[1],!Be(z)})}o("c740");function X(I,P){if(!(I instanceof P))throw new TypeError("Cannot call a class as a function")}function D(I,P){for(var B=0;B<P.length;B++){var z=P[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(I,z.key,z)}}function K(I,P,B){return P&&D(I.prototype,P),I}var Ne=function(P){var B=P.el;return B},Ye=function(P,B){return P.__draggable_context=B},Oe=function(P){return P.__draggable_context},nt=function(){function I(P){var B=P.nodes,z=B.header,re=B.default,pe=B.footer,Se=P.root,Le=P.realList;X(this,I),this.defaultNodes=re,this.children=[].concat(V(z),V(re),V(pe)),this.externalComponent=Se.externalComponent,this.rootTransition=Se.transition,this.tag=Se.tag,this.realList=Le}return K(I,[{key:"render",value:function(B,z){var re=this.tag,pe=this.children,Se=this._isRootComponent,Le=Se?{default:function(){return pe}}:pe;return B(re,z,Le)}},{key:"updated",value:function(){var B=this.defaultNodes,z=this.realList;B.forEach(function(re,pe){Ye(Ne(re),{element:z[pe],index:pe})})}},{key:"getUnderlyingVm",value:function(B){return Oe(B)}},{key:"getVmIndexFromDomIndex",value:function(B,z){var re=this.defaultNodes,pe=re.length,Se=z.children,Le=Se.item(B);if(Le===null)return pe;var tt=Oe(Le);if(tt)return tt.index;if(pe===0)return 0;var be=Ne(re[0]),le=V(Se).findIndex(function(ge){return ge===be});return B<le?0:pe}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),I}(),pt=o("8bbf");function gt(I,P){var B=I[P];return B?B():[]}function Qt(I){var P=I.$slots,B=I.realList,z=I.getKey,re=B||[],pe=["header","footer"].map(function(ge){return gt(P,ge)}),Se=S(pe,2),Le=Se[0],tt=Se[1],be=P.item;if(!be)throw new Error("draggable element must have an item slot");var le=re.flatMap(function(ge,Me){return be({element:ge,index:Me}).map(function(Ve){return Ve.key=z(ge),Ve.props=g(g({},Ve.props||{}),{},{"data-draggable":!0}),Ve})});if(le.length!==re.length)throw new Error("Item slot must have only one child");return{header:Le,footer:tt,default:le}}function an(I){var P=Q(I),B=!De(I)&&!P;return{transition:P,externalComponent:B,tag:B?Object(pt.resolveComponent)(I):P?pt.TransitionGroup:I}}function vt(I){var P=I.$slots,B=I.tag,z=I.realList,re=I.getKey,pe=Qt({$slots:P,realList:z,getKey:re}),Se=an(B);return new nt({nodes:pe,root:Se,realList:z})}function It(I,P){var B=this;Object(pt.nextTick)(function(){return B.$emit(I.toLowerCase(),P)})}function Ut(I){var P=this;return function(B,z){if(P.realList!==null)return P["onDrag".concat(I)](B,z)}}function Jt(I){var P=this,B=Ut.call(this,I);return function(z,re){B.call(P,z,re),It.call(P,I,z)}}var Gt=null,A={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(P){return P}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},k=["update:modelValue","change"].concat(V([].concat(V($e.manageAndEmit),V($e.emit)).map(function(I){return I.toLowerCase()}))),_=Object(pt.defineComponent)({name:"draggable",inheritAttrs:!1,props:A,emits:k,data:function(){return{error:!1}},render:function(){try{this.error=!1;var P=this.$slots,B=this.$attrs,z=this.tag,re=this.componentData,pe=this.realList,Se=this.getKey,Le=vt({$slots:P,tag:z,realList:pe,getKey:Se});this.componentStructure=Le;var tt=ce({$attrs:B,componentData:re});return Le.render(pt.h,tt)}catch(be){return this.error=!0,Object(pt.h)("pre",{style:{color:"red"}},be.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&F.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var P=this;if(!this.error){var B=this.$attrs,z=this.$el,re=this.componentStructure;re.updated();var pe=Ee({$attrs:B,callBackBuilder:{manageAndEmit:function(tt){return Jt.call(P,tt)},emit:function(tt){return It.bind(P,tt)},manage:function(tt){return Ut.call(P,tt)}}}),Se=z.nodeType===1?z:z.parentElement;this._sortable=new U.a(Se,pe),this.targetDomElement=Se,Se.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var P=this.list;return P||this.modelValue},getKey:function(){var P=this.itemKey;return typeof P=="function"?P:function(B){return B[P]}}},watch:{$attrs:{handler:function(P){var B=this._sortable;B&&je(P).forEach(function(z){var re=S(z,2),pe=re[0],Se=re[1];B.option(pe,Se)})},deep:!0}},methods:{getUnderlyingVm:function(P){return this.componentStructure.getUnderlyingVm(P)||null},getUnderlyingPotencialDraggableComponent:function(P){return P.__draggable_component__},emitChanges:function(P){var B=this;Object(pt.nextTick)(function(){return B.$emit("change",P)})},alterList:function(P){if(this.list){P(this.list);return}var B=V(this.modelValue);P(B),this.$emit("update:modelValue",B)},spliceList:function(){var P=arguments,B=function(re){return re.splice.apply(re,V(P))};this.alterList(B)},updatePosition:function(P,B){var z=function(pe){return pe.splice(B,0,pe.splice(P,1)[0])};this.alterList(z)},getRelatedContextFromMoveEvent:function(P){var B=P.to,z=P.related,re=this.getUnderlyingPotencialDraggableComponent(B);if(!re)return{component:re};var pe=re.realList,Se={list:pe,component:re};if(B!==z&&pe){var Le=re.getUnderlyingVm(z)||{};return g(g({},Le),Se)}return Se},getVmIndexFromDomIndex:function(P){return this.componentStructure.getVmIndexFromDomIndex(P,this.targetDomElement)},onDragStart:function(P){this.context=this.getUnderlyingVm(P.item),P.item._underlying_vm_=this.clone(this.context.element),Gt=P.item},onDragAdd:function(P){var B=P.item._underlying_vm_;if(B!==void 0){x(P.item);var z=this.getVmIndexFromDomIndex(P.newIndex);this.spliceList(z,0,B);var re={element:B,newIndex:z};this.emitChanges({added:re})}},onDragRemove:function(P){if(E(this.$el,P.item,P.oldIndex),P.pullMode==="clone"){x(P.clone);return}var B=this.context,z=B.index,re=B.element;this.spliceList(z,1);var pe={element:re,oldIndex:z};this.emitChanges({removed:pe})},onDragUpdate:function(P){x(P.item),E(P.from,P.item,P.oldIndex);var B=this.context.index,z=this.getVmIndexFromDomIndex(P.newIndex);this.updatePosition(B,z);var re={element:this.context.element,oldIndex:B,newIndex:z};this.emitChanges({moved:re})},computeFutureIndex:function(P,B){if(!P.element)return 0;var z=V(B.to.children).filter(function(Le){return Le.style.display!=="none"}),re=z.indexOf(B.related),pe=P.component.getVmIndexFromDomIndex(re),Se=z.indexOf(Gt)!==-1;return Se||!B.willInsertAfter?pe:pe+1},onDragMove:function(P,B){var z=this.move,re=this.realList;if(!z||!re)return!0;var pe=this.getRelatedContextFromMoveEvent(P),Se=this.computeFutureIndex(pe,P),Le=g(g({},this.context),{},{futureIndex:Se}),tt=g(g({},P),{},{relatedContext:pe,draggedContext:Le});return z(tt,B)},onDragEnd:function(){Gt=null}}}),ie=_;s.default=ie},fb6a:function(a,s,o){var l=o("23e7"),i=o("861d"),u=o("e8b5"),d=o("23cb"),c=o("50c4"),g=o("fc6a"),p=o("8418"),m=o("b622"),h=o("1dde"),y=o("ae40"),b=h("slice"),S=y("slice",{ACCESSORS:!0,0:0,1:2}),R=m("species"),O=[].slice,T=Math.max;l({target:"Array",proto:!0,forced:!b||!S},{slice:function(Z,U){var x=g(this),E=c(x.length),F=d(Z,E),ae=d(U===void 0?E:U,E),L,j,H;if(u(x)&&(L=x.constructor,typeof L=="function"&&(L===Array||u(L.prototype))?L=void 0:i(L)&&(L=L[R],L===null&&(L=void 0)),L===Array||L===void 0))return O.call(x,F,ae);for(j=new(L===void 0?Array:L)(T(ae-F,0)),H=0;F<ae;F++,H++)F in x&&p(j,H,x[F]);return j.length=H,j}})},fc6a:function(a,s,o){var l=o("44ad"),i=o("1d80");a.exports=function(u){return l(i(u))}},fdbc:function(a,s){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(a,s,o){var l=o("4930");a.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(os);var wv=os.exports;const Cv=Lg(wv),$v={а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"e",ж:"zh",з:"z",и:"i",й:"y",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"ts",ч:"ch",ш:"sh",щ:"sch",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya"," ":"_","-":"_"},vs=e=>{const n=e.toLowerCase();let t="";for(const r of n)t+=$v[r]??r;return t.replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_").substring(0,50)},Ev=(e,n)=>{let t=vs(e);return t&&!t.startsWith(n)&&(t=n+t),t},Rv={class:"space-y-3"},Iv={key:0,class:"rounded-lg border border-slate-200 overflow-hidden"},Dv={class:"border-b border-slate-100 last:border-b-0"},Ov={class:"grid grid-cols-[1fr_1fr_120px_52px_52px_68px] gap-0 items-center px-2 py-1.5 hover:bg-slate-50/50 transition-colors"},Pv={class:"px-1"},Tv=["onUpdate:modelValue","onInput"],Mv={class:"px-1"},Fv=["onUpdate:modelValue"],Av={class:"px-1"},Vv=["onUpdate:modelValue"],Bv={class:"flex items-center justify-center"},Lv=["onUpdate:modelValue"],Nv={class:"flex items-center justify-center"},jv=["onUpdate:modelValue"],kv={class:"flex items-center justify-end gap-0.5 pr-1"},Uv={type:"button",class:"drag-handle p-1.5 text-slate-300 hover:text-slate-500 cursor-grab rounded transition-colors"},Gv=["onClick","disabled"],zv={key:0,class:"px-4 pb-2"},Hv={key:0,class:"text-[11px] text-red-500"},_v={key:1,class:"text-[11px] text-red-500"},Kv={key:1,class:"text-center py-6 bg-slate-50 rounded-lg border border-dashed border-slate-200"},Wv=["disabled"],Xv={key:2,class:"text-xs text-slate-400 text-center"},Yv=q({__name:"ColumnEditor",props:{modelValue:{},maxColumns:{}},emits:["update:modelValue"],setup(e,{expose:n,emit:t}){const r=e,a=t,s=r.maxColumns||15,o=G([]),l=G(!1),i=()=>Math.random().toString(36).substring(2,9);Xe(()=>r.modelValue,y=>{if(l.value){l.value=!1;return}y&&y.length>0&&(o.value=y.map(b=>({...b,id:b.id||i()})))},{immediate:!0});const u=y=>{if(!y.label){y.name="";return}y.name=vs(y.label)},d=y=>dr(y),c=(y,b)=>y?o.value.some((S,R)=>R!==b&&S.name===y):!1,g=()=>{o.value.length>=s||(o.value.push({id:i(),name:"",label:"",type:"text",required:!1,searchable:!1}),m())},p=y=>{o.value.length<=1||(o.value.splice(y,1),m())},m=()=>{l.value=!0;const y=o.value.map(({id:b,...S})=>S);a("update:modelValue",y)};return n({isValid:()=>o.value.length===0?!1:o.value.every(y=>y.name&&y.label&&d(y.name)&&!c(y.name,o.value.indexOf(y)))}),(y,b)=>($(),M("div",Rv,[o.value.length>0?($(),M("div",Iv,[b[2]||(b[2]=br('<div class="grid grid-cols-[1fr_1fr_120px_52px_52px_68px] gap-0 bg-slate-50 border-b border-slate-200 px-2 py-2 text-xs font-medium text-slate-500" data-v-c070d73c><div class="px-2" data-v-c070d73c>Название</div><div class="px-2" data-v-c070d73c>Код</div><div class="px-2" data-v-c070d73c>Тип</div><div class="text-center" data-v-c070d73c>Обяз.</div><div class="text-center" data-v-c070d73c>Поиск</div><div data-v-c070d73c></div></div>',1)),w(f(Cv),{modelValue:o.value,"onUpdate:modelValue":b[0]||(b[0]=S=>o.value=S),"item-key":"id",handle:".drag-handle","ghost-class":"opacity-50",onChange:m,tag:"div"},{item:C(({element:S,index:R})=>[v("div",Dv,[v("div",Ov,[v("div",Pv,[Ae(v("input",{"onUpdate:modelValue":O=>S.label=O,type:"text",placeholder:"Название",class:"w-full px-2.5 py-1.5 text-sm border border-slate-200 rounded-md bg-white focus:bg-white focus:border-indigo-400 focus:ring-1 focus:ring-indigo-100 transition-all",onInput:O=>{u(S),m()}},null,40,Tv),[[We,S.label]])]),v("div",Mv,[Ae(v("input",{"onUpdate:modelValue":O=>S.name=O,type:"text",placeholder:"slug",class:Fe(["w-full px-2.5 py-1.5 text-sm font-mono border border-slate-200 rounded-md bg-white focus:bg-white focus:border-indigo-400 focus:ring-1 focus:ring-indigo-100 transition-all",{"border-red-300 bg-red-50":S.name&&!d(S.name)||c(S.name,R)}]),onInput:m},null,42,Fv),[[We,S.name]])]),v("div",Av,[Ae(v("select",{"onUpdate:modelValue":O=>S.type=O,class:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-md bg-white focus:border-indigo-400 focus:ring-1 focus:ring-indigo-100 transition-all appearance-none cursor-pointer",onChange:m},[...b[1]||(b[1]=[v("option",{value:"text"},"Текст",-1),v("option",{value:"number"},"Число",-1),v("option",{value:"date"},"Дата",-1),v("option",{value:"bool"},"Да/Нет",-1)])],40,Vv),[[pn,S.type]])]),v("div",Bv,[Ae(v("input",{"onUpdate:modelValue":O=>S.required=O,type:"checkbox",class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer",onChange:m},null,40,Lv),[[on,S.required]])]),v("div",Nv,[Ae(v("input",{"onUpdate:modelValue":O=>S.searchable=O,type:"checkbox",class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer",onChange:m},null,40,jv),[[on,S.searchable]])]),v("div",kv,[v("button",Uv,[w(f(Ca),{class:"w-3.5 h-3.5"})]),v("button",{type:"button",onClick:O=>p(R),class:Fe(["p-1.5 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded transition-colors",{"opacity-30 cursor-not-allowed":o.value.length<=1}]),disabled:o.value.length<=1},[w(f(yo),{class:"w-3.5 h-3.5"})],10,Gv)])]),S.name&&!d(S.name)||c(S.name,R)?($(),M("div",zv,[S.name&&!d(S.name)?($(),M("p",Hv," Код: только a-z, 0-9, _ начиная с буквы ")):ue("",!0),c(S.name,R)?($(),M("p",_v," Код колонки должен быть уникальным ")):ue("",!0)])):ue("",!0)])]),_:1},8,["modelValue"])])):($(),M("div",Kv,[...b[3]||(b[3]=[v("p",{class:"text-sm text-slate-500"},"Добавьте хотя бы одну колонку",-1)])])),v("button",{type:"button",onClick:g,class:Fe(["w-full flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium text-slate-500 hover:text-indigo-600 border border-dashed border-slate-200 hover:border-indigo-300 hover:bg-indigo-50/50 rounded-lg transition-all",{"opacity-50 cursor-not-allowed":o.value.length>=f(s)}]),disabled:o.value.length>=f(s)},[w(f(Co),{class:"w-4 h-4"}),b[4]||(b[4]=oe(" Добавить колонку ",-1))],10,Wv),o.value.length>0?($(),M("p",Xv,W(o.value.length)+" из "+W(f(s))+" колонок ",1)):ue("",!0)]))}}),ms=la(Yv,[["__scopeId","data-v-c070d73c"]]),qv={key:0,class:"p-6"},Qv={class:"flex items-center justify-between"},Jv={class:"grid grid-cols-2 gap-3"},Zv=["onClick","disabled"],em={class:"font-bold text-slate-900 text-sm"},tm={class:"text-xs text-slate-500 mt-1"},nm={key:0,class:"text-[10px] text-slate-400 mt-1"},om=["disabled"],rm={key:1,class:"p-6"},am={class:"flex items-center justify-between"},sm={class:"flex items-center gap-3"},lm={class:"relative mt-1"},im={key:0,class:"mt-1 text-xs text-red-600"},um={key:1,class:"mt-1 text-xs text-slate-500"},dm=["placeholder"],cm={key:0,class:"bg-slate-50 rounded-md p-4 border border-slate-100"},fm={class:"flex flex-wrap gap-2"},pm={class:"text-slate-400 ml-1"},gm={key:0,class:"text-red-400"},vm={key:1,class:"text-sm text-red-600"},mm=["disabled"],hm={key:2,class:"flex flex-col max-h-[85vh]"},ym={class:"flex items-center justify-between p-6 border-b border-slate-100"},bm={class:"flex items-center gap-3"},xm={class:"flex-1 overflow-y-auto p-6"},Sm={class:"flex items-center justify-end gap-3 p-6 border-t border-slate-100 bg-slate-50"},wm=["disabled"],Cm=q({__name:"CreateDirectoryModal",props:{isOpen:{type:Boolean},existingToolNames:{}},emits:["close","submit"],setup(e,{expose:n,emit:t}){const r=e,a=t,s=[{id:"qa",label:"Вопрос-ответ",description:"Пары вопросов и ответов",icon:$a,columns:[{name:"question",label:"Вопрос",type:"text",required:!0,searchable:!0},{name:"answer",label:"Ответ",type:"text",required:!0,searchable:!1}],defaultDescription:"Найти ответ на часто задаваемый вопрос"},{id:"service_catalog",label:"Каталог услуг",description:"Название, описание, цена",icon:ca,columns:[{name:"name",label:"Название",type:"text",required:!0,searchable:!0},{name:"description",label:"Описание",type:"text",required:!1,searchable:!0},{name:"price",label:"Цена",type:"number",required:!1,searchable:!1}],defaultDescription:"Найти услугу по названию или описанию"},{id:"product_catalog",label:"Каталог товаров",description:"С ценами и характеристиками",icon:Ea,columns:[{name:"name",label:"Название",type:"text",required:!0,searchable:!0},{name:"description",label:"Описание",type:"text",required:!1,searchable:!0},{name:"price",label:"Цена",type:"number",required:!1,searchable:!1},{name:"specs",label:"Характеристики",type:"text",required:!1,searchable:!0}],defaultDescription:"Найти товар по названию, описанию или характеристикам"},{id:"company_info",label:"О компании",description:"Тема → информация",icon:wa,columns:[{name:"topic",label:"Тема",type:"text",required:!0,searchable:!0},{name:"info",label:"Информация",type:"text",required:!0,searchable:!0}],defaultDescription:"Получить информацию о компании по теме"},{id:"custom",label:"Произвольный",description:"Задайте свои колонки",icon:tr,columns:[],defaultDescription:"Поиск по справочнику"},{id:"ai_generate",label:"Создать с ИИ",description:"Опишите — ИИ сгенерирует",icon:lu,columns:[],defaultDescription:""}],o=G("template"),l=G(null),i=G(!1),u=G(""),d=G(""),c=G({name:"",tool_name:"",tool_description:""}),g=G([{id:"1",name:"",label:"",type:"text",required:!0,searchable:!0}]),p=G(null),m=xe(()=>s.find(x=>x.id===l.value)),h=xe(()=>c.value.name.trim()&&c.value.tool_name.trim()&&/^[a-z][a-z0-9_]*$/.test(c.value.tool_name)&&!d.value),y=xe(()=>g.value.length===0?!1:g.value.every(x=>x.name&&x.label&&/^[a-z][a-z0-9_]*$/.test(x.name))),b=x=>{x!=="ai_generate"&&(l.value=x)},S=()=>{l.value&&(o.value="details")},R=()=>{c.value.tool_name=Ev(c.value.name,"get_"),O()},O=()=>{d.value=Na(c.value.tool_name,r.existingToolNames||[])},T=()=>{h.value&&(l.value==="custom"?o.value="columns":U())},V=()=>{o.value="template",l.value=null,c.value={name:"",tool_name:"",tool_description:""},g.value=[{id:"1",name:"",label:"",type:"text",required:!0,searchable:!0}],u.value="",d.value="",i.value=!1},Z=()=>{V(),a("close")},U=()=>{var E,F;if(!l.value)return;u.value="",i.value=!0;let x;if(l.value==="custom"){if(!y.value){u.value="Заполните все колонки корректно",i.value=!1;return}x=g.value.map(({id:ae,...L})=>L)}else x=(((E=m.value)==null?void 0:E.columns)||[]).map(ae=>({...ae,searchable:ae.searchable??!1}));a("submit",{name:c.value.name,tool_name:c.value.tool_name,tool_description:c.value.tool_description||((F=m.value)==null?void 0:F.defaultDescription)||"",template:l.value,columns:x})};return Xe(()=>r.isOpen,x=>{x&&V()}),Xe(()=>c.value.tool_name,()=>{O()}),n({setSubmitting:x=>{i.value=x},setError:x=>{u.value=x},close:Z}),(x,E)=>($(),Y(f(Or),{open:e.isOpen,"onUpdate:open":E[7]||(E[7]=F=>!F&&Z())},{default:C(()=>[w(f(Pr),{"class-name":o.value==="columns"?"max-w-3xl":"max-w-xl",onEscapeKeyDown:E[6]||(E[6]=Ft(()=>{},["prevent"]))},{default:C(()=>{var F,ae;return[o.value==="template"?($(),M("div",qv,[w(f(uo),{class:"mb-6"},{default:C(()=>[v("div",Qv,[v("div",null,[w(f(Fn),null,{default:C(()=>[...E[8]||(E[8]=[oe("Создать справочник",-1)])]),_:1}),w(f(Mn),null,{default:C(()=>[...E[9]||(E[9]=[oe("Выберите тип справочника",-1)])]),_:1})]),w(f(no))])]),_:1}),v("div",Jv,[($(),M(Ue,null,_e(s,L=>v("button",{key:L.id,onClick:j=>b(L.id),class:Fe(["flex flex-col items-start p-4 rounded-md border border-slate-200 hover:border-indigo-300 hover:bg-indigo-50/50 transition-all text-left group",[l.value===L.id?"border-indigo-400 bg-indigo-50":"",L.id==="ai_generate"?"opacity-50 cursor-not-allowed":""]]),disabled:L.id==="ai_generate"},[v("div",{class:Fe(["w-10 h-10 rounded-lg flex items-center justify-center mb-3",[l.value===L.id?"bg-indigo-600 text-white":"bg-slate-100 text-slate-500 group-hover:bg-indigo-100 group-hover:text-indigo-600"]])},[($(),Y(ho(L.icon),{class:"w-5 h-5"}))],2),v("span",em,W(L.label),1),v("span",tm,W(L.description),1),L.id==="ai_generate"?($(),M("span",nm,"Скоро")):ue("",!0)],10,Zv)),64))]),w(f(pr),{class:"mt-6"},{default:C(()=>[v("button",{disabled:!l.value,onClick:S,class:"px-6 py-2.5 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Далее ",8,om)]),_:1})])):o.value==="details"?($(),M("div",rm,[w(f(uo),{class:"mb-6"},{default:C(()=>[v("div",am,[v("div",sm,[v("button",{onClick:E[0]||(E[0]=L=>o.value="template"),class:"p-1 text-slate-400 hover:text-slate-600"},[w(f(er),{class:"h-5 w-5"})]),v("div",null,[w(f(Fn),null,{default:C(()=>[...E[10]||(E[10]=[oe("Настройка справочника",-1)])]),_:1}),w(f(Mn),null,{default:C(()=>{var L;return[oe(W((L=m.value)==null?void 0:L.label),1)]}),_:1})])]),w(f(no))])]),_:1}),v("form",{onSubmit:Ft(T,["prevent"]),class:"space-y-5"},[v("div",null,[E[11]||(E[11]=v("label",{class:"text-sm font-medium text-slate-700"},[oe(" Название справочника "),v("span",{class:"text-red-500"},"*")],-1)),Ae(v("input",{"onUpdate:modelValue":E[1]||(E[1]=L=>c.value.name=L),type:"text",required:"",placeholder:"Услуги клиники",class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all",onInput:R},null,544),[[We,c.value.name,void 0,{trim:!0}]])]),v("div",null,[E[12]||(E[12]=v("label",{class:"text-sm font-medium text-slate-700"},[oe(" Имя функции для агента "),v("span",{class:"text-red-500"},"*")],-1)),v("div",lm,[Ae(v("input",{"onUpdate:modelValue":E[2]||(E[2]=L=>c.value.tool_name=L),type:"text",required:"",placeholder:"get_services",pattern:"^[a-z][a-z0-9_]*$",class:Fe(["w-full rounded-md border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 font-mono focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all",{"border-red-300 bg-red-50":d.value}])},null,2),[[We,c.value.tool_name,void 0,{trim:!0}]])]),d.value?($(),M("p",im,W(d.value),1)):($(),M("p",um," Латиница, цифры и _ • Уникальное в рамках агента "))]),v("div",null,[E[13]||(E[13]=v("label",{class:"text-sm font-medium text-slate-700"},"Описание для агента",-1)),Ae(v("textarea",{"onUpdate:modelValue":E[3]||(E[3]=L=>c.value.tool_description=L),rows:"3",placeholder:(F=m.value)==null?void 0:F.defaultDescription,class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all resize-none"},null,8,dm),[[We,c.value.tool_description,void 0,{trim:!0}]]),E[14]||(E[14]=v("p",{class:"mt-1 text-xs text-slate-500"}," Помогает агенту понять когда использовать этот справочник ",-1))]),l.value!=="custom"?($(),M("div",cm,[E[15]||(E[15]=v("p",{class:"text-xs font-bold text-slate-600 uppercase tracking-wider mb-2"},"Колонки справочника",-1)),v("div",fm,[($(!0),M(Ue,null,_e((ae=m.value)==null?void 0:ae.columns,L=>($(),M("span",{key:L.name,class:"px-3 py-1 bg-white border border-slate-200 rounded-lg text-xs text-slate-600"},[oe(W(L.label)+" ",1),v("span",pm,"("+W(L.type)+")",1),L.required?($(),M("span",gm,"*")):ue("",!0)]))),128))])])):ue("",!0),u.value?($(),M("p",vm,W(u.value),1)):ue("",!0),w(f(pr),null,{default:C(()=>[v("button",{type:"button",class:"px-5 py-2.5 rounded-md border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors",onClick:Z}," Отмена "),v("button",{type:"submit",class:"px-6 py-2.5 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",disabled:!h.value},[v("span",null,W(l.value==="custom"?"Далее":"Создать"),1)],8,mm)]),_:1})],32)])):o.value==="columns"?($(),M("div",hm,[v("div",ym,[v("div",bm,[v("button",{onClick:E[4]||(E[4]=L=>o.value="details"),class:"p-1 text-slate-400 hover:text-slate-600"},[w(f(er),{class:"h-5 w-5"})]),v("div",null,[w(f(Fn),null,{default:C(()=>[...E[16]||(E[16]=[oe("Настройка колонок",-1)])]),_:1}),w(f(Mn),null,{default:C(()=>[oe(W(c.value.name||"Произвольный справочник"),1)]),_:1})])]),w(f(no))]),v("div",xm,[w(ms,{modelValue:g.value,"onUpdate:modelValue":E[5]||(E[5]=L=>g.value=L),"max-columns":15,ref_key:"columnEditorRef",ref:p},null,8,["modelValue"])]),v("div",Sm,[v("button",{type:"button",class:"px-5 py-2.5 rounded-md border border-slate-200 bg-white text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors",onClick:Z}," Отмена "),v("button",{onClick:U,class:"px-6 py-2.5 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",disabled:i.value||!y.value},[i.value?($(),Y(f(qt),{key:0,class:"w-4 h-4 animate-spin"})):ue("",!0),v("span",null,W(i.value?"Создание...":"Создать"),1)],8,wm)])])):ue("",!0)]}),_:1},8,["class-name"])]),_:1},8,["open"]))}}),$m={class:"flex items-center justify-between p-6 border-b border-slate-100"},Em={class:"flex-1 overflow-y-auto p-6"},Rm={key:0},Im={key:0,class:"mt-4 text-sm text-red-600"},Dm={key:1,class:"space-y-5"},Om={class:"flex items-center justify-between bg-slate-50 rounded-md p-4"},Pm={class:"flex items-center gap-3"},Tm={class:"w-10 h-10 bg-white rounded-lg flex items-center justify-center border border-slate-200"},Mm={class:"font-medium text-slate-900 text-sm"},Fm={class:"text-xs text-slate-500"},Am={class:"space-y-3"},Vm={class:"flex-1 px-4 py-2.5 bg-slate-50 rounded-lg text-sm text-slate-700 truncate border border-slate-100"},Bm=["onUpdate:modelValue"],Lm=["value","disabled"],Nm={class:"space-y-3 pt-2"},jm={class:"flex items-center gap-3 cursor-pointer"},km={class:"flex items-center gap-3 cursor-pointer"},Um={key:0,class:"pt-2"},Gm={class:"overflow-x-auto rounded-lg border border-slate-200"},zm={class:"w-full text-sm"},Hm={class:"bg-slate-50 border-b border-slate-200"},_m={class:"divide-y divide-slate-100"},Km={key:1,class:"text-sm text-red-600"},Wm={key:2,class:"text-center py-6"},Xm={class:"text-lg font-bold text-slate-900"},Ym={class:"text-slate-500 mt-2"},qm={class:"font-bold text-slate-700"},Qm={key:0,class:"text-slate-500"},Jm={class:"font-bold text-yellow-600"},Zm=["disabled"],eh=q({__name:"ImportCsvModal",props:{isOpen:{type:Boolean},directoryName:{},columns:{}},emits:["close","import"],setup(e,{expose:n,emit:t}){const r=e,a=t,s=G("upload"),o=G(!1),l=G(null),i=G(null),u=G(""),d=G(""),c=G(!1),g=G(null),p=G({}),m=G(!0),h=G(!1),y=G(null),b=xe(()=>{const j=Object.values(p.value).filter(N=>N!==null);return r.columns.filter(N=>N.required).map(N=>N.name).every(N=>j.includes(N))}),S=(j,H)=>Object.entries(p.value).some(([N,ee])=>ee===j&&N!==H),R=j=>{const H=p.value[j];if(!H)return null;const N=r.columns.find(ee=>ee.name===H);return N==null?void 0:N.label},O=()=>{var j;(j=i.value)==null||j.click()},T=j=>{var N;const H=j.target;(N=H.files)!=null&&N[0]&&Z(H.files[0])},V=j=>{var N;o.value=!1;const H=(N=j.dataTransfer)==null?void 0:N.files[0];H&&Z(H)},Z=async j=>{var ee;u.value="";const H=[".csv",".xlsx",".xls"],N=j.name.substring(j.name.lastIndexOf(".")).toLowerCase();if(!H.includes(N)){u.value="Поддерживаются только файлы .csv и .xlsx";return}if(j.size>10*1024*1024){u.value="Файл слишком большой. Максимум 10 МБ";return}l.value=j;try{const de=await j.text(),$e=de.split(`
`).filter(J=>J.trim()),Be=de.includes(";")?";":",",Te=((ee=$e[0])==null?void 0:ee.split(Be).map(J=>J.trim().replace(/^"|"$/g,"")))||[],De=$e.slice(1,4).map(J=>J.split(Be).map(fe=>fe.trim().replace(/^"|"$/g,"")));g.value={columns:Te,rows_count:$e.length-1,preview:De};const Q={};for(const J of Te){const fe=J.toLowerCase(),ce=r.columns.find(Ee=>Ee.label.toLowerCase()===fe||Ee.name.toLowerCase()===fe);Q[J]=(ce==null?void 0:ce.name)||null}p.value=Q,s.value="mapping"}catch{u.value="Не удалось прочитать файл"}},U=()=>{l.value=null,g.value=null,p.value={},s.value="upload"},x=()=>{!l.value||!b.value||(d.value="",c.value=!0,a("import",l.value,p.value,{hasHeader:m.value,replaceAll:h.value}))},E=()=>{var de,$e;if(!(($e=(de=y.value)==null?void 0:de.errors)!=null&&$e.length))return;const j=y.value.errors.map(Be=>`Строка ${Be.row}: ${Be.error}`).join(`
`),H=new Blob([j],{type:"text/plain"}),N=URL.createObjectURL(H),ee=document.createElement("a");ee.href=N,ee.download="import-errors.txt",ee.click(),URL.revokeObjectURL(N)},F=()=>{s.value="upload",l.value=null,g.value=null,p.value={},u.value="",d.value="",c.value=!1,y.value=null,m.value=!0,h.value=!1,a("close")},ae=j=>{y.value=j,c.value=!1,s.value="result"},L=j=>{d.value=j,c.value=!1};return Xe(()=>r.isOpen,j=>{j||F()}),n({setResult:ae,setError:L}),(j,H)=>($(),Y(f(Or),{open:e.isOpen,"onUpdate:open":H[4]||(H[4]=N=>!N&&F())},{default:C(()=>[w(f(Pr),{"class-name":"max-w-2xl max-h-[90vh] overflow-hidden flex flex-col"},{default:C(()=>{var N,ee,de,$e,Be,Te,De,Q,J,fe,ce,Ee,je,X,D,K,Ne,Ye;return[v("div",$m,[w(f(uo),null,{default:C(()=>[w(f(Fn),null,{default:C(()=>[...H[5]||(H[5]=[oe("Импорт из CSV",-1)])]),_:1}),w(f(Mn),null,{default:C(()=>[oe(W(e.directoryName),1)]),_:1})]),_:1}),w(f(no))]),v("div",Em,[s.value==="upload"?($(),M("div",Rm,[v("div",{class:Fe(["border-2 border-dashed border-slate-200 rounded-md p-8 text-center hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer",{"border-indigo-400 bg-indigo-50":o.value}]),onDragover:H[0]||(H[0]=Ft(Oe=>o.value=!0,["prevent"])),onDragleave:H[1]||(H[1]=Ft(Oe=>o.value=!1,["prevent"])),onDrop:Ft(V,["prevent"]),onClick:O},[v("input",{ref_key:"fileInputRef",ref:i,type:"file",accept:".csv,.xlsx,.xls",class:"hidden",onChange:T},null,544),w(f(Ra),{class:"w-12 h-12 text-slate-400 mx-auto mb-4"}),H[6]||(H[6]=v("p",{class:"text-slate-700 font-medium"},"Перетащите файл сюда",-1)),H[7]||(H[7]=v("p",{class:"text-slate-500 text-sm mt-1"},"или нажмите для выбора",-1)),H[8]||(H[8]=v("p",{class:"text-slate-400 text-xs mt-3"},"Поддерживаются .csv и .xlsx до 10 МБ",-1))],34),u.value?($(),M("p",Im,W(u.value),1)):ue("",!0)])):s.value==="mapping"?($(),M("div",Dm,[v("div",Om,[v("div",Pm,[v("div",Tm,[w(f(yu),{class:"w-5 h-5 text-emerald-600"})]),v("div",null,[v("p",Mm,W((N=l.value)==null?void 0:N.name),1),v("p",Fm,W((ee=g.value)==null?void 0:ee.rows_count)+" строк",1)])]),v("button",{onClick:U,class:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Удалить файл"},[w(f(gn),{class:"w-4 h-4"})])]),v("div",null,[H[10]||(H[10]=v("p",{class:"text-sm font-medium text-slate-700 mb-3"},"Сопоставьте колонки файла с полями справочника",-1)),v("div",Am,[($(!0),M(Ue,null,_e((de=g.value)==null?void 0:de.columns,Oe=>($(),M("div",{key:Oe,class:"flex items-center gap-3"},[v("div",Vm,' "'+W(Oe)+'" ',1),w(f(vu),{class:"w-4 h-4 text-slate-400 flex-shrink-0"}),Ae(v("select",{"onUpdate:modelValue":nt=>p.value[Oe]=nt,class:"flex-1 px-4 py-2.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100"},[H[9]||(H[9]=v("option",{value:null},"— Пропустить —",-1)),($(!0),M(Ue,null,_e(e.columns,nt=>($(),M("option",{key:nt.name,value:nt.name,disabled:S(nt.name,Oe)},W(nt.label),9,Lm))),128))],8,Bm),[[pn,p.value[Oe]]])]))),128))])]),v("div",Nm,[v("label",jm,[Ae(v("input",{"onUpdate:modelValue":H[2]||(H[2]=Oe=>m.value=Oe),type:"checkbox",class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[on,m.value]]),H[11]||(H[11]=v("span",{class:"text-sm text-slate-700"},"Первая строка — заголовки",-1))]),v("label",km,[Ae(v("input",{"onUpdate:modelValue":H[3]||(H[3]=Oe=>h.value=Oe),type:"checkbox",class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[on,h.value]]),H[12]||(H[12]=v("span",{class:"text-sm text-slate-700"},"Заменить все существующие записи",-1))])]),(Be=($e=g.value)==null?void 0:$e.preview)!=null&&Be.length?($(),M("div",Um,[H[13]||(H[13]=v("p",{class:"text-sm font-medium text-slate-700 mb-3"},"Превью (первые 3 записи)",-1)),v("div",Gm,[v("table",zm,[v("thead",null,[v("tr",Hm,[($(!0),M(Ue,null,_e(g.value.columns,(Oe,nt)=>($(),M("th",{key:nt,class:"px-3 py-2 text-left text-xs font-bold text-slate-500 uppercase whitespace-nowrap"},W(R(Oe)||Oe),1))),128))])]),v("tbody",_m,[($(!0),M(Ue,null,_e(g.value.preview,(Oe,nt)=>($(),M("tr",{key:nt},[($(!0),M(Ue,null,_e(Oe,(pt,gt)=>($(),M("td",{key:gt,class:"px-3 py-2 text-slate-600 truncate max-w-[200px]"},W(pt||"—"),1))),128))]))),128))])])])])):ue("",!0),d.value?($(),M("p",Km,W(d.value),1)):ue("",!0)])):s.value==="result"?($(),M("div",Wm,[v("div",{class:Fe(["w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",[(De=(Te=y.value)==null?void 0:Te.errors)!=null&&De.length?"bg-yellow-100":"bg-emerald-100"]])},[($(),Y(ho((J=(Q=y.value)==null?void 0:Q.errors)!=null&&J.length?f(fa):f(iu)),{class:Fe(["w-8 h-8",[(ce=(fe=y.value)==null?void 0:fe.errors)!=null&&ce.length?"text-yellow-600":"text-emerald-600"]])},null,8,["class"]))],2),v("h3",Xm,W((je=(Ee=y.value)==null?void 0:Ee.errors)!=null&&je.length?"Импорт завершён с предупреждениями":"Импорт успешно завершён"),1),v("p",Ym,[H[14]||(H[14]=oe(" Добавлено записей: ",-1)),v("span",qm,W((X=y.value)==null?void 0:X.created),1)]),(K=(D=y.value)==null?void 0:D.errors)!=null&&K.length?($(),M("p",Qm,[H[15]||(H[15]=oe(" Пропущено (ошибки): ",-1)),v("span",Jm,W(y.value.errors.length),1)])):ue("",!0),(Ye=(Ne=y.value)==null?void 0:Ne.errors)!=null&&Ye.length?($(),M("button",{key:1,onClick:E,class:"mt-4 px-4 py-2 text-sm text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors"}," Скачать лог ошибок ")):ue("",!0)])):ue("",!0)]),w(f(pr),{"class-name":"p-6 border-t border-slate-100 bg-slate-50"},{default:C(()=>[s.value!=="result"?($(),M("button",{key:0,type:"button",class:"px-5 py-2.5 rounded-md border border-slate-200 bg-white text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors",onClick:F}," Отмена ")):ue("",!0),s.value==="mapping"?($(),M("button",{key:1,onClick:x,class:"px-6 py-2.5 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",disabled:c.value||!b.value},[c.value?($(),Y(f(qt),{key:0,class:"w-4 h-4 animate-spin"})):ue("",!0),v("span",null,W(c.value?"Импорт...":"Импортировать"),1)],8,Zm)):ue("",!0),s.value==="result"?($(),M("button",{key:2,onClick:F,class:"px-6 py-2.5 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 transition-colors"}," Готово ")):ue("",!0)]),_:1})]}),_:1})]),_:1},8,["open"]))}}),th={class:"flex items-center justify-between"},nh={class:"flex-1 overflow-y-auto p-6 space-y-6"},oh={class:"grid grid-cols-2 gap-4"},rh={key:0,class:"mt-1 text-xs text-yellow-600"},ah={key:1,class:"mt-1 text-xs text-red-600"},sh={class:"border-t border-slate-100 pt-5"},lh={class:"flex items-center justify-between mb-3"},ih={key:0,class:"text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded-lg"},uh={key:0,class:"mt-2 text-xs text-amber-600 bg-amber-50 p-3 rounded-lg"},dh={class:"border-t border-slate-100 pt-5"},ch={class:"flex items-start gap-6"},fh={class:"flex-1"},ph={class:"mt-1 text-xs text-slate-400"},gh={class:"flex-1"},vh={class:"w-40 shrink-0"},mh={class:"flex items-center gap-3 cursor-pointer px-3 py-2 rounded-md border border-slate-200 hover:border-slate-300 transition-all"},hh={class:"text-sm text-slate-700"},yh={key:0,class:"text-sm text-red-600"},bh={class:"flex-shrink-0 border-t border-slate-200 bg-white px-6 py-3"},xh={class:"flex items-center justify-between"},Sh={class:"flex items-center gap-2"},wh=["disabled"],Ch={class:"p-6"},$h={class:"flex items-center gap-3 mt-6"},Eh=["disabled"],Rh=q({__name:"DirectorySettingsSheet",props:{isOpen:{type:Boolean},directory:{},existingToolNames:{}},emits:["close","save","delete"],setup(e,{expose:n,emit:t}){const r=e,a=t,s=G({name:"",tool_name:"",tool_description:"",response_mode:"function_result",search_type:"fuzzy",is_enabled:!0,columns:[]}),o=G(!1),l=G(!1),i=G(""),u=G(""),d=G(!1),c=G(""),g=G([]),p=xe(()=>s.value.tool_name!==c.value),m=xe(()=>JSON.stringify(s.value.columns)!==JSON.stringify(g.value)),h=xe(()=>{if(!m.value)return"";const U=s.value.columns.map(E=>E.name),x=g.value.filter(E=>!U.includes(E.name));return x.length>0&&r.directory&&r.directory.items_count>0?`Удаление колонок (${x.map(E=>E.label).join(", ")}) приведёт к потере данных в ${r.directory.items_count} записях`:""}),y=xe(()=>{if(!s.value.name.trim()||!s.value.tool_name.trim()||!dr(s.value.tool_name)||u.value||s.value.columns.length===0)return!1;if(R.value)return R.value.isValid();const U=s.value.columns.map(F=>F.name),x=s.value.columns.some(F=>!F.name||!F.label||!dr(F.name)),E=U.length!==new Set(U).size;return!x&&!E}),b=()=>{if(r.directory){const U=(r.directory.columns||[]).map(x=>({name:x.name,label:x.label,type:x.type||"text",required:x.required??!1,searchable:x.searchable??!1}));s.value={name:r.directory.name,tool_name:r.directory.tool_name,tool_description:r.directory.tool_description||"",response_mode:r.directory.response_mode||"function_result",search_type:r.directory.search_type||"fuzzy",is_enabled:r.directory.is_enabled,columns:U},c.value=r.directory.tool_name,g.value=JSON.parse(JSON.stringify(U))}},S=()=>{u.value=Na(s.value.tool_name,r.existingToolNames||[],c.value)},R=G(null),O=xe({get:()=>s.value.columns.map((U,x)=>({id:String(x),name:U.name,label:U.label,type:U.type,required:U.required,searchable:U.searchable??!1})),set:U=>{s.value.columns=U.map(({id:x,...E})=>E)}}),T=()=>{i.value="",u.value="",d.value=!1,o.value=!1,l.value=!1,a("close")},V=()=>{!y.value||!r.directory||(i.value="",o.value=!0,a("save",{id:r.directory.id,name:s.value.name,tool_name:s.value.tool_name,tool_description:s.value.tool_description,response_mode:s.value.response_mode,search_type:s.value.search_type,is_enabled:s.value.is_enabled,columns:s.value.columns}))},Z=()=>{r.directory&&(l.value=!0,a("delete",r.directory.id))};return Xe(()=>r.isOpen,U=>{U&&(b(),i.value="",u.value="",d.value=!1)}),Xe(()=>s.value.tool_name,()=>{S()}),n({setSaving:U=>{o.value=U},setDeleting:U=>{l.value=U},setError:U=>{i.value=U},close:T}),(U,x)=>($(),Y(f(bo),{open:e.isOpen,"onUpdate:open":x[10]||(x[10]=E=>!E&&T())},{default:C(()=>[w(f(xo),{side:"right","class-name":"max-w-4xl flex flex-col"},{default:C(()=>[w(f(So),null,{default:C(()=>[v("div",th,[w(f(wo),null,{default:C(()=>[...x[11]||(x[11]=[oe("Настройки справочника",-1)])]),_:1}),w(f(wr))])]),_:1}),v("div",nh,[v("div",oh,[v("div",null,[x[12]||(x[12]=v("label",{class:"text-sm font-medium text-slate-700"},"Название",-1)),Ae(v("input",{"onUpdate:modelValue":x[0]||(x[0]=E=>s.value.name=E),type:"text",class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all"},null,512),[[We,s.value.name,void 0,{trim:!0}]])]),v("div",null,[x[13]||(x[13]=v("label",{class:"text-sm font-medium text-slate-700"},"Имя функции",-1)),Ae(v("input",{"onUpdate:modelValue":x[1]||(x[1]=E=>s.value.tool_name=E),type:"text",class:Fe(["mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 font-mono focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all",{"border-yellow-300 bg-yellow-50":p.value}])},null,2),[[We,s.value.tool_name,void 0,{trim:!0}]]),p.value?($(),M("p",rh," Изменение повлияет на промпт агента ")):ue("",!0),u.value?($(),M("p",ah,W(u.value),1)):ue("",!0)])]),v("div",null,[x[14]||(x[14]=v("label",{class:"text-sm font-medium text-slate-700"},"Описание для агента",-1)),Ae(v("textarea",{"onUpdate:modelValue":x[2]||(x[2]=E=>s.value.tool_description=E),rows:"2",class:"mt-1 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all resize-none"},null,512),[[We,s.value.tool_description,void 0,{trim:!0}]])]),v("div",sh,[v("div",lh,[x[15]||(x[15]=v("label",{class:"text-sm font-medium text-slate-700"},"Колонки справочника",-1)),m.value?($(),M("span",ih," Изменения не сохранены ")):ue("",!0)]),w(ms,{modelValue:O.value,"onUpdate:modelValue":x[3]||(x[3]=E=>O.value=E),"max-columns":15,ref_key:"columnEditorRef",ref:R},null,8,["modelValue"]),h.value?($(),M("p",uh,W(h.value),1)):ue("",!0)]),v("div",dh,[v("div",ch,[v("div",fh,[x[17]||(x[17]=v("label",{class:"text-xs font-medium text-slate-500 mb-1.5 block"},"Режим ответа",-1)),Ae(v("select",{"onUpdate:modelValue":x[4]||(x[4]=E=>s.value.response_mode=E),class:"w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all"},[...x[16]||(x[16]=[v("option",{value:"function_result"},"Результат функции",-1),v("option",{value:"direct_message"},"Прямое сообщение",-1)])],512),[[pn,s.value.response_mode]]),v("p",ph,W(s.value.response_mode==="function_result"?"Агент сформулирует ответ сам":"Без обработки агентом"),1)]),v("div",gh,[x[19]||(x[19]=v("label",{class:"text-xs font-medium text-slate-500 mb-1.5 block"},"Тип поиска",-1)),Ae(v("select",{"onUpdate:modelValue":x[5]||(x[5]=E=>s.value.search_type=E),class:"w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all"},[...x[18]||(x[18]=[v("option",{value:"exact"},"Точный",-1),v("option",{value:"fuzzy"},"Нечёткий",-1),v("option",{value:"semantic"},"Семантический",-1)])],512),[[pn,s.value.search_type]])]),v("div",vh,[x[20]||(x[20]=v("label",{class:"text-xs font-medium text-slate-500 mb-1.5 block"},"Статус",-1)),v("label",mh,[w(f(ua),{modelValue:s.value.is_enabled,"onUpdate:modelValue":x[6]||(x[6]=E=>s.value.is_enabled=E)},null,8,["modelValue"]),v("span",hh,W(s.value.is_enabled?"Активен":"Выключен"),1)])])])]),i.value?($(),M("p",yh,W(i.value),1)):ue("",!0)]),v("div",bh,[v("div",xh,[v("button",{onClick:x[7]||(x[7]=E=>d.value=!0),class:"px-3 py-1.5 text-sm text-red-500 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors"}," Удалить "),v("div",Sh,[v("button",{onClick:T,class:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-md transition-colors"}," Отмена "),v("button",{onClick:V,class:"px-5 py-2 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5",disabled:o.value||!y.value},[o.value?($(),Y(f(qt),{key:0,class:"w-3.5 h-3.5 animate-spin"})):ue("",!0),oe(" "+W(o.value?"Сохранение...":"Сохранить"),1)],8,wh)])])]),w(f(Or),{open:d.value,"onUpdate:open":x[9]||(x[9]=E=>d.value=E)},{default:C(()=>[w(f(Pr),{"class-name":"max-w-sm"},{default:C(()=>[v("div",Ch,[w(f(uo),{class:"mb-4"},{default:C(()=>[w(f(Fn),null,{default:C(()=>[...x[21]||(x[21]=[oe("Удалить справочник?",-1)])]),_:1}),w(f(Mn),null,{default:C(()=>{var E,F;return[oe(' Справочник "'+W((E=e.directory)==null?void 0:E.name)+'" и все его записи ('+W((F=e.directory)==null?void 0:F.items_count)+") будут удалены безвозвратно. ",1)]}),_:1})]),_:1}),v("div",$h,[v("button",{onClick:x[8]||(x[8]=E=>d.value=!1),class:"flex-1 px-4 py-2.5 rounded-md border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors"}," Отмена "),v("button",{onClick:Z,class:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-md text-sm font-bold hover:bg-red-700 transition-colors",disabled:l.value},W(l.value?"Удаление...":"Удалить"),9,Eh)])])]),_:1})]),_:1},8,["open"])]),_:1})]),_:1},8,["open"]))}}),Vr=Symbol("tabs-context"),Ih=q({__name:"Tabs",props:{value:{},defaultValue:{},className:{}},emits:["update:value"],setup(e,{emit:n}){const t=e,r=n,a=Mt(),s=G(t.value??t.defaultValue??"services");return Xe(()=>t.value,i=>{i&&(s.value=i)}),oa(Vr,{value:s,setValue:i=>{s.value!==i&&(s.value=i,r("update:value",i))}}),(i,u)=>($(),M("div",ye({class:["space-y-4",e.className]},f(a)),[ne(i.$slots,"default")],16))}}),Dh=q({__name:"TabsList",props:{className:{}},setup(e){const n=Mt();return(t,r)=>($(),M("div",ye({class:["flex gap-2 flex-wrap",e.className]},f(n)),[ne(t.$slots,"default")],16))}}),Qo=q({__name:"TabsTrigger",props:{value:{}},setup(e){const n=e,t=Mt(),r=xr(Vr);if(!r)throw new Error("TabsTrigger must be used inside Tabs");const{value:a,setValue:s}=r,o=xe(()=>a.value===n.value),l=n.value;return(i,u)=>($(),M("button",ye({type:"button",class:["px-4 py-2 rounded-xl text-sm font-bold transition-colors",o.value?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"],onClick:u[0]||(u[0]=d=>f(s)(f(l)))},f(t)),[ne(i.$slots,"default")],16))}}),Jo=q({__name:"TabsContent",props:{value:{}},setup(e){const n=e,t=Mt(),r=xr(Vr);if(!r)throw new Error("TabsContent must be used inside Tabs");const{value:a}=r,s=xe(()=>a.value===n.value);return(o,l)=>Ae(($(),M("div",et(rt(f(t))),[ne(o.$slots,"default")],16)),[[aa,s.value]])}}),Oh={class:"space-y-6"},Ph={class:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm space-y-5"},Th={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},Mh={class:"flex items-center gap-4"},Fh={class:"flex items-center gap-2"},Ah={class:"text-sm text-slate-500 mt-0.5"},Vh={class:"flex items-center gap-3"},Bh=["disabled"],Lh={key:0,class:"mt-6 bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-start gap-3"},Nh={class:"flex-1"},jh={class:"text-sm text-yellow-700 mt-0.5"},kh={class:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm space-y-6"},Uh={class:"space-y-0.5 border border-slate-100 rounded-2xl overflow-hidden"},Gh={class:"p-6 border-b border-slate-100 space-y-4"},zh={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},Hh={class:"flex flex-wrap items-center gap-3"},_h={class:"relative"},Kh=["value"],Wh={class:"flex items-center gap-2 cursor-pointer"},Xh={key:0,class:"bg-indigo-50 px-6 py-3 border-b border-indigo-100 flex items-center justify-between"},Yh={class:"flex items-center gap-4"},qh={class:"text-sm font-bold text-indigo-700"},Qh={class:"flex items-center gap-2"},Jh={class:"overflow-x-auto bg-white"},Zh=["checked"],e0=["checked","onChange"],t0={class:"text-sm font-bold text-slate-900"},n0={key:0,class:"text-[10px] text-slate-500 mt-0.5 line-clamp-1"},o0={class:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium bg-slate-100 text-slate-600"},r0={class:"text-sm font-mono text-slate-600"},a0={class:"text-sm text-slate-600"},s0=["onClick"],l0=["onUpdate:modelValue","onBlur","onKeyup"],i0={class:"p-4 border-t border-slate-100 bg-slate-50/30 flex items-center justify-between"},u0={class:"text-xs text-slate-500"},d0={class:"flex items-center gap-2"},c0=["disabled"],f0={class:"text-xs font-bold text-slate-700"},p0=["disabled"],g0={class:"space-y-0.5 border border-slate-100 rounded-2xl overflow-hidden"},v0={class:"p-6 border-b border-slate-100 space-y-4"},m0={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},h0={class:"flex flex-wrap items-center gap-3"},y0={class:"relative"},b0={class:"text-sm text-slate-500"},x0={class:"overflow-x-auto bg-white"},S0={class:"text-sm font-bold text-slate-900"},w0={class:"text-[10px] text-slate-500 mt-0.5"},C0={class:"text-sm text-slate-600 capitalize"},$0={class:"text-sm text-slate-600"},E0={class:"p-4 border-t border-slate-100 bg-slate-50/30 text-xs text-slate-500"},R0={class:"space-y-0.5 border border-slate-100 rounded-2xl overflow-hidden"},I0={class:"p-6 border-b border-slate-100 space-y-4"},D0={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},O0={class:"flex flex-wrap items-center gap-3"},P0={class:"relative"},T0={class:"flex items-center gap-2 cursor-pointer"},M0={class:"overflow-x-auto bg-white"},F0={class:"text-sm font-bold text-slate-900"},A0={key:0,class:"text-[10px] text-slate-500 mt-0.5 line-clamp-1"},V0={class:"text-sm text-slate-600"},B0=["onClick"],L0=["onUpdate:modelValue","onBlur"],N0={class:"p-4 border-t border-slate-100 bg-slate-50/30 text-xs text-slate-500"},j0=q({__name:"SQNSIntegrationManager",props:{agentId:{},status:{},lastSyncAt:{},warning:{}},emits:["close-warning","sync-complete"],setup(e,{emit:n}){const t=e,r=n,{syncSqns:a,fetchSqnsServicesCached:s,updateSqnsService:o,bulkUpdateSqnsServices:l,fetchSqnsCategories:i,updateSqnsCategory:u}=uu(),{success:d,error:c}=ia(),g=G(!1),p=G(!1),m=G([]),h=G(0),y=G([]),b=G([]),S=G(!1),R=G(""),O=G(!1),T=G("services"),V=G([]),Z=G(!1),U=G(""),x=G({search:"",category:null,is_enabled:null}),E=G({limit:50,offset:0}),F=xe(()=>Math.floor(E.value.offset/E.value.limit)+1),ae=xe(()=>m.value.length>0&&m.value.every(X=>b.value.includes(X.id))),L=xe(()=>t.lastSyncAt?new Date(t.lastSyncAt).toLocaleString("ru-RU",{dateStyle:"medium",timeStyle:"short"}):"нет данных"),j=xe(()=>{const X=R.value.trim().toLowerCase();return y.value.filter(D=>{var K;return O.value&&!D.is_enabled?!1:X?((K=D.name)==null?void 0:K.toLowerCase().includes(X))??!1:!0})}),H=xe(()=>{const X=U.value.trim().toLowerCase();return X?V.value.filter(D=>`${D.name??""} ${D.role??""}`.toLowerCase().includes(X)):V.value}),N=async(X=!1)=>{try{X||(p.value=!0);const D=await s(t.agentId,{...x.value,...E.value,category:x.value.category??void 0,is_enabled:x.value.is_enabled??void 0});m.value=D.services,h.value=D.total}catch(D){console.error("Failed to load services:",D)}finally{X||(p.value=!1)}},ee=async(X=!1)=>{try{X||(S.value=!0),y.value=await i(t.agentId)}catch(D){console.error("Failed to load categories:",D)}finally{X||(S.value=!1)}},de=async()=>{try{Z.value=!0,V.value=[]}catch(X){console.error("Failed to load specialists:",X)}finally{Z.value=!1}},$e=async()=>{try{g.value=!0;const X=await a(t.agentId);d("Синхронизация завершена",`Обновлено: ${X.services_synced} услуг, ${X.categories_synced} категорий`),r("sync-complete"),N(),ee(),await de()}catch(X){c("Ошибка синхронизации",sn(X,"Не удалось выполнить синхронизацию"))}finally{g.value=!1}},Be=async X=>{const D=!!X.is_enabled,K=!D;X.is_enabled=K,console.log("🔧 Toggle service:",{serviceId:X.id,serviceIdType:typeof X.id,serviceName:X.name,originalState:D,nextState:K,payload:{is_enabled:K}});try{await o(t.agentId,X.id,{is_enabled:K}),console.log("✅ Toggle успешно, перезагружаем список..."),await N(!0),d("Статус обновлен",`Услуга "${X.name}" ${K?"включена":"отключена"}`)}catch(Ne){X.is_enabled=D,c("Ошибка",sn(Ne,"Не удалось изменить статус услуги")),console.error("❌ Toggle error:",Ne),await N()}},Te=async X=>{const D=Number(X.priority);if(!Number.isFinite(D)||D<0){c("Ошибка","Приоритет должен быть числом >= 0"),N();return}try{await o(t.agentId,X.id,{priority:D}),await N(!0),d("Приоритет обновлен",`Для услуги "${X.name}" установлен приоритет ${D}`)}catch(K){c("Ошибка",sn(K,"Не удалось обновить приоритет услуги")),await N(!0)}},De=async X=>{if(confirm(`Вы уверены? ${b.value.length} услуг будут ${X?"включены":"отключены"}`))try{await l(t.agentId,{ids:b.value,is_enabled:X}),b.value=[],await N(!0),d("Массовое обновление",`Успешно обновлено ${b.value.length} услуг`)}catch(D){c("Ошибка",sn(D,"Не удалось выполнить массовое обновление")),await N(!0)}},Q=async X=>{const D=X.is_enabled,K=!D;X.is_enabled=K;try{await u(t.agentId,X.id,{is_enabled:K}),await ee(!0),d("Статус категории обновлен",`Категория "${X.name}" ${K?"включена":"отключена"}`)}catch(Ne){X.is_enabled=D,c("Ошибка",sn(Ne,"Не удалось изменить статус категории")),await ee(!0)}},J=async X=>{const D=Number(X.priority);if(!Number.isFinite(D)||D<0){c("Ошибка","Приоритет должен быть числом >= 0"),await ee(!0);return}try{await u(t.agentId,X.id,{priority:D}),await ee(!0),d("Приоритет категории обновлен",`Для категории "${X.name}" установлен приоритет ${D}`)}catch(K){c("Ошибка",sn(K,"Не удалось обновить приоритет категории")),await ee(!0)}},fe=X=>{const D=b.value.indexOf(X);D===-1?b.value.push(X):b.value.splice(D,1)},ce=()=>{ae.value?b.value=b.value.filter(X=>!m.value.some(D=>D.id===X)):m.value.forEach(X=>{b.value.includes(X.id)||b.value.push(X.id)})},Ee=X=>{E.value.offset+=X*E.value.limit,N()};let je=null;return Xe(()=>x.value.search,()=>{clearTimeout(je),je=setTimeout(()=>{E.value.offset=0,N()},300)}),Xe([()=>x.value.category,()=>x.value.is_enabled],()=>{E.value.offset=0,N()}),Xe(T,X=>{X==="specialists"&&V.value.length===0&&de(),X==="categories"&&y.value.length===0&&ee()}),Xt(()=>{N(),ee(),de()}),(X,D)=>($(),M("div",Oh,[v("div",Ph,[v("div",Th,[v("div",Mh,[v("div",{class:Fe(["w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",[e.status==="error"?"bg-red-50 text-red-600":"bg-emerald-50 text-emerald-600"]])},[w(f(du),{class:"w-6 h-6"})],2),v("div",null,[v("div",Fh,[D[13]||(D[13]=v("h3",{class:"text-lg font-bold text-slate-900"},"SQNS Интеграция",-1)),v("span",{class:Fe(["text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full",[e.status==="error"?"bg-red-50 text-red-600":"bg-emerald-50 text-emerald-600"]])},W(e.status==="error"?"Ошибка":"Активна"),3)]),v("p",Ah," Последняя синхронизация: "+W(L.value),1)])]),v("div",Vh,[v("button",{onClick:$e,disabled:g.value,class:"flex items-center gap-2 px-4 py-2 bg-slate-50 text-slate-700 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-100 transition-all disabled:opacity-50"},[w(f(Su),{class:Fe(["h-4 w-4",{"animate-spin":g.value}])},null,8,["class"]),oe(" "+W(g.value?"Синхронизация...":"Обновить данные"),1)],8,Bh)])]),e.warning?($(),M("div",Lh,[w(f(gu),{class:"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5"}),v("div",Nh,[D[14]||(D[14]=v("p",{class:"text-sm text-yellow-800 font-medium"},"Внимание",-1)),v("p",jh,W(e.warning),1)]),v("button",{onClick:D[0]||(D[0]=K=>X.$emit("close-warning")),class:"text-yellow-500 hover:text-yellow-600"},[w(f(yo),{class:"h-4 w-4"})])])):ue("",!0)]),v("div",kh,[w(f(Ih),{value:T.value,"onUpdate:value":D[12]||(D[12]=K=>T.value=K)},{default:C(()=>[w(f(Dh),{className:"bg-slate-50/70 p-1 rounded-xl"},{default:C(()=>[w(f(Qo),{value:"services"},{default:C(()=>[...D[15]||(D[15]=[oe("Услуги",-1)])]),_:1}),w(f(Qo),{value:"specialists"},{default:C(()=>[...D[16]||(D[16]=[oe("Специалисты",-1)])]),_:1}),w(f(Qo),{value:"categories"},{default:C(()=>[...D[17]||(D[17]=[oe("Категории",-1)])]),_:1})]),_:1}),w(f(Jo),{value:"services"},{default:C(()=>[v("div",Uh,[v("div",Gh,[v("div",zh,[D[20]||(D[20]=v("h3",{class:"text-lg font-bold text-slate-900"},"Управление услугами",-1)),v("div",Hh,[v("div",_h,[w(f(In),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),Ae(v("input",{"onUpdate:modelValue":D[1]||(D[1]=K=>x.value.search=K),type:"text",placeholder:"Поиск услуг...",class:"pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all w-64"},null,512),[[We,x.value.search]])]),Ae(v("select",{"onUpdate:modelValue":D[2]||(D[2]=K=>x.value.category=K),class:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all"},[D[18]||(D[18]=v("option",{value:null},"Все категории",-1)),($(!0),M(Ue,null,_e(y.value,K=>($(),M("option",{key:K.id,value:K.name},W(K.name),9,Kh))),128))],512),[[pn,x.value.category]]),v("label",Wh,[Ae(v("input",{"onUpdate:modelValue":D[3]||(D[3]=K=>x.value.is_enabled=K),type:"checkbox",class:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"},null,512),[[on,x.value.is_enabled]]),D[19]||(D[19]=v("span",{class:"text-sm text-slate-600"},"Только включенные",-1))])])])]),w(ta,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform -translate-y-2 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-2 opacity-0"},{default:C(()=>[b.value.length>0?($(),M("div",Xh,[v("div",Yh,[v("span",qh,"Выбрано: "+W(b.value.length),1),D[21]||(D[21]=v("div",{class:"h-4 w-px bg-indigo-200"},null,-1)),v("div",Qh,[v("button",{onClick:D[4]||(D[4]=K=>De(!0)),class:"text-xs font-bold text-indigo-600 hover:text-indigo-800 transition-colors"}," Включить выбранные "),v("button",{onClick:D[5]||(D[5]=K=>De(!1)),class:"text-xs font-bold text-red-600 hover:text-red-800 transition-colors"}," Отключить выбранные ")])]),v("button",{onClick:D[6]||(D[6]=K=>b.value=[]),class:"text-xs font-medium text-slate-500 hover:text-slate-700"}," Сбросить выбор ")])):ue("",!0)]),_:1}),v("div",Jh,[w(f(On),null,{default:C(()=>[w(f(Pn),null,{default:C(()=>[w(f(it),null,{default:C(()=>[w(f(Je),{className:"w-10"},{default:C(()=>[v("input",{type:"checkbox",checked:ae.value,onChange:ce,class:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"},null,40,Zh)]),_:1}),w(f(Je),null,{default:C(()=>[...D[22]||(D[22]=[oe("Услуга",-1)])]),_:1}),w(f(Je),null,{default:C(()=>[...D[23]||(D[23]=[oe("Категория",-1)])]),_:1}),w(f(Je),null,{default:C(()=>[...D[24]||(D[24]=[oe("Цена",-1)])]),_:1}),w(f(Je),null,{default:C(()=>[...D[25]||(D[25]=[oe("Длительность",-1)])]),_:1}),w(f(Je),null,{default:C(()=>[...D[26]||(D[26]=[oe("Статус",-1)])]),_:1}),w(f(Je),{className:"w-24"},{default:C(()=>[...D[27]||(D[27]=[oe("Приоритет",-1)])]),_:1})]),_:1})]),_:1}),w(f(Tn),null,{default:C(()=>[p.value?($(),M(Ue,{key:0},_e(5,K=>w(f(it),{key:`skeleton-${K}`,class:"animate-pulse"},{default:C(()=>[w(f(Re),null,{default:C(()=>[...D[28]||(D[28]=[v("div",{class:"h-4 w-4 bg-slate-100 rounded"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[29]||(D[29]=[v("div",{class:"h-4 w-48 bg-slate-100 rounded"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[30]||(D[30]=[v("div",{class:"h-4 w-24 bg-slate-100 rounded"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[31]||(D[31]=[v("div",{class:"h-4 w-16 bg-slate-100 rounded"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[32]||(D[32]=[v("div",{class:"h-4 w-16 bg-slate-100 rounded"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[33]||(D[33]=[v("div",{class:"h-6 w-10 bg-slate-100 rounded-full"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[34]||(D[34]=[v("div",{class:"h-8 w-16 bg-slate-100 rounded"},null,-1)])]),_:1})]),_:1})),64)):m.value.length===0?($(),Y(f(it),{key:1},{default:C(()=>[w(f(Re),{colspan:7,className:"p-12 text-center text-slate-400 italic"},{default:C(()=>[...D[35]||(D[35]=[oe(" Услуги не найдены ",-1)])]),_:1})]),_:1})):($(!0),M(Ue,{key:2},_e(m.value,K=>($(),Y(f(it),{key:K.id,class:Fe(["hover:bg-slate-50/50 transition-colors",b.value.includes(K.id)?"bg-indigo-50/20":""])},{default:C(()=>[w(f(Re),null,{default:C(()=>[v("input",{type:"checkbox",checked:b.value.includes(K.id),onChange:Ne=>fe(K.id),class:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"},null,40,e0)]),_:2},1024),w(f(Re),null,{default:C(()=>[v("p",t0,W(K.name),1),K.description?($(),M("p",n0,W(K.description),1)):ue("",!0)]),_:2},1024),w(f(Re),null,{default:C(()=>[v("span",o0,W(K.category||"Без категории"),1)]),_:2},1024),w(f(Re),null,{default:C(()=>[v("span",r0,W(K.price_range||"—")+" ₽",1)]),_:2},1024),w(f(Re),null,{default:C(()=>[v("span",a0,W(K.duration)+" мин",1)]),_:2},1024),w(f(Re),null,{default:C(()=>[v("button",{onClick:Ne=>Be(K),class:Fe(["relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none",[K.is_enabled?"bg-emerald-500":"bg-slate-200"]])},[v("span",{"aria-hidden":"true",class:Fe(["pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow transition duration-200 ease-in-out",[K.is_enabled?"translate-x-4":"translate-x-0"]])},null,2)],10,s0)]),_:2},1024),w(f(Re),null,{default:C(()=>[Ae(v("input",{type:"number","onUpdate:modelValue":Ne=>K.priority=Ne,onBlur:Ne=>Te(K),onKeyup:kn(Ne=>Te(K),["enter"]),class:"w-16 px-2 py-1 bg-slate-50 border border-slate-200 rounded text-xs font-mono focus:ring-1 focus:ring-indigo-500 focus:bg-white transition-all",min:"0",max:"100"},null,40,l0),[[We,K.priority,void 0,{number:!0}]])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),v("div",i0,[v("p",u0," Показано "+W(E.value.offset+1)+"-"+W(Math.min(E.value.offset+E.value.limit,h.value))+" из "+W(h.value)+" услуг ",1),v("div",d0,[v("button",{onClick:D[7]||(D[7]=K=>Ee(-1)),disabled:E.value.offset===0,class:"p-2 rounded-lg hover:bg-white hover:shadow-sm disabled:opacity-30 transition-all"},[w(f(xa),{class:"h-4 w-4"})],8,c0),v("span",f0,"Страница "+W(F.value),1),v("button",{onClick:D[8]||(D[8]=K=>Ee(1)),disabled:E.value.offset+E.value.limit>=h.value,class:"p-2 rounded-lg hover:bg-white hover:shadow-sm disabled:opacity-30 transition-all"},[w(f(Sa),{class:"h-4 w-4"})],8,p0)])])])]),_:1}),w(f(Jo),{value:"specialists"},{default:C(()=>[v("div",g0,[v("div",v0,[v("div",m0,[D[36]||(D[36]=v("h3",{class:"text-lg font-bold text-slate-900"},"Специалисты",-1)),v("div",h0,[v("div",y0,[w(f(In),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),Ae(v("input",{"onUpdate:modelValue":D[9]||(D[9]=K=>U.value=K),type:"text",placeholder:"Поиск специалистов...",class:"pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all w-64"},null,512),[[We,U.value]])]),v("span",b0,"Всего: "+W(V.value.length),1)])])]),v("div",x0,[w(f(On),null,{default:C(()=>[w(f(Pn),null,{default:C(()=>[w(f(it),null,{default:C(()=>[w(f(Je),null,{default:C(()=>[...D[37]||(D[37]=[oe("Имя",-1)])]),_:1}),w(f(Je),null,{default:C(()=>[...D[38]||(D[38]=[oe("Роль",-1)])]),_:1}),w(f(Je),null,{default:C(()=>[...D[39]||(D[39]=[oe("Услуг",-1)])]),_:1}),w(f(Je),null,{default:C(()=>[...D[40]||(D[40]=[oe("Статус",-1)])]),_:1})]),_:1})]),_:1}),w(f(Tn),null,{default:C(()=>[Z.value?($(),M(Ue,{key:0},_e(5,K=>w(f(it),{key:`spec-skel-${K}`,class:"animate-pulse"},{default:C(()=>[w(f(Re),null,{default:C(()=>[...D[41]||(D[41]=[v("div",{class:"h-4 w-24 bg-slate-100 rounded"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[42]||(D[42]=[v("div",{class:"h-4 w-32 bg-slate-100 rounded"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[43]||(D[43]=[v("div",{class:"h-4 w-16 bg-slate-100 rounded"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[44]||(D[44]=[v("div",{class:"h-4 w-12 bg-slate-100 rounded"},null,-1)])]),_:1})]),_:1})),64)):H.value.length===0?($(),Y(f(it),{key:1},{default:C(()=>[w(f(Re),{colspan:4,className:"p-12 text-center text-slate-400 italic"},{default:C(()=>[...D[45]||(D[45]=[oe(" Специалисты не найдены ",-1)])]),_:1})]),_:1})):($(!0),M(Ue,{key:2},_e(H.value,K=>($(),Y(f(it),{key:K.id,class:Fe(["hover:bg-slate-50/50 transition-colors",K.is_active?"bg-emerald-50/30":""])},{default:C(()=>[w(f(Re),null,{default:C(()=>[v("p",S0,W(K.name),1),v("p",w0,W(K.email||K.phone||""),1)]),_:2},1024),w(f(Re),null,{default:C(()=>[v("span",C0,W(K.role||"Специалист"),1)]),_:2},1024),w(f(Re),null,{default:C(()=>[v("span",$0,W(K.services_count??K.linked_services??"-"),1)]),_:2},1024),w(f(Re),null,{default:C(()=>[v("span",{class:Fe(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-semibold",K.is_active?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-500"])},W(K.is_active?"Активен":"Отключён"),3)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),v("div",E0,W(H.value.length)+" из "+W(V.value.length)+" специалистов отображаются ",1)])]),_:1}),w(f(Jo),{value:"categories"},{default:C(()=>[v("div",R0,[v("div",I0,[v("div",D0,[D[47]||(D[47]=v("h3",{class:"text-lg font-bold text-slate-900"},"Категории",-1)),v("div",O0,[v("div",P0,[w(f(In),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),Ae(v("input",{"onUpdate:modelValue":D[10]||(D[10]=K=>R.value=K),type:"text",placeholder:"Поиск категории...",class:"pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all w-64"},null,512),[[We,R.value]])]),v("label",T0,[Ae(v("input",{"onUpdate:modelValue":D[11]||(D[11]=K=>O.value=K),type:"checkbox",class:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"},null,512),[[on,O.value]]),D[46]||(D[46]=v("span",{class:"text-sm text-slate-600"},"Только включенные",-1))])])])]),v("div",M0,[w(f(On),null,{default:C(()=>[w(f(Pn),null,{default:C(()=>[w(f(it),null,{default:C(()=>[w(f(Je),null,{default:C(()=>[...D[48]||(D[48]=[oe("Категория",-1)])]),_:1}),w(f(Je),null,{default:C(()=>[...D[49]||(D[49]=[oe("Услуг",-1)])]),_:1}),w(f(Je),null,{default:C(()=>[...D[50]||(D[50]=[oe("Статус",-1)])]),_:1}),w(f(Je),null,{default:C(()=>[...D[51]||(D[51]=[oe("Приоритет",-1)])]),_:1})]),_:1})]),_:1}),w(f(Tn),null,{default:C(()=>[S.value?($(),M(Ue,{key:0},_e(5,K=>w(f(it),{key:`cat-skel-${K}`,class:"animate-pulse"},{default:C(()=>[w(f(Re),null,{default:C(()=>[...D[52]||(D[52]=[v("div",{class:"h-4 w-32 bg-slate-100 rounded"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[53]||(D[53]=[v("div",{class:"h-4 w-16 bg-slate-100 rounded"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[54]||(D[54]=[v("div",{class:"h-4 w-12 bg-slate-100 rounded"},null,-1)])]),_:1}),w(f(Re),null,{default:C(()=>[...D[55]||(D[55]=[v("div",{class:"h-4 w-10 bg-slate-100 rounded"},null,-1)])]),_:1})]),_:1})),64)):j.value.length===0?($(),Y(f(it),{key:1},{default:C(()=>[w(f(Re),{colspan:4,className:"p-12 text-center text-slate-400 italic"},{default:C(()=>[...D[56]||(D[56]=[oe(" Категории не найдены ",-1)])]),_:1})]),_:1})):($(!0),M(Ue,{key:2},_e(j.value,K=>($(),Y(f(it),{key:K.id,class:"hover:bg-slate-50/50 transition-colors"},{default:C(()=>[w(f(Re),null,{default:C(()=>[v("p",F0,W(K.name),1),K.description?($(),M("p",A0,W(K.description),1)):ue("",!0)]),_:2},1024),w(f(Re),null,{default:C(()=>[v("span",V0,W(K.services_count??"—"),1)]),_:2},1024),w(f(Re),null,{default:C(()=>[v("button",{onClick:Ne=>Q(K),class:Fe(["relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none",[K.is_enabled?"bg-emerald-500":"bg-slate-200"]])},[v("span",{"aria-hidden":"true",class:Fe(["pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow transition duration-200 ease-in-out",[K.is_enabled?"translate-x-4":"translate-x-0"]])},null,2)],10,B0)]),_:2},1024),w(f(Re),null,{default:C(()=>[Ae(v("input",{type:"number","onUpdate:modelValue":Ne=>K.priority=Ne,onBlur:Ne=>J(K),class:"w-16 px-2 py-1 bg-slate-50 border border-slate-200 rounded text-xs font-mono focus:ring-1 focus:ring-indigo-500 focus:bg-white transition-all",min:"0",max:"100"},null,40,L0),[[We,K.priority,void 0,{number:!0}]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),v("div",N0,W(j.value.length)+" из "+W(y.value.length)+" категорий отображаются ",1)])]),_:1})]),_:1},8,["value"])])]))}}),k0={class:"space-y-6"},U0={key:0},G0={key:0},z0={key:1},H0={key:1},_0={key:0,class:"bg-background rounded-md border border-border p-6 sm:p-8 text-center"},K0={class:"max-w-md mx-auto"},W0={class:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"},X0={key:1},Y0=q({__name:"AgentKnowledgePanel",setup(e){const n=Gi(),t=Ni(),r=ji(),{agent:a,directoriesComposable:s,isSqnsEnabled:o,sqnsToolsList:l,sqnsStatus:i}=ki(n),{success:u,error:d}=ia(),c=G("directories"),g=G(!1),p=G(!1),m=G(!1),h=G(null),y=xe(()=>{var Q;return((Q=s.value)==null?void 0:Q.directories)??[]}),b=xe(()=>{var Q;return((Q=s.value)==null?void 0:Q.isLoading)??!1}),S=xe(()=>{var Q;return((Q=s.value)==null?void 0:Q.error)??null}),R=xe(()=>{var Q;return((Q=s.value)==null?void 0:Q.items)??[]}),O=xe(()=>{var Q;return((Q=s.value)==null?void 0:Q.isLoadingItems)??!1}),T=xe(()=>{var Q;return((Q=s.value)==null?void 0:Q.currentDirectory)??null}),V=xe(()=>[{id:"directories",label:"Справочники",count:y.value.length},{id:"sqns",label:"SQNS",count:o.value?l.value.length:void 0}]),Z=async()=>{await n.ensureDirectoriesLoaded()},U=()=>{var fe;const Q=t.query.directoryId;if(!Q||!s.value||((fe=T.value)==null?void 0:fe.id)===Q)return;const J=y.value.find(ce=>ce.id===Q);J&&s.value.setCurrentDirectory(J)};Xe(y,Q=>{Q.length>0&&U()}),Xt(()=>{c.value==="directories"?n.ensureDirectoriesLoaded():(n.ensureSqnsStatusLoaded(),n.ensureSqnsHints())}),Xe(a,async Q=>{Q&&(c.value==="directories"?await n.ensureDirectoriesLoaded():(await n.ensureSqnsStatusLoaded(),await n.ensureSqnsHints()))},{immediate:!0}),Xe(c,async Q=>{Q==="directories"?await n.ensureDirectoriesLoaded():(await n.ensureSqnsStatusLoaded(),await n.ensureSqnsHints())});const x=async Q=>{if(s.value)try{await s.value.createDirectory(Q),g.value=!1,u("Справочник создан")}catch(J){d(J.message||"Не удалось создать справочник")}},E=Q=>{s.value&&(s.value.setCurrentDirectory(Q),r.replace({query:{...t.query,directoryId:Q.id}}))},F=()=>{if(s.value){s.value.setCurrentDirectory(null);const{directoryId:Q,...J}=t.query;r.replace({query:J})}},ae=async Q=>{if(!(!s.value||!T.value))try{await s.value.createItem(T.value.id,Q),u("Запись добавлена")}catch(J){d(J.message||"Не удалось создать запись")}},L=async(Q,J)=>{if(!(!s.value||!T.value))try{await s.value.updateItem(T.value.id,Q,J)}catch(fe){d(fe.message||"Не удалось обновить запись")}},j=async Q=>{if(!(!s.value||!T.value))try{await s.value.deleteItem(T.value.id,Q),u("Запись удалена")}catch(J){d(J.message||"Не удалось удалить запись")}},H=async Q=>{if(!(!s.value||!T.value))try{await s.value.deleteItems(T.value.id,Q),u("Записи удалены")}catch(J){d(J.message||"Не удалось удалить записи")}},N=async(Q,J,fe)=>{if(!(!s.value||!T.value))try{const ce=await s.value.importCsv(T.value.id,Q,J,fe);p.value=!1,u(`Импортировано ${ce.created} записей`)}catch(ce){d(ce.message||"Не удалось импортировать файл")}},ee=async()=>{if(!(!s.value||!T.value))try{await s.value.exportCsv(T.value.id)}catch(Q){d(Q.message||"Не удалось экспортировать справочник")}},de=async Q=>{if(!(!s.value||!T.value))try{const J=[...T.value.columns,Q];await s.value.updateDirectory(T.value.id,{columns:J}),u("Столбец добавлен")}catch(J){d(J.message||"Не удалось добавить столбец")}},$e=async Q=>{if(!(!s.value||!T.value))try{const J=T.value.columns.filter(fe=>fe.name!==Q);if(J.length===0){d("Нельзя удалить последний столбец");return}await s.value.updateDirectory(T.value.id,{columns:J}),u("Столбец удалён")}catch(J){d(J.message||"Не удалось удалить столбец")}},Be=async Q=>{if(!(!s.value||!T.value))try{await s.value.updateDirectory(T.value.id,{columns:Q})}catch(J){d(J.message||"Не удалось обновить столбцы")}},Te=async Q=>{var J,fe;if(!(!s.value||!Q.id))try{await s.value.updateDirectory(Q.id,Q),m.value=!1,u("Настройки сохранены")}catch(ce){(J=h.value)==null||J.setError(ce.message||"Не удалось сохранить настройки"),d(ce.message||"Не удалось сохранить настройки")}finally{(fe=h.value)==null||fe.setSaving(!1)}},De=async Q=>{var J,fe;if(s.value)try{await s.value.deleteDirectory(Q),m.value=!1;const{directoryId:ce,...Ee}=t.query;r.replace({query:Ee}),u("Справочник удалён")}catch(ce){(J=h.value)==null||J.setError(ce.message||"Не удалось удалить справочник"),d(ce.message||"Не удалось удалить справочник")}finally{(fe=h.value)==null||fe.setDeleting(!1)}};return(Q,J)=>{var fe,ce,Ee,je,X;return $(),M("div",k0,[w(Iu,{modelValue:c.value,"onUpdate:modelValue":J[0]||(J[0]=D=>c.value=D),tabs:V.value},null,8,["modelValue","tabs"]),c.value==="directories"?($(),M("div",U0,[T.value?($(),M("div",G0,[w(Ag,{directory:T.value,items:R.value,loading:O.value,"on-update-item":L,onBack:F,onSettings:J[1]||(J[1]=D=>m.value=!0),onCreate:ae,onDelete:j,onDeleteSelected:H,onImport:J[2]||(J[2]=D=>p.value=!0),onExport:ee,onAddColumn:de,onDeleteColumn:$e,onUpdateColumns:Be},null,8,["directory","items","loading"])])):($(),M("div",z0,[w(qu,{directories:y.value,loading:b.value,error:S.value,onCreate:J[3]||(J[3]=D=>g.value=!0),onSelect:E,onRetry:Z},null,8,["directories","loading","error"])]))])):c.value==="sqns"?($(),M("div",H0,[f(o)?($(),M("div",X0,[f(a)?($(),Y(j0,{key:0,"agent-id":f(a).id,status:((fe=f(i))==null?void 0:fe.sqnsStatus)==="error"?"error":"active","last-sync-at":(ce=f(i))==null?void 0:ce.sqnsLastSyncAt,warning:(Ee=f(i))==null?void 0:Ee.sqnsWarning,onSyncComplete:f(n).loadSqnsStatusForAgent},null,8,["agent-id","status","last-sync-at","warning","onSyncComplete"])):ue("",!0)])):($(),M("div",_0,[v("div",K0,[v("div",W0,[w(f(cu),{class:"h-8 w-8 text-slate-400"})]),J[8]||(J[8]=v("h3",{class:"text-lg font-bold text-slate-900"},"База знаний SQNS",-1)),J[9]||(J[9]=v("p",{class:"text-slate-500 mt-2 mb-6"}," Подключите SQNS интеграцию для управления услугами и категориями. ",-1)),v("button",{onClick:J[4]||(J[4]=D=>{var K;return f(Ui)(`/agents/${(K=f(a))==null?void 0:K.id}/connections`)}),class:"px-6 py-3 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 transition-colors"}," Перейти к подключениям ")])]))])):ue("",!0),w(Cm,{"is-open":g.value,"existing-tool-names":((je=f(s))==null?void 0:je.existingToolNames)??[],onClose:J[5]||(J[5]=D=>g.value=!1),onSubmit:x},null,8,["is-open","existing-tool-names"]),T.value?($(),Y(eh,{key:2,"is-open":p.value,"directory-name":T.value.name,columns:T.value.columns,onClose:J[6]||(J[6]=D=>p.value=!1),onImport:N},null,8,["is-open","directory-name","columns"])):ue("",!0),w(Rh,{ref_key:"directorySettingsSheetRef",ref:h,"is-open":m.value,directory:T.value,"existing-tool-names":((X=f(s))==null?void 0:X.existingToolNames)??[],onClose:J[7]||(J[7]=D=>m.value=!1),onSave:Te,onDelete:De},null,8,["is-open","directory","existing-tool-names"])])}}}),Oy=q({__name:"knowledge",setup(e){return(n,t)=>($(),Y(ys,{title:"База знаний","hide-actions":!0},{default:C(()=>[w(Y0)]),_:1}))}});export{Oy as default};
