import{M as he,m as xe,N as tt,o as f,c as v,a as s,t as k,A as D,p as I,F as R,C as Z,n as ue,f as st,B as ot,b as m,u as h,v as T,x as N,d as $,O as re,D as Te,q as Ce,w as L,k as C,L as Ie,X as te,E as Se,s as Oe,P as nt}from"./entry.CBkKRCnV.js";import{_ as lt,a as at,b as rt,c as it,d as dt,e as ut,f as ct,g as pt}from"./DialogTitle.vue.ChC94dzl.js";import{u as ft,g as $e}from"./useApiFetch.B9YviUBz.js";import{P as ie}from"./plus.CAbVbV7B.js";import{S as vt}from"./search.CKKCnfcg.js";import{C as Ne}from"./check.B0AA6R8j.js";import{C as yt}from"./code.BBwGSiHr.js";import{C as mt}from"./copy.cIoq39HJ.js";import{T as ht}from"./trash-2.BLHjeIGf.js";import{P as xt}from"./play.CbykjbVq.js";import"./index.DUHHe-nk.js";import"./floating-ui.vue.D2M-ESmY.js";import"./utils.wJwXZMb_.js";import"./index.C5R80SqK.js";import"./authSessionManager.BK0upO_P.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=he("BrainCircuitIcon",[["path",{d:"M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0-1.32 4.24 3 3 0 0 0 .34 5.58 2.5 2.5 0 0 0 2.96 3.08 2.5 2.5 0 0 0 4.91.05L12 20V4.5Z",key:"ixwj2a"}],["path",{d:"M16 8V5c0-1.1.9-2 2-2",key:"13dx7u"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M20.5 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1s25gz"}],["path",{d:"M16.5 13a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"127460"}],["path",{d:"M20.5 21a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"fys062"}],["path",{d:"M18.5 3a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1vib61"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=he("ServerIcon",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=he("TerminalIcon",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),gt={class:"field-node pl-4"},_t={class:"flex items-center gap-2 py-1 hover:bg-slate-50 rounded group"},wt=["checked"],kt={class:"text-xs font-mono text-slate-700 font-medium"},At={key:0,class:"ml-auto text-[10px] text-slate-400 truncate max-w-[150px] opacity-0 group-hover:opacity-100 transition-opacity"},Tt={key:0,class:"border-l border-slate-200 ml-[7px]"},Ct=xe({__name:"FieldNode",props:{field:{}},emits:["toggle"],setup(w){return(p,g)=>{const x=tt("FieldNode",!0);return f(),v("div",gt,[s("div",_t,[s("input",{type:"checkbox",checked:w.field.selected,onChange:g[0]||(g[0]=r=>p.$emit("toggle",w.field)),class:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 h-3.5 w-3.5 cursor-pointer"},null,40,wt),s("span",kt,k(w.field.key),1),s("span",{class:D(["text-[10px] px-1.5 py-0.5 rounded font-mono border",w.field.type==="array"?"bg-purple-100 text-purple-700 border-purple-200":w.field.type==="object"?"bg-blue-100 text-blue-700 border-blue-200":"bg-slate-100 text-slate-500 border-slate-200"])},k(w.field.type),3),w.field.example!==void 0?(f(),v("span",At,k(w.field.example),1)):I("",!0)]),w.field.children&&w.field.children.length>0?(f(),v("div",Tt,[(f(!0),v(R,null,Z(w.field.children,r=>(f(),ue(x,{key:r.path,field:r,onToggle:g[1]||(g[1]=_=>p.$emit("toggle",_))},null,8,["field"]))),128))])):I("",!0)])}}}),It=w=>{const p=w.replace(/\\\r?\n/g," ").replace(/\r?\n/g," ").trim(),g=[];let x="",r=0;for(;r<p.length;){const _=p[r];if(_===" "||_==="	"){x.length>0&&(g.push(x),x=""),r++;continue}if(_==='"'){for(r++;r<p.length&&p[r]!=='"';)if(p[r]==="\\"&&r+1<p.length){const a=p[r+1];a==='"'||a==="\\"||a==="$"||a==="`"?(x+=a,r+=2):(x+=p[r],r++)}else x+=p[r],r++;r++;continue}if(_==="'"){for(r++;r<p.length&&p[r]!=="'";)x+=p[r],r++;r++;continue}if(_==="$"&&r+1<p.length&&p[r+1]==="'"){for(r+=2;r<p.length&&p[r]!=="'";)if(p[r]==="\\"&&r+1<p.length){const a=p[r+1];a==="n"?(x+=`
`,r+=2):a==="t"?(x+="	",r+=2):a==="\\"?(x+="\\",r+=2):a==="'"?(x+="'",r+=2):(x+=p[r],r++)}else x+=p[r],r++;r++;continue}_==="\\"&&r+1<p.length?(x+=p[r+1],r+=2):(x+=_,r++)}return x.length>0&&g.push(x),g},St=(w,p)=>{if(p){const g=p.toUpperCase();if(["GET","POST","PUT","PATCH","DELETE"].includes(g))return g}return w?"POST":"GET"},Ot=w=>{const p=Object.entries(w).find(([x])=>x.toLowerCase()==="authorization");if(!p)return{type:"none",value:null};const[,g]=p;return g.toLowerCase().startsWith("bearer ")?{type:"api_key",value:g.slice(7)}:g.toLowerCase().startsWith("basic ")?{type:"api_key",value:g}:{type:"api_key",value:g}},$t=w=>{const p=It(w);let g="",x=null;const r={};let _=null,a=null,b=0;for(p.length>0&&p[0].toLowerCase()==="curl"&&(b=1);b<p.length;){const d=p[b];if((d==="-X"||d==="--request")&&b+1<p.length){x=p[b+1],b+=2;continue}if((d==="-H"||d==="--header")&&b+1<p.length){const P=p[b+1],E=P.indexOf(":");if(E>0){const J=P.slice(0,E).trim(),z=P.slice(E+1).trim();r[J]=z}b+=2;continue}if((d==="-d"||d==="--data"||d==="--data-raw"||d==="--data-binary"||d==="--data-urlencode")&&b+1<p.length){_=p[b+1],b+=2;continue}if((d==="-u"||d==="--user")&&b+1<p.length){a=p[b+1],b+=2;continue}if(d==="-k"||d==="--insecure"||d==="-L"||d==="--location"||d==="-s"||d==="--silent"||d==="-S"||d==="--show-error"||d==="-v"||d==="--verbose"||d==="-i"||d==="--include"||d==="--compressed"||d==="-g"||d==="--globoff"){b++;continue}if((d==="-o"||d==="--output"||d==="-w"||d==="--write-out"||d==="--connect-timeout"||d==="--max-time"||d==="-m"||d==="--retry"||d==="--cacert"||d==="--capath"||d==="-e"||d==="--referer"||d==="-A"||d==="--user-agent"||d==="--cookie"||d==="-b")&&b+1<p.length){(d==="-A"||d==="--user-agent")&&(r["User-Agent"]=p[b+1]),b+=2;continue}if(!d.startsWith("-")&&!g){g=d,b++;continue}b++}if(a){const d=typeof btoa<"u"?btoa(a):Buffer.from(a).toString("base64");r.Authorization=`Basic ${d}`}let V=null;if(_)try{V=JSON.parse(_)}catch{V=null}const W=St(!!_,x),F=Ot(r);return{url:g,method:W,headers:r,body:_,bodyJson:V,authType:F.type,authValue:F.value}},Nt={class:"flex h-full bg-white overflow-hidden"},Vt={class:"w-[280px] border-r border-slate-200 flex flex-col bg-slate-50"},Pt={class:"p-4 border-b border-slate-200"},jt={class:"flex justify-between items-center mb-3"},Ut={class:"flex items-center gap-0.5"},Et={class:"relative"},Dt={class:"flex-1 overflow-y-auto p-2 space-y-0.5"},Jt=["onClick"],Lt={class:"flex-1 min-w-0"},Ft={class:"text-[13px] font-medium text-slate-900 truncate flex items-center gap-1"},zt={key:0,class:"text-orange-500"},Mt={class:"text-[11px] text-slate-500 truncate font-mono"},Bt={key:0,class:"flex-1 flex flex-col min-w-[460px] bg-white"},Rt={class:"px-6 py-4 border-b border-slate-200 flex justify-between items-start"},Wt={class:"flex-1"},Ht={class:"flex items-center gap-2 mt-0.5"},qt={class:"text-[11px] font-mono bg-slate-100 px-1.5 py-0.5 rounded text-slate-500 font-normal"},Gt={class:"text-[11px] font-mono text-slate-300"},Zt={key:0,class:"text-[11px] text-slate-400 mt-1"},Kt=["disabled"],Xt={class:"flex-1 overflow-y-auto p-6"},Qt={class:"bg-white border border-slate-200 rounded-lg p-5 mb-6 shadow-sm"},Yt={class:"text-sm font-semibold mb-4 text-slate-900 flex items-center gap-2"},es={class:"mb-6"},ts={class:"flex border border-slate-200 rounded-md overflow-hidden bg-white focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500"},ss={class:"flex gap-6 border-b border-slate-200 mb-6"},os=["onClick"],ns={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-indigo-600"},ls={key:0},as={class:"space-y-4"},rs={key:0},is={key:1},ds={key:0,class:"border border-slate-200 rounded-lg overflow-hidden"},us={class:"w-full"},cs={class:"px-3 py-2"},ps=["onUpdate:modelValue"],fs={class:"px-3 py-2"},vs=["onUpdate:modelValue"],ys={class:"px-3 py-2 text-center"},ms=["onClick"],hs={key:2},xs={class:"flex justify-between items-center mb-4"},bs={class:"flex bg-slate-100 rounded-md p-0.5 gap-0.5"},gs={key:0},_s={class:"border border-slate-200 rounded-lg overflow-hidden"},ws={class:"w-full"},ks={class:"px-3 py-2"},As=["onUpdate:modelValue"],Ts={class:"px-3 py-2"},Cs=["onUpdate:modelValue"],Is={class:"px-3 py-2"},Ss=["onUpdate:modelValue"],Os={class:"px-3 py-2"},$s={class:"flex items-start gap-1.5"},Ns=["onClick","title"],Vs=["onUpdate:modelValue"],Ps={key:1,class:"flex-1 space-y-1.5"},js=["onUpdate:modelValue"],Us=["onUpdate:modelValue"],Es={class:"px-3 py-2 text-center"},Ds=["onClick"],Js={key:1},Ls={key:3},Fs={key:0,class:"p-12 bg-slate-50 rounded-lg border border-dashed border-slate-200 text-center"},zs={class:"text-slate-400 mb-2"},Ms={key:1,class:"grid grid-cols-2 gap-4"},Bs={class:"space-y-3"},Rs={class:"border border-slate-200 rounded-lg overflow-hidden"},Ws={class:"p-3 max-h-[420px] overflow-y-auto bg-white"},Hs={class:"space-y-3"},qs={class:"border border-slate-200 rounded-lg overflow-hidden"},Gs={class:"bg-slate-900 p-3 max-h-[420px] overflow-auto"},Zs={class:"text-[11px] font-mono text-slate-50 leading-relaxed"},Ks={class:"bg-white border border-slate-200 rounded-lg p-5 shadow-sm"},Xs={class:"text-sm font-semibold mb-4 text-slate-900 flex items-center gap-2"},Qs={key:1,class:"flex-1 flex items-center justify-center text-slate-400 flex-col gap-4"},Ys={class:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center"},eo={class:"flex items-center gap-3 mt-2"},to={key:2,class:"w-[360px] bg-white border-l border-slate-200 flex flex-col"},so={class:"px-4 py-3 border-b border-slate-200 flex items-center justify-between bg-white"},oo={class:"flex items-center gap-2"},no={class:"text-sm font-medium text-slate-700"},lo={class:"flex items-center gap-1"},ao={class:"flex-1 flex flex-col bg-white min-h-0"},ro={class:"h-10 border-b border-slate-200 flex items-center justify-between px-4 bg-slate-50 text-xs font-semibold text-slate-500 uppercase shrink-0"},io=["disabled"],uo={class:"h-20 shrink-0 border-b border-slate-200 relative"},co={class:"flex-1 min-h-0 flex flex-col"},po={class:"flex items-center gap-2 flex-1 min-w-0"},fo={class:"font-bold"},vo={key:0,class:"opacity-75"},yo={key:1},mo={key:0,class:"flex-1 p-3 bg-slate-900 text-slate-50 text-xs font-mono overflow-auto min-h-0"},ho={key:1,class:"flex-1 flex items-center justify-center text-xs text-slate-400"},xo={class:"space-y-4 py-2"},bo=["onKeydown"],go={key:0,class:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700"},_o=["disabled"],wo=xe({__name:"AgentFunctionsPanel",props:{agentId:{}},setup(w){const p={Ð°:"a",Ð±:"b",Ð²:"v",Ð³:"g",Ð´:"d",Ðµ:"e",Ñ‘:"yo",Ð¶:"zh",Ð·:"z",Ð¸:"i",Ð¹:"y",Ðº:"k",Ð»:"l",Ð¼:"m",Ð½:"n",Ð¾:"o",Ð¿:"p",Ñ€:"r",Ñ:"s",Ñ‚:"t",Ñƒ:"u",Ñ„:"f",Ñ…:"kh",Ñ†:"ts",Ñ‡:"ch",Ñˆ:"sh",Ñ‰:"shch",ÑŠ:"",Ñ‹:"y",ÑŒ:"",Ñ:"e",ÑŽ:"yu",Ñ:"ya"},g=o=>o.toLowerCase().split("").map(e=>p[e]??e).join("").replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_"),x=w,r=C([]),_=C(""),a=C(null),b=C("Body"),V=C("fields"),W=C(!1),F=C("{}"),d=C(null),P=C([]),E=ft(),J=C(new Set),z=C(null),K=C(!1),q=C(""),H=C(""),M=(o,e)=>{z.value={type:o,text:e},setTimeout(()=>{z.value=null},4e3)},S=C([]),B=C("{}"),j=C([]),ce=Ie(()=>{var l;if(!((l=a.value)!=null&&l.id))return!1;const o=a.value,e=o.id,t=J.value.has(e),n=o.name.trim()!==""&&o.endpoint.trim()!=="";return t&&n}),Pe=o=>{const e=o.input_schema,t=o.parameter_mapping;if(!(e!=null&&e.properties)||Object.keys(e.properties).length===0){S.value=[],B.value="{}";return}S.value=Object.entries(e.properties).map(([n,l])=>{var y;const i=l.type||"string",u=(t==null?void 0:t[n])||"body";if(l["x-fromAI"]===!0)return{key:n,location:u,type:i,value:"",fromAI:!0,aiDescription:l.description||"",aiDefaultValue:l.default!==void 0?typeof l.default=="string"?l.default:JSON.stringify(l.default):""};let c="";return(y=l.description)!=null&&y.startsWith("Parameter: ")?c=`{{${l.description.replace("Parameter: ","")}}}`:l.default!==void 0&&(c=typeof l.default=="string"?l.default:JSON.stringify(l.default)),{key:n,location:u,type:i,value:c,fromAI:!1,aiDescription:"",aiDefaultValue:""}}),oe()};let X=!1;const pe=o=>{var n,l,i;X=!0,a.value=o,_.value=((n=o.input_schema)==null?void 0:n._displayName)||o.name||"";const e=o.custom_headers||o.headers;e&&typeof e=="object"?j.value=Object.entries(e).map(([u,c])=>({key:u,value:c})):j.value=[];const t=(l=o.response_transform)==null?void 0:l._fieldTree;P.value=Array.isArray(t)?t:[],d.value=null,(i=o.id)!=null&&i.startsWith("new_")?(S.value=[],B.value="{}",F.value="{}"):(Pe(o),G()),X=!1},A=()=>{var o;(o=a.value)!=null&&o.id&&J.value.add(a.value.id)},je=()=>{a.value&&(a.value.name=g(_.value),a.value.input_schema&&(a.value.input_schema._displayName=_.value),A())},se=()=>{var o;X||(o=a.value)!=null&&o.id&&(a.value.id.startsWith("new_")||Ae())},Ue=()=>{S.value.push({key:"",location:"body",type:"string",value:"",fromAI:!1,aiDescription:"",aiDefaultValue:""}),A()},Ee=o=>{S.value.splice(o,1),A(),ae(),G(),se()},De=()=>{j.value.push({key:"",value:""}),A()},Je=o=>{j.value.splice(o,1),A(),se()},Q=(o,e)=>{if(o.startsWith("{{")&&o.endsWith("}}"))return o;switch(e){case"integer":case"number":return Number(o)||0;case"boolean":return o==="true"||o==="1";case"array":try{return JSON.parse(o)}catch{return[]}case"object":try{return JSON.parse(o)}catch{return{}}default:return o}},Le=o=>{switch(o){case"integer":case"number":return 0;case"boolean":return!1;case"array":return[];case"object":return{};default:return""}},Fe=(o,e=!1)=>{const t={};return o.forEach(n=>{if(n.key){if(n.fromAI){t[n.key]=n.aiDefaultValue?Q(n.aiDefaultValue,n.type):Le(n.type);return}if(e&&n.value.startsWith("{{")&&n.value.endsWith("}}")){t[n.key]="";return}t[n.key]=Q(n.value,n.type)}}),t},oe=()=>{const o={};S.value.forEach(e=>{if(e.key)if(e.fromAI){const t=JSON.stringify(e.key),n=JSON.stringify(e.aiDescription||""),l=JSON.stringify(e.type||"string"),i=e.aiDefaultValue?JSON.stringify(e.aiDefaultValue):"",u=i?[t,n,l,i]:[t,n,l];o[e.key]=`$fromAI(${u.join(", ")})`}else o[e.key]=Q(e.value,e.type)}),B.value=JSON.stringify(o,null,2)},ze=o=>{const e=o.slice(8,-1),t=[];let n="",l=!1,i=!1;for(const c of e){if(i){n+=c,i=!1;continue}if(c==="\\"){i=!0,n+=c;continue}if(c==='"'){l=!l,n+=c;continue}if(c===","&&!l){t.push(n.trim()),n="";continue}n+=c}n.trim()&&t.push(n.trim());const u=c=>c.startsWith('"')&&c.endsWith('"')?c.slice(1,-1):c;return{key:t[0]?u(t[0]):"",description:t[1]?u(t[1]):"",type:t[2]?u(t[2]):"string",defaultValue:t[3]?u(t[3]):""}},Me=()=>{try{const o=JSON.parse(B.value);S.value=Object.entries(o).map(([e,t])=>{if(typeof t=="string"&&t.startsWith("$fromAI(")&&t.endsWith(")")){const i=ze(t);return{key:e,location:"body",type:i.type||"string",value:"",fromAI:!0,aiDescription:i.description,aiDefaultValue:i.defaultValue}}let n="string",l=String(t);return typeof t=="number"?n=Number.isInteger(t)?"integer":"number":typeof t=="boolean"?n="boolean":Array.isArray(t)?(n="array",l=JSON.stringify(t)):typeof t=="object"&&t!==null&&(n="object",l=JSON.stringify(t)),{key:e,location:"body",type:n,value:l,fromAI:!1,aiDescription:"",aiDefaultValue:""}}),A(),ae(),G()}catch(o){console.error("Invalid JSON",o)}},G=()=>{F.value=JSON.stringify(Fe(S.value,!0),null,2)},Y=()=>{A(),ae(),G()},be=()=>{A()},Be=o=>{switch(o){case"GET":return"text-emerald-600 bg-emerald-100";case"POST":return"text-blue-600 bg-blue-100";case"PUT":return"text-amber-600 bg-amber-100";case"DELETE":return"text-red-600 bg-red-100";case"PATCH":return"text-purple-600 bg-purple-100";default:return"text-slate-600 bg-slate-100"}};function ne(o,e="",t=""){return!o||typeof o!="object"?[]:Array.isArray(o)?o.length===0?[]:[{path:e||"items",key:t||`items [${o.length}]`,type:"array",example:`${o.length} ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚(Ð¾Ð²)`,selected:!0,rename:t||"items",children:o.length>0?ne(o[0],`${e}[]`,""):[]}]:Object.entries(o).map(([n,l])=>{const i=e?`${e}.${n}`:n,u=Array.isArray(l),c={path:i,key:u?`${n} [${l.length}]`:n,type:u?"array":typeof l,example:typeof l=="object"?void 0:l,selected:!0,rename:n};return u&&l.length>0?c.children=ne(l[0],`${i}[]`,n):typeof l=="object"&&l!==null&&!u&&(c.children=ne(l,i,n)),c})}function ge(o,e){const t=new Map(e.map(n=>[n.path,n]));o.forEach(n=>{const l=t.get(n.path);l&&(n.selected=l.selected,n.children&&l.children&&ge(n.children,l.children))})}function _e(o){return o.children?o.children.some(e=>e.selected||_e(e)):!1}function Re(o){const e=[],t=new Map,n=l=>{l.forEach(i=>{if(i.selected&&!_e(i))if(i.path.includes("[]")){const c=i.path.split("[]")[0];t.has(c)||t.set(c,[]),t.get(c).push(i)}else e.push(i);i.children&&n(i.children)})};return n(o),{mode:"fields",fields:e.map(l=>({source:l.path,target:l.path})),arrays:Array.from(t.entries()).map(([l,i])=>({source:l,target:l.split(".").pop()||"items",fields:i.map(u=>{var y;const c=((y=u.path.split("[]")[1])==null?void 0:y.slice(1))||u.key;return{source:c,target:c}})}))}}const We=async o=>{var t;if(!a.value||(t=a.value.id)!=null&&t.startsWith("new_"))return;const e=o?"active":"deprecated";try{await E(`/tools/${a.value.id}`,{method:"PUT",body:{status:e}}),a.value.status=e,M("success",o?"Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°":"Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´ÐµÐ°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°")}catch(n){console.error("Failed to toggle status",n),M("error","ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ")}},He=o=>{o.selected=!o.selected,ke()},we=o=>o.map(e=>({...e,example:void 0,children:e.children?we(e.children):void 0})),ke=()=>{if(a.value){const o=Re(P.value);o._fieldTree=we(P.value),a.value.response_transform=o,A()}};function le(o,e){return e.split(".").reduce((t,n)=>t==null?void 0:t[n],o)}function fe(o,e,t){const n=e.split(".");let l=o;for(let i=0;i<n.length-1;i++)l[n[i]]||(l[n[i]]={}),l=l[n[i]];l[n[n.length-1]]=t}function qe(o,e){var t,n,l;if(e.mode==="fields"){if(Array.isArray(o)){const u=(t=e.arrays)==null?void 0:t.find(c=>c.source==="items"||c.source===""||c.source==="[]");return u&&u.fields?o.map(c=>{const y={};return u.fields.forEach(({source:O,target:U})=>{const ee=O.replace(/^\[\]\.?/,""),me=ee?le(c,ee):c;fe(y,U,me)}),y}):o}const i={};return(n=e.fields)==null||n.forEach(({source:u,target:c})=>{const y=le(o,u);fe(i,c,y)}),(l=e.arrays)==null||l.forEach(({source:u,target:c,fields:y})=>{const O=le(o,u);Array.isArray(O)&&(i[c]=O.map(U=>{const ee={};return y.forEach(({source:me,target:Ye})=>{const et=le(U,me);fe(ee,Ye,et)}),ee}))}),i}return o}const Ge=Ie(()=>{var o,e;return!((o=d.value)!=null&&o.raw_body)||!((e=a.value)!=null&&e.response_transform)?null:qe(d.value.raw_body,a.value.response_transform)}),ae=()=>{if(!a.value)return;const o={},e=[],t={};S.value.forEach(n=>{if(!n.key)return;const l={};switch(n.type){case"string":l.type="string";break;case"integer":l.type="integer";break;case"number":l.type="number";break;case"boolean":l.type="boolean";break;case"array":l.type="array",l.items={type:"string"};break;case"object":l.type="object";break}n.fromAI?(l.description=n.aiDescription||`Value for ${n.key}`,l["x-fromAI"]=!0,n.aiDefaultValue&&(l.default=Q(n.aiDefaultValue,n.type)),e.push(n.key)):n.value&&(n.value.startsWith("{{")&&n.value.endsWith("}}")?l.description=`Parameter: ${n.value.slice(2,-2)}`:l.default=Q(n.value,n.type)),o[n.key]=l,t[n.key]=n.location,!n.fromAI&&n.value&&!n.value.startsWith("{{")&&e.push(n.key)}),a.value.input_schema={type:"object",properties:o,...e.length>0?{required:e}:{}},a.value.parameter_mapping=Object.keys(t).length>0?t:null,A()},Ze=async()=>{var o,e,t,n;if(a.value){W.value=!0;try{let l={};try{l=JSON.parse(F.value)}catch{d.value={status_code:0,latency_ms:0,raw_body:{error:"Invalid JSON in payload"},transformed_body:null,raw_size_bytes:0,transformed_size_bytes:null,error:"Invalid JSON",request_url:((o=a.value)==null?void 0:o.endpoint)||"",request_method:((e=a.value)==null?void 0:e.http_method)||"POST"},W.value=!1;return}const i={};j.value.forEach(y=>{y.key.trim()&&(i[y.key]=y.value)});let u=a.value.parameter_mapping;!u&&S.value.length>0&&(u={},S.value.forEach(y=>{y.key&&(u[y.key]=y.location)}));const c=await E("/tools/test",{method:"POST",body:{endpoint:a.value.endpoint,http_method:a.value.http_method,args:l,parameter_mapping:u,custom_headers:Object.keys(i).length>0?i:void 0,auth_type:a.value.auth_type,credential_id:a.value.credential_id,response_transform:a.value.response_transform}});if(d.value=c,c.raw_body){const y=ne(c.raw_body),O=(n=(t=a.value)==null?void 0:t.response_transform)==null?void 0:n._fieldTree;Array.isArray(O)&&O.length>0&&ge(y,O),P.value=y,ke()}}catch(l){console.error("Test failed:",l),d.value={status_code:500,latency_ms:45,raw_body:{error:l.message||"Request failed"},transformed_body:null,raw_size_bytes:0,transformed_size_bytes:null,error:l.message,request_url:a.value.endpoint,request_method:a.value.http_method}}finally{W.value=!1}}},ve=()=>{const o={id:`new_${Date.now()}`,name:"",description:"",endpoint:"",http_method:"POST",execution_type:"http_webhook",auth_type:"none",input_schema:{type:"object",properties:{}},parameter_mapping:null,response_transform:null,headers:null,status:"active",version:1};r.value.unshift(o),a.value=o,_.value="",J.value.add(o.id),S.value=[],B.value="{}"},ye=()=>{H.value="";const o=q.value.trim();if(!o){H.value="Ð’ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ cURL ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ";return}try{const e=$t(o);if(!e.url){H.value="ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¸Ð·Ð²Ð»ÐµÑ‡ÑŒ URL Ð¸Ð· ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹";return}if(ve(),!a.value)return;a.value.endpoint=e.url,a.value.http_method=e.method,a.value.auth_type=e.authType,e.authType!=="none"&&e.authValue&&(a.value.credential_id=e.authValue);const t=new Set(["content-type","authorization"]),n=Object.entries(e.headers).filter(([i])=>!t.has(i.toLowerCase())).map(([i,u])=>({key:i,value:u})),l=Object.entries(e.headers).find(([i])=>i.toLowerCase()==="authorization");l&&n.unshift({key:l[0],value:l[1]}),j.value=n,e.bodyJson&&typeof e.bodyJson=="object"&&!Array.isArray(e.bodyJson)?(S.value=Object.entries(e.bodyJson).map(([i,u])=>{let c="string",y=String(u);return typeof u=="number"?c=Number.isInteger(u)?"integer":"number":typeof u=="boolean"?c="boolean":Array.isArray(u)?(c="array",y=JSON.stringify(u)):typeof u=="object"&&u!==null&&(c="object",y=JSON.stringify(u)),{key:i,location:"body",type:c,value:y,fromAI:!1,aiDescription:"",aiDefaultValue:""}}),ae(),G(),oe()):e.body&&(B.value=e.body,V.value="json");try{const u=new URL(e.url).pathname.split("/").filter(Boolean);if(u.length>0){const c=u[u.length-1].replace(/[^a-zA-Z0-9]/g,"_").replace(/_+/g,"_").toLowerCase(),O=`${e.method.toLowerCase()}_${c}`;_.value=O,a.value.name=O,a.value.input_schema&&(a.value.input_schema._displayName=O)}}catch{}A(),K.value=!1,q.value="",M("success","Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð° Ð¸Ð· cURL")}catch(e){H.value=`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð°: ${e.message||"Ð½ÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚"}`}},Ke=()=>{var y,O;if(!a.value)return;const o=a.value,e=(((y=o.input_schema)==null?void 0:y._displayName)||o.name||"")+" (ÐºÐ¾Ð¿Ð¸Ñ)",t=g(e),n=j.value.map(U=>({key:U.key,value:U.value})),l=S.value.map(U=>({...U})),i={};n.forEach(U=>{U.key.trim()&&(i[U.key]=U.value)});const u={id:`new_${Date.now()}`,name:t,description:o.description||"",endpoint:o.endpoint||"",http_method:o.http_method||"POST",execution_type:o.execution_type||"http_webhook",auth_type:o.auth_type||"none",credential_id:o.credential_id,input_schema:o.input_schema?JSON.parse(JSON.stringify({...o.input_schema,_displayName:e})):{type:"object",properties:{}},parameter_mapping:o.parameter_mapping?JSON.parse(JSON.stringify(o.parameter_mapping)):null,response_transform:o.response_transform?JSON.parse(JSON.stringify(o.response_transform)):null,headers:Object.keys(i).length>0?i:null,status:"active",version:1};Object.keys(i).length>0&&(u.custom_headers=i),r.value.unshift(u),J.value.add(u.id),X=!0,a.value=u,_.value=e,j.value=n,S.value=l,oe(),G();const c=(O=u.response_transform)==null?void 0:O._fieldTree;P.value=Array.isArray(c)?c:[],d.value=null,X=!1,M("success","Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´ÑƒÐ±Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð° â€” ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ð´Ð»Ñ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ")},Ae=async()=>{var o;if(!(!a.value||!ce.value))try{const e=(o=a.value.id)==null?void 0:o.startsWith("new_");console.log("ðŸ’¾ Saving with status:",a.value.status);const t={name:a.value.name,description:a.value.description||"",input_schema:a.value.input_schema||{type:"object",properties:{}},execution_type:"http_webhook",endpoint:a.value.endpoint,auth_type:a.value.auth_type||"none",status:a.value.status||"active"};if(a.value.http_method&&(t.http_method=a.value.http_method),j.value.length>0&&(t.custom_headers=j.value.reduce((n,l)=>(l.key.trim()&&(n[l.key]=l.value),n),{})),a.value.response_transform&&(t.response_transform=a.value.response_transform),a.value.parameter_mapping&&(t.parameter_mapping=a.value.parameter_mapping),e){const n=await E("/tools",{method:"POST",body:t});await E(`/agents/${x.agentId}/tools/${n.id}`,{method:"POST",body:{permission_scope:"write",credential_id:null}});const l=a.value.id,i=r.value.findIndex(u=>u.id===l);i!==-1&&(r.value.splice(i,1,n),a.value=n),J.value.delete(l)}else{const n=await E(`/tools/${a.value.id}`,{method:"PUT",body:t}),l=r.value.findIndex(i=>{var u;return i.id===((u=a.value)==null?void 0:u.id)});l!==-1&&(r.value.splice(l,1,n),a.value=n),J.value.delete(a.value.id)}console.log("ðŸ’¾ Save payload sent:",JSON.stringify(t,null,2)),M("success","Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð°")}catch(e){console.error("Failed to save function",e),M("error",`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ: ${$e(e,"Ð½Ðµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ")}`)}},Xe=async()=>{if(!a.value)return;const o=a.value.name||"ÐÐ¾Ð²Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ";if(!confirm(`Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ "${o}"?`))return;const e=r.value.findIndex(l=>{var i;return l.id===((i=a.value)==null?void 0:i.id)});if(e===-1)return;const t=a.value.id,n=t.startsWith("new_");try{n||await E(`/agents/${x.agentId}/tools/${t}`,{method:"DELETE"}),r.value.splice(e,1),r.value.length>0?pe(r.value[0]):a.value=null,J.value.delete(t),M("success","Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°")}catch(l){console.error("Failed to delete function",l),M("error",`ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ: ${$e(l,"Ð½Ðµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ")}`)}};st(V,(o,e)=>{e==="fields"&&o==="json"?oe():e==="json"&&o==="fields"&&Me()}),ot(async()=>{await Qe()});const Qe=async()=>{var o;try{const e=await E(`/agents/${x.agentId}/tools/details`);console.log("ðŸ“¦ Raw bindings from backend:",JSON.stringify(e[0],null,2)),r.value=e.map(t=>t.tool).filter(t=>t!=null)||[],console.log("ðŸ“¦ First tool status:",(o=r.value[0])==null?void 0:o.status),r.value.length>0&&pe(r.value[0]),console.log("ðŸ“¦ Loaded tools from backend:",r.value.map(t=>({id:t.id,name:t.name,status:t.status})))}catch(e){console.error("Failed to load functions",e),r.value=[]}};return(o,e)=>(f(),v(R,null,[s("div",Nt,[s("div",Vt,[s("div",Pt,[s("div",jt,[e[15]||(e[15]=s("span",{class:"font-semibold text-sm text-slate-900"},"Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸",-1)),s("div",Ut,[s("button",{onClick:e[0]||(e[0]=t=>K.value=!0),class:"text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 p-1 rounded transition-colors",title:"Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð¸Ð· cURL"},[m(h(de),{class:"w-4 h-4"})]),s("button",{onClick:ve,class:"text-indigo-600 hover:bg-indigo-50 p-1 rounded transition-colors"},[m(h(ie),{class:"w-4 h-4"})])])]),s("div",Et,[m(h(vt),{class:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400"}),e[16]||(e[16]=s("input",{type:"text",placeholder:"Filter...",class:"w-full pl-8 pr-3 py-2 text-xs border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-indigo-500"},null,-1))])]),s("div",Dt,[(f(!0),v(R,null,Z(r.value,t=>{var n,l;return f(),v("div",{key:t.id,class:D(["flex items-center gap-2.5 p-2.5 rounded-md cursor-pointer border border-transparent hover:bg-slate-100 transition-colors",{"bg-slate-100 border-slate-200":((n=a.value)==null?void 0:n.id)===t.id}]),onClick:i=>pe(t)},[s("span",{class:D(["text-[9px] font-bold px-1.5 py-0.5 rounded min-w-[38px] text-center uppercase",Be(t.http_method)])},k(t.http_method),3),s("div",Lt,[s("div",Ft,[$(k(((l=t.input_schema)==null?void 0:l._displayName)||t.name||"ÐÐ¾Ð²Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ")+" ",1),J.value.has(t.id||"")?(f(),v("span",zt,"â—")):I("",!0)]),s("div",Mt,k(t.name||"function_name"),1)]),s("div",{class:D(["w-1.5 h-1.5 rounded-full flex-shrink-0",t.status==="active"?"bg-emerald-500":"bg-slate-300"])},null,2)],10,Jt)}),128))])]),a.value?(f(),v("div",Bt,[s("div",Rt,[s("div",Wt,[T(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>_.value=t),onInput:je,type:"text",placeholder:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ (Ð½Ð°Ð¿Ñ€: Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ð°Ñ†Ð¸ÐµÐ½Ñ‚Ð°, Get patients)",class:"text-xl font-semibold text-slate-900 m-0 border-none outline-none bg-transparent w-full placeholder:text-slate-300"},null,544),[[N,_.value]]),s("div",Ht,[s("span",qt,k(a.value.name||"function_name"),1),s("span",Gt," ID: "+k(a.value.id),1)]),!a.value.name&&!_.value?(f(),v("div",Zt," ÐÐ°Ð¿Ñ€: get_patient_list, create_appointment, send_notification ")):I("",!0),T(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.description=t),onInput:A,type:"text",placeholder:"ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸",class:"mt-1.5 text-[13px] text-slate-500 border-none outline-none bg-transparent w-full placeholder:text-slate-300"},null,544),[[N,a.value.description]])]),s("button",{onClick:Ae,disabled:!ce.value,class:D(["p-1.5 rounded-md transition-colors",ce.value?"text-indigo-600 hover:text-indigo-700":"text-slate-300 cursor-not-allowed"]),title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"},[m(h(Ne),{class:"w-5 h-5"})],10,Kt)]),s("div",Xt,[s("div",Qt,[s("div",Yt,[m(h(bt),{class:"w-4 h-4 text-indigo-600"}),e[17]||(e[17]=$(" ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Endpoint ",-1))]),s("div",es,[e[19]||(e[19]=s("label",{class:"block text-xs font-medium mb-1.5 text-slate-900"},"URL Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°",-1)),s("div",ts,[T(s("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.http_method=t),onChange:A,class:"w-[100px] bg-slate-50 border-none border-r border-slate-200 px-3 text-[13px] font-semibold text-slate-900 focus:ring-0 cursor-pointer outline-none"},[...e[18]||(e[18]=[Te('<option value="GET">GET</option><option value="POST">POST</option><option value="PUT">PUT</option><option value="PATCH">PATCH</option><option value="DELETE">DELETE</option>',5)])],544),[[re,a.value.http_method]]),T(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.endpoint=t),onInput:A,type:"text",placeholder:"https://api.example.com/endpoint",class:"flex-1 border-none px-3 py-2.5 text-[13px] font-mono text-slate-900 focus:ring-0 outline-none placeholder:text-slate-300"},null,544),[[N,a.value.endpoint]])])]),s("div",ss,[(f(),v(R,null,Z([{id:"Auth",label:"ÐÐ²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ"},{id:"Body",label:"ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹"},{id:"Headers",label:"Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸"},{id:"Response",label:"Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¾Ñ‚Ð²ÐµÑ‚Ð°"}],t=>s("button",{key:t.id,class:D(["pb-2.5 text-[13px] font-medium relative transition-colors",b.value===t.id?"text-slate-900":"text-slate-500 hover:text-slate-700"]),onClick:n=>b.value=t.id},[$(k(t.label)+" ",1),b.value===t.id?(f(),v("div",ns)):I("",!0)],10,os)),64))]),b.value==="Auth"?(f(),v("div",ls,[s("div",as,[s("div",null,[e[21]||(e[21]=s("label",{class:"block text-xs font-medium mb-1.5 text-slate-900"},"Ð¢Ð¸Ð¿ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸",-1)),T(s("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.auth_type=t),onChange:A,class:"w-full px-3 py-2 border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 text-sm"},[...e[20]||(e[20]=[s("option",{value:"none"},"Ð‘ÐµÐ· Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸",-1),s("option",{value:"api_key"},"API Key",-1),s("option",{value:"oauth2"},"OAuth 2.0",-1),s("option",{value:"service"},"Service Auth",-1)])],544),[[re,a.value.auth_type]])]),a.value.auth_type!=="none"?(f(),v("div",rs,[e[22]||(e[22]=s("label",{class:"block text-xs font-medium mb-1.5 text-slate-900"},"Credential ID",-1)),T(s("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.credential_id=t),onInput:A,type:"text",placeholder:"Enter credential ID or leave empty",class:"w-full px-3 py-2 border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 text-sm font-mono"},null,544),[[N,a.value.credential_id]]),e[23]||(e[23]=s("p",{class:"mt-1.5 text-xs text-slate-500"}," ÐžÐ¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾: ID ÐºÑ€ÐµÐ´ÐµÐ½ÑˆÐ°Ð»Ð° Ð¸Ð· ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐµÐºÑ€ÐµÑ‚Ð°Ð¼Ð¸. ÐžÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð´Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ð³Ð¾. ",-1))])):I("",!0)])])):I("",!0),b.value==="Headers"?(f(),v("div",is,[e[26]||(e[26]=s("div",{class:"text-sm text-slate-500 mb-4"}," Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ HTTP Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸ Ðº Ð·Ð°Ð¿Ñ€Ð¾ÑÑƒ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Authorization, X-API-Key, Content-Type). ",-1)),j.value.length>0?(f(),v("div",ds,[s("table",us,[e[24]||(e[24]=s("thead",{class:"bg-slate-50"},[s("tr",{class:"border-b border-slate-200"},[s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase w-[35%]"},"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ"),s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase"},"Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ"),s("th",{class:"w-[36px]"})])],-1)),s("tbody",{onInput:be,onChange:be,onFocusout:se},[(f(!0),v(R,null,Z(j.value,(t,n)=>(f(),v("tr",{key:n,class:"border-b border-slate-200 last:border-b-0"},[s("td",cs,[T(s("input",{"onUpdate:modelValue":l=>t.key=l,type:"text",placeholder:"Authorization",class:"w-full px-2 py-1 text-[13px] border border-transparent hover:border-slate-200 focus:border-indigo-500 rounded outline-none"},null,8,ps),[[N,t.key]])]),s("td",fs,[T(s("input",{"onUpdate:modelValue":l=>t.value=l,type:"text",placeholder:"Bearer {{token}}",class:"w-full px-2 py-1 text-[13px] font-mono text-slate-700 border border-transparent hover:border-slate-200 focus:border-indigo-500 rounded outline-none placeholder:text-slate-400"},null,8,vs),[[N,t.value]])]),s("td",ys,[s("button",{onClick:l=>Je(n),class:"text-slate-400 hover:text-red-500 transition-colors"},[m(h(te),{class:"w-3.5 h-3.5"})],8,ms)])]))),128))],32)])])):I("",!0),s("button",{onClick:De,class:"mt-3 flex items-center gap-1.5 text-[13px] text-indigo-600 hover:text-indigo-700 font-medium"},[m(h(ie),{class:"w-3.5 h-3.5"}),e[25]||(e[25]=$(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ",-1))])])):I("",!0),b.value==="Body"?(f(),v("div",hs,[s("div",xs,[e[27]||(e[27]=s("div",{class:"flex items-center gap-2 text-xs font-medium text-slate-700"},[$(" Content-Type: "),s("span",{class:"bg-slate-100 px-2 py-1 rounded text-xs font-mono border border-slate-200"}," application/json ")],-1)),s("div",bs,[s("button",{onClick:e[7]||(e[7]=t=>V.value="fields"),class:D(["px-3 py-1 text-xs font-medium rounded transition-all",V.value==="fields"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"])}," Fields ",2),s("button",{onClick:e[8]||(e[8]=t=>V.value="json"),class:D(["px-3 py-1 text-xs font-medium rounded transition-all",V.value==="json"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"])}," JSON ",2)])]),V.value==="fields"?(f(),v("div",gs,[s("div",_s,[s("table",ws,[e[30]||(e[30]=s("thead",{class:"bg-slate-50 border-b border-slate-200"},[s("tr",null,[s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase w-[25%]"},"ÐšÐ»ÑŽÑ‡"),s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase w-[15%]"},"Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ"),s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase w-[15%]"},"Ð¢Ð¸Ð¿"),s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase"},"Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ"),s("th",{class:"w-[36px]"})])],-1)),s("tbody",{onInput:Y,onChange:Y,onFocusout:se},[(f(!0),v(R,null,Z(S.value,(t,n)=>(f(),v("tr",{key:n,class:"border-b border-slate-200 last:border-b-0"},[s("td",ks,[T(s("input",{"onUpdate:modelValue":l=>t.key=l,type:"text",placeholder:"parameter_name",class:"w-full px-2 py-1 text-[13px] border border-transparent hover:border-slate-200 focus:border-indigo-500 rounded outline-none"},null,8,As),[[N,t.key]])]),s("td",Ts,[T(s("select",{"onUpdate:modelValue":l=>t.location=l,class:"w-full px-2 py-1 text-xs text-slate-700 border-none bg-transparent font-semibold cursor-pointer outline-none"},[...e[28]||(e[28]=[s("option",{value:"body"},"Body",-1),s("option",{value:"path"},"Path",-1),s("option",{value:"query"},"Query",-1)])],8,Cs),[[re,t.location]])]),s("td",Is,[T(s("select",{"onUpdate:modelValue":l=>t.type=l,class:"w-full px-2 py-1 text-xs text-slate-600 border-none bg-transparent font-medium cursor-pointer outline-none"},[...e[29]||(e[29]=[Te('<option value="string">String</option><option value="integer">Integer</option><option value="number">Number</option><option value="boolean">Boolean</option><option value="array">Array</option><option value="object">Object</option>',6)])],8,Ss),[[re,t.type]])]),s("td",Os,[s("div",$s,[s("button",{onClick:l=>{t.fromAI=!t.fromAI,Y()},class:D(["shrink-0 mt-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded transition-all cursor-pointer select-none",t.fromAI?"bg-violet-100 text-violet-700 hover:bg-violet-200":"bg-slate-100 text-slate-400 hover:bg-slate-200"]),title:t.fromAI?"AI Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð¸Ð· ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð° Ð´Ð¸Ð°Ð»Ð¾Ð³Ð°. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð´Ð»Ñ ÑÑ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ.":"Ð¡Ñ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð´Ð»Ñ Ñ€ÐµÐ¶Ð¸Ð¼Ð° AI."},k(t.fromAI?"AI":"="),11,Ns),t.fromAI?(f(),v("div",Ps,[T(s("input",{"onUpdate:modelValue":l=>t.aiDescription=l,onInput:Y,type:"text",placeholder:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð´Ð»Ñ AI (Ð½Ð°Ð¿Ñ€: Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ)",class:"w-full px-2 py-1 text-[13px] text-violet-700 border border-violet-200 bg-violet-50/50 hover:border-violet-300 focus:border-violet-500 focus:ring-1 focus:ring-violet-500 rounded outline-none placeholder:text-violet-300"},null,40,js),[[N,t.aiDescription]]),T(s("input",{"onUpdate:modelValue":l=>t.aiDefaultValue=l,onInput:Y,type:"text",placeholder:"ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)",class:"w-full px-2 py-1 text-[11px] font-mono text-slate-500 border border-transparent hover:border-slate-200 focus:border-slate-400 rounded outline-none placeholder:text-slate-300"},null,40,Us),[[N,t.aiDefaultValue]])])):T((f(),v("input",{key:0,"onUpdate:modelValue":l=>t.value=l,type:"text",placeholder:"{{variable}}",class:"flex-1 px-2 py-1 text-[13px] font-mono text-indigo-600 font-medium border border-transparent hover:border-slate-200 focus:border-indigo-500 rounded outline-none placeholder:text-indigo-300"},null,8,Vs)),[[N,t.value]])])]),s("td",Es,[s("button",{onClick:l=>Ee(n),class:"text-slate-400 hover:text-red-500 transition-colors"},[m(h(te),{class:"w-3.5 h-3.5"})],8,Ds)])]))),128))],32)])]),s("button",{onClick:Ue,class:"mt-3 flex items-center gap-1.5 text-[13px] text-indigo-600 hover:text-indigo-700 font-medium"},[m(h(ie),{class:"w-3.5 h-3.5"}),e[31]||(e[31]=$(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»Ðµ ",-1))])])):I("",!0),V.value==="json"?(f(),v("div",Js,[T(s("textarea",{"onUpdate:modelValue":e[9]||(e[9]=t=>B.value=t),onInput:A,class:"w-full h-[300px] px-3 py-2 border border-slate-200 rounded-lg font-mono text-xs text-slate-900 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-none",placeholder:'{\\n  "key": "value"\\n}'},null,544),[[N,B.value]])])):I("",!0)])):I("",!0),b.value==="Response"?(f(),v("div",Ls,[P.value.length===0?(f(),v("div",Fs,[s("div",zs,[m(h(Ve),{class:"w-12 h-12 mx-auto mb-3 opacity-50"})]),e[32]||(e[32]=s("div",{class:"text-sm text-slate-600 font-medium mb-1"}," ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð´Ð»Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ ",-1)),e[33]||(e[33]=s("div",{class:"text-xs text-slate-400"}," Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ñ‚ÐµÑÑ‚ ÑÐ¿Ñ€Ð°Ð²Ð° â†’, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð¾Ñ‚Ð²ÐµÑ‚Ð° ",-1))])):(f(),v("div",Ms,[s("div",Bs,[s("div",Rs,[e[34]||(e[34]=s("div",{class:"bg-slate-50 px-3 py-2 border-b border-slate-200 text-xs font-semibold text-slate-600"}," Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ ",-1)),s("div",Ws,[(f(!0),v(R,null,Z(P.value,t=>(f(),ue(Ct,{key:t.path,field:t,onToggle:He},null,8,["field"]))),128))])])]),s("div",Hs,[s("div",qs,[e[35]||(e[35]=s("div",{class:"bg-slate-50 px-3 py-2 border-b border-slate-200"},[s("span",{class:"text-xs font-semibold text-slate-600"},"ÐŸÑ€ÐµÐ²ÑŒÑŽ (Ñ‡Ñ‚Ð¾ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚ LLM)")],-1)),s("div",Gs,[s("pre",Zs,k(JSON.stringify(Ge.value,null,2)),1)])])])]))])):I("",!0)]),s("div",Ks,[s("div",Xs,[m(h(Ve),{class:"w-4 h-4 text-indigo-600"}),e[36]||(e[36]=$(" Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ AI ",-1))]),e[37]||(e[37]=s("div",{class:"text-[13px] text-slate-500 mb-3"}," Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ, ÐºÐ¾Ð³Ð´Ð° Ð¸ ÐºÐ°Ðº AI Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑ‚Ñƒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ. ",-1)),e[38]||(e[38]=s("textarea",{class:"w-full border border-slate-200 rounded-md p-3 text-[13px] min-h-[80px] focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-y",placeholder:"Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÑÑ‚Ñƒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ ÐºÐ¾Ð³Ð´Ð°..."},null,-1))])])])):(f(),v("div",Qs,[s("div",Ys,[m(h(yt),{class:"h-8 w-8 text-slate-400"})]),e[41]||(e[41]=s("p",null,"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð´Ð»Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ",-1)),s("div",eo,[s("button",{onClick:ve,class:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors"},[m(h(ie),{class:"w-4 h-4"}),e[39]||(e[39]=$(" Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ ",-1))]),s("button",{onClick:e[10]||(e[10]=t=>K.value=!0),class:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors"},[m(h(de),{class:"w-4 h-4"}),e[40]||(e[40]=$(" Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð¸Ð· cURL ",-1))])])])),a.value?(f(),v("div",to,[s("div",so,[s("div",oo,[s("span",no,k(a.value.status==="active"?"ÐÐºÑ‚Ð¸Ð²Ð½Ð°":"ÐÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ð°"),1),m(lt,{"model-value":a.value.status==="active","onUpdate:modelValue":We},null,8,["model-value"])]),s("div",lo,[s("button",{onClick:Ke,class:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",title:"Ð”ÑƒÐ±Ð»Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ"},[m(h(mt),{class:"w-4 h-4"})]),s("button",{onClick:Xe,class:"p-2 text-red-500 hover:bg-red-50 rounded-md transition-colors",title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ"},[m(h(ht),{class:"w-4 h-4"})])])]),s("div",ao,[s("div",ro,[e[42]||(e[42]=s("span",null,"Ð¢ÐµÑÑ‚Ð¾Ð²Ð°Ñ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ",-1)),s("button",{onClick:Ze,disabled:W.value,class:"flex items-center gap-1.5 bg-indigo-600 text-white px-3 py-1 rounded text-[11px] font-semibold hover:bg-indigo-700 disabled:opacity-50 transition-colors"},[m(h(xt),{class:"w-3 h-3"}),$(" "+k(W.value?"Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ...":"Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ"),1)],8,io)]),s("div",uo,[T(s("textarea",{"onUpdate:modelValue":e[11]||(e[11]=t=>F.value=t),class:"w-full h-full border-none resize-none font-mono text-xs text-slate-900 focus:ring-0 p-3 bg-white",placeholder:"{}"},null,512),[[N,F.value]])]),s("div",co,[s("div",{class:D(["h-8 flex items-center justify-between px-4 text-[11px] shrink-0",d.value?d.value.status_code>=200&&d.value.status_code<300?"bg-green-50 text-green-700":"bg-red-50 text-red-700":"bg-slate-50 text-slate-500"])},[d.value?(f(),v(R,{key:0},[s("div",po,[s("span",fo,k(d.value.status_code),1),s("span",null,k(d.value.latency_ms)+"ms",1),Array.isArray(d.value.raw_body)?(f(),v("span",vo,k(d.value.raw_body.length)+" ÑÐ». ",1)):I("",!0)]),s("button",{onClick:e[12]||(e[12]=t=>{d.value=null,P.value=[]}),class:"hover:opacity-70 ml-2"},[m(h(te),{class:"w-3 h-3"})])],64)):(f(),v("span",yo,"Ð“Ð¾Ñ‚Ð¾Ð²Ð¾"))],2),d.value?(f(),v("pre",mo,k(JSON.stringify(d.value.raw_body,null,2)),1)):(f(),v("div",ho," ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Run Ð´Ð»Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° "))])])])):I("",!0)]),m(Ce,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:L(()=>[z.value?(f(),v("div",{key:0,class:D(["fixed bottom-4 right-4 z-50 px-4 py-2.5 rounded-lg shadow-lg text-sm font-medium flex items-center gap-2",z.value.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"])},[z.value.type==="success"?(f(),ue(h(Ne),{key:0,class:"w-4 h-4"})):(f(),ue(h(te),{key:1,class:"w-4 h-4"})),$(" "+k(z.value.text),1)],2)):I("",!0)]),_:1}),m(h(pt),{open:K.value,"onUpdate:open":e[14]||(e[14]=t=>{K.value=t,t||(q.value="",H.value="")})},{default:L(()=>[m(h(at),{class:"max-w-2xl"},{default:L(()=>[m(h(rt),null,{default:L(()=>[m(h(it),{class:"flex items-center gap-2 text-slate-900"},{default:L(()=>[m(h(de),{class:"w-5 h-5 text-indigo-600"}),e[43]||(e[43]=$(" Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð¸Ð· cURL ",-1))]),_:1}),m(h(dt),{class:"text-slate-500"},{default:L(()=>[...e[44]||(e[44]=[$(" Ð’ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ cURL ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ, Ð¸ Ð¼Ñ‹ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ð¼ URL, Ð¼ÐµÑ‚Ð¾Ð´, Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸ Ð¸ Ñ‚ÐµÐ»Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°. ",-1)])]),_:1})]),_:1}),s("div",xo,[s("div",null,[T(s("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>q.value=t),class:"w-full h-[200px] px-4 py-3 border border-slate-200 rounded-lg font-mono text-[13px] text-slate-900 bg-slate-50 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-none placeholder:text-slate-400",placeholder:`curl -X POST https://api.example.com/endpoint \\
  -H 'Content-Type: application/json' \\
  -H 'Authorization: Bearer token' \\
  -d '{"key": "value"}'`,onKeydown:[Se(Oe(ye,["meta"]),["enter"]),Se(Oe(ye,["ctrl"]),["enter"])]},null,40,bo),[[N,q.value]])]),m(Ce,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:L(()=>[H.value?(f(),v("div",go,[m(h(te),{class:"w-4 h-4 shrink-0"}),$(" "+k(H.value),1)])):I("",!0)]),_:1}),e[45]||(e[45]=s("div",{class:"flex items-center gap-3 text-xs text-slate-400"},[s("div",{class:"flex items-center gap-1.5"},[s("kbd",{class:"px-1.5 py-0.5 bg-slate-100 border border-slate-200 rounded text-[10px] font-mono text-slate-500"},"Ctrl"),s("span",null,"+"),s("kbd",{class:"px-1.5 py-0.5 bg-slate-100 border border-slate-200 rounded text-[10px] font-mono text-slate-500"},"Enter"),s("span",{class:"ml-1"},"Ð´Ð»Ñ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð°")])],-1))]),m(h(ut),{class:"gap-2"},{default:L(()=>[m(h(ct),{"as-child":""},{default:L(()=>[...e[46]||(e[46]=[s("button",{class:"px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors"}," ÐžÑ‚Ð¼ÐµÐ½Ð° ",-1)])]),_:1}),s("button",{onClick:ye,disabled:!q.value.trim(),class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[m(h(de),{class:"w-4 h-4"}),e[47]||(e[47]=$(" Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ",-1))],8,_o)]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),ko={class:"h-full"},Lo=xe({__name:"functions",setup(w){const p=nt();return(g,x)=>(f(),v("div",ko,[m(wo,{"agent-id":h(p).params.id},null,8,["agent-id"])]))}});export{Lo as default};
