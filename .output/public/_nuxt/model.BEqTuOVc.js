import{_ as C}from"./AgentPageShell.vue.5C6xw8L8.js";import{m as y,y as V,B as S,o,c as l,a as s,u as e,b as r,d as i,p as u,v as x,O as B,t as p,F as f,C as g,x as v,L,n as D,w as E}from"./entry.Dw2909n2.js";import{u as N}from"./usePermissions.B76kzDEP.js";import{u as U}from"./useAgentEditorStore.C_-cPj_T.js";import{u as j}from"./useActiveModels.8UquE3Oq.js";import{L as T}from"./loader-2.D-f1OOw-.js";import{C as $}from"./check.CexbSXYH.js";import{C as F}from"./cpu.BtB-GUA5.js";import{S as P}from"./settings.DdVzARvN.js";import{D as G}from"./database.CDLRhh8b.js";import"./useAuth.jgUYoTAC.js";import"./useApiFetch.sBSRwplN.js";import"./authSessionManager.CAWbIGEs.js";import"./AuthModal.vue.BSzxuO2s.js";import"./eye.B5oT6PQ0.js";import"./alert-circle.CFB8cae4.js";import"./useAgents.B7UkyiZ0.js";import"./index.0dLU0aXR.js";const O={class:"bg-background rounded-md border border-border p-4 sm:p-5 space-y-6"},R={class:"flex items-center justify-end mb-4"},q={key:0,class:"flex items-center gap-1.5 text-xs text-blue-600"},z={key:1,class:"flex items-center gap-1.5 text-xs text-green-600"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},I={class:"block text-sm font-bold text-slate-900 mb-3 flex items-center gap-2"},J=["disabled"],K={key:0,value:"",disabled:""},Q={key:1,value:"",disabled:""},W={key:2,value:"",disabled:""},X=["value"],Y=["label"],Z=["value"],ee={key:0,class:"mt-2 text-xs text-rose-600"},te={class:"block text-sm font-bold text-slate-900 mb-3 flex items-center justify-between"},se={class:"flex items-center gap-2"},oe={class:"text-indigo-600 font-mono"},ae=["disabled"],le={class:"pt-6 border-t border-slate-100"},ne={class:"block text-sm font-bold text-slate-900 mb-3 flex items-center gap-2"},re={class:"flex items-center gap-4"},ie=["disabled"],de=y({__name:"AgentModelPanel",setup(h){const d=U(),{form:a}=V(d),{canEditAgents:c}=N(),{modelGroups:m,isLoading:k,error:b,fetchActiveModels:w,hasModelValue:M}=j(),A=L(()=>!!a.value.model&&!M(a.value.model));return S(async()=>{await w()}),(me,t)=>(o(),l("div",O,[s("div",R,[e(d).isAutoSaving?(o(),l("span",q,[r(e(T),{class:"h-3 w-3 animate-spin"}),t[3]||(t[3]=i(" Сохранение... ",-1))])):e(d).lastAutoSavedAt?(o(),l("span",z,[r(e($),{class:"h-3 w-3"}),t[4]||(t[4]=i(" Сохранено ",-1))])):u("",!0)]),s("div",H,[s("div",null,[s("label",I,[r(e(F),{class:"w-4 h-4 text-slate-400"}),t[5]||(t[5]=i(" Модель ИИ ",-1))]),x(s("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>e(a).model=n),disabled:!e(c),class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-md focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all appearance-none cursor-pointer disabled:opacity-60 disabled:cursor-not-allowed"},[e(k)&&!e(m).length?(o(),l("option",K," Загрузка моделей... ")):e(b)&&!e(m).length?(o(),l("option",Q," Не удалось загрузить модели ")):e(m).length?u("",!0):(o(),l("option",W," Нет доступных моделей ")),A.value?(o(),l("option",{key:3,value:e(a).model},p(`${e(a).model} (неактивна)`),9,X)):u("",!0),(o(!0),l(f,null,g(e(m),n=>(o(),l("optgroup",{key:n.group,label:n.group},[(o(!0),l(f,null,g(n.options,_=>(o(),l("option",{key:_.value,value:_.value},p(_.label),9,Z))),128))],8,Y))),128))],8,J),[[B,e(a).model]]),e(b)?(o(),l("p",ee,p(e(b)),1)):u("",!0)]),s("div",null,[s("label",te,[s("span",se,[r(e(P),{class:"w-4 h-4 text-slate-400"}),t[6]||(t[6]=i(" Температура ",-1))]),s("span",oe,p(e(a).llm_params.temperature),1)]),x(s("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>e(a).llm_params.temperature=n),disabled:!e(c),type:"range",min:"0",max:"2",step:"0.1",class:"w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer accent-indigo-600 disabled:opacity-60 disabled:cursor-not-allowed"},null,8,ae),[[v,e(a).llm_params.temperature,void 0,{number:!0}]]),t[7]||(t[7]=s("div",{class:"flex justify-between text-[10px] text-slate-400 mt-2 uppercase font-medium"},[s("span",null,"Точный"),s("span",null,"Креативный")],-1))])]),s("div",le,[s("label",ne,[r(e(G),{class:"w-4 h-4 text-slate-400"}),t[8]||(t[8]=i(" Максимальное количество токенов ",-1))]),s("div",re,[x(s("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>e(a).llm_params.max_tokens=n),disabled:!e(c),type:"number",min:"1",max:"4000",class:"w-32 px-4 py-3 bg-slate-50 border border-slate-200 rounded-md focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all text-sm font-mono disabled:opacity-60 disabled:cursor-not-allowed"},null,8,ie),[[v,e(a).llm_params.max_tokens,void 0,{number:!0}]]),t[9]||(t[9]=s("p",{class:"text-xs text-slate-500 italic"}," Определяет максимальную длину ответа агента. ",-1))])])]))}}),Be=y({__name:"model",setup(h){return(d,a)=>(o(),D(C,{title:"Модель","hide-actions":!0},{default:E(()=>[r(de)]),_:1}))}});export{Be as default};
