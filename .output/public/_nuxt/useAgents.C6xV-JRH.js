import{u as M,g as o}from"./useApiFetch.B9YviUBz.js";import{u as U}from"./useAuth.CHSuA4zA.js";import{bg as i,k as y}from"./entry.CBkKRCnV.js";const _=()=>{U();const a=M(),c=y(!1),l=y(null),v=y([]),h=y(null),f=y([]),g=y([]),d=y([]),u=y(!1),r=y(null),S=async s=>{try{c.value=!0,l.value=null;const e=new URLSearchParams;s!=null&&s.limit&&e.append("limit",s.limit.toString()),s!=null&&s.offset&&e.append("offset",s.offset.toString());const t=await a("/agents",{query:Object.fromEntries(e)});return v.value=t,t}catch(e){throw l.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤"),e}finally{c.value=!1}},q=async s=>{try{c.value=!0,l.value=null;const e=await a("/agents",{method:"POST",headers:{"Content-Type":"application/json"},body:s});return v.value.unshift(e),e}catch(e){throw l.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∞–≥–µ–Ω—Ç–∞"),e}finally{c.value=!1}},p=async s=>{try{return c.value=!0,l.value=null,await a(`/agents/${s}`)}catch(e){throw l.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–≥–µ–Ω—Ç–∞"),e}finally{c.value=!1}},w=async(s,e)=>{try{c.value=!0,l.value=null;const t=await a(`/agents/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:e}),n=v.value.findIndex(R=>R.id===s);return n!==-1&&(v.value[n]=t),t}catch(t){throw l.value=o(t,"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –∞–≥–µ–Ω—Ç–∞"),t}finally{c.value=!1}},b=async s=>{try{c.value=!0,l.value=null,await a(`/agents/${s}`,{method:"DELETE"}),v.value=v.value.filter(e=>e.id!==s)}catch(e){throw l.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –∞–≥–µ–Ω—Ç–∞"),e}finally{c.value=!1}},T=async s=>{try{u.value=!0,r.value=null;const e=await a(`/agents/${s}/sqns`);return h.value=e,e}catch(e){throw r.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç—É—Å SQNS"),e}finally{u.value=!1}},C=async(s,e)=>{try{u.value=!0,r.value=null;const t=await a(`/agents/${s}/sqns/enable-by-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:e});return h.value=t,t}catch(t){throw r.value=o(t,"–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é SQNS"),t}finally{u.value=!1}},$=async s=>{try{u.value=!0,r.value=null,await a(`/agents/${s}/sqns`,{method:"DELETE"}),h.value={sqnsEnabled:!1}}catch(e){throw r.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é SQNS"),e}finally{u.value=!1}},P=async s=>{try{const e=await a(`/agents/${s}/sqns/resources`);return f.value=e.resources??[],f.value}catch(e){throw r.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã SQNS"),e}},A=async s=>{try{const e=await a(`/agents/${s}/sqns/services`);return g.value=e.services??[],g.value}catch(e){throw r.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —É—Å–ª—É–≥–∏ SQNS"),e}},E=async s=>{try{return u.value=!0,r.value=null,await a(`/agents/${s}/sqns/sync`,{method:"POST"})}catch(e){throw r.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å SQNS"),e}finally{u.value=!1}},m=async(s,e)=>{try{const t=new URLSearchParams;return e.search&&t.append("search",e.search),e.category&&t.append("category",e.category),e.is_enabled!==void 0&&t.append("is_enabled",e.is_enabled.toString()),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),await a(`/agents/${s}/sqns/services/cached`,{query:Object.fromEntries(t)})}catch(t){throw r.value=o(t,"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏"),t}},H=async(s,e,t)=>{try{const n=`/agents/${s}/sqns/services/${e}`;console.log("üöÄ PATCH request:",{url:n,serviceId:e,serviceIdType:typeof e,data:t,dataStringified:JSON.stringify(t)}),await a(n,{method:"PATCH",body:t}),console.log("‚úÖ PATCH success")}catch(n){throw console.error("‚ùå PATCH failed:",{error:n,message:n.message,data:n.data,statusCode:n.statusCode,statusMessage:n.statusMessage}),r.value=o(n,"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å —É—Å–ª—É–≥—É"),n}},L=async(s,e)=>{try{await a(`/agents/${s}/sqns/services/bulk`,{method:"POST",headers:{"Content-Type":"application/json"},body:e})}catch(t){throw r.value=o(t,"–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥"),t}},N=async s=>{try{return(await a(`/agents/${s}/sqns/categories`)).categories}catch(e){throw r.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"),e}},O=async s=>{try{return(await a(`/agents/${s}/sqns/specialists`)).specialists}catch(e){throw r.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤"),e}},j=async(s,e,t)=>{try{const n=`/agents/${s}/sqns/categories/${e}`;console.log("üöÄ PATCH category request:",{url:n,categoryId:e,categoryIdType:typeof e,data:t,dataStringified:JSON.stringify(t)}),await a(n,{method:"PATCH",body:t}),console.log("‚úÖ PATCH category success")}catch(n){throw console.error("‚ùå PATCH category failed:",{error:n,message:n.message,data:n.data,statusCode:n.statusCode,statusMessage:n.statusMessage}),r.value=o(n,"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é"),n}},Q=async s=>{try{return await a(`/agents/${s}/sqns/disable-preview`)}catch(e){throw r.value=o(e,"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —É–¥–∞–ª–µ–Ω–∏—è"),e}};return{agents:i(v),isLoading:i(c),error:i(l),fetchAgents:S,createAgent:q,getAgent:p,updateAgent:w,deleteAgent:b,sqnsStatus:i(h),sqnsResources:i(f),sqnsServices:i(g),sqnsSlots:i(d),isSqnsLoading:i(u),sqnsError:i(r),fetchSqnsStatus:T,enableSqns:C,disableSqns:$,fetchSqnsResources:P,fetchSqnsServices:A,syncSqns:E,fetchSqnsServicesCached:m,updateSqnsService:H,bulkUpdateSqnsServices:L,fetchSqnsCategories:N,fetchSqnsSpecialists:O,updateSqnsCategory:j,getSqnsDisablePreview:Q}};export{_ as u};
