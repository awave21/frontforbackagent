import{B as T,A as K,M as Q,_ as R}from"./DashboardSidebar.vue.B26z5fa-.js";import{_ as W,u as X}from"./useDashboardData.CDtu-XXy.js";import{_ as P}from"./nuxt-link.t2uHRS69.js";import{M as Y,m as k,o as a,n as C,w as h,a as t,A as b,b as o,u as s,t as c,L as _,c as r,J as Z,bV as tt,B as et,f as st,q as I,p as w,F as N,C as S,k as V,d as ot}from"./entry.Dw2909n2.js";import{U as z}from"./user-check.BNUluFSE.js";import{_ as lt}from"./AuthModal.vue.BSzxuO2s.js";import{u as nt}from"./useAuth.jgUYoTAC.js";import{u as at}from"./useAgents.B7UkyiZ0.js";import{A as it}from"./alert-circle.CFB8cae4.js";import{C as rt}from"./calendar.4FirqY5x.js";import{C as dt}from"./chevron-down.8AIWZq2w.js";import{P as U}from"./plus.DTMN2fIW.js";import{L as ct}from"./loader-2.D-f1OOw-.js";import"./index.DT79k1l5.js";import"./floating-ui.vue.VILNG3-i.js";import"./chevron-right.Dt1o7IKv.js";import"./chevrons-up-down.C2VhQO3Y.js";import"./settings.DdVzARvN.js";import"./sparkles.CVmRtpTC.js";import"./link.DpqSbqvX.js";import"./database.CDLRhh8b.js";import"./code.CqfGPh0g.js";import"./cpu.BtB-GUA5.js";import"./message-square.C2TtVjfK.js";import"./file-text.DH5BfTvK.js";import"./eye.B5oT6PQ0.js";import"./useApiFetch.sBSRwplN.js";import"./authSessionManager.CAWbIGEs.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=Y("FileCheckIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),ut={class:"flex items-center gap-3 sm:gap-4 mb-4 sm:mb-5"},pt={class:"min-w-0 flex-1"},xt={class:"text-base sm:text-lg font-bold text-slate-900 truncate"},ft={class:"flex items-center gap-1.5 mt-1"},gt={class:"grid grid-cols-2 gap-3 sm:gap-4"},ht={class:"text-sm sm:text-base font-semibold text-slate-900 truncate"},bt={class:"text-sm sm:text-base font-semibold text-slate-900"},vt=k({__name:"AgentCard",props:{agent:{}},setup(n){const m=n,p=["from-sky-500 to-cyan-500","from-purple-500 to-pink-500","from-emerald-500 to-cyan-500","from-indigo-500 to-purple-600","from-amber-500 to-orange-500","from-rose-500 to-pink-500"],d=["border-sky-100","border-purple-100","border-emerald-100","border-indigo-100","border-amber-100","border-rose-100"],x=_(()=>{let i=0;for(const u of m.agent.id)i=(i<<5)-i+u.charCodeAt(0)|0;return Math.abs(i)%p.length}),v=_(()=>p[x.value]),g=_(()=>d[x.value]);return(i,u)=>{const A=P;return a(),C(A,{to:`/agents/${n.agent.id}/prompt`,class:b(["bg-white rounded-xl border p-4 sm:p-6 hover:shadow-md transition-shadow cursor-pointer block",g.value])},{default:h(()=>[t("div",ut,[t("div",{class:b(["flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 rounded-lg bg-gradient-to-br flex-shrink-0",v.value])},[o(s(T),{class:"h-6 w-6 sm:h-7 sm:w-7 text-white"})],2),t("div",pt,[t("h3",xt,c(n.agent.name),1),t("div",ft,[t("div",{class:b(["w-2 h-2 rounded-full flex-shrink-0",n.agent.status==="published"?"bg-green-500":"bg-slate-400"])},null,2),t("span",{class:b(["text-xs sm:text-sm font-medium",n.agent.status==="published"?"text-green-600":"text-slate-500"])},c(n.agent.status==="published"?"Активен":"Черновик"),3)])])]),t("div",gt,[t("div",null,[t("p",ht,c(n.agent.model||"—"),1),u[0]||(u[0]=t("p",{class:"text-xs font-normal text-slate-500"}," Модель ",-1))]),t("div",null,[t("p",bt," v"+c(n.agent.version),1),u[1]||(u[1]=t("p",{class:"text-xs font-normal text-slate-500"}," Версия ",-1))])])]),_:1},8,["to","class"])}}}),_t={class:"px-4 sm:px-6 py-3 sm:py-4"},yt={class:"flex items-center gap-3 sm:gap-4"},wt={class:"flex-1 min-w-0"},kt={class:"text-xs sm:text-sm font-semibold text-slate-900"},Ct={class:"text-xs sm:text-sm text-slate-600"},At=k({__name:"ActivityItem",props:{activity:{}},setup(n){const m=n,p=_(()=>{switch(m.activity.icon){case"UserCheck":return z;case"Activity":return K;case"FileCheck":return mt;default:return z}});return(d,x)=>(a(),r("div",_t,[t("div",yt,[t("div",{class:b(["flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-gradient-to-br flex-shrink-0",n.activity.color])},[(a(),C(Z(p.value),{class:"h-4 w-4 sm:h-5 sm:w-5 text-white"}))],2),t("div",wt,[t("p",kt,c(n.activity.title),1),t("p",Ct,c(n.activity.time),1)])])]))}}),$t={class:"h-screen flex flex-col bg-slate-50 overflow-hidden"},Lt={class:"lg:hidden bg-white border-b border-slate-200 px-4 py-3 shrink-0"},jt={class:"flex items-center justify-between"},Mt={class:"flex items-center gap-2"},Bt={class:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center"},Dt={class:"text-white font-bold text-xs"},Ft={class:"text-slate-900 font-bold"},It={class:"flex flex-1 min-h-0"},Nt={key:0,class:"lg:hidden fixed inset-0 z-50 w-full"},St={class:"flex-1 min-w-0 bg-slate-50 overflow-y-auto p-4 sm:p-6 lg:p-10"},Vt={class:"max-w-7xl mx-auto"},zt={key:0,class:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Ut={class:"flex items-center justify-between"},Tt={class:"flex items-center"},Pt={class:"flex gap-2"},qt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 lg:mb-8"},Et={class:"mb-4 sm:mb-0"},Ht={class:"text-slate-600 mt-1 sm:mt-2 text-sm sm:text-base"},Jt={class:"flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2 bg-white rounded-lg border border-slate-200 self-start sm:self-auto"},Ot={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-5 mb-6 lg:mb-8"},Gt={class:"mb-6 lg:mb-8"},Kt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 lg:mb-6 gap-3 sm:gap-0"},Qt={key:0,class:"flex justify-center py-8"},Rt={key:1,class:"bg-white rounded-xl border border-slate-200 p-12 text-center"},Wt={key:2,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-5"},Xt={class:"bg-white rounded-xl border border-slate-200 overflow-hidden"},Yt={class:"divide-y divide-slate-100"},Le=k({__name:"dashboard",async setup(n){let m,p;const d=V(!1),{isAuthenticated:x,user:v,tenant:g}=nt(),i=V(!1),u=()=>{i.value=!1},{data:A}=([m,p]=tt(()=>X()),m=await m,p(),m),{agents:f,fetchAgents:q,isLoading:E}=at(),$=()=>{x.value&&q()};et(()=>{$()}),st(x,L=>{L&&$()});const H=[{id:1,title:"Агент Записи обработал запрос",time:"2 минуты назад",icon:"UserCheck",color:"from-sky-500 to-cyan-500"},{id:2,title:"Агент Диагностики завершил анализ",time:"15 минут назад",icon:"Activity",color:"from-purple-500 to-pink-500"},{id:3,title:"Агент Документации создал отчет",time:"1 час назад",icon:"FileCheck",color:"from-emerald-500 to-cyan-500"}];return(L,e)=>{var B,D,F;const j=R,y=W,M=P,J=vt,O=At,G=lt;return a(),r("div",$t,[t("div",Lt,[t("div",jt,[t("div",Mt,[t("div",Bt,[t("span",Dt,c((B=s(g))!=null&&B.name?s(g).name.charAt(0).toUpperCase():"О"),1)]),t("span",Ft,c(((D=s(g))==null?void 0:D.name)||"Организация"),1)]),t("button",{onClick:e[0]||(e[0]=l=>d.value=!d.value),class:"p-2 rounded-lg text-slate-600 hover:bg-slate-100"},[o(s(Q),{class:"h-5 w-5"})])])]),t("div",It,[o(j,{class:"hidden lg:flex"}),o(I,{"enter-active-class":"transition-all duration-400 ease-out","enter-from-class":"opacity-0 backdrop-blur-0","enter-to-class":"opacity-100 backdrop-blur-sm","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"opacity-100 backdrop-blur-sm","leave-to-class":"opacity-0 backdrop-blur-0"},{default:h(()=>[d.value?(a(),r("div",{key:0,class:"lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50",onClick:e[1]||(e[1]=l=>d.value=!1)})):w("",!0)]),_:1}),o(I,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.34, 1.56, 0.64, 1)","enter-from-class":"-translate-x-full opacity-0 scale-95","enter-to-class":"translate-x-0 opacity-100 scale-100","leave-active-class":"transition-all duration-400 ease-in","leave-from-class":"translate-x-0 opacity-100 scale-100","leave-to-class":"-translate-x-full opacity-0 scale-95"},{default:h(()=>[d.value?(a(),r("div",Nt,[o(j,{onClose:e[2]||(e[2]=l=>d.value=!1)})])):w("",!0)]),_:1}),t("main",St,[t("div",Vt,[s(x)?w("",!0):(a(),r("div",zt,[t("div",Ut,[t("div",Tt,[o(s(it),{class:"h-5 w-5 text-yellow-400 mr-3"}),e[5]||(e[5]=t("div",null,[t("h3",{class:"text-sm font-medium text-yellow-800"}," Требуется аутентификация "),t("p",{class:"text-sm text-yellow-700 mt-1"}," Зарегистрируйтесь или войдите в систему ")],-1))]),t("div",Pt,[t("button",{onClick:e[3]||(e[3]=l=>i.value=!0),class:"px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700 transition-colors"}," Войти ")])])])),t("div",qt,[t("div",Et,[e[6]||(e[6]=t("h1",{class:"text-2xl sm:text-3xl font-bold text-slate-900"}," Панель управления ",-1)),t("p",Ht," Добро пожаловать обратно"+c((F=s(v))!=null&&F.full_name?`, ${s(v).full_name}`:""),1)]),t("div",Jt,[o(s(rt),{class:"h-4 w-4 text-slate-600"}),e[7]||(e[7]=t("span",{class:"text-xs sm:text-sm font-medium text-slate-900 hidden sm:inline"},"Последние 7 дней",-1)),e[8]||(e[8]=t("span",{class:"text-xs sm:text-sm font-medium text-slate-900 sm:hidden"},"7 дней",-1)),o(s(dt),{class:"h-4 w-4 text-slate-600"})])]),t("div",Ot,[o(y,{title:"Всего агентов",value:String(s(f).length),description:"Все зарегистрированные агенты",trend:s(f).filter(l=>l.status==="published").length+" активных",type:"info",icon:"BarChart2"},null,8,["value","trend"]),o(y,{title:"Активных агентов",value:String(s(f).filter(l=>l.status==="published").length),description:"Опубликованные и работающие",trend:"Все системы в норме",type:"positive",icon:"Target"},null,8,["value"]),o(y,{title:"Черновики",value:String(s(f).filter(l=>l.status==="draft").length),description:"Агенты в разработке",trend:"Ожидают публикации",type:"warning",icon:"FileText"},null,8,["value"])]),t("div",Gt,[t("div",Kt,[e[11]||(e[11]=t("h2",{class:"text-lg sm:text-xl font-bold text-slate-900"}," Подключенные агенты ",-1)),o(M,{to:"/agents/new",class:"flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-700 transition-colors text-sm sm:text-base"},{default:h(()=>[o(s(U),{class:"h-4 w-4"}),e[9]||(e[9]=t("span",{class:"hidden sm:inline"},"Добавить агента",-1)),e[10]||(e[10]=t("span",{class:"sm:hidden"},"Добавить",-1))]),_:1})]),s(E)?(a(),r("div",Qt,[o(s(ct),{class:"h-8 w-8 text-indigo-600 animate-spin"})])):s(f).length===0?(a(),r("div",Rt,[o(s(T),{class:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e[13]||(e[13]=t("h3",{class:"text-lg font-medium text-slate-900 mb-2"},"Нет агентов",-1)),e[14]||(e[14]=t("p",{class:"text-slate-600 text-sm mb-4"},"Создайте своего первого AI-агента",-1)),o(M,{to:"/agents/new",class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm"},{default:h(()=>[o(s(U),{class:"h-4 w-4"}),e[12]||(e[12]=ot(" Создать агента ",-1))]),_:1})])):(a(),r("div",Wt,[(a(!0),r(N,null,S(s(f),l=>(a(),C(J,{key:l.id,agent:l},null,8,["agent"]))),128))]))]),t("div",null,[e[15]||(e[15]=t("h2",{class:"text-lg sm:text-xl font-bold text-slate-900 mb-4 lg:mb-6"}," Недавняя активность ",-1)),t("div",Xt,[t("div",Yt,[(a(),r(N,null,S(H,l=>o(O,{key:l.id,activity:l},null,8,["activity"])),64))])])])])])]),o(G,{"is-open":i.value,onClose:e[4]||(e[4]=l=>i.value=!1),onAuthenticated:u},null,8,["is-open"])])}}});export{Le as default};
