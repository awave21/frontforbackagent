import{_ as D}from"./AgentPageShell.vue.eRhCLPu5.js";import{m as N,y as E,f as I,B as K,o as s,c as o,a as t,u as n,t as l,p as r,b as _,F as S,C as T,A,d as b,D as $,s as B,v as F,x as P,E as q,G,k as L,H as J,_ as O,n as U,w as Q}from"./entry.B2IFVgKF.js";import{u as W}from"./useAgentEditorStore.CwKcWoqV.js";import{c as X}from"./safe-markdown._KYjoumJ.js";import{M as Y}from"./message-square.YxiZE0Ei.js";import{S as Z}from"./send.BgsELO1x.js";import"./useLayoutState.sNd_KhK0.js";import"./useAuth.Vyp_2ZYp.js";import"./useApiFetch.DTQFO30A.js";import"./authSessionManager.DTJsKR5D.js";import"./usePermissions.DULBQwpP.js";import"./AuthModal.vue.S1p1aqV_.js";import"./eye.09w4ag_w.js";import"./loader-2.gphf9FK_.js";import"./alert-circle.CK50UZ1-.js";import"./useAgents.CrbTyjJz.js";import"./index.CXSSBYp8.js";const ee={class:"flex flex-col h-[600px] bg-background rounded-md border border-border overflow-hidden"},te={class:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between"},se={class:"flex flex-col gap-1"},oe={key:0,class:"text-[10px] text-slate-500 uppercase tracking-widest"},ae={key:0,class:"flex flex-col items-center justify-center h-full text-center space-y-4"},ne={class:"w-16 h-16 bg-indigo-50 rounded-full flex items-center justify-center"},le={key:0,class:"whitespace-pre-wrap"},re=["innerHTML"],ie={class:"flex flex-col gap-1.5 mt-1.5"},de={class:"flex items-center gap-2"},ce={class:"text-[10px] text-slate-400 px-1 uppercase font-semibold tracking-wider"},ue={key:0,class:"flex flex-wrap gap-1.5 text-[10px]"},pe={key:0,class:"text-slate-500 px-2 py-0.5 bg-slate-50 rounded-md border border-slate-200"},xe={class:"font-mono font-semibold"},me={key:1,class:"text-slate-500 px-2 py-0.5 bg-slate-50 rounded-md border border-slate-200"},fe={class:"font-mono font-semibold"},be={key:2,class:"text-slate-500 px-2 py-0.5 bg-slate-50 rounded-md border border-slate-200"},_e={class:"font-mono font-semibold"},he={key:1,class:"flex flex-wrap gap-1.5"},ve=["title"],ge={key:1,class:"flex flex-col items-start"},ye={class:"p-4 bg-white border-t border-slate-100"},we=["onKeydown"],ke=["disabled"],Ce={class:"text-[10px] text-center text-slate-400 mt-3 uppercase font-medium tracking-widest"},Me=N({__name:"AgentChatPanel",setup(V){const h=X({linkify:!0,breaks:!1,typographer:!0}),v=d=>typeof d!="string"?"":h.render(d),c=W(),{messages:g,userInput:u,isTyping:x,chatContextLabel:y,agent:m}=E(c),p=L(null),i=L(null),H=()=>{i.value&&(i.value.style.height="auto",i.value.style.height=i.value.scrollHeight+"px")},f=async()=>{await J(),p.value&&(p.value.scrollTop=p.value.scrollHeight)},w=async()=>{if(!u.value.trim()||x.value)return;await c.sendMessage()&&i.value&&(i.value.style.height="auto"),await f()},R=async()=>{await c.clearChat(),await f()};return I(m,d=>{d&&(c.ensureChatLoaded(),f())},{immediate:!0}),K(()=>{c.ensureChatLoaded()}),(d,a)=>{var k;return s(),o("div",ee,[t("div",te,[t("div",se,[a[1]||(a[1]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("h3",{class:"font-bold text-slate-900"},"–¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç —Å –∞–≥–µ–Ω—Ç–æ–º")],-1)),n(y)?(s(),o("p",oe,l(n(y)),1)):r("",!0)]),t("button",{onClick:R,class:"text-xs text-slate-500 hover:text-slate-800 transition-colors"}," –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é ")]),t("div",{ref_key:"messagesContainer",ref:p,class:"flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth bg-slate-50/30"},[n(g).length===0?(s(),o("div",ae,[t("div",ne,[_(n(Y),{class:"w-8 h-8 text-indigo-500"})]),a[2]||(a[2]=t("div",null,[t("p",{class:"font-medium text-slate-900"},"–ù–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥"),t("p",{class:"text-sm text-slate-500 max-w-[240px] mx-auto mt-1"},"–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤–∞—à–µ–≥–æ –∞–≥–µ–Ω—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏")],-1))])):r("",!0),(s(!0),o(S,null,T(n(g),(e,j)=>{var C;return s(),o("div",{key:j,class:A(["flex flex-col",[e.role==="user"?"items-end":"items-start"]])},[t("div",{class:A(["max-w-[80%] rounded-lg px-5 py-3 text-sm leading-relaxed markdown-content",[e.role==="user"?"bg-indigo-600 text-white rounded-tr-none":"bg-white border border-slate-100 text-slate-800 rounded-tl-none"]])},[e.role==="user"?(s(),o("div",le,l(e.content),1)):(s(),o("div",{key:1,innerHTML:v(e.content)},null,8,re))],2),t("div",ie,[t("div",de,[t("span",ce,l(e.role==="user"?"–í—ã":((C=n(m))==null?void 0:C.name)||"–ê–≥–µ–Ω—Ç"),1)]),e.role==="agent"&&e.tokens&&(e.tokens.prompt!==null||e.tokens.completion!==null||e.tokens.total!==null)?(s(),o("div",ue,[e.tokens.prompt!==null&&e.tokens.prompt!==void 0?(s(),o("span",pe,[a[3]||(a[3]=b(" –ü—Ä–æ–º–ø—Ç: ",-1)),t("span",xe,l(e.tokens.prompt),1)])):r("",!0),e.tokens.completion!==null&&e.tokens.completion!==void 0?(s(),o("span",me,[a[4]||(a[4]=b(" –û—Ç–≤–µ—Ç: ",-1)),t("span",fe,l(e.tokens.completion),1)])):r("",!0),e.tokens.total!==null&&e.tokens.total!==void 0?(s(),o("span",be,[a[5]||(a[5]=b(" –í—Å–µ–≥–æ: ",-1)),t("span",_e,l(e.tokens.total),1)])):r("",!0)])):r("",!0),e.role==="agent"&&e.tools_called&&e.tools_called.length>0?(s(),o("div",he,[(s(!0),o(S,null,T(e.tools_called,(M,z)=>(s(),o("span",{key:z,class:"text-[10px] text-indigo-600 px-2 py-0.5 bg-indigo-50 rounded-md font-medium border border-indigo-100",title:`–ê—Ä–≥—É–º–µ–Ω—Ç—ã: ${JSON.stringify(M.args)}`}," üîß "+l(M.name),9,ve))),128))])):r("",!0)])],2)}),128)),n(x)?(s(),o("div",ge,[...a[6]||(a[6]=[$('<div class="bg-white border border-slate-100 rounded-lg rounded-tl-none px-5 py-4" data-v-b6c222dd><div class="flex gap-1.5" data-v-b6c222dd><div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay:0ms;" data-v-b6c222dd></div><div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay:150ms;" data-v-b6c222dd></div><div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay:300ms;" data-v-b6c222dd></div></div></div>',1)])])):r("",!0)],512),t("div",ye,[t("form",{onSubmit:B(w,["prevent"]),class:"relative flex items-center gap-3"},[F(t("textarea",{ref_key:"inputArea",ref:i,"onUpdate:modelValue":a[0]||(a[0]=e=>G(u)?u.value=e:null),onInput:H,onKeydown:q(B(w,["prevent"]),["enter"]),placeholder:"–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...",rows:"1",class:"flex-1 bg-slate-50 border border-slate-100 rounded-md px-5 py-3 text-sm text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all resize-none max-h-32"},null,40,we),[[P,n(u)]]),t("button",{type:"submit",disabled:!n(u).trim()||n(x),class:"absolute right-2 p-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-40 disabled:cursor-not-allowed transition-all"},[_(n(Z),{class:"w-5 h-5"})],8,ke)],32),t("p",Ce," –ê–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å "+l((k=n(m))==null?void 0:k.model),1)])])}}}),Se=O(Me,[["__scopeId","data-v-b6c222dd"]]),qe=N({__name:"chat",setup(V){return(h,v)=>(s(),U(D,{title:"–ß–∞—Ç","hide-actions":!0},{default:Q(()=>[_(Se)]),_:1}))}});export{qe as default};
