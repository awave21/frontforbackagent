import{M as At,_ as qt,S as Ie,a as ye}from"./DashboardSidebar.vue.BCFNDxq8.js";import{L as pe,_ as Mt}from"./AuthModal.vue.Bphu0Ye4.js";import{m as me,r as p,n as _e,f as we,o,p as N,b as x,T as xe,w as oe,c as l,a as e,q as le,u as n,X as tt,s as P,v as Y,t as c,x as u,y as ze,z as jt,A as F,B as Be,C as Et,D as X,F as D,d as L,_ as st,E as It,G as Nt,H as zt,I as R,J as Ue,K as Bt,L as Dt,M as Je,N as Lt}from"./entry.DvavCQ8-.js";import{C as ot,T as Ft,M as Rt,S as Ke}from"./index.DVIFlGhQ.js";import{u as Ot}from"./useAgents.CkkebVYB.js";import{u as lt,a as at}from"./useAuth.CA-oUVg2.js";import{A as Vt}from"./alert-circle.40sqdf6a.js";import{S as We}from"./sparkles.C51ejg2H.js";import{C as Xe}from"./chevron-down.ouWuK6l7.js";import"./nuxt-link.De5AyltM.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=me("CpuIcon",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=me("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=me("LinkIcon",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=me("RadioIcon",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=me("WrenchIcon",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),nt="agent-chat-sessions",De=typeof window<"u",Gt=()=>{if(!De)return{};try{const g=window.localStorage.getItem(nt);return g?JSON.parse(g):{}}catch(g){return console.error("Failed to parse stored agent sessions:",g),{}}},Qt=g=>{if(De)try{window.localStorage.setItem(nt,JSON.stringify(g))}catch(z){console.error("Failed to persist agent sessions:",z)}},Ut=()=>{const g=p(De?Gt():{}),z=h=>{g.value=h,Qt(h)};return{getSessionId:h=>g.value[h]??null,setSessionId:(h,k)=>{z({...g.value,[h]:k})},clearSessionId:h=>{if(!g.value[h])return;const{[h]:k,...f}=g.value;z(f)}}},Jt={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center px-4 py-6 sm:px-6","aria-modal":"true",role:"dialog"},Kt={class:"flex items-center justify-between mb-6"},Wt={key:0,class:"text-sm text-red-600"},Xt={class:"flex items-center justify-between gap-3"},Yt=["disabled"],Zt={key:0},es={key:1},ts=_e({__name:"SQNSModal",props:{isOpen:{type:Boolean},isSubmitting:{type:Boolean}},emits:["close","submit"],setup(g,{emit:z}){const T=g,q=z,v=p(""),h=p(""),k=p(""),f=()=>{C(),q("close")},C=()=>{v.value="",h.value="",k.value=""},B=()=>{if(k.value="",!v.value.trim()){k.value="–í–≤–µ–¥–∏—Ç–µ email";return}if(!h.value.trim()){k.value="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å";return}q("submit",{email:v.value,password:h.value})};return we(()=>T.isOpen,E=>{E||C()}),(E,m)=>(o(),N(ze,{to:"body"},[x(xe,{name:"modal-fade"},{default:oe(()=>[g.isOpen?(o(),l("div",Jt,[e("div",{class:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:f}),e("div",{class:"relative w-full max-w-lg overflow-hidden rounded-2xl bg-white py-8 px-6 shadow-xl shadow-indigo-900/20 ring-1 ring-indigo-100",onClick:m[2]||(m[2]=le(()=>{},["stop"]))},[e("div",Kt,[m[3]||(m[3]=e("div",null,[e("h2",{class:"text-lg font-bold text-slate-900"},"–í–∫–ª—é—á–∏—Ç—å SQNS"),e("p",{class:"text-sm text-slate-500 mt-1"},"–ü–æ–¥–∫–ª—é—á–∏—Ç–µ CRM —á–µ—Ä–µ–∑ –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –∫–ª—é—á")],-1)),e("button",{"aria-label":"–ó–∞–∫—Ä—ã—Ç—å",class:"text-slate-400 hover:text-slate-600",onClick:f},[x(n(tt),{class:"h-5 w-5"})])]),e("form",{onSubmit:le(B,["prevent"]),class:"space-y-5"},[e("div",null,[m[4]||(m[4]=e("label",{class:"text-sm font-medium text-slate-700"},"Email*",-1)),P(e("input",{"onUpdate:modelValue":m[0]||(m[0]=y=>v.value=y),type:"email",required:"",placeholder:"admin@clinic.com",class:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100"},null,512),[[Y,v.value,void 0,{trim:!0}]])]),e("div",null,[m[5]||(m[5]=e("label",{class:"text-sm font-medium text-slate-700"},"–ü–∞—Ä–æ–ª—å*",-1)),P(e("input",{"onUpdate:modelValue":m[1]||(m[1]=y=>h.value=y),type:"password",autocomplete:"new-password",required:"",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",class:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100"},null,512),[[Y,h.value]]),m[6]||(m[6]=e("p",{class:"mt-1 text-xs text-slate-500"}," –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞. ",-1))]),k.value?(o(),l("p",Wt,c(k.value),1)):u("",!0),e("div",Xt,[e("button",{type:"button",class:"flex-1 rounded-xl border border-slate-200 px-4 py-3 text-sm font-medium text-slate-600 hover:bg-slate-100",onClick:f}," –û—Ç–º–µ–Ω–∞ "),e("button",{type:"submit",class:"flex-1 rounded-xl bg-indigo-600 px-4 py-3 text-sm font-medium text-white shadow hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-60",disabled:T.isSubmitting},[T.isSubmitting?(o(),l("span",Zt,"–°–æ—Ö—Ä–∞–Ω—è–µ–º...")):(o(),l("span",es,"–í–∫–ª—é—á–∏—Ç—å SQNS"))],8,Yt)])],32)])])):u("",!0)]),_:1})]))}}),ss={class:"flex items-center justify-between gap-4"},os={class:"flex items-center gap-4"},ls={class:"flex items-center gap-2"},as={class:"font-bold text-slate-900"},ns={class:"text-xs text-slate-500 mt-0.5"},is={class:"flex items-center gap-3"},rs={key:2,class:"px-4 py-2 bg-slate-50 text-slate-400 rounded-xl text-xs font-bold border border-slate-100 cursor-default"},ds={key:0,class:"mt-6 pt-6 border-t border-indigo-100/50 space-y-4"},us={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},cs={key:0,class:"bg-white/50 rounded-xl p-3 border border-indigo-100/30"},ps={class:"text-xs text-slate-700 mt-1 font-medium truncate"},xs={key:1,class:"bg-white/50 rounded-xl p-3 border border-indigo-100/30"},ms={class:"text-xs text-slate-700 mt-1 font-medium"},Ze=_e({__name:"IntegrationCard",props:{title:{},description:{},status:{},icon:{default:()=>ee},statusLabel:{},host:{},lastSync:{},error:{}},emits:["enable","disable"],setup(g){const z=g,{title:T,description:q,status:v,icon:h,statusLabel:k,host:f,lastSync:C,error:B}=jt(z),E=X(()=>h.value||ee);return(m,y)=>(o(),l("div",{class:F(["rounded-2xl border transition-all duration-300",[n(v)==="active"||n(v)==="error"?"border-indigo-100 bg-indigo-50/30 p-6 shadow-sm":"border-slate-100 bg-white p-5 hover:border-slate-200 shadow-sm"]])},[e("div",ss,[e("div",os,[e("div",{class:F(["w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",[n(v)==="active"||n(v)==="error"?"bg-indigo-600 text-white shadow-md shadow-indigo-100":"bg-slate-50 text-slate-400 border border-slate-100",n(v)==="soon"?"opacity-50":""]])},[(o(),N(Be(E.value),{class:"w-6 h-6"}))],2),e("div",null,[e("div",ls,[e("h4",as,c(n(T)),1),n(k)?(o(),l("span",{key:0,class:F(["text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full",[n(v)==="error"?"bg-red-50 text-red-600":n(v)==="active"?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-400"]])},c(n(k)),3)):u("",!0)]),e("p",ns,c(n(q)),1)])]),e("div",is,[n(v)==="inactive"?(o(),l("button",{key:0,onClick:y[0]||(y[0]=ae=>m.$emit("enable")),class:"px-5 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition-all shadow-sm shadow-indigo-100"}," –ü–æ–¥–∫–ª—é—á–∏—Ç—å ")):n(v)==="active"||n(v)==="error"?(o(),l("button",{key:1,onClick:y[1]||(y[1]=ae=>m.$emit("disable")),class:"px-5 py-2 bg-white border border-red-100 text-red-600 rounded-xl text-sm font-bold hover:bg-red-50 transition-all"}," –û—Ç–∫–ª—é—á–∏—Ç—å ")):n(v)==="soon"?(o(),l("span",rs," –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ ")):u("",!0)])]),(n(v)==="active"||n(v)==="error")&&(n(f)||n(C)||n(B))?(o(),l("div",ds,[e("div",us,[n(f)?(o(),l("div",cs,[y[2]||(y[2]=e("p",{class:"text-[10px] uppercase tracking-widest text-slate-400 font-bold"},"Host",-1)),e("p",ps,c(n(f)),1)])):u("",!0),n(C)?(o(),l("div",xs,[y[3]||(y[3]=e("p",{class:"text-[10px] uppercase tracking-widest text-slate-400 font-bold"},"–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è",-1)),e("p",ms,c(n(C)),1)])):u("",!0)]),Et(m.$slots,"extra"),y[4]||(y[4]=e("p",{class:"text-[10px] text-slate-400 leading-relaxed italic"}," –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ. –ö–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç Bearer-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é. ",-1))])):u("",!0)],2))}}),vs={class:"flex items-center justify-between shrink-0 px-6 py-4 border-b border-slate-200"},bs={class:"flex-1 overflow-y-auto px-6 py-6 space-y-8"},fs=["disabled"],gs={key:0,class:"text-sm text-red-600"},hs={key:1,class:"text-sm text-green-600 font-medium"},ys={class:"pt-6 border-t border-slate-200"},ws=["disabled"],_s={key:0,class:"mt-2 text-sm text-red-600"},ks={key:0,class:"fixed inset-0 z-[70] flex items-center justify-center p-4","aria-modal":"true",role:"alertdialog"},Ss={class:"relative bg-white rounded-2xl shadow-xl p-6 max-w-sm w-full border border-slate-200"},$s={class:"flex gap-3"},Cs=["disabled"],Ts=_e({__name:"ChannelEditSheet",props:{open:{type:Boolean},agentId:{},currentToken:{}},emits:["update:open","saved","deleted"],setup(g,{emit:z}){const T=g,q=z,v=lt(),{token:h}=at(),k=p(""),f=p(!1),C=p(null),B=p(!1),E=p(!1),m=p(null),y=p(!1),ae=/^\d{9,12}:[A-Za-z0-9_-]{30,50}$/,ke=$=>ae.test($.trim());we(()=>[T.open,T.currentToken],([$,r])=>{$&&(k.value=r??"",C.value=null,B.value=!1,m.value=null)},{immediate:!0});const Se=async()=>{var r,w;const $=k.value.trim();if(!(!T.agentId||!$)){if(!ke($)){C.value="–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞. –ü—Ä–∏–º–µ—Ä: 7123456789:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw";return}f.value=!0,C.value=null,B.value=!1;try{await v(`/agents/${T.agentId}/channels`,{method:"POST",headers:{Authorization:`Bearer ${h.value}`,"Content-Type":"application/json"},body:{type:"Telegram_Bot",telegram_bot_token:$,whatsapp_phone:null}}),B.value=!0,q("saved")}catch(S){const Q=((r=S==null?void 0:S.data)==null?void 0:r.detail)??((w=S==null?void 0:S.data)==null?void 0:w.message)??(S==null?void 0:S.message)??"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å";C.value=typeof Q=="string"?Q:JSON.stringify(Q)}finally{f.value=!1}}},$e=()=>{y.value=!0,m.value=null},G=async()=>{var $,r;if(T.agentId){E.value=!0,m.value=null;try{await v(`/agents/${T.agentId}/channels/telegram`,{method:"DELETE",headers:{Authorization:`Bearer ${h.value}`}}),y.value=!1,q("deleted"),q("update:open",!1)}catch(w){const S=(($=w==null?void 0:w.data)==null?void 0:$.detail)??((r=w==null?void 0:w.data)==null?void 0:r.message)??(w==null?void 0:w.message)??"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å";m.value=typeof S=="string"?S:JSON.stringify(S)}finally{E.value=!1}}};return($,r)=>(o(),l(D,null,[(o(),N(ze,{to:"body"},[x(xe,{name:"overlay-fade"},{default:oe(()=>[g.open?(o(),l("div",{key:0,class:"fixed inset-0 z-[60] bg-black/40","aria-hidden":"true",onClick:r[0]||(r[0]=w=>q("update:open",!1))})):u("",!0)]),_:1}),x(xe,{name:"panel-slide"},{default:oe(()=>[g.open?(o(),l("div",{key:0,class:"fixed right-0 top-0 bottom-0 z-[61] w-full max-w-md sm:max-w-lg bg-white shadow-xl border-l border-slate-200 flex flex-col max-h-full overflow-hidden","aria-modal":"true",role:"dialog",onClick:r[3]||(r[3]=le(()=>{},["stop"]))},[e("div",vs,[r[6]||(r[6]=e("div",null,[e("h2",{class:"text-lg font-bold text-slate-900"},"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram"),e("p",{class:"text-sm text-slate-500 mt-0.5"},"–ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –∫–∞–Ω–∞–ª")],-1)),e("button",{type:"button","aria-label":"–ó–∞–∫—Ä—ã—Ç—å",class:"p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors",onClick:r[1]||(r[1]=w=>q("update:open",!1))},[x(n(tt),{class:"h-5 w-5"})])]),e("div",bs,[e("section",null,[r[8]||(r[8]=e("h3",{class:"text-sm font-bold text-slate-900 mb-2"},"–¢–æ–∫–µ–Ω –±–æ—Ç–∞",-1)),r[9]||(r[9]=e("p",{class:"text-xs text-slate-500 mb-3"}," –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –æ—Ç @BotFather, —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ. ",-1)),e("form",{onSubmit:le(Se,["prevent"]),class:"space-y-3"},[P(e("input",{"onUpdate:modelValue":r[2]||(r[2]=w=>k.value=w),type:"text",autocomplete:"off",placeholder:"7123456789:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw",class:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[Y,k.value]]),e("button",{type:"submit",disabled:!k.value.trim()||f.value,class:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[f.value?(o(),N(n(pe),{key:0,class:"w-4 h-4 animate-spin"})):(o(),N(n(ot),{key:1,class:"w-4 h-4"})),r[7]||(r[7]=L(" –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω ",-1))],8,fs),C.value?(o(),l("p",gs,c(C.value),1)):u("",!0),B.value?(o(),l("p",hs,"–¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω.")):u("",!0)],32)]),e("section",ys,[r[10]||(r[10]=e("h3",{class:"text-sm font-bold text-slate-900 mb-2"},"–£–¥–∞–ª–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ",-1)),r[11]||(r[11]=e("p",{class:"text-xs text-slate-500 mb-4"}," –ö–∞–Ω–∞–ª Telegram –±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á—ë–Ω –æ—Ç –∞–≥–µ–Ω—Ç–∞. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –µ–≥–æ –º–æ–∂–Ω–æ —Å–Ω–æ–≤–∞ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç. ",-1)),e("button",{type:"button",disabled:E.value,class:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-white border border-red-200 text-red-600 rounded-xl text-sm font-bold hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",onClick:$e},[E.value?(o(),N(n(pe),{key:0,class:"w-4 h-4 animate-spin"})):(o(),N(n(Ft),{key:1,class:"w-4 h-4"})),L(" "+c(E.value?"–£–¥–∞–ª–µ–Ω–∏–µ...":"–£–¥–∞–ª–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"),1)],8,ws),m.value?(o(),l("p",_s,c(m.value),1)):u("",!0)])])])):u("",!0)]),_:1})])),(o(),N(ze,{to:"body"},[x(xe,{name:"modal-fade"},{default:oe(()=>[y.value?(o(),l("div",ks,[e("div",{class:"absolute inset-0 bg-black/50",onClick:r[4]||(r[4]=w=>y.value=!1)}),e("div",Ss,[r[12]||(r[12]=e("h3",{class:"text-lg font-bold text-slate-900 mb-2"},"–£–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª Telegram?",-1)),r[13]||(r[13]=e("p",{class:"text-sm text-slate-500 mb-6"}," –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–æ. –í—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–∞–Ω–∞–ª —Å–Ω–æ–≤–∞ –ø–æ–∑–∂–µ. ",-1)),e("div",$s,[e("button",{type:"button",class:"flex-1 px-4 py-2.5 rounded-xl text-sm font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 transition-colors",onClick:r[5]||(r[5]=w=>y.value=!1)}," –û—Ç–º–µ–Ω–∞ "),e("button",{type:"button",disabled:E.value,class:"flex-1 px-4 py-2.5 rounded-xl text-sm font-bold text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 transition-colors",onClick:G}," –£–¥–∞–ª–∏—Ç—å ",8,Cs)])])])):u("",!0)]),_:1})]))],64))}}),As=st(Ts,[["__scopeId","data-v-1b10b77f"]]),qs={class:"min-h-screen bg-slate-50"},Ms={class:"lg:hidden bg-white border-b border-slate-200 px-4 py-3"},js={class:"flex items-center justify-between"},Es={class:"flex"},Is={key:0,class:"lg:hidden fixed inset-0 z-50 w-full"},Ns={class:"flex-1 bg-slate-50 p-4 sm:p-6 lg:p-10"},zs={class:"max-w-5xl mx-auto"},Bs={key:0,class:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Ds={class:"flex items-center justify-between"},Ls={class:"flex items-center"},Fs={key:1,class:"flex justify-center py-12"},Rs={key:2,class:"space-y-6"},Os={class:"flex items-center justify-between mb-8"},Vs={class:"text-slate-500 mt-1"},Hs={class:"flex items-center gap-3"},Ps=["disabled"],Gs={class:"flex items-center gap-1 border-b border-slate-200 mb-8 overflow-x-auto no-scrollbar"},Qs=["onClick"],Us={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"},Js={key:0,class:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm"},Ks={class:"flex items-center justify-between mb-6"},Ws={class:"relative group"},Xs={type:"button",class:"flex items-center gap-2 px-4 py-2 bg-slate-50 text-slate-700 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-100 transition-all"},Ys={class:"absolute right-0 mt-2 w-72 bg-white border border-slate-200 rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50 py-2"},Zs={class:"max-h-64 overflow-y-auto px-1"},eo={key:0,class:"mb-2"},to=["onClick"],so={class:"flex items-center justify-between"},oo={class:"text-xs font-mono font-bold text-indigo-600"},lo={class:"text-[10px] text-slate-500 line-clamp-1 mt-0.5"},ao={key:1,class:"mb-2"},no=["onClick"],io={class:"flex items-center justify-between"},ro={class:"text-xs font-mono font-bold text-emerald-600"},uo={class:"text-[10px] text-slate-500 line-clamp-1 mt-0.5"},co={key:2,class:"px-4 py-4 text-center"},po={class:"relative"},xo={class:"mt-6"},mo={type:"button",class:"flex items-center gap-2 px-5 py-2.5 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-medium hover:bg-indigo-100 transition-colors"},vo={key:1,class:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm space-y-6"},bo={key:0,class:"flex justify-center py-12"},fo={key:1,class:"space-y-5"},go={class:"flex items-start justify-between"},ho={class:"flex gap-4"},yo={class:"w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center shadow-sm"},wo={key:0,class:"mt-3"},_o={class:"p-6 border border-slate-100 rounded-2xl bg-slate-50/50 opacity-60"},ko={class:"flex items-start justify-between"},So={class:"flex gap-4"},$o={class:"w-12 h-12 bg-gradient-to-br from-green-400 to-green-600 rounded-xl flex items-center justify-center shadow-sm"},Co={class:"p-6 border border-slate-100 rounded-2xl bg-slate-50/50 opacity-60"},To={class:"flex items-start justify-between"},Ao={class:"flex gap-4"},qo={class:"w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl flex items-center justify-center shadow-sm"},Mo={key:2,class:"flex flex-col h-[600px] bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm"},jo={class:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between"},Eo={class:"flex flex-col gap-1"},Io={key:0,class:"text-[10px] text-slate-500 uppercase tracking-widest"},No={key:0,class:"flex flex-col items-center justify-center h-full text-center space-y-4"},zo={class:"w-16 h-16 bg-indigo-50 rounded-full flex items-center justify-center"},Bo={key:0,class:"whitespace-pre-wrap"},Do=["innerHTML"],Lo={class:"flex flex-col gap-1.5 mt-1.5"},Fo={class:"flex items-center gap-2"},Ro={class:"text-[10px] text-slate-400 px-1 uppercase font-semibold tracking-wider"},Oo={key:0,class:"flex flex-wrap gap-1.5 text-[10px]"},Vo={key:0,class:"text-slate-500 px-2 py-0.5 bg-slate-50 rounded-md border border-slate-200"},Ho={class:"font-mono font-semibold"},Po={key:1,class:"text-slate-500 px-2 py-0.5 bg-slate-50 rounded-md border border-slate-200"},Go={class:"font-mono font-semibold"},Qo={key:2,class:"text-slate-500 px-2 py-0.5 bg-slate-50 rounded-md border border-slate-200"},Uo={class:"font-mono font-semibold"},Jo={key:1,class:"flex flex-wrap gap-1.5"},Ko=["title"],Wo={key:1,class:"flex flex-col items-start"},Xo={class:"p-4 bg-white border-t border-slate-100"},Yo=["onKeydown"],Zo=["disabled"],el={class:"text-[10px] text-center text-slate-400 mt-3 uppercase font-medium tracking-widest"},tl={key:3,class:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm space-y-8"},sl={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},ol={class:"block text-sm font-bold text-slate-900 mb-3 flex items-center gap-2"},ll={class:"block text-sm font-bold text-slate-900 mb-3 flex items-center justify-between"},al={class:"flex items-center gap-2"},nl={class:"text-indigo-600 font-mono"},il={class:"pt-6 border-t border-slate-100"},rl={class:"block text-sm font-bold text-slate-900 mb-3 flex items-center gap-2"},dl={class:"flex items-center gap-4"},ul={key:4,class:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm space-y-8"},cl={class:"max-w-2xl space-y-8"},pl={class:"flex gap-4"},xl={key:5,class:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm space-y-6"},ml={class:"space-y-5"},vl={key:0,class:"space-y-4 pt-4 border-t border-indigo-100/30"},bl={class:"space-y-3"},fl={class:"grid gap-3"},gl={class:"flex items-center justify-between p-3 cursor-pointer hover:bg-indigo-50/30 transition-colors list-none"},hl={class:"flex items-center gap-2"},yl={class:"text-xs font-bold text-slate-700"},wl={key:0,class:"flex gap-1"},_l={key:0,class:"text-[8px] text-slate-400"},kl={class:"px-3 pb-3 space-y-2"},Sl={class:"text-xs text-slate-600 leading-normal"},$l={key:0,class:"flex flex-wrap gap-1.5 pt-1"},Cl={key:0,class:"flex flex-wrap gap-4 pt-2"},Tl={key:0,class:"space-y-2"},Al={class:"flex flex-wrap gap-1.5"},ql={key:1,class:"space-y-2"},Ml={class:"flex flex-wrap gap-1.5"},jl={class:"mt-10 pt-10 border-t border-slate-100"},El={key:0,class:"flex justify-center py-12"},Il={key:1,class:"text-center py-12 bg-slate-50 rounded-2xl border border-dashed border-slate-200"},Nl={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},zl={class:"flex gap-4"},Bl={class:"w-10 h-10 bg-white border border-slate-100 rounded-xl flex items-center justify-center shadow-sm"},Dl={class:"font-bold text-slate-900 text-sm"},Ll={class:"text-xs text-slate-500 mt-1 line-clamp-2"},Fl=["onClick"],Rl={key:6,class:"bg-white rounded-2xl border border-slate-200 p-12 text-center shadow-sm"},Ol={class:"max-w-md mx-auto"},Vl={class:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"},Hl={class:"text-lg font-bold text-slate-900"},Pl={class:"text-slate-500 mt-2"},et="agent-chat-messages",Gl=_e({__name:"[id]",setup(g){const z=new Rt({html:!0,linkify:!0,typographer:!0}),T=It(),q=Nt(),{getAgent:v,updateAgent:h,deleteAgent:k,sqnsStatus:f,sqnsResources:C,sqnsServices:B,sqnsError:E,fetchSqnsStatus:m,enableSqns:y,disableSqns:ae,fetchSqnsResources:ke,fetchSqnsServices:Se}=Ot(),{isAuthenticated:$e,token:G}=at(),$=lt(),{success:r,error:w}=Lt(),S=p(!1),Q=p(!1),d=p(null),Ce=p(!0),ve=p(!1),Le=p(!1),A=p("prompt"),ne=p([]),U=p([]),Te=p(!1),be=p(!1),Ae=p(!1),Fe=p(!1),O=p(null),qe=p(!1),te=p(!1),Me=async()=>{if(d.value)try{Te.value=!0;const[a,t]=await Promise.all([$("/tools",{headers:{Authorization:`Bearer ${G.value}`}}),$(`/agents/${d.value.id}/tools`,{headers:{Authorization:`Bearer ${G.value}`}})]);ne.value=a,U.value=t}catch(a){console.error("Failed to fetch tools:",a)}finally{Te.value=!1}},it=async a=>{if(!d.value)return;const t=U.value.some(i=>i.tool_id===a.id);try{t?await $(`/agents/${d.value.id}/tools/${a.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${G.value}`}}):await $(`/agents/${d.value.id}/tools/${a.id}`,{method:"POST",headers:{Authorization:`Bearer ${G.value}`,"Content-Type":"application/json"},body:{permission_scope:"read",timeout_ms:15e3}}),await Me()}catch(i){console.error("Failed to toggle tool:",i)}},Re=a=>{const t=ne.value.find(i=>i.id===a);return(t==null?void 0:t.name)||"–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç"},rt=a=>{const t=ne.value.find(i=>i.id===a);return(t==null?void 0:t.description)||""},Oe=(a,t)=>{const i=`${a}()`,b=document.querySelector('textarea[placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞..."]');if(b){const I=b.selectionStart,J=b.selectionEnd,K=b.scrollTop,H=_.value.system_prompt;_.value.system_prompt=H.substring(0,I)+i+H.substring(J),Je(()=>{b.focus({preventScroll:!0}),b.scrollTop=K;const ue=I+i.length;b.setSelectionRange(ue,ue)}),r("–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω",`–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ${a}() –≤—Å—Ç–∞–≤–ª–µ–Ω`)}else _.value.system_prompt+=(_.value.system_prompt?" ":"")+i,r("–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω",`–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ${a}() –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ–Ω–µ—Ü`)},{getSessionId:dt,setSessionId:ut,clearSessionId:Ve}=Ut(),M=p([]),He=()=>{d.value&&localStorage.setItem(`${et}-${d.value.id}`,JSON.stringify(M.value))},ct=()=>{if(d.value){const a=localStorage.getItem(`${et}-${d.value.id}`);if(a)try{M.value=JSON.parse(a)}catch(t){console.error("Failed to parse stored messages",t),M.value=[]}}};we(M,()=>{He()},{deep:!0});const se=p(""),ie=p(!1),fe=p(null),Z=p(null),V=p(null),Pe=X(()=>{const a=M.value.length;return a>0?`–∫–æ–Ω—Ç–µ–∫—Å—Ç: ${a} —Å–æ–æ–±—â–µ–Ω–∏–π`:""}),pt=()=>{Z.value&&(Z.value.style.height="auto",Z.value.style.height=Z.value.scrollHeight+"px")},je=async()=>{await Je(),fe.value&&(fe.value.scrollTop=fe.value.scrollHeight)},Ge=async()=>{if(!se.value.trim()||ie.value||!d.value)return;const a=se.value.trim();se.value="",Z.value&&(Z.value.style.height="auto"),M.value.push({role:"user",content:a,tokens:void 0,tools_called:void 0}),await je();try{ie.value=!0;const t={agent_id:d.value.id,input_message:a};V.value&&(t.session_id=V.value);const i=await $("/runs",{method:"POST",headers:{"Content-Type":"application/json"},body:t});if(i){i.session_id&&d.value&&(ut(d.value.id,i.session_id),V.value=i.session_id);const I=i.prompt_tokens!==null&&i.prompt_tokens!==void 0||i.completion_tokens!==null&&i.completion_tokens!==void 0||i.total_tokens!==null&&i.total_tokens!==void 0?{prompt:i.prompt_tokens??null,completion:i.completion_tokens??null,total:i.total_tokens??null}:void 0;console.log("Run response:",{status:i.status,has_output:!!i.output_message,prompt_tokens:i.prompt_tokens,completion_tokens:i.completion_tokens,total_tokens:i.total_tokens,tools_called:i.tools_called,extracted_tokens:I});const J=i.tools_called&&i.tools_called.length>0?i.tools_called:void 0;if(i.status==="succeeded"&&i.output_message){let K=i.output_message;const H=K.match(/AgentRunResult\(output=['"]([\s\S]*)['"]\)/);H&&H[1]&&(K=H[1]),M.value.push({role:"agent",content:K,tokens:I,tools_called:J})}else i.status==="failed"&&i.error_message?(M.value.push({role:"agent",content:`–û—à–∏–±–∫–∞: ${i.error_message}`,tokens:I,tools_called:J}),w("–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞",i.error_message)):M.value.push({role:"agent",content:"–ò–∑–≤–∏–Ω–∏—Ç–µ, –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞.",tokens:I,tools_called:J})}else M.value.push({role:"agent",content:"–ò–∑–≤–∏–Ω–∏—Ç–µ, –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞.",tokens:void 0,tools_called:void 0})}catch(t){console.error("Chat error:",t),t.statusCode===400&&V.value&&(console.warn("Session might be invalid, clearing..."),Ve(d.value.id),V.value=null),M.value.push({role:"agent",content:"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–≤—è–∑–∏ —Å –∞–≥–µ–Ω—Ç–æ–º.",tokens:void 0,tools_called:void 0})}finally{ie.value=!1,await je()}},xt=async()=>{if(V.value)try{await $(`/runs/session/${V.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${G.value}`}})}catch(a){console.error("Failed to clear session on backend:",a)}M.value=[],He(),d.value&&Ve(d.value.id),V.value=null},ge=[{id:"prompt",label:"–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç",icon:We},{id:"channels",label:"–ö–∞–Ω–∞–ª—ã",icon:Ht},{id:"connections",label:"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è",icon:ee},{id:"knowledge",label:"–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π",icon:Ne},{id:"model",label:"–ú–æ–¥–µ–ª—å",icon:Ye},{id:"settings",label:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏",icon:Ie},{id:"chat",label:"–ß–∞—Ç",icon:ye}],_=p({name:"",system_prompt:"",model:"",status:"draft",llm_params:{temperature:.7,max_tokens:1e3}}),he=X(()=>{var i;const a=((i=f.value)==null?void 0:i.sqnsTools)??[],t={sqns_list_resources:"–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏",sqns_list_services:"–£—Å–ª—É–≥–∏",sqns_find_client:"–ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞",sqns_list_slots:"–ü–æ–∏—Å–∫ —Å–ª–æ—Ç–æ–≤"};return a.map(b=>({...b,displayName:t[b.name]||b.name}))}),re=X(()=>{var a;return((a=f.value)==null?void 0:a.sqnsEnabled)??!1}),mt=X(()=>{var a,t;return(a=f.value)!=null&&a.sqnsEnabled?((t=f.value)==null?void 0:t.sqnsStatus)==="error"?"–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –æ—à–∏–±–∫–∞":"–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞":"SQNS –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω"}),vt=X(()=>{var a;return((a=f.value)==null?void 0:a.sqnsHost)??"–Ω–µ —É–∫–∞–∑–∞–Ω"}),bt=X(()=>{var a;return((a=f.value)==null?void 0:a.sqnsError)??""}),ft=X(()=>{var i;const a=(i=f.value)==null?void 0:i.sqnsLastSyncAt;if(!a)return"–Ω–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π";const t=new Date(a);return Number.isNaN(t.getTime())?a:t.toLocaleString("ru-RU",{dateStyle:"medium",timeStyle:"short"})}),de=async()=>{if(d.value)try{await m(d.value.id)}catch(a){if(a.statusCode===404)return;console.error("Failed to load SQNS status:",a)}},gt=async()=>{if(!(Fe.value||!d.value||!re.value))try{await Promise.all([ke(d.value.id),Se(d.value.id)]),Fe.value=!0}catch(a){if(a.statusCode===400||a.statusCode===404)return;console.error("Failed to load SQNS hints:",a)}},ht=async a=>{if(d.value){Ae.value=!0;try{await y(d.value.id,{host:"crmexchange.1denta.ru",email:a.email,password:a.password,defaultResourceId:a.defaultResourceId}),await de(),be.value=!1}catch(t){console.error("–û—à–∏–±–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è SQNS:",E.value??t.message??"")}finally{Ae.value=!1}}},yt=async()=>{if(d.value)try{await ae(d.value.id),await de()}catch(a){console.error("–û—à–∏–±–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è SQNS:",a.message||"")}},Ee=async()=>{if(d.value){qe.value=!0,console.log("üîå Fetching active channels for agent:",d.value.id);try{const a=await $(`/agents/${d.value.id}/channels/active`,{method:"GET",headers:{Authorization:`Bearer ${G.value}`}});console.log("üîå Active channels response:",a);const t=a.find(i=>i.type==="telegram");console.log("üîå Telegram channel:",t),O.value=t?{id:t.id,bot_token:t.telegram_bot_token,webhook_enabled:t.telegram_webhook_enabled,webhook_endpoint:t.telegram_webhook_endpoint}:null}catch(a){console.error("‚ùå Failed to fetch channels:",a),O.value=null}finally{qe.value=!1}}},wt=async()=>{await Ee(),te.value=!1,r("–ö–∞–Ω–∞–ª –æ–±–Ω–æ–≤–ª—ë–Ω","–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã")},_t=async()=>{O.value=null,te.value=!1,r("–ö–∞–Ω–∞–ª —É–¥–∞–ª—ë–Ω","–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram –æ—Ç–∫–ª—é—á–µ–Ω–æ")};we(A,a=>{a==="connections"&&(Me(),de(),gt()),a==="channels"&&Ee()}),zt(async()=>{var t,i;const a=T.params.id;if(!a){Ce.value=!1;return}try{const b=await v(a);d.value=b;const I=dt(b.id);I&&(V.value=I),_.value={name:b.name,system_prompt:b.system_prompt,model:b.model,status:b.status,llm_params:{temperature:((t=b.llm_params)==null?void 0:t.temperature)??.7,max_tokens:((i=b.llm_params)==null?void 0:i.max_tokens)??1e3}},A.value==="connections"&&await de(),await Me(),await de(),await Ee(),ct(),await je()}catch(b){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≥–µ–Ω—Ç–∞:",b.message||"")}finally{Ce.value=!1}});const kt=async()=>{if(d.value)try{ve.value=!0,await h(d.value.id,_.value);const a=await v(d.value.id);d.value=a,r("–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã","–ê–≥–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω")}catch(a){console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞:",a.message||""),w("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è",a.message||"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è")}finally{ve.value=!1}},St=()=>{q.push("/agents")},$t=async()=>{if(!(!d.value||!confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –∞–≥–µ–Ω—Ç–∞?")))try{Le.value=!0,await k(d.value.id),q.push("/agents")}catch(a){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏:",a.message)}finally{Le.value=!1}},Ct=()=>{Q.value=!1,window.location.reload()};return(a,t)=>{var I,J,K,H,ue,Qe;const i=qt,b=Mt;return o(),l("div",qs,[e("div",Ms,[e("div",js,[t[19]||(t[19]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-bold text-xs"},"–ú")]),e("span",{class:"text-slate-900 font-bold"},"–ú–µ–¥–∏–ê–ò")],-1)),e("button",{onClick:t[0]||(t[0]=s=>S.value=!S.value),class:"p-2 rounded-lg text-slate-600 hover:bg-slate-100"},[x(n(At),{class:"h-5 w-5"})])])]),e("div",Es,[x(i,{class:"hidden lg:block"}),S.value?(o(),l("div",{key:0,class:"lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50",onClick:t[1]||(t[1]=s=>S.value=!1)})):u("",!0),x(xe,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.34, 1.56, 0.64, 1)","enter-from-class":"-translate-x-full opacity-0 scale-95","enter-to-class":"translate-x-0 opacity-100 scale-100","leave-active-class":"transition-all duration-400 ease-in","leave-from-class":"translate-x-0 opacity-100 scale-100","leave-to-class":"-translate-x-full opacity-0 scale-95"},{default:oe(()=>[S.value?(o(),l("div",Is,[x(i,{onClose:t[2]||(t[2]=s=>S.value=!1)})])):u("",!0)]),_:1}),e("main",Ns,[e("div",zs,[n($e)?u("",!0):(o(),l("div",Bs,[e("div",Ds,[e("div",Ls,[x(n(Vt),{class:"h-5 w-5 text-yellow-400 mr-3"}),t[20]||(t[20]=e("div",null,[e("h3",{class:"text-sm font-medium text-yellow-800"}," –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è "),e("p",{class:"text-sm text-yellow-700 mt-1"}," –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ ")],-1))]),e("button",{onClick:t[3]||(t[3]=s=>Q.value=!0),class:"px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700 transition-colors"}," –í–æ–π—Ç–∏ ")])])),Ce.value?(o(),l("div",Fs,[...t[21]||(t[21]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1)])])):d.value?(o(),l("div",Rs,[e("div",Os,[e("div",null,[t[22]||(t[22]=e("h1",{class:"text-3xl font-bold text-slate-900"}," –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ ",-1)),e("p",Vs,c(d.value.name),1)]),e("div",Hs,[e("button",{onClick:St,class:"px-6 py-2.5 text-slate-600 font-medium hover:text-slate-900 transition-colors"}," –û—Ç–º–µ–Ω–∏—Ç—å "),e("button",{onClick:kt,disabled:ve.value,class:"px-8 py-2.5 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 shadow-sm shadow-indigo-200"},[ve.value?(o(),N(n(pe),{key:0,class:"h-4 w-4 animate-spin"})):(o(),N(n(ot),{key:1,class:"h-4 w-4"})),t[23]||(t[23]=L(" –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",-1))],8,Ps)])]),e("div",Gs,[(o(),l(D,null,R(ge,s=>e("button",{key:s.id,onClick:j=>A.value=s.id,class:F(["px-5 py-3 text-sm font-medium transition-all relative whitespace-nowrap",[A.value===s.id?"text-indigo-600 bg-indigo-50 rounded-t-lg":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"]])},[L(c(s.label)+" ",1),A.value===s.id?(o(),l("div",Us)):u("",!0)],10,Qs)),64))]),A.value==="prompt"?(o(),l("div",Js,[e("div",Ks,[t[31]||(t[31]=e("div",null,[e("h3",{class:"text-lg font-bold text-slate-900"},"–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç"),e("p",{class:"text-sm text-slate-500 mt-1"}," –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–µ –µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏ —Ä–æ–ª—å ")],-1)),e("div",Ws,[e("button",Xs,[x(n(Pt),{class:"h-4 w-4 text-slate-500"}),t[24]||(t[24]=L(" –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ",-1)),x(n(Xe),{class:"h-4 w-4 text-slate-400"})]),e("div",Ys,[t[30]||(t[30]=e("div",{class:"px-4 py-2 border-b border-slate-50 mb-1"},[e("p",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã")],-1)),e("div",Zs,[re.value&&he.value.length?(o(),l("div",eo,[t[26]||(t[26]=e("div",{class:"px-3 py-1 text-[10px] font-semibold text-indigo-600 bg-indigo-50/50 rounded-md mx-2 mb-1"},"SQNS –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è",-1)),(o(!0),l(D,null,R(he.value,s=>(o(),l("button",{key:s.name,onClick:j=>Oe(s.name,s.description),class:"w-full text-left px-3 py-2 hover:bg-slate-50 rounded-lg transition-colors group/item"},[e("div",so,[e("span",oo,c(s.name),1),t[25]||(t[25]=e("span",{class:"text-[10px] text-indigo-500 opacity-0 group-hover/item:opacity-100"},"+ –í—Å—Ç–∞–≤–∏—Ç—å",-1))]),e("p",lo,c(s.description),1)],8,to))),128))])):u("",!0),U.value.length?(o(),l("div",ao,[t[28]||(t[28]=e("div",{class:"px-3 py-1 text-[10px] font-semibold text-emerald-600 bg-emerald-50/50 rounded-md mx-2 mb-1"},"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ",-1)),(o(!0),l(D,null,R(U.value,s=>(o(),l("button",{key:s.tool_id,onClick:j=>Oe(Re(s.tool_id)),class:"w-full text-left px-3 py-2 hover:bg-slate-50 rounded-lg transition-colors group/item"},[e("div",io,[e("span",ro,c(Re(s.tool_id)),1),t[27]||(t[27]=e("span",{class:"text-[10px] text-emerald-500 opacity-0 group-hover/item:opacity-100"},"+ –í—Å—Ç–∞–≤–∏—Ç—å",-1))]),e("p",uo,c(rt(s.tool_id)),1)],8,no))),128))])):u("",!0),!re.value&&!U.value.length?(o(),l("div",co,[t[29]||(t[29]=e("p",{class:"text-xs text-slate-400"},"–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤",-1)),e("button",{onClick:t[4]||(t[4]=s=>A.value="connections"),class:"text-[10px] text-indigo-600 font-bold mt-2 hover:underline"}," –ü–æ–¥–∫–ª—é—á–∏—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö ")])):u("",!0)])])])]),e("div",po,[P(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>_.value.system_prompt=s),rows:"12",class:"w-full px-5 py-4 text-slate-700 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 focus:bg-white transition-all resize-none leading-relaxed",placeholder:"–í–≤–µ–¥–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞..."},null,512),[[Y,_.value.system_prompt]])]),e("div",xo,[e("button",mo,[x(n(We),{class:"h-4 w-4"}),t[32]||(t[32]=L(" –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –ò–ò ",-1))])])])):A.value==="channels"?(o(),l("div",vo,[t[39]||(t[39]=e("div",{class:"mb-6"},[e("h3",{class:"text-lg font-bold text-slate-900"},"–ö–∞–Ω–∞–ª—ã —Å–≤—è–∑–∏"),e("p",{class:"text-sm text-slate-500 mt-1"}," –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã –∏ –¥—Ä—É–≥–∏–µ –∫–∞–Ω–∞–ª—ã –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –≤–∞—à–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç–∞. ")],-1)),qe.value?(o(),l("div",bo,[x(n(pe),{class:"w-8 h-8 animate-spin text-indigo-600"})])):(o(),l("div",fo,[e("div",{class:F(["p-6 border rounded-2xl transition-all",[O.value?"border-indigo-100 bg-indigo-50/30":"border-slate-100 bg-white hover:border-slate-200"]])},[e("div",go,[e("div",ho,[e("div",yo,[x(n(Ke),{class:"w-6 h-6 text-white"})]),e("div",null,[t[33]||(t[33]=e("h4",{class:"font-bold text-slate-900"},"Telegram Bot",-1)),t[34]||(t[34]=e("p",{class:"text-sm text-slate-500 mt-1"}," –ü–æ–¥–∫–ª—é—á–∏—Ç–µ Telegram-–±–æ—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±—â–µ–Ω–∏—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏. ",-1)),O.value?(o(),l("div",wo,[e("span",{class:F(["px-2 py-0.5 rounded-full text-[10px] font-bold uppercase",O.value.webhook_enabled?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"])},c(O.value.webhook_enabled?"–ê–∫—Ç–∏–≤–µ–Ω":"–ù–µ–∞–∫—Ç–∏–≤–µ–Ω"),3)])):u("",!0)])]),O.value?(o(),l("button",{key:0,onClick:t[6]||(t[6]=s=>te.value=!0),class:"px-4 py-2 rounded-xl text-sm font-bold bg-indigo-600 text-white hover:bg-indigo-700 transition-colors shadow-sm"}," –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ")):(o(),l("button",{key:1,onClick:t[7]||(t[7]=s=>te.value=!0),class:"px-4 py-2 rounded-xl text-sm font-bold bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors"}," –ü–æ–¥–∫–ª—é—á–∏—Ç—å "))])],2),e("div",_o,[e("div",ko,[e("div",So,[e("div",$o,[x(n(ye),{class:"w-6 h-6 text-white"})]),t[35]||(t[35]=e("div",null,[e("h4",{class:"font-bold text-slate-900"},"WhatsApp"),e("p",{class:"text-sm text-slate-500 mt-1"}," –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WhatsApp Business API –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏. ")],-1))]),t[36]||(t[36]=e("span",{class:"px-3 py-1.5 rounded-lg text-xs font-bold bg-slate-200 text-slate-500 uppercase"}," –°–∫–æ—Ä–æ ",-1))])]),e("div",Co,[e("div",To,[e("div",Ao,[e("div",qo,[x(n(ye),{class:"w-6 h-6 text-white"})]),t[37]||(t[37]=e("div",null,[e("h4",{class:"font-bold text-slate-900"},"–í–∏–¥–∂–µ—Ç –Ω–∞ —Å–∞–π—Ç"),e("p",{class:"text-sm text-slate-500 mt-1"}," –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —á–∞—Ç-–≤–∏–¥–∂–µ—Ç –¥–ª—è –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞. ")],-1))]),t[38]||(t[38]=e("span",{class:"px-3 py-1.5 rounded-lg text-xs font-bold bg-slate-200 text-slate-500 uppercase"}," –°–∫–æ—Ä–æ ",-1))])])]))])):A.value==="chat"?(o(),l("div",Mo,[e("div",jo,[e("div",Eo,[t[40]||(t[40]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e("h3",{class:"font-bold text-slate-900"},"–¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç —Å –∞–≥–µ–Ω—Ç–æ–º")],-1)),Pe.value?(o(),l("p",Io,c(Pe.value),1)):u("",!0)]),e("button",{onClick:xt,class:"text-xs text-slate-500 hover:text-slate-800 transition-colors"}," –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é ")]),e("div",{ref_key:"messagesContainer",ref:fe,class:"flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth bg-slate-50/30"},[M.value.length===0?(o(),l("div",No,[e("div",zo,[x(n(ye),{class:"w-8 h-8 text-indigo-500"})]),t[41]||(t[41]=e("div",null,[e("p",{class:"font-medium text-slate-900"},"–ù–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥"),e("p",{class:"text-sm text-slate-500 max-w-[240px] mx-auto mt-1"},"–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤–∞—à–µ–≥–æ –∞–≥–µ–Ω—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏")],-1))])):u("",!0),(o(!0),l(D,null,R(M.value,(s,j)=>{var ce;return o(),l("div",{key:j,class:F(["flex flex-col",[s.role==="user"?"items-end":"items-start"]])},[e("div",{class:F(["max-w-[80%] rounded-2xl px-5 py-3 text-sm leading-relaxed shadow-sm markdown-content",[s.role==="user"?"bg-indigo-600 text-white rounded-tr-none":"bg-white border border-slate-100 text-slate-800 rounded-tl-none"]])},[s.role==="user"?(o(),l("div",Bo,c(s.content),1)):(o(),l("div",{key:1,innerHTML:n(z).render(s.content)},null,8,Do))],2),e("div",Lo,[e("div",Fo,[e("span",Ro,c(s.role==="user"?"–í—ã":((ce=d.value)==null?void 0:ce.name)||"–ê–≥–µ–Ω—Ç"),1)]),s.role==="agent"&&s.tokens&&(s.tokens.prompt!==null||s.tokens.completion!==null||s.tokens.total!==null)?(o(),l("div",Oo,[s.tokens.prompt!==null&&s.tokens.prompt!==void 0?(o(),l("span",Vo,[t[42]||(t[42]=L(" –ü—Ä–æ–º–ø—Ç: ",-1)),e("span",Ho,c(s.tokens.prompt),1)])):u("",!0),s.tokens.completion!==null&&s.tokens.completion!==void 0?(o(),l("span",Po,[t[43]||(t[43]=L(" –û—Ç–≤–µ—Ç: ",-1)),e("span",Go,c(s.tokens.completion),1)])):u("",!0),s.tokens.total!==null&&s.tokens.total!==void 0?(o(),l("span",Qo,[t[44]||(t[44]=L(" –í—Å–µ–≥–æ: ",-1)),e("span",Uo,c(s.tokens.total),1)])):u("",!0)])):u("",!0),s.role==="agent"&&s.tools_called&&s.tools_called.length>0?(o(),l("div",Jo,[(o(!0),l(D,null,R(s.tools_called,(W,Tt)=>(o(),l("span",{key:Tt,class:"text-[10px] text-indigo-600 px-2 py-0.5 bg-indigo-50 rounded-md font-medium border border-indigo-100",title:`–ê—Ä–≥—É–º–µ–Ω—Ç—ã: ${JSON.stringify(W.args)}`}," üîß "+c(W.name),9,Ko))),128))])):u("",!0)])],2)}),128)),ie.value?(o(),l("div",Wo,[...t[45]||(t[45]=[Ue('<div class="bg-white border border-slate-100 rounded-2xl rounded-tl-none px-5 py-4 shadow-sm" data-v-d0940f3f><div class="flex gap-1.5" data-v-d0940f3f><div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay:0ms;" data-v-d0940f3f></div><div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay:150ms;" data-v-d0940f3f></div><div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay:300ms;" data-v-d0940f3f></div></div></div>',1)])])):u("",!0)],512),e("div",Xo,[e("form",{onSubmit:le(Ge,["prevent"]),class:"relative flex items-center gap-3"},[P(e("textarea",{ref_key:"inputArea",ref:Z,"onUpdate:modelValue":t[8]||(t[8]=s=>se.value=s),onInput:pt,onKeydown:Bt(le(Ge,["prevent"]),["enter"]),placeholder:"–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...",rows:"1",class:"flex-1 bg-slate-50 border border-slate-100 rounded-xl px-5 py-3 text-sm text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all resize-none max-h-32"},null,40,Yo),[[Y,se.value]]),e("button",{type:"submit",disabled:!se.value.trim()||ie.value,class:"absolute right-2 p-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-40 disabled:cursor-not-allowed transition-all shadow-md shadow-indigo-100"},[x(n(Ke),{class:"w-5 h-5"})],8,Zo)],32),e("p",el," –ê–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å "+c((I=d.value)==null?void 0:I.model),1)])])):A.value==="model"?(o(),l("div",tl,[e("div",sl,[e("div",null,[e("label",ol,[x(n(Ye),{class:"w-4 h-4 text-slate-400"}),t[46]||(t[46]=L(" –ú–æ–¥–µ–ª—å –ò–ò ",-1))]),P(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>_.value.model=s),class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all appearance-none cursor-pointer"},[...t[47]||(t[47]=[Ue('<option value="openai:gpt-4o-mini" data-v-d0940f3f>GPT-4o Mini (–ë—ã—Å—Ç—Ä–∞—è)</option><option value="openai:gpt-4o" data-v-d0940f3f>GPT-4o (–£–º–Ω–∞—è)</option><option value="openai:gpt-4" data-v-d0940f3f>GPT-4 (–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è)</option><option value="anthropic:claude-3-haiku" data-v-d0940f3f>Claude 3 Haiku</option><option value="anthropic:claude-3-sonnet" data-v-d0940f3f>Claude 3 Sonnet</option>',5)])],512),[[Dt,_.value.model]])]),e("div",null,[e("label",ll,[e("span",al,[x(n(Ie),{class:"w-4 h-4 text-slate-400"}),t[48]||(t[48]=L(" –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ",-1))]),e("span",nl,c(_.value.llm_params.temperature),1)]),P(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>_.value.llm_params.temperature=s),type:"range",min:"0",max:"2",step:"0.1",class:"w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer accent-indigo-600"},null,512),[[Y,_.value.llm_params.temperature,void 0,{number:!0}]]),t[49]||(t[49]=e("div",{class:"flex justify-between text-[10px] text-slate-400 mt-2 uppercase font-medium"},[e("span",null,"–¢–æ—á–Ω—ã–π"),e("span",null,"–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π")],-1))])]),e("div",il,[e("label",rl,[x(n(Ne),{class:"w-4 h-4 text-slate-400"}),t[50]||(t[50]=L(" –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ ",-1))]),e("div",dl,[P(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>_.value.llm_params.max_tokens=s),type:"number",min:"1",max:"4000",class:"w-32 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all text-sm font-mono"},null,512),[[Y,_.value.llm_params.max_tokens,void 0,{number:!0}]]),t[51]||(t[51]=e("p",{class:"text-xs text-slate-500 italic"}," –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞. ",-1))])])])):A.value==="settings"?(o(),l("div",ul,[e("div",cl,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-bold text-slate-900 mb-3"},"–ù–∞–∑–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞",-1)),P(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>_.value.name=s),type:"text",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all",placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ..."},null,512),[[Y,_.value.name]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-bold text-slate-900 mb-3"},"–°—Ç–∞—Ç—É—Å –∞–≥–µ–Ω—Ç–∞",-1)),e("div",pl,[e("button",{type:"button",onClick:t[13]||(t[13]=s=>_.value.status="draft"),class:F(["flex-1 flex flex-col p-4 border-2 rounded-2xl transition-all text-left",[_.value.status==="draft"?"border-indigo-600 bg-indigo-50/50 ring-4 ring-indigo-50":"border-slate-100 hover:border-slate-200 bg-white"]])},[...t[53]||(t[53]=[e("span",{class:"font-bold text-slate-900"},"–ß–µ—Ä–Ω–æ–≤–∏–∫",-1),e("span",{class:"text-xs text-slate-500 mt-1"},"–ê–≥–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–∞–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è",-1)])],2),e("button",{type:"button",onClick:t[14]||(t[14]=s=>_.value.status="published"),class:F(["flex-1 flex flex-col p-4 border-2 rounded-2xl transition-all text-left",[_.value.status==="published"?"border-green-600 bg-green-50/50 ring-4 ring-green-50":"border-slate-100 hover:border-slate-200 bg-white"]])},[...t[54]||(t[54]=[e("span",{class:"font-bold text-slate-900"},"–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω",-1),e("span",{class:"text-xs text-slate-500 mt-1"},"–ê–≥–µ–Ω—Ç –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç–µ",-1)])],2)])]),e("div",{class:"pt-8 border-t border-red-50"},[t[56]||(t[56]=e("h4",{class:"text-sm font-bold text-red-600 mb-2"},"–û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞",-1)),t[57]||(t[57]=e("p",{class:"text-xs text-slate-500 mb-4"},"–£–¥–∞–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ–π –ø–æ—Ç–µ—Ä–µ –≤—Å–µ—Ö –µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –∏—Å—Ç–æ—Ä–∏–∏.",-1)),e("button",{type:"button",onClick:$t,class:"px-6 py-2.5 bg-white border border-red-200 text-red-600 rounded-xl text-sm font-bold hover:bg-red-50 transition-colors"}," –£–¥–∞–ª–∏—Ç—å –∞–≥–µ–Ω—Ç–∞ ")])])])):A.value==="connections"?(o(),l("div",xl,[t[64]||(t[64]=e("div",{class:"mb-6"},[e("h3",{class:"text-lg font-bold text-slate-900"},"–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"),e("p",{class:"text-sm text-slate-500 mt-1"}," –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ API –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –≤–∞—à–µ–≥–æ –∞–≥–µ–Ω—Ç–∞. –ú—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ CRM-—Å–∏—Å—Ç–µ–º—ã –∏ —Å–µ—Ä–≤–∏—Å—ã. ")],-1)),e("div",ml,[x(Ze,{title:"SQNS",description:"–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–∑–∏—Ç–∞–º–∏ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º.",status:re.value?((J=n(f))==null?void 0:J.sqnsStatus)==="error"?"error":"active":"inactive","status-label":mt.value,host:vt.value,"last-sync":ft.value,error:bt.value,icon:n(ee),onEnable:t[15]||(t[15]=s=>be.value=!0),onDisable:yt},{extra:oe(()=>[re.value&&he.value.length?(o(),l("div",vl,[e("div",bl,[t[59]||(t[59]=e("div",{class:"flex items-center justify-between"},[e("p",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã SQNS")],-1)),e("div",fl,[(o(!0),l(D,null,R(he.value,s=>{var j,ce;return o(),l("details",{key:s.name,class:"group rounded-xl border border-indigo-100/30 bg-white/50 shadow-sm overflow-hidden"},[e("summary",gl,[e("div",hl,[e("p",yl,c(s.displayName),1),(j=s.requiredFields)!=null&&j.length?(o(),l("div",wl,[(o(!0),l(D,null,R(s.requiredFields.slice(0,2),W=>(o(),l("span",{key:W,class:"rounded-full bg-indigo-50 px-1.5 py-0.5 text-[8px] text-indigo-600 font-medium"},c(W),1))),128)),s.requiredFields.length>2?(o(),l("span",_l,"...")):u("",!0)])):u("",!0)]),x(n(Xe),{class:"w-3.5 h-3.5 text-slate-400 group-open:rotate-180 transition-transform"})]),e("div",kl,[e("p",Sl,c(s.description),1),(ce=s.requiredFields)!=null&&ce.length?(o(),l("div",$l,[t[58]||(t[58]=e("p",{class:"text-[9px] text-slate-400 w-full font-medium uppercase tracking-wider"},"–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:",-1)),(o(!0),l(D,null,R(s.requiredFields,W=>(o(),l("span",{key:W,class:"rounded-full border border-indigo-100/50 bg-indigo-50/50 px-2 py-0.5 text-[9px] text-indigo-600 font-medium"},c(W),1))),128))])):u("",!0)])])}),128))])]),n(C).length||n(B).length?(o(),l("div",Cl,[n(C).length?(o(),l("div",Tl,[t[60]||(t[60]=e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"–†–µ—Å—É—Ä—Å—ã",-1)),e("div",Al,[(o(!0),l(D,null,R(n(C),s=>(o(),l("span",{key:s.id,class:"rounded-full border border-indigo-100/50 bg-indigo-50/50 px-2 py-0.5 text-[9px] text-indigo-700 font-medium"},c(s.name),1))),128))])])):u("",!0),n(B).length?(o(),l("div",ql,[t[61]||(t[61]=e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"–£—Å–ª—É–≥–∏",-1)),e("div",Ml,[(o(!0),l(D,null,R(n(B),s=>(o(),l("span",{key:s.id,class:"rounded-full border border-emerald-100/50 bg-emerald-50/50 px-2 py-0.5 text-[9px] text-emerald-700 font-medium"},c(s.name),1))),128))])])):u("",!0)])):u("",!0)])):u("",!0)]),_:1},8,["status","status-label","host","last-sync","error","icon"]),x(Ze,{title:"Klientiks CRM",description:"–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –∫–ª–∏–Ω–∏–∫–æ–π –∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º–∏ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞–º–∏.",status:"soon","status-label":"—Å–∫–æ—Ä–æ",icon:n(ee)},null,8,["icon"])]),e("div",jl,[t[63]||(t[63]=e("div",{class:"mb-6"},[e("h3",{class:"text-lg font-bold text-slate-900"},"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã"),e("p",{class:"text-sm text-slate-500 mt-1"},"–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–µ–±—Ö—É–∫–∏ –∏–ª–∏ –¥—Ä—É–≥–∏–µ API –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.")],-1)),Te.value?(o(),l("div",El,[x(n(pe),{class:"w-8 h-8 animate-spin text-indigo-600"})])):ne.value.length===0?(o(),l("div",Il,[x(n(ee),{class:"w-12 h-12 text-slate-300 mx-auto mb-4"}),t[62]||(t[62]=e("p",{class:"text-slate-500"},'–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –°–æ–∑–¥–∞–π—Ç–µ –∏—Ö –≤ —Ä–∞–∑–¥–µ–ª–µ "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã".',-1))])):(o(),l("div",Nl,[(o(!0),l(D,null,R(ne.value,s=>(o(),l("div",{key:s.id,class:F(["p-5 border rounded-2xl transition-all flex items-start justify-between group",[U.value.some(j=>j.tool_id===s.id)?"border-indigo-100 bg-indigo-50/30":"border-slate-100 bg-white hover:border-slate-200"]])},[e("div",zl,[e("div",Bl,[(o(),N(Be(s.execution_type==="http_webhook"?n(ee):n(Ne)),{class:"w-5 h-5 text-slate-600"}))]),e("div",null,[e("h4",Dl,c(s.name),1),e("p",Ll,c(s.description||"–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è"),1)])]),e("button",{onClick:j=>it(s),class:F(["px-3 py-1.5 rounded-lg text-xs font-bold transition-all",[U.value.some(j=>j.tool_id===s.id)?"bg-indigo-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200"]])},c(U.value.some(j=>j.tool_id===s.id)?"–ü–æ–¥–∫–ª—é—á–µ–Ω–æ":"–ü–æ–¥–∫–ª—é—á–∏—Ç—å"),11,Fl)],2))),128))]))])])):(o(),l("div",Rl,[e("div",Ol,[e("div",Vl,[(o(),N(Be(((K=ge.find(s=>s.id===A.value))==null?void 0:K.icon)||n(Ie)),{class:"h-8 w-8 text-slate-400"}))]),e("h3",Hl,'–†–∞–∑–¥–µ–ª "'+c((H=ge.find(s=>s.id===A.value))==null?void 0:H.label)+'"',1),e("p",Pl," –≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ó–¥–µ—Å—å –±—É–¥—É—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è "+c((ue=ge.find(s=>s.id===A.value))==null?void 0:ue.label.toLowerCase())+". ",1)])]))])):u("",!0)])])]),x(b,{"is-open":Q.value,onClose:t[16]||(t[16]=s=>Q.value=!1),onAuthenticated:Ct},null,8,["is-open"]),x(ts,{"is-open":be.value,"is-submitting":Ae.value,onClose:t[17]||(t[17]=s=>be.value=!1),onSubmit:ht},null,8,["is-open","is-submitting"]),d.value?(o(),N(As,{key:0,open:te.value,"agent-id":d.value.id,"current-token":(Qe=O.value)==null?void 0:Qe.bot_token,"onUpdate:open":t[18]||(t[18]=s=>te.value=s),onSaved:wt,onDeleted:_t},null,8,["open","agent-id","current-token"])):u("",!0)])}}}),sa=st(Gl,[["__scopeId","data-v-d0940f3f"]]);export{sa as default};
