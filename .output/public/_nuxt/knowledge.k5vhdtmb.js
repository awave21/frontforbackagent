import{_ as xa}from"./AgentPageShell.vue.DS72lrn9.js";import{O as ba,P as Sa,Q as wa,R as Ca,S as $a,U as Ea,V as Ra,F as Ne,W as Ia,Y as Oa,Z as Da,$ as Pa,T as Ta,a0 as Fa,a1 as Aa,q as hr,a2 as Ma,a3 as Va,a4 as La,a5 as Na,a6 as ja,a7 as Ga,a8 as Ua,a9 as Ha,aa as Ba,ab as ka,L as Re,ac as za,n as we,p as fe,c as F,a as v,ad as Ka,ae as Wa,af as Xa,ag as Ya,ah as Qa,D as yr,d as se,b as w,ai as Ja,aj as Za,m as $e,ak as qa,al as _a,am as es,an as ts,ao as ns,ap as os,aq as rs,ar as as,as as ss,at as ls,au as is,l as us,av as ds,aw as cs,ax as fs,ay as Bo,az as xr,aA as gs,aB as ps,aC as vs,aD as ms,aE as hs,aF as ys,aG as xs,aH as bs,aI as Ss,aJ as ko,aK as ws,aL as Cs,aM as $s,aN as Es,G as br,aO as Rs,aP as Is,aQ as Os,aR as Ds,aS as Ps,aT as Ts,aU as xt,H as jt,aV as Fs,A as Se,aW as zo,aX as kn,j as As,aY as Ms,g as Vs,aZ as Ls,h as Ns,a_ as js,B as Zn,a$ as Gs,b0 as Us,b1 as Hs,b2 as Bs,b3 as ks,b4 as zs,b5 as Ks,o as C,b6 as Ws,b7 as Xs,b8 as Sr,b9 as Ys,ba as Qs,bb as Js,bc as Zs,bd as qs,k as _,be as _s,bf as el,C as je,K as Ye,bg as tl,bh as nl,J as qn,bi as ol,bj as rl,bk as al,bl as sl,bm as ll,bn as il,bo as ul,bp as wr,bq as dl,br as cl,bs as fl,t as K,bt as gl,bu as pl,bv as vl,bw as ml,I as hl,bx as yl,by as xl,bz as bl,u as x,bA as bt,bB as Sl,bC as wl,bD as Cl,bE as $l,bF as El,bG as Rl,bH as Il,bI as Ol,bJ as Dl,bK as Pl,bL as Ft,bM as Tl,bN as Io,bO as Xt,x as Xe,bP as Cr,bQ as Fl,bR as Al,f as Ke,e as $r,bS as Ml,bT as Vl,bU as Ll,w as T,bV as Nl,v as Oe,E as zn,bW as jl,s as St,bX as Gl,bY as ut,_ as Er,X as _n,z as Rr,y as Ul,M as Hl}from"./entry.C3vEAWma.js";import{u as Bl}from"./useAgentEditorStore.q8CjWIk4.js";import{g as kl,b as zl,T as Ir,S as Or,n as Kl,I as Wl,$ as Xl,P as Yl,B as Ql,a as Jl,X as Dr,_ as Pr,c as Tr,d as Fr,e as Zl,f as Ar}from"./SheetDescription.vue.CHSRUXNz.js";import{S as Mr}from"./settings.D7R0DbBt.js";import{P as xn}from"./plus.Bhys6ein.js";import{S as dn}from"./search.u8u2HhwC.js";import{L as Mt}from"./loader-2.C7JGwsi9.js";import{A as Vr}from"./alert-circle.CL9BFDlJ.js";import{T as eo}from"./trash-2.CC6Rcawm.js";import{C as ql}from"./check.CwYc9Emf.js";import{A as Oo,C as Lr,a as Nr}from"./chevron-right.CfOe2FP9.js";import{F as _l}from"./file-text.oBjysJDl.js";import{S as ei}from"./sparkles.DjsxGJe-.js";import{C as ti}from"./check-circle.MMSKjLJw.js";import{u as ni}from"./useAgents.lyQ9pZ6U.js";import{L as oi}from"./link.KDvRW_f5.js";import{D as ri}from"./database.BwuKnyaf.js";import"./useAuth.aSDdTJTL.js";import"./usePermissions.kc3596Ar.js";import"./AuthModal.vue.TJWQo2PL.js";import"./eye.DZxrhfv6.js";import"./index.B9hQrX5B.js";/**
* vue v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ai=()=>{},si=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:ba,BaseTransitionPropsValidators:Sa,Comment:wa,DeprecationTypes:Ca,EffectScope:$a,ErrorCodes:Ea,ErrorTypeStrings:Ra,Fragment:Ne,KeepAlive:Ia,ReactiveEffect:Oa,Static:Da,Suspense:Pa,Teleport:Ta,Text:Fa,TrackOpTypes:Aa,Transition:hr,TransitionGroup:Ma,TriggerOpTypes:Va,VueElement:La,assertNumber:Na,callWithAsyncErrorHandling:ja,callWithErrorHandling:Ga,camelize:Ua,capitalize:Ha,cloneVNode:Ba,compatUtils:ka,compile:ai,computed:Re,createApp:za,createBlock:we,createCommentVNode:fe,createElementBlock:F,createElementVNode:v,createHydrationRenderer:Ka,createPropsRestProxy:Wa,createRenderer:Xa,createSSRApp:Ya,createSlots:Qa,createStaticVNode:yr,createTextVNode:se,createVNode:w,customRef:Ja,defineAsyncComponent:Za,defineComponent:$e,defineCustomElement:qa,defineEmits:_a,defineExpose:es,defineModel:ts,defineOptions:ns,defineProps:os,defineSSRCustomElement:rs,defineSlots:as,devtools:ss,effect:ls,effectScope:is,getCurrentInstance:us,getCurrentScope:ds,getCurrentWatcher:cs,getTransitionRawChildren:fs,guardReactiveProps:Bo,h:xr,handleError:gs,hasInjectionContext:ps,hydrate:vs,hydrateOnIdle:ms,hydrateOnInteraction:hs,hydrateOnMediaQuery:ys,hydrateOnVisible:xs,initCustomFormatter:bs,initDirectivesForSSR:Ss,inject:ko,isMemoSame:ws,isProxy:Cs,isReactive:$s,isReadonly:Es,isRef:br,isRuntimeOnly:Rs,isShallow:Is,isVNode:Os,markRaw:Ds,mergeDefaults:Ps,mergeModels:Ts,mergeProps:xt,nextTick:jt,nodeOps:Fs,normalizeClass:Se,normalizeProps:zo,normalizeStyle:kn,onActivated:As,onBeforeMount:Ms,onBeforeUnmount:Vs,onBeforeUpdate:Ls,onDeactivated:Ns,onErrorCaptured:js,onMounted:Zn,onRenderTracked:Gs,onRenderTriggered:Us,onScopeDispose:Hs,onServerPrefetch:Bs,onUnmounted:ks,onUpdated:zs,onWatcherCleanup:Ks,openBlock:C,patchProp:Ws,popScopeId:Xs,provide:Sr,proxyRefs:Ys,pushScopeId:Qs,queuePostFlushCb:Js,reactive:Zs,readonly:qs,ref:_,registerRuntimeCompiler:_s,render:el,renderList:je,renderSlot:Ye,resolveComponent:tl,resolveDirective:nl,resolveDynamicComponent:qn,resolveFilter:ol,resolveTransitionHooks:rl,setBlockTracking:al,setDevtoolsHook:sl,setTransitionHooks:ll,shallowReactive:il,shallowReadonly:ul,shallowRef:wr,ssrContextKey:dl,ssrUtils:cl,stop:fl,toDisplayString:K,toHandlerKey:gl,toHandlers:pl,toRaw:vl,toRef:ml,toRefs:hl,toValue:yl,transformVNodeArgs:xl,triggerRef:bl,unref:x,useAttrs:bt,useCssModule:Sl,useCssVars:wl,useHost:Cl,useId:$l,useModel:El,useSSRContext:Rl,useShadowRoot:Il,useSlots:Ol,useTemplateRef:Dl,useTransitionState:Pl,vModelCheckbox:Ft,vModelDynamic:Tl,vModelRadio:Io,vModelSelect:Xt,vModelText:Xe,vShow:Cr,version:Fl,warn:Al,watch:Ke,watchEffect:$r,watchPostEffect:Ml,watchSyncEffect:Vl,withAsyncContext:Ll,withCtx:T,withDefaults:Nl,withDirectives:Oe,withKeys:zn,withMemo:jl,withModifiers:St,withScopeId:Gl},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=ut("AlertTriangleIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=ut("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=ut("BookOpenIcon",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=ut("Building2Icon",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=ut("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=ut("FileSpreadsheetIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=ut("GripVerticalIcon",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=ut("HelpCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=ut("ListIcon",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=ut("MousePointerIcon",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=ut("PackageIcon",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=ut("RefreshCwIcon",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ut("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),pi={class:"flex items-center gap-1 border-b border-slate-200 mb-6"},vi=["onClick"],mi={class:"flex items-center gap-2"},hi={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"},yi=$e({__name:"KnowledgeSubTabs",props:{modelValue:{},tabs:{}},emits:["update:modelValue"],setup(e){return(o,t)=>(C(),F("div",pi,[(C(!0),F(Ne,null,je(e.tabs,r=>(C(),F("button",{key:r.id,onClick:a=>o.$emit("update:modelValue",r.id),class:Se(["px-4 py-2.5 text-sm font-medium transition-all relative",[e.modelValue===r.id?"text-indigo-600":"text-slate-500 hover:text-slate-700"]])},[v("span",mi,[se(K(r.label)+" ",1),r.count!==void 0?(C(),F("span",{key:0,class:Se(["text-xs px-1.5 py-0.5 rounded-full",[e.modelValue===r.id?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-500"]])},K(r.count),3)):fe("",!0)]),e.modelValue===r.id?(C(),F("div",hi)):fe("",!0)],10,vi))),128))]))}}),kr=$e({__name:"Switch",props:{modelValue:{type:Boolean},disabled:{type:Boolean},className:{}},emits:["update:modelValue"],setup(e){return(o,t)=>(C(),we(x(kl),{checked:e.modelValue,"onUpdate:checked":t[0]||(t[0]=r=>o.$emit("update:modelValue",r)),disabled:e.disabled,class:Se(["peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",e.modelValue?"bg-emerald-500":"bg-slate-200",e.className])},{default:T(()=>[w(x(zl),{class:Se(["pointer-events-none block h-4 w-4 rounded-full bg-white shadow-lg ring-0 transition-transform",e.modelValue?"translate-x-5":"translate-x-0.5"])},null,8,["class"])]),_:1},8,["checked","disabled","class"]))}}),zr=(e,o)=>{const t=Math.abs(e)%100,r=t%10;return t>=11&&t<=19?o[2]:r===1?o[0]:r>=2&&r<=4?o[1]:o[2]},xi={class:"flex items-center justify-between gap-4"},bi={class:"flex items-center gap-4 min-w-0"},Si={class:"w-11 h-11 bg-indigo-50 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:bg-indigo-100 transition-colors"},wi={class:"min-w-0"},Ci={class:"font-bold text-slate-900 truncate"},$i={class:"text-xs text-slate-500 mt-0.5"},Ei={class:"font-mono text-slate-400"},Ri=$e({__name:"DirectoryCard",props:{directory:{}},emits:["click","toggle","settings"],setup(e,{emit:o}){const t=e,r=Re(()=>({qa:Ur,service_catalog:Ir,product_catalog:Hr,company_info:jr,custom:Do})[t.directory.template]||Do),a=Re(()=>zr(t.directory.items_count,["запись","записи","записей"]));return(s,n)=>(C(),F("div",{class:"bg-white rounded-2xl border border-slate-200 p-5 hover:border-slate-300 hover:shadow-sm transition-all cursor-pointer group",onClick:n[3]||(n[3]=l=>s.$emit("click"))},[v("div",xi,[v("div",bi,[v("div",Si,[(C(),we(qn(r.value),{class:"w-5 h-5 text-indigo-600"}))]),v("div",wi,[v("h4",Ci,K(e.directory.name),1),v("p",$i,[v("span",Ei,K(e.directory.tool_name),1),n[4]||(n[4]=v("span",{class:"mx-1.5"},"•",-1)),v("span",null,K(e.directory.items_count)+" "+K(a.value),1)])])]),v("div",{class:"flex items-center gap-3",onClick:n[2]||(n[2]=St(()=>{},["stop"]))},[v("button",{onClick:n[0]||(n[0]=l=>s.$emit("settings")),class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Настройки"},[w(x(Mr),{class:"w-4 h-4"})]),w(x(kr),{"model-value":e.directory.is_enabled,"onUpdate:modelValue":n[1]||(n[1]=l=>s.$emit("toggle",l)),title:e.directory.is_enabled?"Выключить":"Включить"},null,8,["model-value","title"])])])]))}}),Ii={class:"space-y-4"},Oi={class:"flex items-center justify-between gap-4"},Di={key:0,class:"relative"},Pi={key:0,class:"flex justify-center py-12"},Ti={key:1,class:"bg-red-50 rounded-2xl border border-red-200 p-8 text-center"},Fi={class:"max-w-md mx-auto"},Ai={class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},Mi={class:"text-red-600 mt-2 mb-4"},Vi={key:2,class:"bg-white rounded-2xl border border-slate-200 p-12 text-center shadow-sm"},Li={class:"max-w-md mx-auto"},Ni={class:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"},ji={key:3,class:"bg-white rounded-2xl border border-slate-200 p-8 text-center shadow-sm"},Gi={class:"text-slate-500"},Ui={key:4,class:"grid gap-3"},Hi=$e({__name:"DirectoriesList",props:{directories:{},loading:{type:Boolean},error:{}},emits:["create","select","toggle","settings","retry"],setup(e){const o=e,t=_(""),r=Re(()=>{if(!t.value.trim())return o.directories;const a=t.value.toLowerCase();return o.directories.filter(s=>s.name.toLowerCase().includes(a)||s.tool_name.toLowerCase().includes(a))});return(a,s)=>(C(),F("div",Ii,[v("div",Oi,[v("button",{onClick:s[0]||(s[0]=n=>a.$emit("create")),class:"flex items-center gap-2 px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition-colors shadow-sm shadow-indigo-200"},[w(x(xn),{class:"w-4 h-4"}),s[4]||(s[4]=se(" Создать справочник ",-1))]),e.directories.length>0?(C(),F("div",Di,[w(x(dn),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),Oe(v("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>t.value=n),type:"text",placeholder:"Поиск...",class:"pl-9 pr-4 py-2 w-48 text-sm border border-slate-200 rounded-xl bg-slate-50 focus:bg-white focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition-all"},null,512),[[Xe,t.value]])])):fe("",!0)]),e.loading?(C(),F("div",Pi,[w(x(Mt),{class:"w-8 h-8 animate-spin text-indigo-600"})])):e.error?(C(),F("div",Ti,[v("div",Fi,[v("div",Ai,[w(x(Vr),{class:"h-8 w-8 text-red-500"})]),s[5]||(s[5]=v("h3",{class:"text-lg font-bold text-red-900"},"Ошибка загрузки",-1)),v("p",Mi,K(e.error),1),s[6]||(s[6]=v("p",{class:"text-sm text-red-500 mb-4"}," Убедитесь, что API справочников реализован на бэкенде ",-1)),v("button",{onClick:s[2]||(s[2]=n=>a.$emit("retry")),class:"px-5 py-2.5 bg-red-600 text-white rounded-xl text-sm font-bold hover:bg-red-700 transition-colors"}," Повторить ")])])):e.directories.length===0?(C(),F("div",Vi,[v("div",Li,[v("div",Ni,[w(x(ui),{class:"h-8 w-8 text-slate-400"})]),s[7]||(s[7]=v("h3",{class:"text-lg font-bold text-slate-900"},"Справочников пока нет",-1)),s[8]||(s[8]=v("p",{class:"text-slate-500 mt-2 mb-6"}," Создайте справочник для хранения FAQ, каталога услуг или другой структурированной информации ",-1)),v("button",{onClick:s[3]||(s[3]=n=>a.$emit("create")),class:"px-6 py-3 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition-colors shadow-sm shadow-indigo-200"}," Создать справочник ")])])):r.value.length===0?(C(),F("div",ji,[v("p",Gi,'Ничего не найдено по запросу "'+K(t.value)+'"',1)])):(C(),F("div",Ui,[(C(!0),F(Ne,null,je(r.value,n=>(C(),we(Ri,{key:n.id,directory:n,onClick:l=>a.$emit("select",n),onToggle:l=>a.$emit("toggle",n.id,l),onSettings:l=>a.$emit("settings",n)},null,8,["directory","onClick","onToggle","onSettings"]))),128))]))]))}});/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Pt(e,o){return typeof e=="function"?e(o):e}function it(e,o){return t=>{o.setState(r=>({...r,[e]:Pt(t,r[e])}))}}function to(e){return e instanceof Function}function Bi(e){return Array.isArray(e)&&e.every(o=>typeof o=="number")}function ki(e,o){const t=[],r=a=>{a.forEach(s=>{t.push(s);const n=o(s);n!=null&&n.length&&r(n)})};return r(e),t}function de(e,o,t){let r=[],a;return s=>{let n;t.key&&t.debug&&(n=Date.now());const l=e(s);if(!(l.length!==r.length||l.some((f,g)=>r[g]!==f)))return a;r=l;let u;if(t.key&&t.debug&&(u=Date.now()),a=o(...l),t==null||t.onChange==null||t.onChange(a),t.key&&t.debug&&t!=null&&t.debug()){const f=Math.round((Date.now()-n)*100)/100,g=Math.round((Date.now()-u)*100)/100,c=g/16,d=(p,h)=>{for(p=String(p);p.length<h;)p=" "+p;return p};console.info(`%c⏱ ${d(g,5)} /${d(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*c,120))}deg 100% 31%);`,t==null?void 0:t.key)}return a}}function ce(e,o,t,r){return{debug:()=>{var a;return(a=e==null?void 0:e.debugAll)!=null?a:e[o]},key:!1,onChange:r}}function zi(e,o,t,r){const a=()=>{var n;return(n=s.getValue())!=null?n:e.options.renderFallbackValue},s={id:`${o.id}_${t.id}`,row:o,column:t,getValue:()=>o.getValue(r),renderValue:a,getContext:de(()=>[e,t,o,s],(n,l,i,u)=>({table:n,column:l,row:i,cell:u,getValue:u.getValue,renderValue:u.renderValue}),ce(e.options,"debugCells"))};return e._features.forEach(n=>{n.createCell==null||n.createCell(s,t,o,e)},{}),s}function Ki(e,o,t,r){var a,s;const l={...e._getDefaultColumnDef(),...o},i=l.accessorKey;let u=(a=(s=l.id)!=null?s:i?typeof String.prototype.replaceAll=="function"?i.replaceAll(".","_"):i.replace(/\./g,"_"):void 0)!=null?a:typeof l.header=="string"?l.header:void 0,f;if(l.accessorFn?f=l.accessorFn:i&&(i.includes(".")?f=c=>{let d=c;for(const h of i.split(".")){var p;d=(p=d)==null?void 0:p[h]}return d}:f=c=>c[l.accessorKey]),!u)throw new Error;let g={id:`${String(u)}`,accessorFn:f,parent:r,depth:t,columnDef:l,columns:[],getFlatColumns:de(()=>[!0],()=>{var c;return[g,...(c=g.columns)==null?void 0:c.flatMap(d=>d.getFlatColumns())]},ce(e.options,"debugColumns")),getLeafColumns:de(()=>[e._getOrderColumnsFn()],c=>{var d;if((d=g.columns)!=null&&d.length){let p=g.columns.flatMap(h=>h.getLeafColumns());return c(p)}return[g]},ce(e.options,"debugColumns"))};for(const c of e._features)c.createColumn==null||c.createColumn(g,e);return g}const qe="debugHeaders";function or(e,o,t){var r;let s={id:(r=t.id)!=null?r:o.id,column:o,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const n=[],l=i=>{i.subHeaders&&i.subHeaders.length&&i.subHeaders.map(l),n.push(i)};return l(s),n},getContext:()=>({table:e,header:s,column:o})};return e._features.forEach(n=>{n.createHeader==null||n.createHeader(s,e)}),s}const Wi={createTable:e=>{e.getHeaderGroups=de(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,r,a)=>{var s,n;const l=(s=r==null?void 0:r.map(g=>t.find(c=>c.id===g)).filter(Boolean))!=null?s:[],i=(n=a==null?void 0:a.map(g=>t.find(c=>c.id===g)).filter(Boolean))!=null?n:[],u=t.filter(g=>!(r!=null&&r.includes(g.id))&&!(a!=null&&a.includes(g.id)));return $n(o,[...l,...u,...i],e)},ce(e.options,qe)),e.getCenterHeaderGroups=de(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,r,a)=>(t=t.filter(s=>!(r!=null&&r.includes(s.id))&&!(a!=null&&a.includes(s.id))),$n(o,t,e,"center")),ce(e.options,qe)),e.getLeftHeaderGroups=de(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(o,t,r)=>{var a;const s=(a=r==null?void 0:r.map(n=>t.find(l=>l.id===n)).filter(Boolean))!=null?a:[];return $n(o,s,e,"left")},ce(e.options,qe)),e.getRightHeaderGroups=de(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(o,t,r)=>{var a;const s=(a=r==null?void 0:r.map(n=>t.find(l=>l.id===n)).filter(Boolean))!=null?a:[];return $n(o,s,e,"right")},ce(e.options,qe)),e.getFooterGroups=de(()=>[e.getHeaderGroups()],o=>[...o].reverse(),ce(e.options,qe)),e.getLeftFooterGroups=de(()=>[e.getLeftHeaderGroups()],o=>[...o].reverse(),ce(e.options,qe)),e.getCenterFooterGroups=de(()=>[e.getCenterHeaderGroups()],o=>[...o].reverse(),ce(e.options,qe)),e.getRightFooterGroups=de(()=>[e.getRightHeaderGroups()],o=>[...o].reverse(),ce(e.options,qe)),e.getFlatHeaders=de(()=>[e.getHeaderGroups()],o=>o.map(t=>t.headers).flat(),ce(e.options,qe)),e.getLeftFlatHeaders=de(()=>[e.getLeftHeaderGroups()],o=>o.map(t=>t.headers).flat(),ce(e.options,qe)),e.getCenterFlatHeaders=de(()=>[e.getCenterHeaderGroups()],o=>o.map(t=>t.headers).flat(),ce(e.options,qe)),e.getRightFlatHeaders=de(()=>[e.getRightHeaderGroups()],o=>o.map(t=>t.headers).flat(),ce(e.options,qe)),e.getCenterLeafHeaders=de(()=>[e.getCenterFlatHeaders()],o=>o.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),ce(e.options,qe)),e.getLeftLeafHeaders=de(()=>[e.getLeftFlatHeaders()],o=>o.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),ce(e.options,qe)),e.getRightLeafHeaders=de(()=>[e.getRightFlatHeaders()],o=>o.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),ce(e.options,qe)),e.getLeafHeaders=de(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(o,t,r)=>{var a,s,n,l,i,u;return[...(a=(s=o[0])==null?void 0:s.headers)!=null?a:[],...(n=(l=t[0])==null?void 0:l.headers)!=null?n:[],...(i=(u=r[0])==null?void 0:u.headers)!=null?i:[]].map(f=>f.getLeafHeaders()).flat()},ce(e.options,qe))}};function $n(e,o,t,r){var a,s;let n=0;const l=function(c,d){d===void 0&&(d=1),n=Math.max(n,d),c.filter(p=>p.getIsVisible()).forEach(p=>{var h;(h=p.columns)!=null&&h.length&&l(p.columns,d+1)},0)};l(e);let i=[];const u=(c,d)=>{const p={depth:d,id:[r,`${d}`].filter(Boolean).join("_"),headers:[]},h=[];c.forEach(m=>{const y=[...h].reverse()[0],S=m.column.depth===p.depth;let O,R=!1;if(S&&m.column.parent?O=m.column.parent:(O=m.column,R=!0),y&&(y==null?void 0:y.column)===O)y.subHeaders.push(m);else{const P=or(t,O,{id:[r,d,O.id,m==null?void 0:m.id].filter(Boolean).join("_"),isPlaceholder:R,placeholderId:R?`${h.filter(A=>A.column===O).length}`:void 0,depth:d,index:h.length});P.subHeaders.push(m),h.push(P)}p.headers.push(m),m.headerGroup=p}),i.push(p),d>0&&u(h,d-1)},f=o.map((c,d)=>or(t,c,{depth:n,index:d}));u(f,n-1),i.reverse();const g=c=>c.filter(p=>p.column.getIsVisible()).map(p=>{let h=0,m=0,y=[0];p.subHeaders&&p.subHeaders.length?(y=[],g(p.subHeaders).forEach(O=>{let{colSpan:R,rowSpan:P}=O;h+=R,y.push(P)})):h=1;const S=Math.min(...y);return m=m+S,p.colSpan=h,p.rowSpan=m,{colSpan:h,rowSpan:m}});return g((a=(s=i[0])==null?void 0:s.headers)!=null?a:[]),i}const Ko=(e,o,t,r,a,s,n)=>{let l={id:o,index:r,original:t,depth:a,parentId:n,_valuesCache:{},_uniqueValuesCache:{},getValue:i=>{if(l._valuesCache.hasOwnProperty(i))return l._valuesCache[i];const u=e.getColumn(i);if(u!=null&&u.accessorFn)return l._valuesCache[i]=u.accessorFn(l.original,r),l._valuesCache[i]},getUniqueValues:i=>{if(l._uniqueValuesCache.hasOwnProperty(i))return l._uniqueValuesCache[i];const u=e.getColumn(i);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(l._uniqueValuesCache[i]=u.columnDef.getUniqueValues(l.original,r),l._uniqueValuesCache[i]):(l._uniqueValuesCache[i]=[l.getValue(i)],l._uniqueValuesCache[i])},renderValue:i=>{var u;return(u=l.getValue(i))!=null?u:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>ki(l.subRows,i=>i.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let i=[],u=l;for(;;){const f=u.getParentRow();if(!f)break;i.push(f),u=f}return i.reverse()},getAllCells:de(()=>[e.getAllLeafColumns()],i=>i.map(u=>zi(e,l,u,u.id)),ce(e.options,"debugRows")),_getAllCellsByColumnId:de(()=>[l.getAllCells()],i=>i.reduce((u,f)=>(u[f.column.id]=f,u),{}),ce(e.options,"debugRows"))};for(let i=0;i<e._features.length;i++){const u=e._features[i];u==null||u.createRow==null||u.createRow(l,e)}return l},Xi={createColumn:(e,o)=>{e._getFacetedRowModel=o.options.getFacetedRowModel&&o.options.getFacetedRowModel(o,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():o.getPreFilteredRowModel(),e._getFacetedUniqueValues=o.options.getFacetedUniqueValues&&o.options.getFacetedUniqueValues(o,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=o.options.getFacetedMinMaxValues&&o.options.getFacetedMinMaxValues(o,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Kr=(e,o,t)=>{var r,a;const s=t==null||(r=t.toString())==null?void 0:r.toLowerCase();return!!(!((a=e.getValue(o))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(s))};Kr.autoRemove=e=>yt(e);const Wr=(e,o,t)=>{var r;return!!(!((r=e.getValue(o))==null||(r=r.toString())==null)&&r.includes(t))};Wr.autoRemove=e=>yt(e);const Xr=(e,o,t)=>{var r;return((r=e.getValue(o))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(t==null?void 0:t.toLowerCase())};Xr.autoRemove=e=>yt(e);const Yr=(e,o,t)=>{var r;return(r=e.getValue(o))==null?void 0:r.includes(t)};Yr.autoRemove=e=>yt(e);const Qr=(e,o,t)=>!t.some(r=>{var a;return!((a=e.getValue(o))!=null&&a.includes(r))});Qr.autoRemove=e=>yt(e)||!(e!=null&&e.length);const Jr=(e,o,t)=>t.some(r=>{var a;return(a=e.getValue(o))==null?void 0:a.includes(r)});Jr.autoRemove=e=>yt(e)||!(e!=null&&e.length);const Zr=(e,o,t)=>e.getValue(o)===t;Zr.autoRemove=e=>yt(e);const qr=(e,o,t)=>e.getValue(o)==t;qr.autoRemove=e=>yt(e);const Wo=(e,o,t)=>{let[r,a]=t;const s=e.getValue(o);return s>=r&&s<=a};Wo.resolveFilterValue=e=>{let[o,t]=e,r=typeof o!="number"?parseFloat(o):o,a=typeof t!="number"?parseFloat(t):t,s=o===null||Number.isNaN(r)?-1/0:r,n=t===null||Number.isNaN(a)?1/0:a;if(s>n){const l=s;s=n,n=l}return[s,n]};Wo.autoRemove=e=>yt(e)||yt(e[0])&&yt(e[1]);const $t={includesString:Kr,includesStringSensitive:Wr,equalsString:Xr,arrIncludes:Yr,arrIncludesAll:Qr,arrIncludesSome:Jr,equals:Zr,weakEquals:qr,inNumberRange:Wo};function yt(e){return e==null||e===""}const Yi={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:it("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,o)=>{e.getAutoFilterFn=()=>{const t=o.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(e.id);return typeof r=="string"?$t.includesString:typeof r=="number"?$t.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?$t.equals:Array.isArray(r)?$t.arrIncludes:$t.weakEquals},e.getFilterFn=()=>{var t,r;return to(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(t=(r=o.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?t:$t[e.columnDef.filterFn]},e.getCanFilter=()=>{var t,r,a;return((t=e.columnDef.enableColumnFilter)!=null?t:!0)&&((r=o.options.enableColumnFilters)!=null?r:!0)&&((a=o.options.enableFilters)!=null?a:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var t;return(t=o.getState().columnFilters)==null||(t=t.find(r=>r.id===e.id))==null?void 0:t.value},e.getFilterIndex=()=>{var t,r;return(t=(r=o.getState().columnFilters)==null?void 0:r.findIndex(a=>a.id===e.id))!=null?t:-1},e.setFilterValue=t=>{o.setColumnFilters(r=>{const a=e.getFilterFn(),s=r==null?void 0:r.find(f=>f.id===e.id),n=Pt(t,s?s.value:void 0);if(rr(a,n,e)){var l;return(l=r==null?void 0:r.filter(f=>f.id!==e.id))!=null?l:[]}const i={id:e.id,value:n};if(s){var u;return(u=r==null?void 0:r.map(f=>f.id===e.id?i:f))!=null?u:[]}return r!=null&&r.length?[...r,i]:[i]})}},createRow:(e,o)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=o=>{const t=e.getAllLeafColumns(),r=a=>{var s;return(s=Pt(o,a))==null?void 0:s.filter(n=>{const l=t.find(i=>i.id===n.id);if(l){const i=l.getFilterFn();if(rr(i,n.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=o=>{var t,r;e.setColumnFilters(o?[]:(t=(r=e.initialState)==null?void 0:r.columnFilters)!=null?t:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function rr(e,o,t){return(e&&e.autoRemove?e.autoRemove(o,t):!1)||typeof o>"u"||typeof o=="string"&&!o}const Qi=(e,o,t)=>t.reduce((r,a)=>{const s=a.getValue(e);return r+(typeof s=="number"?s:0)},0),Ji=(e,o,t)=>{let r;return t.forEach(a=>{const s=a.getValue(e);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},Zi=(e,o,t)=>{let r;return t.forEach(a=>{const s=a.getValue(e);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},qi=(e,o,t)=>{let r,a;return t.forEach(s=>{const n=s.getValue(e);n!=null&&(r===void 0?n>=n&&(r=a=n):(r>n&&(r=n),a<n&&(a=n)))}),[r,a]},_i=(e,o)=>{let t=0,r=0;if(o.forEach(a=>{let s=a.getValue(e);s!=null&&(s=+s)>=s&&(++t,r+=s)}),t)return r/t},eu=(e,o)=>{if(!o.length)return;const t=o.map(s=>s.getValue(e));if(!Bi(t))return;if(t.length===1)return t[0];const r=Math.floor(t.length/2),a=t.sort((s,n)=>s-n);return t.length%2!==0?a[r]:(a[r-1]+a[r])/2},tu=(e,o)=>Array.from(new Set(o.map(t=>t.getValue(e))).values()),nu=(e,o)=>new Set(o.map(t=>t.getValue(e))).size,ou=(e,o)=>o.length,so={sum:Qi,min:Ji,max:Zi,extent:qi,mean:_i,median:eu,unique:tu,uniqueCount:nu,count:ou},ru={getDefaultColumnDef:()=>({aggregatedCell:e=>{var o,t;return(o=(t=e.getValue())==null||t.toString==null?void 0:t.toString())!=null?o:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:it("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,o)=>{e.toggleGrouping=()=>{o.setGrouping(t=>t!=null&&t.includes(e.id)?t.filter(r=>r!==e.id):[...t??[],e.id])},e.getCanGroup=()=>{var t,r;return((t=e.columnDef.enableGrouping)!=null?t:!0)&&((r=o.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var t;return(t=o.getState().grouping)==null?void 0:t.includes(e.id)},e.getGroupedIndex=()=>{var t;return(t=o.getState().grouping)==null?void 0:t.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const t=o.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(e.id);if(typeof r=="number")return so.sum;if(Object.prototype.toString.call(r)==="[object Date]")return so.extent},e.getAggregationFn=()=>{var t,r;if(!e)throw new Error;return to(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(t=(r=o.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?t:so[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=o=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(o),e.resetGrouping=o=>{var t,r;e.setGrouping(o?[]:(t=(r=e.initialState)==null?void 0:r.grouping)!=null?t:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,o)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=t=>{if(e._groupingValuesCache.hasOwnProperty(t))return e._groupingValuesCache[t];const r=o.getColumn(t);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[t]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[t]):e.getValue(t)},e._groupingValuesCache={}},createCell:(e,o,t,r)=>{e.getIsGrouped=()=>o.getIsGrouped()&&o.id===t.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&o.getIsGrouped(),e.getIsAggregated=()=>{var a;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((a=t.subRows)!=null&&a.length)}}};function au(e,o,t){if(!(o!=null&&o.length)||!t)return e;const r=e.filter(s=>!o.includes(s.id));return t==="remove"?r:[...o.map(s=>e.find(n=>n.id===s)).filter(Boolean),...r]}const su={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:it("columnOrder",e)}),createColumn:(e,o)=>{e.getIndex=de(t=>[cn(o,t)],t=>t.findIndex(r=>r.id===e.id),ce(o.options,"debugColumns")),e.getIsFirstColumn=t=>{var r;return((r=cn(o,t)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=t=>{var r;const a=cn(o,t);return((r=a[a.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=o=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(o),e.resetColumnOrder=o=>{var t;e.setColumnOrder(o?[]:(t=e.initialState.columnOrder)!=null?t:[])},e._getOrderColumnsFn=de(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(o,t,r)=>a=>{let s=[];if(!(o!=null&&o.length))s=a;else{const n=[...o],l=[...a];for(;l.length&&n.length;){const i=n.shift(),u=l.findIndex(f=>f.id===i);u>-1&&s.push(l.splice(u,1)[0])}s=[...s,...l]}return au(s,t,r)},ce(e.options,"debugTable"))}},lo=()=>({left:[],right:[]}),lu={getInitialState:e=>({columnPinning:lo(),...e}),getDefaultOptions:e=>({onColumnPinningChange:it("columnPinning",e)}),createColumn:(e,o)=>{e.pin=t=>{const r=e.getLeafColumns().map(a=>a.id).filter(Boolean);o.setColumnPinning(a=>{var s,n;if(t==="right"){var l,i;return{left:((l=a==null?void 0:a.left)!=null?l:[]).filter(g=>!(r!=null&&r.includes(g))),right:[...((i=a==null?void 0:a.right)!=null?i:[]).filter(g=>!(r!=null&&r.includes(g))),...r]}}if(t==="left"){var u,f;return{left:[...((u=a==null?void 0:a.left)!=null?u:[]).filter(g=>!(r!=null&&r.includes(g))),...r],right:((f=a==null?void 0:a.right)!=null?f:[]).filter(g=>!(r!=null&&r.includes(g)))}}return{left:((s=a==null?void 0:a.left)!=null?s:[]).filter(g=>!(r!=null&&r.includes(g))),right:((n=a==null?void 0:a.right)!=null?n:[]).filter(g=>!(r!=null&&r.includes(g)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var a,s,n;return((a=r.columnDef.enablePinning)!=null?a:!0)&&((s=(n=o.options.enableColumnPinning)!=null?n:o.options.enablePinning)!=null?s:!0)}),e.getIsPinned=()=>{const t=e.getLeafColumns().map(l=>l.id),{left:r,right:a}=o.getState().columnPinning,s=t.some(l=>r==null?void 0:r.includes(l)),n=t.some(l=>a==null?void 0:a.includes(l));return s?"left":n?"right":!1},e.getPinnedIndex=()=>{var t,r;const a=e.getIsPinned();return a?(t=(r=o.getState().columnPinning)==null||(r=r[a])==null?void 0:r.indexOf(e.id))!=null?t:-1:0}},createRow:(e,o)=>{e.getCenterVisibleCells=de(()=>[e._getAllVisibleCells(),o.getState().columnPinning.left,o.getState().columnPinning.right],(t,r,a)=>{const s=[...r??[],...a??[]];return t.filter(n=>!s.includes(n.column.id))},ce(o.options,"debugRows")),e.getLeftVisibleCells=de(()=>[e._getAllVisibleCells(),o.getState().columnPinning.left],(t,r)=>(r??[]).map(s=>t.find(n=>n.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),ce(o.options,"debugRows")),e.getRightVisibleCells=de(()=>[e._getAllVisibleCells(),o.getState().columnPinning.right],(t,r)=>(r??[]).map(s=>t.find(n=>n.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),ce(o.options,"debugRows"))},createTable:e=>{e.setColumnPinning=o=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(o),e.resetColumnPinning=o=>{var t,r;return e.setColumnPinning(o?lo():(t=(r=e.initialState)==null?void 0:r.columnPinning)!=null?t:lo())},e.getIsSomeColumnsPinned=o=>{var t;const r=e.getState().columnPinning;if(!o){var a,s;return!!((a=r.left)!=null&&a.length||(s=r.right)!=null&&s.length)}return!!((t=r[o])!=null&&t.length)},e.getLeftLeafColumns=de(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(o,t)=>(t??[]).map(r=>o.find(a=>a.id===r)).filter(Boolean),ce(e.options,"debugColumns")),e.getRightLeafColumns=de(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(o,t)=>(t??[]).map(r=>o.find(a=>a.id===r)).filter(Boolean),ce(e.options,"debugColumns")),e.getCenterLeafColumns=de(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,r)=>{const a=[...t??[],...r??[]];return o.filter(s=>!a.includes(s.id))},ce(e.options,"debugColumns"))}};function iu(e){return e||(typeof document<"u"?document:null)}const En={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},io=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),uu={getDefaultColumnDef:()=>En,getInitialState:e=>({columnSizing:{},columnSizingInfo:io(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:it("columnSizing",e),onColumnSizingInfoChange:it("columnSizingInfo",e)}),createColumn:(e,o)=>{e.getSize=()=>{var t,r,a;const s=o.getState().columnSizing[e.id];return Math.min(Math.max((t=e.columnDef.minSize)!=null?t:En.minSize,(r=s??e.columnDef.size)!=null?r:En.size),(a=e.columnDef.maxSize)!=null?a:En.maxSize)},e.getStart=de(t=>[t,cn(o,t),o.getState().columnSizing],(t,r)=>r.slice(0,e.getIndex(t)).reduce((a,s)=>a+s.getSize(),0),ce(o.options,"debugColumns")),e.getAfter=de(t=>[t,cn(o,t),o.getState().columnSizing],(t,r)=>r.slice(e.getIndex(t)+1).reduce((a,s)=>a+s.getSize(),0),ce(o.options,"debugColumns")),e.resetSize=()=>{o.setColumnSizing(t=>{let{[e.id]:r,...a}=t;return a})},e.getCanResize=()=>{var t,r;return((t=e.columnDef.enableResizing)!=null?t:!0)&&((r=o.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>o.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,o)=>{e.getSize=()=>{let t=0;const r=a=>{if(a.subHeaders.length)a.subHeaders.forEach(r);else{var s;t+=(s=a.column.getSize())!=null?s:0}};return r(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=t=>{const r=o.getColumn(e.column.id),a=r==null?void 0:r.getCanResize();return s=>{if(!r||!a||(s.persist==null||s.persist(),uo(s)&&s.touches&&s.touches.length>1))return;const n=e.getSize(),l=e?e.getLeafHeaders().map(y=>[y.column.id,y.column.getSize()]):[[r.id,r.getSize()]],i=uo(s)?Math.round(s.touches[0].clientX):s.clientX,u={},f=(y,S)=>{typeof S=="number"&&(o.setColumnSizingInfo(O=>{var R,P;const A=o.options.columnResizeDirection==="rtl"?-1:1,X=(S-((R=O==null?void 0:O.startOffset)!=null?R:0))*A,ee=Math.max(X/((P=O==null?void 0:O.startSize)!=null?P:0),-.999999);return O.columnSizingStart.forEach(E=>{let[b,V]=E;u[b]=Math.round(Math.max(V+V*ee,0)*100)/100}),{...O,deltaOffset:X,deltaPercentage:ee}}),(o.options.columnResizeMode==="onChange"||y==="end")&&o.setColumnSizing(O=>({...O,...u})))},g=y=>f("move",y),c=y=>{f("end",y),o.setColumnSizingInfo(S=>({...S,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},d=iu(t),p={moveHandler:y=>g(y.clientX),upHandler:y=>{d==null||d.removeEventListener("mousemove",p.moveHandler),d==null||d.removeEventListener("mouseup",p.upHandler),c(y.clientX)}},h={moveHandler:y=>(y.cancelable&&(y.preventDefault(),y.stopPropagation()),g(y.touches[0].clientX),!1),upHandler:y=>{var S;d==null||d.removeEventListener("touchmove",h.moveHandler),d==null||d.removeEventListener("touchend",h.upHandler),y.cancelable&&(y.preventDefault(),y.stopPropagation()),c((S=y.touches[0])==null?void 0:S.clientX)}},m=du()?{passive:!1}:!1;uo(s)?(d==null||d.addEventListener("touchmove",h.moveHandler,m),d==null||d.addEventListener("touchend",h.upHandler,m)):(d==null||d.addEventListener("mousemove",p.moveHandler,m),d==null||d.addEventListener("mouseup",p.upHandler,m)),o.setColumnSizingInfo(y=>({...y,startOffset:i,startSize:n,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=o=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(o),e.setColumnSizingInfo=o=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(o),e.resetColumnSizing=o=>{var t;e.setColumnSizing(o?{}:(t=e.initialState.columnSizing)!=null?t:{})},e.resetHeaderSizeInfo=o=>{var t;e.setColumnSizingInfo(o?io():(t=e.initialState.columnSizingInfo)!=null?t:io())},e.getTotalSize=()=>{var o,t;return(o=(t=e.getHeaderGroups()[0])==null?void 0:t.headers.reduce((r,a)=>r+a.getSize(),0))!=null?o:0},e.getLeftTotalSize=()=>{var o,t;return(o=(t=e.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((r,a)=>r+a.getSize(),0))!=null?o:0},e.getCenterTotalSize=()=>{var o,t;return(o=(t=e.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((r,a)=>r+a.getSize(),0))!=null?o:0},e.getRightTotalSize=()=>{var o,t;return(o=(t=e.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((r,a)=>r+a.getSize(),0))!=null?o:0}}};let Rn=null;function du(){if(typeof Rn=="boolean")return Rn;let e=!1;try{const o={get passive(){return e=!0,!1}},t=()=>{};window.addEventListener("test",t,o),window.removeEventListener("test",t)}catch{e=!1}return Rn=e,Rn}function uo(e){return e.type==="touchstart"}const cu={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:it("columnVisibility",e)}),createColumn:(e,o)=>{e.toggleVisibility=t=>{e.getCanHide()&&o.setColumnVisibility(r=>({...r,[e.id]:t??!e.getIsVisible()}))},e.getIsVisible=()=>{var t,r;const a=e.columns;return(t=a.length?a.some(s=>s.getIsVisible()):(r=o.getState().columnVisibility)==null?void 0:r[e.id])!=null?t:!0},e.getCanHide=()=>{var t,r;return((t=e.columnDef.enableHiding)!=null?t:!0)&&((r=o.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>t=>{e.toggleVisibility==null||e.toggleVisibility(t.target.checked)}},createRow:(e,o)=>{e._getAllVisibleCells=de(()=>[e.getAllCells(),o.getState().columnVisibility],t=>t.filter(r=>r.column.getIsVisible()),ce(o.options,"debugRows")),e.getVisibleCells=de(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(t,r,a)=>[...t,...r,...a],ce(o.options,"debugRows"))},createTable:e=>{const o=(t,r)=>de(()=>[r(),r().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),ce(e.options,"debugColumns"));e.getVisibleFlatColumns=o("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=o("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=o("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=o("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=o("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var r;e.setColumnVisibility(t?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=t=>{var r;t=(r=t)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((a,s)=>({...a,[s.id]:t||!(s.getCanHide!=null&&s.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;e.toggleAllColumnsVisible((r=t.target)==null?void 0:r.checked)}}};function cn(e,o){return o?o==="center"?e.getCenterVisibleLeafColumns():o==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const fu={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},gu={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:it("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:o=>{var t;const r=(t=e.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[o.id])==null?void 0:t.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,o)=>{e.getCanGlobalFilter=()=>{var t,r,a,s;return((t=e.columnDef.enableGlobalFilter)!=null?t:!0)&&((r=o.options.enableGlobalFilter)!=null?r:!0)&&((a=o.options.enableFilters)!=null?a:!0)&&((s=o.options.getColumnCanGlobalFilter==null?void 0:o.options.getColumnCanGlobalFilter(e))!=null?s:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>$t.includesString,e.getGlobalFilterFn=()=>{var o,t;const{globalFilterFn:r}=e.options;return to(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(o=(t=e.options.filterFns)==null?void 0:t[r])!=null?o:$t[r]},e.setGlobalFilter=o=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(o)},e.resetGlobalFilter=o=>{e.setGlobalFilter(o?void 0:e.initialState.globalFilter)}}},pu={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:it("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let o=!1,t=!1;e._autoResetExpanded=()=>{var r,a;if(!o){e._queue(()=>{o=!0});return}if((r=(a=e.options.autoResetAll)!=null?a:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(t)return;t=!0,e._queue(()=>{e.resetExpanded(),t=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var a,s;e.setExpanded(r?{}:(a=(s=e.initialState)==null?void 0:s.expanded)!=null?a:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(s=>{const n=s.split(".");r=Math.max(r,n.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,o)=>{e.toggleExpanded=t=>{o.setExpanded(r=>{var a;const s=r===!0?!0:!!(r!=null&&r[e.id]);let n={};if(r===!0?Object.keys(o.getRowModel().rowsById).forEach(l=>{n[l]=!0}):n=r,t=(a=t)!=null?a:!s,!s&&t)return{...n,[e.id]:!0};if(s&&!t){const{[e.id]:l,...i}=n;return i}return r})},e.getIsExpanded=()=>{var t;const r=o.getState().expanded;return!!((t=o.options.getIsRowExpanded==null?void 0:o.options.getIsRowExpanded(e))!=null?t:r===!0||r!=null&&r[e.id])},e.getCanExpand=()=>{var t,r,a;return(t=o.options.getRowCanExpand==null?void 0:o.options.getRowCanExpand(e))!=null?t:((r=o.options.enableExpanding)!=null?r:!0)&&!!((a=e.subRows)!=null&&a.length)},e.getIsAllParentsExpanded=()=>{let t=!0,r=e;for(;t&&r.parentId;)r=o.getRow(r.parentId,!0),t=r.getIsExpanded();return t},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},Po=0,To=10,co=()=>({pageIndex:Po,pageSize:To}),vu={getInitialState:e=>({...e,pagination:{...co(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:it("pagination",e)}),createTable:e=>{let o=!1,t=!1;e._autoResetPageIndex=()=>{var r,a;if(!o){e._queue(()=>{o=!0});return}if((r=(a=e.options.autoResetAll)!=null?a:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(t)return;t=!0,e._queue(()=>{e.resetPageIndex(),t=!1})}},e.setPagination=r=>{const a=s=>Pt(r,s);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(a)},e.resetPagination=r=>{var a;e.setPagination(r?co():(a=e.initialState.pagination)!=null?a:co())},e.setPageIndex=r=>{e.setPagination(a=>{let s=Pt(r,a.pageIndex);const n=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return s=Math.max(0,Math.min(s,n)),{...a,pageIndex:s}})},e.resetPageIndex=r=>{var a,s;e.setPageIndex(r?Po:(a=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?a:Po)},e.resetPageSize=r=>{var a,s;e.setPageSize(r?To:(a=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?a:To)},e.setPageSize=r=>{e.setPagination(a=>{const s=Math.max(1,Pt(r,a.pageSize)),n=a.pageSize*a.pageIndex,l=Math.floor(n/s);return{...a,pageIndex:l,pageSize:s}})},e.setPageCount=r=>e.setPagination(a=>{var s;let n=Pt(r,(s=e.options.pageCount)!=null?s:-1);return typeof n=="number"&&(n=Math.max(-1,n)),{...a,pageCount:n}}),e.getPageOptions=de(()=>[e.getPageCount()],r=>{let a=[];return r&&r>0&&(a=[...new Array(r)].fill(null).map((s,n)=>n)),a},ce(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,a=e.getPageCount();return a===-1?!0:a===0?!1:r<a-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},fo=()=>({top:[],bottom:[]}),mu={getInitialState:e=>({rowPinning:fo(),...e}),getDefaultOptions:e=>({onRowPinningChange:it("rowPinning",e)}),createRow:(e,o)=>{e.pin=(t,r,a)=>{const s=r?e.getLeafRows().map(i=>{let{id:u}=i;return u}):[],n=a?e.getParentRows().map(i=>{let{id:u}=i;return u}):[],l=new Set([...n,e.id,...s]);o.setRowPinning(i=>{var u,f;if(t==="bottom"){var g,c;return{top:((g=i==null?void 0:i.top)!=null?g:[]).filter(h=>!(l!=null&&l.has(h))),bottom:[...((c=i==null?void 0:i.bottom)!=null?c:[]).filter(h=>!(l!=null&&l.has(h))),...Array.from(l)]}}if(t==="top"){var d,p;return{top:[...((d=i==null?void 0:i.top)!=null?d:[]).filter(h=>!(l!=null&&l.has(h))),...Array.from(l)],bottom:((p=i==null?void 0:i.bottom)!=null?p:[]).filter(h=>!(l!=null&&l.has(h)))}}return{top:((u=i==null?void 0:i.top)!=null?u:[]).filter(h=>!(l!=null&&l.has(h))),bottom:((f=i==null?void 0:i.bottom)!=null?f:[]).filter(h=>!(l!=null&&l.has(h)))}})},e.getCanPin=()=>{var t;const{enableRowPinning:r,enablePinning:a}=o.options;return typeof r=="function"?r(e):(t=r??a)!=null?t:!0},e.getIsPinned=()=>{const t=[e.id],{top:r,bottom:a}=o.getState().rowPinning,s=t.some(l=>r==null?void 0:r.includes(l)),n=t.some(l=>a==null?void 0:a.includes(l));return s?"top":n?"bottom":!1},e.getPinnedIndex=()=>{var t,r;const a=e.getIsPinned();if(!a)return-1;const s=(t=a==="top"?o.getTopRows():o.getBottomRows())==null?void 0:t.map(n=>{let{id:l}=n;return l});return(r=s==null?void 0:s.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=o=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(o),e.resetRowPinning=o=>{var t,r;return e.setRowPinning(o?fo():(t=(r=e.initialState)==null?void 0:r.rowPinning)!=null?t:fo())},e.getIsSomeRowsPinned=o=>{var t;const r=e.getState().rowPinning;if(!o){var a,s;return!!((a=r.top)!=null&&a.length||(s=r.bottom)!=null&&s.length)}return!!((t=r[o])!=null&&t.length)},e._getPinnedRows=(o,t,r)=>{var a;return((a=e.options.keepPinnedRows)==null||a?(t??[]).map(n=>{const l=e.getRow(n,!0);return l.getIsAllParentsExpanded()?l:null}):(t??[]).map(n=>o.find(l=>l.id===n))).filter(Boolean).map(n=>({...n,position:r}))},e.getTopRows=de(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(o,t)=>e._getPinnedRows(o,t,"top"),ce(e.options,"debugRows")),e.getBottomRows=de(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(o,t)=>e._getPinnedRows(o,t,"bottom"),ce(e.options,"debugRows")),e.getCenterRows=de(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(o,t,r)=>{const a=new Set([...t??[],...r??[]]);return o.filter(s=>!a.has(s.id))},ce(e.options,"debugRows"))}},hu={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:it("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=o=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(o),e.resetRowSelection=o=>{var t;return e.setRowSelection(o?{}:(t=e.initialState.rowSelection)!=null?t:{})},e.toggleAllRowsSelected=o=>{e.setRowSelection(t=>{o=typeof o<"u"?o:!e.getIsAllRowsSelected();const r={...t},a=e.getPreGroupedRowModel().flatRows;return o?a.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):a.forEach(s=>{delete r[s.id]}),r})},e.toggleAllPageRowsSelected=o=>e.setRowSelection(t=>{const r=typeof o<"u"?o:!e.getIsAllPageRowsSelected(),a={...t};return e.getRowModel().rows.forEach(s=>{Fo(a,s.id,r,!0,e)}),a}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=de(()=>[e.getState().rowSelection,e.getCoreRowModel()],(o,t)=>Object.keys(o).length?go(e,t):{rows:[],flatRows:[],rowsById:{}},ce(e.options,"debugTable")),e.getFilteredSelectedRowModel=de(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(o,t)=>Object.keys(o).length?go(e,t):{rows:[],flatRows:[],rowsById:{}},ce(e.options,"debugTable")),e.getGroupedSelectedRowModel=de(()=>[e.getState().rowSelection,e.getSortedRowModel()],(o,t)=>Object.keys(o).length?go(e,t):{rows:[],flatRows:[],rowsById:{}},ce(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const o=e.getFilteredRowModel().flatRows,{rowSelection:t}=e.getState();let r=!!(o.length&&Object.keys(t).length);return r&&o.some(a=>a.getCanSelect()&&!t[a.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const o=e.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:t}=e.getState();let r=!!o.length;return r&&o.some(a=>!t[a.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var o;const t=Object.keys((o=e.getState().rowSelection)!=null?o:{}).length;return t>0&&t<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const o=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:o.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>o=>{e.toggleAllRowsSelected(o.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>o=>{e.toggleAllPageRowsSelected(o.target.checked)}},createRow:(e,o)=>{e.toggleSelected=(t,r)=>{const a=e.getIsSelected();o.setRowSelection(s=>{var n;if(t=typeof t<"u"?t:!a,e.getCanSelect()&&a===t)return s;const l={...s};return Fo(l,e.id,t,(n=r==null?void 0:r.selectChildren)!=null?n:!0,o),l})},e.getIsSelected=()=>{const{rowSelection:t}=o.getState();return Xo(e,t)},e.getIsSomeSelected=()=>{const{rowSelection:t}=o.getState();return Ao(e,t)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=o.getState();return Ao(e,t)==="all"},e.getCanSelect=()=>{var t;return typeof o.options.enableRowSelection=="function"?o.options.enableRowSelection(e):(t=o.options.enableRowSelection)!=null?t:!0},e.getCanSelectSubRows=()=>{var t;return typeof o.options.enableSubRowSelection=="function"?o.options.enableSubRowSelection(e):(t=o.options.enableSubRowSelection)!=null?t:!0},e.getCanMultiSelect=()=>{var t;return typeof o.options.enableMultiRowSelection=="function"?o.options.enableMultiRowSelection(e):(t=o.options.enableMultiRowSelection)!=null?t:!0},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return r=>{var a;t&&e.toggleSelected((a=r.target)==null?void 0:a.checked)}}}},Fo=(e,o,t,r,a)=>{var s;const n=a.getRow(o,!0);t?(n.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),n.getCanSelect()&&(e[o]=!0)):delete e[o],r&&(s=n.subRows)!=null&&s.length&&n.getCanSelectSubRows()&&n.subRows.forEach(l=>Fo(e,l.id,t,r,a))};function go(e,o){const t=e.getState().rowSelection,r=[],a={},s=function(n,l){return n.map(i=>{var u;const f=Xo(i,t);if(f&&(r.push(i),a[i.id]=i),(u=i.subRows)!=null&&u.length&&(i={...i,subRows:s(i.subRows)}),f)return i}).filter(Boolean)};return{rows:s(o.rows),flatRows:r,rowsById:a}}function Xo(e,o){var t;return(t=o[e.id])!=null?t:!1}function Ao(e,o,t){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let a=!0,s=!1;return e.subRows.forEach(n=>{if(!(s&&!a)&&(n.getCanSelect()&&(Xo(n,o)?s=!0:a=!1),n.subRows&&n.subRows.length)){const l=Ao(n,o);l==="all"?s=!0:(l==="some"&&(s=!0),a=!1)}}),a?"all":s?"some":!1}const Mo=/([0-9]+)/gm,yu=(e,o,t)=>_r(At(e.getValue(t)).toLowerCase(),At(o.getValue(t)).toLowerCase()),xu=(e,o,t)=>_r(At(e.getValue(t)),At(o.getValue(t))),bu=(e,o,t)=>Yo(At(e.getValue(t)).toLowerCase(),At(o.getValue(t)).toLowerCase()),Su=(e,o,t)=>Yo(At(e.getValue(t)),At(o.getValue(t))),wu=(e,o,t)=>{const r=e.getValue(t),a=o.getValue(t);return r>a?1:r<a?-1:0},Cu=(e,o,t)=>Yo(e.getValue(t),o.getValue(t));function Yo(e,o){return e===o?0:e>o?1:-1}function At(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function _r(e,o){const t=e.split(Mo).filter(Boolean),r=o.split(Mo).filter(Boolean);for(;t.length&&r.length;){const a=t.shift(),s=r.shift(),n=parseInt(a,10),l=parseInt(s,10),i=[n,l].sort();if(isNaN(i[0])){if(a>s)return 1;if(s>a)return-1;continue}if(isNaN(i[1]))return isNaN(n)?-1:1;if(n>l)return 1;if(l>n)return-1}return t.length-r.length}const en={alphanumeric:yu,alphanumericCaseSensitive:xu,text:bu,textCaseSensitive:Su,datetime:wu,basic:Cu},$u={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:it("sorting",e),isMultiSortEvent:o=>o.shiftKey}),createColumn:(e,o)=>{e.getAutoSortingFn=()=>{const t=o.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const a of t){const s=a==null?void 0:a.getValue(e.id);if(Object.prototype.toString.call(s)==="[object Date]")return en.datetime;if(typeof s=="string"&&(r=!0,s.split(Mo).length>1))return en.alphanumeric}return r?en.text:en.basic},e.getAutoSortDir=()=>{const t=o.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var t,r;if(!e)throw new Error;return to(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(t=(r=o.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?t:en[e.columnDef.sortingFn]},e.toggleSorting=(t,r)=>{const a=e.getNextSortingOrder(),s=typeof t<"u"&&t!==null;o.setSorting(n=>{const l=n==null?void 0:n.find(d=>d.id===e.id),i=n==null?void 0:n.findIndex(d=>d.id===e.id);let u=[],f,g=s?t:a==="desc";if(n!=null&&n.length&&e.getCanMultiSort()&&r?l?f="toggle":f="add":n!=null&&n.length&&i!==n.length-1?f="replace":l?f="toggle":f="replace",f==="toggle"&&(s||a||(f="remove")),f==="add"){var c;u=[...n,{id:e.id,desc:g}],u.splice(0,u.length-((c=o.options.maxMultiSortColCount)!=null?c:Number.MAX_SAFE_INTEGER))}else f==="toggle"?u=n.map(d=>d.id===e.id?{...d,desc:g}:d):f==="remove"?u=n.filter(d=>d.id!==e.id):u=[{id:e.id,desc:g}];return u})},e.getFirstSortDir=()=>{var t,r;return((t=(r=e.columnDef.sortDescFirst)!=null?r:o.options.sortDescFirst)!=null?t:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=t=>{var r,a;const s=e.getFirstSortDir(),n=e.getIsSorted();return n?n!==s&&((r=o.options.enableSortingRemoval)==null||r)&&(!(t&&(a=o.options.enableMultiRemove)!=null)||a)?!1:n==="desc"?"asc":"desc":s},e.getCanSort=()=>{var t,r;return((t=e.columnDef.enableSorting)!=null?t:!0)&&((r=o.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var t,r;return(t=(r=e.columnDef.enableMultiSort)!=null?r:o.options.enableMultiSort)!=null?t:!!e.accessorFn},e.getIsSorted=()=>{var t;const r=(t=o.getState().sorting)==null?void 0:t.find(a=>a.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var t,r;return(t=(r=o.getState().sorting)==null?void 0:r.findIndex(a=>a.id===e.id))!=null?t:-1},e.clearSorting=()=>{o.setSorting(t=>t!=null&&t.length?t.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const t=e.getCanSort();return r=>{t&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?o.options.isMultiSortEvent==null?void 0:o.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=o=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(o),e.resetSorting=o=>{var t,r;e.setSorting(o?[]:(t=(r=e.initialState)==null?void 0:r.sorting)!=null?t:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Eu=[Wi,cu,su,lu,Xi,Yi,fu,gu,$u,ru,pu,vu,mu,hu,uu];function Ru(e){var o,t;const r=[...Eu,...(o=e._features)!=null?o:[]];let a={_features:r};const s=a._features.reduce((c,d)=>Object.assign(c,d.getDefaultOptions==null?void 0:d.getDefaultOptions(a)),{}),n=c=>a.options.mergeOptions?a.options.mergeOptions(s,c):{...s,...c};let i={...{},...(t=e.initialState)!=null?t:{}};a._features.forEach(c=>{var d;i=(d=c.getInitialState==null?void 0:c.getInitialState(i))!=null?d:i});const u=[];let f=!1;const g={_features:r,options:{...s,...e},initialState:i,_queue:c=>{u.push(c),f||(f=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();f=!1}).catch(d=>setTimeout(()=>{throw d})))},reset:()=>{a.setState(a.initialState)},setOptions:c=>{const d=Pt(c,a.options);a.options=n(d)},getState:()=>a.options.state,setState:c=>{a.options.onStateChange==null||a.options.onStateChange(c)},_getRowId:(c,d,p)=>{var h;return(h=a.options.getRowId==null?void 0:a.options.getRowId(c,d,p))!=null?h:`${p?[p.id,d].join("."):d}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(c,d)=>{let p=(d?a.getPrePaginationRowModel():a.getRowModel()).rowsById[c];if(!p&&(p=a.getCoreRowModel().rowsById[c],!p))throw new Error;return p},_getDefaultColumnDef:de(()=>[a.options.defaultColumn],c=>{var d;return c=(d=c)!=null?d:{},{header:p=>{const h=p.header.column.columnDef;return h.accessorKey?h.accessorKey:h.accessorFn?h.id:null},cell:p=>{var h,m;return(h=(m=p.renderValue())==null||m.toString==null?void 0:m.toString())!=null?h:null},...a._features.reduce((p,h)=>Object.assign(p,h.getDefaultColumnDef==null?void 0:h.getDefaultColumnDef()),{}),...c}},ce(e,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:de(()=>[a._getColumnDefs()],c=>{const d=function(p,h,m){return m===void 0&&(m=0),p.map(y=>{const S=Ki(a,y,m,h),O=y;return S.columns=O.columns?d(O.columns,S,m+1):[],S})};return d(c)},ce(e,"debugColumns")),getAllFlatColumns:de(()=>[a.getAllColumns()],c=>c.flatMap(d=>d.getFlatColumns()),ce(e,"debugColumns")),_getAllFlatColumnsById:de(()=>[a.getAllFlatColumns()],c=>c.reduce((d,p)=>(d[p.id]=p,d),{}),ce(e,"debugColumns")),getAllLeafColumns:de(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(c,d)=>{let p=c.flatMap(h=>h.getLeafColumns());return d(p)},ce(e,"debugColumns")),getColumn:c=>a._getAllFlatColumnsById()[c]};Object.assign(a,g);for(let c=0;c<a._features.length;c++){const d=a._features[c];d==null||d.createTable==null||d.createTable(a)}return a}function Iu(){return e=>de(()=>[e.options.data],o=>{const t={rows:[],flatRows:[],rowsById:{}},r=function(a,s,n){s===void 0&&(s=0);const l=[];for(let u=0;u<a.length;u++){const f=Ko(e,e._getRowId(a[u],u,n),a[u],u,s,void 0,n==null?void 0:n.id);if(t.flatRows.push(f),t.rowsById[f.id]=f,l.push(f),e.options.getSubRows){var i;f.originalSubRows=e.options.getSubRows(a[u],u),(i=f.originalSubRows)!=null&&i.length&&(f.subRows=r(f.originalSubRows,s+1,f))}}return l};return t.rows=r(o),t},ce(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Ou(e){const o=[],t=r=>{var a;o.push(r),(a=r.subRows)!=null&&a.length&&r.getIsExpanded()&&r.subRows.forEach(t)};return e.rows.forEach(t),{rows:o,flatRows:e.flatRows,rowsById:e.rowsById}}function Du(e,o,t){return t.options.filterFromLeafRows?Pu(e,o,t):Tu(e,o,t)}function Pu(e,o,t){var r;const a=[],s={},n=(r=t.options.maxLeafRowFilterDepth)!=null?r:100,l=function(i,u){u===void 0&&(u=0);const f=[];for(let c=0;c<i.length;c++){var g;let d=i[c];const p=Ko(t,d.id,d.original,d.index,d.depth,void 0,d.parentId);if(p.columnFilters=d.columnFilters,(g=d.subRows)!=null&&g.length&&u<n){if(p.subRows=l(d.subRows,u+1),d=p,o(d)&&!p.subRows.length){f.push(d),s[d.id]=d,a.push(d);continue}if(o(d)||p.subRows.length){f.push(d),s[d.id]=d,a.push(d);continue}}else d=p,o(d)&&(f.push(d),s[d.id]=d,a.push(d))}return f};return{rows:l(e),flatRows:a,rowsById:s}}function Tu(e,o,t){var r;const a=[],s={},n=(r=t.options.maxLeafRowFilterDepth)!=null?r:100,l=function(i,u){u===void 0&&(u=0);const f=[];for(let c=0;c<i.length;c++){let d=i[c];if(o(d)){var g;if((g=d.subRows)!=null&&g.length&&u<n){const h=Ko(t,d.id,d.original,d.index,d.depth,void 0,d.parentId);h.subRows=l(d.subRows,u+1),d=h}f.push(d),a.push(d),s[d.id]=d}}return f};return{rows:l(e),flatRows:a,rowsById:s}}function Fu(){return e=>de(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(o,t,r)=>{if(!o.rows.length||!(t!=null&&t.length)&&!r){for(let c=0;c<o.flatRows.length;c++)o.flatRows[c].columnFilters={},o.flatRows[c].columnFiltersMeta={};return o}const a=[],s=[];(t??[]).forEach(c=>{var d;const p=e.getColumn(c.id);if(!p)return;const h=p.getFilterFn();h&&a.push({id:c.id,filterFn:h,resolvedValue:(d=h.resolveFilterValue==null?void 0:h.resolveFilterValue(c.value))!=null?d:c.value})});const n=(t??[]).map(c=>c.id),l=e.getGlobalFilterFn(),i=e.getAllLeafColumns().filter(c=>c.getCanGlobalFilter());r&&l&&i.length&&(n.push("__global__"),i.forEach(c=>{var d;s.push({id:c.id,filterFn:l,resolvedValue:(d=l.resolveFilterValue==null?void 0:l.resolveFilterValue(r))!=null?d:r})}));let u,f;for(let c=0;c<o.flatRows.length;c++){const d=o.flatRows[c];if(d.columnFilters={},a.length)for(let p=0;p<a.length;p++){u=a[p];const h=u.id;d.columnFilters[h]=u.filterFn(d,h,u.resolvedValue,m=>{d.columnFiltersMeta[h]=m})}if(s.length){for(let p=0;p<s.length;p++){f=s[p];const h=f.id;if(f.filterFn(d,h,f.resolvedValue,m=>{d.columnFiltersMeta[h]=m})){d.columnFilters.__global__=!0;break}}d.columnFilters.__global__!==!0&&(d.columnFilters.__global__=!1)}}const g=c=>{for(let d=0;d<n.length;d++)if(c.columnFilters[n[d]]===!1)return!1;return!0};return Du(o.rows,g,e)},ce(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Au(e){return o=>de(()=>[o.getState().pagination,o.getPrePaginationRowModel(),o.options.paginateExpandedRows?void 0:o.getState().expanded],(t,r)=>{if(!r.rows.length)return r;const{pageSize:a,pageIndex:s}=t;let{rows:n,flatRows:l,rowsById:i}=r;const u=a*s,f=u+a;n=n.slice(u,f);let g;o.options.paginateExpandedRows?g={rows:n,flatRows:l,rowsById:i}:g=Ou({rows:n,flatRows:l,rowsById:i}),g.flatRows=[];const c=d=>{g.flatRows.push(d),d.subRows.length&&d.subRows.forEach(c)};return g.rows.forEach(c),g},ce(o.options,"debugTable"))}/**
   * vue-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function In(){return!0}const Mu=Symbol("merge-proxy"),Vu={get(e,o,t){return o===Mu?t:e.get(o)},has(e,o){return e.has(o)},set:In,deleteProperty:In,getOwnPropertyDescriptor(e,o){return{configurable:!0,enumerable:!0,get(){return e.get(o)},set:In,deleteProperty:In}},ownKeys(e){return e.keys()}};function po(e){return"value"in e?e.value:e}function rn(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];return new Proxy({get(r){for(let a=o.length-1;a>=0;a--){const s=po(o[a])[r];if(s!==void 0)return s}},has(r){for(let a=o.length-1;a>=0;a--)if(r in po(o[a]))return!0;return!1},keys(){const r=[];for(let a=0;a<o.length;a++)r.push(...Object.keys(po(o[a])));return[...Array.from(new Set(r))]}},Vu)}const Lu=$e({props:["render","props"],setup:e=>()=>typeof e.render=="function"||typeof e.render=="object"?xr(e.render,e.props):e.render});function ar(e){return rn(e,{data:x(e.data)})}function Nu(e){const o=br(e.data),t=rn({state:{},onStateChange:()=>{},renderFallbackValue:null,mergeOptions(s,n){return o?{...s,...n}:rn(s,n)}},o?ar(e):e),r=Ru(t);if(o){const s=wr(e.data);Ke(s,()=>{r.setState(n=>({...n,data:s.value}))},{immediate:!0})}const a=_(r.initialState);return $r(()=>{r.setOptions(s=>{var n;const l=new Proxy({},{get:(i,u)=>a.value[u]});return rn(s,o?ar(e):e,{state:rn(l,(n=e.state)!=null?n:{}),onStateChange:i=>{i instanceof Function?a.value=i(a.value):a.value=i,e.onStateChange==null||e.onStateChange(i)}})})}),r}const Mn=$e({__name:"Table",props:{wrapperClass:{}},setup(e){const o=bt();return(t,r)=>(C(),F("div",{class:Se(["overflow-hidden rounded-2xl border border-slate-200",e.wrapperClass])},[v("table",xt({class:"min-w-full divide-y divide-slate-100 text-left"},x(o)),[Ye(t.$slots,"default")],16)],2))}}),Vn=$e({__name:"TableHeader",props:{className:{}},setup(e){const o=bt();return(t,r)=>(C(),F("thead",xt({class:["bg-slate-50/60",e.className]},x(o)),[Ye(t.$slots,"default")],16))}}),Ln=$e({__name:"TableBody",props:{className:{}},setup(e){const o=bt();return(t,r)=>(C(),F("tbody",xt({class:["divide-y divide-slate-100",e.className]},x(o)),[Ye(t.$slots,"default")],16))}}),nt=$e({__name:"TableRow",props:{className:{}},setup(e){const o=bt();return(t,r)=>(C(),F("tr",xt({class:["border-b border-slate-100",e.className]},x(o)),[Ye(t.$slots,"default")],16))}}),Qe=$e({__name:"TableHead",props:{className:{}},setup(e){const o=bt();return(t,r)=>(C(),F("th",xt({class:["px-4 py-3 text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400",e.className],scope:"col"},x(o)),[Ye(t.$slots,"default")],16))}}),be=$e({__name:"TableCell",props:{className:{}},setup(e){const o=bt();return(t,r)=>(C(),F("td",xt({class:["px-4 py-3 text-sm text-slate-600",e.className]},x(o)),[Ye(t.$slots,"default")],16))}}),ju=["answer","description","info","specs"],no=e=>ju.includes(e),Vo=e=>e?/^[a-z][a-z0-9_]*$/.test(e):!0,ea=(e,o,t)=>e?/^[a-z][a-z0-9_]*$/.test(e)?(t?o.filter(a=>a!==t):o).includes(e)?"Такое имя функции уже существует":"":"Только латиница в нижнем регистре, цифры и _":"",ta=(e,o)=>e==="number"?"120px":no(o)?"250px":"180px",Gu=(e,o)=>{if(e==null||e==="")return"";switch(o){case"number":return typeof e=="number"?e.toLocaleString("ru-RU"):String(e);case"date":if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,r,a]=e.split("-");return`${a}.${r}.${t}`}return String(e);case"bool":return e?"Да":"Нет";default:return String(e)}},Uu=(e,o)=>({question:"Введите вопрос...",answer:"Введите ответ...",name:"Введите название...",description:"Введите описание...",topic:"Введите тему...",info:"Введите информацию...",specs:"Введите характеристики..."})[e]||`Введите ${o.toLowerCase()}...`,Hu={class:"flex flex-wrap items-center justify-between gap-3 bg-white rounded-xl border border-slate-200 p-3"},Bu={class:"flex items-center gap-2"},ku=["disabled"],zu=["disabled"],Ku={class:"flex items-center gap-2"},Wu={class:"relative"},Xu=["value"],Yu=$e({__name:"DirectoryDetailToolbar",props:{addDisabled:{type:Boolean},hasItems:{type:Boolean},selectedCount:{},searchQuery:{}},emits:["addRow","import","export","deleteSelected","update:searchQuery"],setup(e){return(o,t)=>(C(),F("div",Hu,[v("div",Bu,[v("button",{onClick:t[0]||(t[0]=r=>o.$emit("addRow")),disabled:e.addDisabled,class:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[w(x(xn),{class:"w-4 h-4"}),se(" "+K(e.addDisabled?"Заполните строку":"Добавить"),1)],8,ku),v("button",{onClick:t[1]||(t[1]=r=>o.$emit("import")),class:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors"},[w(x(Br),{class:"w-4 h-4"}),t[5]||(t[5]=se(" Загрузить CSV ",-1))]),v("button",{onClick:t[2]||(t[2]=r=>o.$emit("export")),class:Se(["flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors",{"opacity-50 cursor-not-allowed":!e.hasItems}]),disabled:!e.hasItems},[w(x(di),{class:"w-4 h-4"}),t[6]||(t[6]=se(" Экспорт ",-1))],10,zu)]),v("div",Ku,[e.selectedCount>0?(C(),F("button",{key:0,onClick:t[3]||(t[3]=r=>o.$emit("deleteSelected")),class:"flex items-center gap-2 px-4 py-2 bg-red-50 border border-red-200 text-red-600 rounded-lg text-sm font-medium hover:bg-red-100 transition-colors"},[w(x(eo),{class:"w-4 h-4"}),se(" Удалить ("+K(e.selectedCount)+") ",1)])):fe("",!0),v("div",Wu,[w(x(dn),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),v("input",{value:e.searchQuery,onInput:t[4]||(t[4]=r=>o.$emit("update:searchQuery",r.target.value)),type:"text",placeholder:"Поиск...",class:"pl-9 pr-4 py-2 w-48 text-sm border border-slate-200 rounded-lg bg-slate-50 focus:bg-white focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition-all"},null,40,Xu)])])]))}}),Qu={key:0,class:"relative"},Ju=["value","placeholder"],Zu=["value","placeholder"],qu=["value"],_u={key:3,class:"flex items-center gap-2 px-3 py-2 cursor-pointer"},ed=["checked"],td={class:"text-sm"},nd=["value","placeholder"],od={key:5,class:"absolute right-2 top-1/2 -translate-y-1/2"},rd={key:0,class:"flex items-center gap-1.5"},ad={key:1,class:"line-clamp-2"},sd=$e({__name:"EditableCell",props:{column:{},displayValue:{},modelValue:{},editing:{type:Boolean},saving:{type:Boolean}},emits:["update:modelValue","startEdit","blur","keydown","save"],setup(e,{expose:o}){const t=e,r=_(null),a=Re(()=>no(t.column.name)),s=Re(()=>Gu(t.displayValue,t.column.type));return Ke(()=>t.editing,n=>{n&&jt(()=>{var i,u,f,g;const l=r.value;l&&(Array.isArray(l)?((i=l[0])==null||i.focus(),(f=(u=l[0])==null?void 0:u.select)==null||f.call(u)):(l.focus(),(g=l.select)==null||g.call(l)))})}),o({inputRef:r}),(n,l)=>e.editing?(C(),F("div",Qu,[e.column.type==="text"&&a.value?(C(),F("textarea",{key:0,ref_key:"inputRef",ref:r,value:e.modelValue,onInput:l[0]||(l[0]=i=>n.$emit("update:modelValue",i.target.value)),placeholder:e.column.label,rows:"3",class:"w-full px-3 py-2 text-sm border-2 border-indigo-400 rounded-lg bg-white focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 resize-none",onBlur:l[1]||(l[1]=i=>n.$emit("blur")),onKeydown:l[2]||(l[2]=i=>n.$emit("keydown",i))},null,40,Ju)):e.column.type==="number"?(C(),F("input",{key:1,ref_key:"inputRef",ref:r,value:e.modelValue,onInput:l[3]||(l[3]=i=>n.$emit("update:modelValue",Number(i.target.value))),type:"number",step:"any",placeholder:e.column.label,class:"w-full px-3 py-2 text-sm border-2 border-indigo-400 rounded-lg bg-white focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 font-mono",onBlur:l[4]||(l[4]=i=>n.$emit("blur")),onKeydown:l[5]||(l[5]=i=>n.$emit("keydown",i))},null,40,Zu)):e.column.type==="date"?(C(),F("input",{key:2,ref_key:"inputRef",ref:r,value:e.modelValue,onInput:l[6]||(l[6]=i=>n.$emit("update:modelValue",i.target.value)),type:"date",class:"w-full px-3 py-2 text-sm border-2 border-indigo-400 rounded-lg bg-white focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100",onBlur:l[7]||(l[7]=i=>n.$emit("blur")),onKeydown:l[8]||(l[8]=i=>n.$emit("keydown",i))},null,40,qu)):e.column.type==="bool"?(C(),F("label",_u,[v("input",{ref_key:"inputRef",ref:r,checked:!!e.modelValue,onChange:l[9]||(l[9]=i=>{n.$emit("update:modelValue",i.target.checked),n.$emit("save")}),type:"checkbox",class:"w-5 h-5 rounded border-indigo-400 text-indigo-600 focus:ring-indigo-500"},null,40,ed),v("span",td,K(e.modelValue?"Да":"Нет"),1)])):(C(),F("input",{key:4,ref_key:"inputRef",ref:r,value:e.modelValue,onInput:l[10]||(l[10]=i=>n.$emit("update:modelValue",i.target.value)),type:"text",placeholder:e.column.label,class:"w-full px-3 py-2 text-sm border-2 border-indigo-400 rounded-lg bg-white focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100",onBlur:l[11]||(l[11]=i=>n.$emit("blur")),onKeydown:l[12]||(l[12]=i=>n.$emit("keydown",i))},null,40,nd)),e.saving?(C(),F("div",od,[w(x(Mt),{class:"w-4 h-4 animate-spin text-indigo-500"})])):fe("",!0)])):(C(),F("div",{key:1,onClick:l[13]||(l[13]=i=>n.$emit("startEdit")),class:Se(["px-3 py-2 text-sm text-slate-700 rounded-lg cursor-pointer hover:bg-slate-100 transition-colors min-h-[36px] flex items-center",{"font-mono":e.column.type==="number","text-slate-400 italic":e.displayValue===null||e.displayValue===void 0||e.displayValue===""}])},[e.column.type==="bool"?(C(),F("span",rd,[v("span",{class:Se(["w-4 h-4 rounded flex items-center justify-center text-white text-xs",e.displayValue?"bg-green-500":"bg-slate-300"])},K(e.displayValue?"✓":""),3),v("span",{class:Se(e.displayValue?"text-green-700":"text-slate-400")},K(e.displayValue?"Да":"Нет"),3)])):(C(),F("span",ad,K(s.value||"Пусто"),1))],2))}}),ld=Er(sd,[["__scopeId","data-v-f39b9434"]]),id={class:"w-4 h-4 rounded bg-green-400 flex items-center justify-center"},ud=["value","onInput","placeholder","onKeydown"],dd=["value","onInput","placeholder","onKeydown"],cd=["value","onInput","onKeydown"],fd={key:3,class:"flex items-center gap-2 px-3 py-2 cursor-pointer"},gd=["checked","onChange"],pd={class:"text-sm"},vd=["value","onInput","placeholder","onKeydown"],md={class:"flex items-center justify-end gap-1"},hd=["disabled"],yd=$e({__name:"InlineNewRow",props:{columns:{},rowData:{},saving:{type:Boolean}},emits:["update:field","save","cancel"],setup(e,{expose:o,emit:t}){const r=e,a=t,s=_(null),n=Re(()=>Object.values(r.rowData).some(c=>c!=null&&c!=="")),l=c=>no(c),i=c=>ta(c.type,c.name),u=(c,d)=>{a("update:field",c,d)},f=(c,d)=>{if(c.key==="Escape"){c.preventDefault(),a("cancel");return}c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),a("save"))},g=()=>{jt(()=>{var c;(c=s.value)==null||c.focus()})};return Zn(()=>{g()}),o({focus:g}),(c,d)=>(C(),we(x(nt),{class:"bg-green-50/50 border-l-4 border-green-400"},{default:T(()=>[w(x(be),{"class-name":"px-4 py-2"},{default:T(()=>[v("div",id,[w(x(xn),{class:"w-3 h-3 text-white"})])]),_:1}),(C(!0),F(Ne,null,je(e.columns,(p,h)=>(C(),we(x(be),{key:p.name,"class-name":"px-1 py-1",style:kn({minWidth:i(p)})},{default:T(()=>[p.type==="text"&&l(p.name)?(C(),F("textarea",{key:0,ref_for:!0,ref:m=>{h===0&&(s.value=m)},value:e.rowData[p.name],onInput:m=>u(p.name,m.target.value),placeholder:p.label,rows:"2",class:"w-full px-3 py-2 text-sm border-2 border-green-300 rounded-lg bg-white focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-100 resize-none",onKeydown:m=>f(m,h)},null,40,ud)):p.type==="number"?(C(),F("input",{key:1,ref_for:!0,ref:m=>{h===0&&(s.value=m)},value:e.rowData[p.name],onInput:m=>u(p.name,Number(m.target.value)),type:"number",step:"any",placeholder:p.label,class:"w-full px-3 py-2 text-sm border-2 border-green-300 rounded-lg bg-white focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-100 font-mono",onKeydown:m=>f(m,h)},null,40,dd)):p.type==="date"?(C(),F("input",{key:2,ref_for:!0,ref:m=>{h===0&&(s.value=m)},value:e.rowData[p.name],onInput:m=>u(p.name,m.target.value),type:"date",class:"w-full px-3 py-2 text-sm border-2 border-green-300 rounded-lg bg-white focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-100",onKeydown:m=>f(m,h)},null,40,cd)):p.type==="bool"?(C(),F("label",fd,[v("input",{checked:!!e.rowData[p.name],onChange:m=>u(p.name,m.target.checked),type:"checkbox",class:"w-5 h-5 rounded border-green-400 text-green-600 focus:ring-green-500"},null,40,gd),v("span",pd,K(e.rowData[p.name]?"Да":"Нет"),1)])):(C(),F("input",{key:4,ref_for:!0,ref:m=>{h===0&&(s.value=m)},value:e.rowData[p.name],onInput:m=>u(p.name,m.target.value),type:"text",placeholder:p.label,class:"w-full px-3 py-2 text-sm border-2 border-green-300 rounded-lg bg-white focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-100",onKeydown:m=>f(m,h)},null,40,vd))]),_:2},1032,["style"]))),128)),w(x(be),{"class-name":"px-2 py-2 w-40"}),w(x(be),{"class-name":"px-4 py-2 w-16"},{default:T(()=>[v("div",md,[v("button",{onClick:d[0]||(d[0]=p=>c.$emit("save")),disabled:!n.value||e.saving,class:"p-2 text-green-600 hover:text-green-700 hover:bg-green-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Сохранить (Enter)"},[e.saving?(C(),we(x(Mt),{key:0,class:"w-4 h-4 animate-spin"})):(C(),we(x(ql),{key:1,class:"w-4 h-4"}))],8,hd),v("button",{onClick:d[1]||(d[1]=p=>c.$emit("cancel")),class:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Отмена (Esc)"},[w(x(_n),{class:"w-4 h-4"})])])]),_:1})]),_:1}))}}),xd={а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"e",ж:"zh",з:"z",и:"i",й:"y",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"ts",ч:"ch",ш:"sh",щ:"sch",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya"," ":"_","-":"_"},Qo=e=>{const o=e.toLowerCase();let t="";for(const r of o)t+=xd[r]??r;return t.replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_").substring(0,50)},bd=(e,o)=>{let t=Qo(e);return t&&!t.startsWith(o)&&(t=o+t),t},Sd={key:0,class:"flex justify-center"},wd={key:1,class:"flex flex-col gap-2 min-w-[200px]"},Cd={class:"flex gap-1"},$d=["disabled"],Ed=$e({__name:"InlineAddColumn",props:{existingColumns:{}},emits:["add"],setup(e,{emit:o}){const t=e,r=o,a=_(!1),s=_(null),n=_({label:"",name:"",type:"text"}),l=()=>{a.value=!0};Ke(a,g=>{g&&jt(()=>{var c;return(c=s.value)==null?void 0:c.focus()})});const i=()=>{n.value.name=n.value.label?Qo(n.value.label):""},u=()=>{if(!(!n.value.label||!n.value.name)){if(t.existingColumns.some(g=>g.name===n.value.name)){alert("Столбец с таким именем уже существует");return}r("add",{name:n.value.name,label:n.value.label,type:n.value.type,required:!1,searchable:!1}),f()}},f=()=>{a.value=!1,n.value={label:"",name:"",type:"text"}};return(g,c)=>(C(),we(x(Qe),{"class-name":"w-40"},{default:T(()=>[a.value?(C(),F("div",wd,[Oe(v("input",{ref_key:"labelRef",ref:s,"onUpdate:modelValue":c[0]||(c[0]=d=>n.value.label=d),type:"text",placeholder:"Название",class:"w-full px-2 py-1 text-xs border border-slate-200 rounded bg-white focus:border-indigo-400 focus:ring-1 focus:ring-indigo-100",onInput:i,onKeydown:[zn(u,["enter"]),zn(f,["escape"])]},null,544),[[Xe,n.value.label]]),Oe(v("select",{"onUpdate:modelValue":c[1]||(c[1]=d=>n.value.type=d),class:"w-full px-2 py-1 text-xs border border-slate-200 rounded bg-white focus:border-indigo-400"},[...c[3]||(c[3]=[v("option",{value:"text"},"Текст",-1),v("option",{value:"number"},"Число",-1),v("option",{value:"date"},"Дата",-1),v("option",{value:"bool"},"Да/Нет",-1)])],512),[[Xt,n.value.type]]),v("div",Cd,[v("button",{onClick:u,disabled:!n.value.label||!n.value.name,class:"flex-1 px-2 py-1 text-xs font-medium text-white bg-indigo-600 rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Добавить ",8,$d),v("button",{onClick:f,class:"px-2 py-1 text-xs text-slate-500 hover:bg-slate-100 rounded"}," ✕ ")])])):(C(),F("div",Sd,[v("button",{onClick:l,class:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Добавить столбец"},[w(x(xn),{class:"w-3.5 h-3.5"}),c[2]||(c[2]=se(" Столбец ",-1))])]))]),_:1}))}}),Rd={class:"space-y-4"},Id={class:"flex items-center justify-between gap-4"},Od={class:"flex items-center gap-3 min-w-0"},Dd={class:"min-w-0"},Pd={class:"text-lg font-bold text-slate-900 truncate"},Td={class:"text-xs text-slate-500"},Fd={class:"font-mono text-slate-400"},Ad={key:0,class:"text-xs text-slate-400 flex items-center gap-1.5"},Md={class:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-slate-100 rounded text-slate-500"},Vd={key:1,class:"flex justify-center py-12"},Ld={key:2,class:"bg-white rounded-2xl border border-slate-200 p-12 text-center shadow-sm"},Nd={class:"max-w-md mx-auto"},jd={class:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"},Gd={class:"flex items-center justify-center gap-3"},Ud={key:3,class:"bg-white rounded-2xl border border-slate-200 p-8 text-center shadow-sm"},Hd={class:"text-slate-500"},Bd={key:4,class:"shadow-sm overflow-hidden"},kd={class:"overflow-x-auto"},zd=["checked","indeterminate"],Kd={class:"flex items-center gap-1.5"},Wd=["checked","onChange"],Xd={class:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},Yd=["onClick"],Qd={key:0,class:"flex items-center justify-between px-4 py-3 border-t border-slate-100 bg-slate-50"},Jd={class:"text-sm text-slate-500"},Zd={class:"flex items-center gap-1"},qd=["disabled"],_d=["onClick"],ec=["disabled"],tc=$e({__name:"DirectoryDetail",props:{directory:{},items:{},loading:{type:Boolean}},emits:["back","settings","add","import","export","edit","update","create","delete","deleteSelected","addColumn"],setup(e,{emit:o}){const t=e,r=o,a=_(null),s=_(""),n=_(""),l=_(!1),i=_(!1),u=_({}),f=_(!1),g=_(null),c=_(""),d=_({}),p=Re(()=>t.directory.columns||[]),h=_([]),m=_(null),y=_(null);Ke(()=>t.directory.columns,G=>{if(G&&G.length>0){const N=h.value.filter(Y=>G.some(te=>te.name===Y)),H=G.map(Y=>Y.name).filter(Y=>!N.includes(Y));h.value=[...N,...H]}},{immediate:!0});const S=Re(()=>h.value.length===0?p.value:h.value.map(G=>p.value.find(N=>N.name===G)).filter(G=>G!==void 0)),O=Re(()=>S.value.map(G=>({id:G.name,accessorFn:N=>N.data[G.name],header:G.label,meta:G,filterFn:"includesString"}))),R=Nu({get data(){return t.items},get columns(){return O.value},state:{get globalFilter(){return c.value},get rowSelection(){return d.value}},onGlobalFilterChange:G=>{c.value=typeof G=="function"?G(c.value):G},onRowSelectionChange:G=>{d.value=typeof G=="function"?G(d.value):G},getCoreRowModel:Iu(),getFilteredRowModel:Fu(),getPaginationRowModel:Au(),getRowId:G=>G.id,globalFilterFn:(G,N,H)=>{const Y=String(H).toLowerCase();return p.value.some(te=>{const De=G.original.data[te.name];return De&&String(De).toLowerCase().includes(Y)})},initialState:{pagination:{pageSize:10}}}),P=Re(()=>Object.keys(d.value).filter(G=>d.value[G])),A=Re(()=>zr(t.directory.items_count,["запись","записи","записей"])),X=G=>ta(G.type,G.name),ee=Re(()=>{const G=[],N=R.getPageCount(),H=R.getState().pagination.pageIndex+1;if(N<=5)for(let Y=1;Y<=N;Y++)G.push(Y);else H<=3?G.push(1,2,3,4,5):H>=N-2?G.push(N-4,N-3,N-2,N-1,N):G.push(H-2,H-1,H,H+1,H+2);return G}),E=(G,N)=>{m.value=N,G.dataTransfer&&(G.dataTransfer.effectAllowed="move",G.dataTransfer.setData("text/plain",String(N)))},b=(G,N)=>{G.preventDefault(),G.dataTransfer&&(G.dataTransfer.dropEffect="move")},V=()=>{},ne=(G,N)=>{if(G.preventDefault(),m.value===null||m.value===N){L();return}const H=[...h.value],[Y]=H.splice(m.value,1);H.splice(N,0,Y),h.value=H,L()},L=()=>{m.value=null,y.value=null},U=()=>{a.value&&me();const G={};p.value.forEach(N=>{G[N.name]=N.type==="bool"?!1:""}),u.value=G,i.value=!0,jt(()=>{var N;return(N=g.value)==null?void 0:N.focus()})},k=()=>{i.value=!1,u.value={}},j=async()=>{if(!(!Object.values(u.value).some(N=>N!=null&&N!=="")||f.value)){f.value=!0;try{const N={};Object.entries(u.value).forEach(([Y,te])=>{N[Y]=te===""?null:te}),r("create",N),await new Promise(Y=>setTimeout(Y,200));const H={};p.value.forEach(Y=>{H[Y.name]=Y.type==="bool"?!1:""}),u.value=H,jt(()=>{var Y;return(Y=g.value)==null?void 0:Y.focus()})}finally{f.value=!1}}},q=(G,N)=>{var H,Y;return((H=a.value)==null?void 0:H.itemId)===G&&((Y=a.value)==null?void 0:Y.colName)===N},le=(G,N)=>{a.value&&Q(),a.value={itemId:G.id,colName:N.name};const H=G.data[N.name];s.value=H??"",n.value=H??""},me=()=>{a.value=null,s.value="",n.value=""},Q=async()=>{if(!a.value||l.value)return;const{itemId:G,colName:N}=a.value,H=s.value;if(H===n.value){me();return}const Y=t.items.find(te=>te.id===G);if(!Y){me();return}l.value=!0;try{const te={...Y.data,[N]:H===""?null:H};r("update",G,te),await new Promise(De=>setTimeout(De,200))}finally{l.value=!1,me()}},J=()=>{setTimeout(()=>{a.value&&Q()},150)},ge=(G,N,H,Y,te)=>{if(G.key==="Escape"){G.preventDefault(),me();return}if(G.key==="Enter"&&!G.shiftKey){G.preventDefault(),Q();return}G.key==="Tab"&&(G.preventDefault(),Q(),jt(()=>{const De=S.value,W=R.getRowModel().rows;let $=G.shiftKey?te-1:te+1,B=Y;if($>=De.length?($=0,B=Y+1):$<0&&($=De.length-1,B=Y-1),B>=0&&B<W.length){const Ae=W[B].original,Ge=De[$];Ae&&Ge&&le(Ae,Ge)}}))};return Ke(()=>t.items,()=>{d.value={}}),Ke(()=>R.getState().pagination.pageIndex,()=>{me()}),(G,N)=>(C(),F("div",Rd,[v("div",Id,[v("div",Od,[v("button",{onClick:N[0]||(N[0]=H=>G.$emit("back")),class:"flex items-center gap-2 px-3 py-2 text-slate-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors text-sm font-medium"},[w(x(Oo),{class:"w-4 h-4"}),N[13]||(N[13]=v("span",null,"Все справочники",-1))]),N[15]||(N[15]=v("div",{class:"w-px h-6 bg-slate-200"},null,-1)),v("div",Dd,[v("h3",Pd,K(e.directory.name),1),v("p",Td,[v("span",Fd,K(e.directory.tool_name),1),N[14]||(N[14]=v("span",{class:"mx-1.5"},"•",-1)),v("span",null,K(e.directory.items_count)+" "+K(A.value),1)])])]),v("button",{onClick:N[1]||(N[1]=H=>G.$emit("settings")),class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Настройки"},[w(x(Mr),{class:"w-5 h-5"})])]),w(Yu,{"add-disabled":i.value,"has-items":e.items.length>0,"selected-count":Object.keys(d.value).length,"search-query":c.value,onAddRow:U,onImport:N[2]||(N[2]=H=>G.$emit("import")),onExport:N[3]||(N[3]=H=>G.$emit("export")),onDeleteSelected:N[4]||(N[4]=H=>G.$emit("deleteSelected",P.value)),"onUpdate:searchQuery":N[5]||(N[5]=H=>c.value=H)},null,8,["add-disabled","has-items","selected-count","search-query"]),e.items.length>0||i.value?(C(),F("p",Ad,[v("span",Md,[w(x(fi),{class:"w-3 h-3"}),N[16]||(N[16]=se(" Клик ",-1))]),N[17]||(N[17]=yr(' для редактирования ячейки <span class="mx-1">•</span><span class="px-1.5 py-0.5 bg-slate-100 rounded text-slate-500 font-mono text-[10px]">Tab</span> следующая <span class="mx-1">•</span><span class="px-1.5 py-0.5 bg-slate-100 rounded text-slate-500 font-mono text-[10px]">Enter</span> сохранить <span class="mx-1">•</span><span class="px-1.5 py-0.5 bg-slate-100 rounded text-slate-500 font-mono text-[10px]">Esc</span> отмена ',10))])):fe("",!0),e.loading?(C(),F("div",Vd,[w(x(Mt),{class:"w-8 h-8 animate-spin text-indigo-600"})])):e.items.length===0&&!c.value&&!i.value?(C(),F("div",Ld,[v("div",Nd,[v("div",jd,[w(x(_l),{class:"h-8 w-8 text-slate-400"})]),N[18]||(N[18]=v("h3",{class:"text-lg font-bold text-slate-900"},"Записей пока нет",-1)),N[19]||(N[19]=v("p",{class:"text-slate-500 mt-2 mb-6"}," Добавьте записи вручную или загрузите из CSV-файла ",-1)),v("div",Gd,[v("button",{onClick:U,class:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition-colors"}," Добавить запись "),v("button",{onClick:N[6]||(N[6]=H=>G.$emit("import")),class:"px-5 py-2.5 bg-white border border-slate-200 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-50 transition-colors"}," Загрузить CSV ")])])])):x(R).getRowModel().rows.length===0&&c.value&&!i.value?(C(),F("div",Ud,[v("p",Hd,'Ничего не найдено по запросу "'+K(c.value)+'"',1)])):x(R).getRowModel().rows.length>0||i.value?(C(),F("div",Bd,[v("div",kd,[w(x(Mn),null,{default:T(()=>[w(x(Vn),null,{default:T(()=>[w(x(nt),null,{default:T(()=>[w(x(Qe),{class:"w-12"},{default:T(()=>[v("input",{type:"checkbox",checked:x(R).getIsAllPageRowsSelected(),indeterminate:x(R).getIsSomePageRowsSelected(),onChange:N[7]||(N[7]=H=>x(R).toggleAllPageRowsSelected()),class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,40,zd)]),_:1}),(C(!0),F(Ne,null,je(x(R).getHeaderGroups()[0].headers.filter(H=>H.id!=="select"&&H.id!=="actions"),H=>(C(),we(x(Qe),{key:H.id,draggable:"true",onDragstart:Y=>E(Y,H.index-1),onDragover:St(Y=>b(Y,H.index-1),["prevent"]),onDragenter:St(Y=>y.value=H.index-1,["prevent"]),onDragleave:V,onDrop:Y=>ne(Y,H.index-1),onDragend:L,"class-name":`cursor-grab select-none transition-all ${y.value===H.index-1&&m.value!==H.index-1?"bg-indigo-100 scale-105":""} ${m.value===H.index-1?"opacity-50":""}`,style:kn({minWidth:X(H.column.columnDef.meta)})},{default:T(()=>[v("div",Kd,[w(x(Gr),{class:"w-3 h-3 text-slate-400"}),w(x(Lu),{render:H.column.columnDef.header,props:H.getContext()},null,8,["render","props"])])]),_:2},1032,["onDragstart","onDragover","onDragenter","onDrop","class-name","style"]))),128)),w(Ed,{"existing-columns":p.value,onAdd:N[8]||(N[8]=H=>G.$emit("addColumn",H))},null,8,["existing-columns"]),w(x(Qe),{"class-name":"w-16"})]),_:1})]),_:1}),w(x(Ln),null,{default:T(()=>[i.value?(C(),we(yd,{key:0,ref_key:"newRowRef",ref:g,columns:S.value,"row-data":u.value,saving:f.value,"onUpdate:field":N[9]||(N[9]=(H,Y)=>u.value[H]=Y),onSave:j,onCancel:k},null,8,["columns","row-data","saving"])):fe("",!0),(C(!0),F(Ne,null,je(x(R).getRowModel().rows,H=>{var Y;return C(),we(x(nt),{key:H.id,class:Se(["group",{"bg-indigo-50/30":((Y=a.value)==null?void 0:Y.itemId)===H.original.id}])},{default:T(()=>[w(x(be),{"class-name":"px-4 py-2"},{default:T(()=>[v("input",{type:"checkbox",checked:H.getIsSelected(),onChange:te=>H.toggleSelected(),class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,40,Wd)]),_:2},1024),(C(!0),F(Ne,null,je(S.value,te=>(C(),we(x(be),{key:te.name,"class-name":"px-1 py-1",style:kn({minWidth:X(te)})},{default:T(()=>{var De,W;return[w(ld,{column:te,"display-value":H.original.data[te.name],"model-value":((De=a.value)==null?void 0:De.itemId)===H.original.id&&((W=a.value)==null?void 0:W.colName)===te.name?s.value:H.original.data[te.name],editing:q(H.original.id,te.name),saving:l.value,"onUpdate:modelValue":N[10]||(N[10]=$=>s.value=$),onStartEdit:$=>le(H.original,te),onBlur:J,onKeydown:$=>ge($,H.original,te,H.index,S.value.indexOf(te)),onSave:Q},null,8,["column","display-value","model-value","editing","saving","onStartEdit","onKeydown"])]}),_:2},1032,["style"]))),128)),w(x(be),{"class-name":"px-2 py-2 w-40"}),w(x(be),{"class-name":"px-4 py-2 w-16"},{default:T(()=>[v("div",Xd,[v("button",{onClick:te=>G.$emit("delete",H.original.id),class:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Удалить"},[w(x(eo),{class:"w-4 h-4"})],8,Yd)])]),_:2},1024)]),_:2},1032,["class"])}),128))]),_:1})]),_:1})]),x(R).getPageCount()>1?(C(),F("div",Qd,[v("p",Jd," Показано "+K(x(R).getState().pagination.pageIndex*x(R).getState().pagination.pageSize+1)+"-"+K(Math.min((x(R).getState().pagination.pageIndex+1)*x(R).getState().pagination.pageSize,x(R).getFilteredRowModel().rows.length))+" из "+K(x(R).getFilteredRowModel().rows.length),1),v("div",Zd,[v("button",{disabled:!x(R).getCanPreviousPage(),onClick:N[11]||(N[11]=H=>x(R).previousPage()),class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[w(x(Lr),{class:"w-4 h-4"})],8,qd),(C(!0),F(Ne,null,je(ee.value,H=>(C(),F("button",{key:H,onClick:Y=>x(R).setPageIndex(H-1),class:Se(["min-w-[32px] h-8 px-2 text-sm font-medium rounded-lg transition-colors",[x(R).getState().pagination.pageIndex===H-1?"bg-indigo-600 text-white":"text-slate-600 hover:bg-white"]])},K(H),11,_d))),128)),v("button",{disabled:!x(R).getCanNextPage(),onClick:N[12]||(N[12]=H=>x(R).nextPage()),class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[w(x(Nr),{class:"w-4 h-4"})],8,ec)])])):fe("",!0)])):fe("",!0)]))}}),Jo=$e({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(e,{emit:o}){const a=Or(e,o);return(s,n)=>(C(),we(x(Kl),zo(Bo(x(a))),{default:T(()=>[Ye(s.$slots,"default")]),_:3},16))}}),Zo=$e({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},className:{default:"max-w-xl px-4 sm:px-0"}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:o}){const a=Or(e,o),s=n=>{const l=n.target;l!=null&&l.closest("[data-sonner-toaster]")&&n.preventDefault()};return(n,l)=>(C(),we(x(Wl),null,{default:T(()=>[w(x(Xl),{class:"fixed inset-0 z-[60] bg-black/40 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),w(x(Yl),xt({class:["fixed left-1/2 top-1/2 z-[60] w-full -translate-x-1/2 -translate-y-1/2","rounded-2xl bg-white shadow-xl shadow-indigo-900/20 ring-1 ring-indigo-100","duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]","data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",e.className]},{...x(a),...n.$attrs},{onPointerDownOutside:s}),{default:T(()=>[Ye(n.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),fn=$e({__name:"DialogTitle",props:{className:{}},setup(e){return(o,t)=>(C(),we(x(Ql),{class:Se(["text-lg font-bold text-slate-900",e.className])},{default:T(()=>[Ye(o.$slots,"default")]),_:3},8,["class"]))}}),gn=$e({__name:"DialogDescription",props:{className:{}},setup(e){return(o,t)=>(C(),we(x(Jl),{class:Se(["text-sm text-slate-500",e.className])},{default:T(()=>[Ye(o.$slots,"default")]),_:3},8,["class"]))}}),Nn=$e({__name:"DialogClose",props:{className:{}},setup(e){return(o,t)=>(C(),we(x(Dr),{class:Se(["absolute right-4 top-4 p-1 rounded-md text-slate-400 hover:text-slate-600 transition-colors","focus:outline-none focus:ring-2 focus:ring-indigo-400",e.className])},{default:T(()=>[Ye(o.$slots,"default",{},()=>[w(x(_n),{class:"h-5 w-5"})]),t[0]||(t[0]=v("span",{class:"sr-only"},"Закрыть",-1))]),_:3},8,["class"]))}}),Kn=$e({__name:"DialogHeader",props:{className:{}},setup(e){return(o,t)=>(C(),F("div",{class:Se(["flex flex-col space-y-1.5",e.className])},[Ye(o.$slots,"default")],2))}}),Lo=$e({__name:"DialogFooter",props:{className:{}},setup(e){return(o,t)=>(C(),F("div",{class:Se(["flex items-center justify-end gap-3 pt-4",e.className])},[Ye(o.$slots,"default")],2))}});var nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function na(e){if(e.__esModule)return e;var o=e.default;if(typeof o=="function"){var t=function r(){return this instanceof r?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};t.prototype=o.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),t}var oa={exports:{}};const rc=na(si);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function sr(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function Ct(e){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?sr(Object(t),!0).forEach(function(r){ac(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sr(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function jn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jn=function(o){return typeof o}:jn=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},jn(e)}function ac(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function gt(){return gt=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gt.apply(this,arguments)}function sc(e,o){if(e==null)return{};var t={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(o.indexOf(a)>=0)&&(t[a]=e[a]);return t}function lc(e,o){if(e==null)return{};var t=sc(e,o),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(o.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function ic(e){return uc(e)||dc(e)||cc(e)||fc()}function uc(e){if(Array.isArray(e))return No(e)}function dc(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cc(e,o){if(e){if(typeof e=="string")return No(e,o);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return No(e,o)}}function No(e,o){(o==null||o>e.length)&&(o=e.length);for(var t=0,r=new Array(o);t<o;t++)r[t]=e[t];return r}function fc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gc="1.14.0";function Et(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Rt=Et(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),bn=Et(/Edge/i),lr=Et(/firefox/i),pn=Et(/safari/i)&&!Et(/chrome/i)&&!Et(/android/i),ra=Et(/iP(ad|od|hone)/i),pc=Et(/chrome/i)&&Et(/android/i),aa={capture:!1,passive:!1};function Ee(e,o,t){e.addEventListener(o,t,!Rt&&aa)}function Ce(e,o,t){e.removeEventListener(o,t,!Rt&&aa)}function Wn(e,o){if(o){if(o[0]===">"&&(o=o.substring(1)),e)try{if(e.matches)return e.matches(o);if(e.msMatchesSelector)return e.msMatchesSelector(o);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(o)}catch{return!1}return!1}}function vc(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ht(e,o,t,r){if(e){t=t||document;do{if(o!=null&&(o[0]===">"?e.parentNode===t&&Wn(e,o):Wn(e,o))||r&&e===t)return e;if(e===t)break}while(e=vc(e))}return null}var ir=/\s+/g;function Ue(e,o,t){if(e&&o)if(e.classList)e.classList[t?"add":"remove"](o);else{var r=(" "+e.className+" ").replace(ir," ").replace(" "+o+" "," ");e.className=(r+(t?" "+o:"")).replace(ir," ")}}function re(e,o,t){var r=e&&e.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),o===void 0?t:t[o];!(o in r)&&o.indexOf("webkit")===-1&&(o="-webkit-"+o),r[o]=t+(typeof t=="string"?"":"px")}}function Gt(e,o){var t="";if(typeof e=="string")t=e;else do{var r=re(e,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!o&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(t)}function sa(e,o,t){if(e){var r=e.getElementsByTagName(o),a=0,s=r.length;if(t)for(;a<s;a++)t(r[a],a);return r}return[]}function wt(){var e=document.scrollingElement;return e||document.documentElement}function Le(e,o,t,r,a){if(!(!e.getBoundingClientRect&&e!==window)){var s,n,l,i,u,f,g;if(e!==window&&e.parentNode&&e!==wt()?(s=e.getBoundingClientRect(),n=s.top,l=s.left,i=s.bottom,u=s.right,f=s.height,g=s.width):(n=0,l=0,i=window.innerHeight,u=window.innerWidth,f=window.innerHeight,g=window.innerWidth),(o||t)&&e!==window&&(a=a||e.parentNode,!Rt))do if(a&&a.getBoundingClientRect&&(re(a,"transform")!=="none"||t&&re(a,"position")!=="static")){var c=a.getBoundingClientRect();n-=c.top+parseInt(re(a,"border-top-width")),l-=c.left+parseInt(re(a,"border-left-width")),i=n+s.height,u=l+s.width;break}while(a=a.parentNode);if(r&&e!==window){var d=Gt(a||e),p=d&&d.a,h=d&&d.d;d&&(n/=h,l/=p,g/=p,f/=h,i=n+f,u=l+g)}return{top:n,left:l,bottom:i,right:u,width:g,height:f}}}function ur(e,o,t){for(var r=Tt(e,!0),a=Le(e)[o];r;){var s=Le(r)[t],n=void 0;if(n=a>=s,!n)return r;if(r===wt())break;r=Tt(r,!1)}return!1}function Wt(e,o,t,r){for(var a=0,s=0,n=e.children;s<n.length;){if(n[s].style.display!=="none"&&n[s]!==ue.ghost&&(r||n[s]!==ue.dragged)&&ht(n[s],t.draggable,e,!1)){if(a===o)return n[s];a++}s++}return null}function qo(e,o){for(var t=e.lastElementChild;t&&(t===ue.ghost||re(t,"display")==="none"||o&&!Wn(t,o));)t=t.previousElementSibling;return t||null}function ke(e,o){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==ue.clone&&(!o||Wn(e,o))&&t++;return t}function dr(e){var o=0,t=0,r=wt();if(e)do{var a=Gt(e),s=a.a,n=a.d;o+=e.scrollLeft*s,t+=e.scrollTop*n}while(e!==r&&(e=e.parentNode));return[o,t]}function mc(e,o){for(var t in e)if(e.hasOwnProperty(t)){for(var r in o)if(o.hasOwnProperty(r)&&o[r]===e[t][r])return Number(t)}return-1}function Tt(e,o){if(!e||!e.getBoundingClientRect)return wt();var t=e,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var a=re(t);if(t.clientWidth<t.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return wt();if(r||o)return t;r=!0}}while(t=t.parentNode);return wt()}function hc(e,o){if(e&&o)for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t]);return e}function vo(e,o){return Math.round(e.top)===Math.round(o.top)&&Math.round(e.left)===Math.round(o.left)&&Math.round(e.height)===Math.round(o.height)&&Math.round(e.width)===Math.round(o.width)}var vn;function la(e,o){return function(){if(!vn){var t=arguments,r=this;t.length===1?e.call(r,t[0]):e.apply(r,t),vn=setTimeout(function(){vn=void 0},o)}}}function yc(){clearTimeout(vn),vn=void 0}function ia(e,o,t){e.scrollLeft+=o,e.scrollTop+=t}function _o(e){var o=window.Polymer,t=window.jQuery||window.Zepto;return o&&o.dom?o.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function cr(e,o){re(e,"position","absolute"),re(e,"top",o.top),re(e,"left",o.left),re(e,"width",o.width),re(e,"height",o.height)}function mo(e){re(e,"position",""),re(e,"top",""),re(e,"left",""),re(e,"width",""),re(e,"height","")}var et="Sortable"+new Date().getTime();function xc(){var e=[],o;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(a){if(!(re(a,"display")==="none"||a===ue.ghost)){e.push({target:a,rect:Le(a)});var s=Ct({},e[e.length-1].rect);if(a.thisAnimationDuration){var n=Gt(a,!0);n&&(s.top-=n.f,s.left-=n.e)}a.fromRect=s}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(mc(e,{target:r}),1)},animateAll:function(r){var a=this;if(!this.options.animation){clearTimeout(o),typeof r=="function"&&r();return}var s=!1,n=0;e.forEach(function(l){var i=0,u=l.target,f=u.fromRect,g=Le(u),c=u.prevFromRect,d=u.prevToRect,p=l.rect,h=Gt(u,!0);h&&(g.top-=h.f,g.left-=h.e),u.toRect=g,u.thisAnimationDuration&&vo(c,g)&&!vo(f,g)&&(p.top-g.top)/(p.left-g.left)===(f.top-g.top)/(f.left-g.left)&&(i=Sc(p,c,d,a.options)),vo(g,f)||(u.prevFromRect=f,u.prevToRect=g,i||(i=a.options.animation),a.animate(u,p,g,i)),i&&(s=!0,n=Math.max(n,i),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},i),u.thisAnimationDuration=i)}),clearTimeout(o),s?o=setTimeout(function(){typeof r=="function"&&r()},n):typeof r=="function"&&r(),e=[]},animate:function(r,a,s,n){if(n){re(r,"transition",""),re(r,"transform","");var l=Gt(this.el),i=l&&l.a,u=l&&l.d,f=(a.left-s.left)/(i||1),g=(a.top-s.top)/(u||1);r.animatingX=!!f,r.animatingY=!!g,re(r,"transform","translate3d("+f+"px,"+g+"px,0)"),this.forRepaintDummy=bc(r),re(r,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),re(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){re(r,"transition",""),re(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},n)}}}}function bc(e){return e.offsetWidth}function Sc(e,o,t,r){return Math.sqrt(Math.pow(o.top-e.top,2)+Math.pow(o.left-e.left,2))/Math.sqrt(Math.pow(o.top-t.top,2)+Math.pow(o.left-t.left,2))*r.animation}var Ht=[],ho={initializeByDefault:!0},Sn={mount:function(o){for(var t in ho)ho.hasOwnProperty(t)&&!(t in o)&&(o[t]=ho[t]);Ht.forEach(function(r){if(r.pluginName===o.pluginName)throw"Sortable: Cannot mount plugin ".concat(o.pluginName," more than once")}),Ht.push(o)},pluginEvent:function(o,t,r){var a=this;this.eventCanceled=!1,r.cancel=function(){a.eventCanceled=!0};var s=o+"Global";Ht.forEach(function(n){t[n.pluginName]&&(t[n.pluginName][s]&&t[n.pluginName][s](Ct({sortable:t},r)),t.options[n.pluginName]&&t[n.pluginName][o]&&t[n.pluginName][o](Ct({sortable:t},r)))})},initializePlugins:function(o,t,r,a){Ht.forEach(function(l){var i=l.pluginName;if(!(!o.options[i]&&!l.initializeByDefault)){var u=new l(o,t,o.options);u.sortable=o,u.options=o.options,o[i]=u,gt(r,u.defaults)}});for(var s in o.options)if(o.options.hasOwnProperty(s)){var n=this.modifyOption(o,s,o.options[s]);typeof n<"u"&&(o.options[s]=n)}},getEventProperties:function(o,t){var r={};return Ht.forEach(function(a){typeof a.eventProperties=="function"&&gt(r,a.eventProperties.call(t[a.pluginName],o))}),r},modifyOption:function(o,t,r){var a;return Ht.forEach(function(s){o[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(a=s.optionListeners[t].call(o[s.pluginName],r))}),a}};function an(e){var o=e.sortable,t=e.rootEl,r=e.name,a=e.targetEl,s=e.cloneEl,n=e.toEl,l=e.fromEl,i=e.oldIndex,u=e.newIndex,f=e.oldDraggableIndex,g=e.newDraggableIndex,c=e.originalEvent,d=e.putSortable,p=e.extraEventProperties;if(o=o||t&&t[et],!!o){var h,m=o.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Rt&&!bn?h=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(h=document.createEvent("Event"),h.initEvent(r,!0,!0)),h.to=n||t,h.from=l||t,h.item=a||t,h.clone=s,h.oldIndex=i,h.newIndex=u,h.oldDraggableIndex=f,h.newDraggableIndex=g,h.originalEvent=c,h.pullMode=d?d.lastPutMode:void 0;var S=Ct(Ct({},p),Sn.getEventProperties(r,o));for(var O in S)h[O]=S[O];t&&t.dispatchEvent(h),m[y]&&m[y].call(o,h)}}var wc=["evt"],rt=function(o,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=r.evt,s=lc(r,wc);Sn.pluginEvent.bind(ue)(o,t,Ct({dragEl:Z,parentEl:He,ghostEl:ye,rootEl:Ve,nextEl:Nt,lastDownEl:Gn,cloneEl:Be,cloneHidden:Dt,dragStarted:sn,putSortable:Ze,activeSortable:ue.active,originalEvent:a,oldIndex:Kt,oldDraggableIndex:mn,newIndex:lt,newDraggableIndex:Ot,hideGhostForTarget:fa,unhideGhostForTarget:ga,cloneNowHidden:function(){Dt=!0},cloneNowShown:function(){Dt=!1},dispatchSortableEvent:function(l){tt({sortable:t,name:l,originalEvent:a})}},s))};function tt(e){an(Ct({putSortable:Ze,cloneEl:Be,targetEl:Z,rootEl:Ve,oldIndex:Kt,oldDraggableIndex:mn,newIndex:lt,newDraggableIndex:Ot},e))}var Z,He,ye,Ve,Nt,Gn,Be,Dt,Kt,lt,mn,Ot,On,Ze,zt=!1,Xn=!1,Yn=[],Vt,vt,yo,xo,fr,gr,sn,Bt,hn,yn=!1,Dn=!1,Un,_e,bo=[],jo=!1,Qn=[],oo=typeof document<"u",Pn=ra,pr=bn||Rt?"cssFloat":"float",Cc=oo&&!pc&&!ra&&"draggable"in document.createElement("div"),ua=function(){if(oo){if(Rt)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),da=function(o,t){var r=re(o),a=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Wt(o,0,t),n=Wt(o,1,t),l=s&&re(s),i=n&&re(n),u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Le(s).width,f=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+Le(n).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&l.float&&l.float!=="none"){var g=l.float==="left"?"left":"right";return n&&(i.clear==="both"||i.clear===g)?"vertical":"horizontal"}return s&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||u>=a&&r[pr]==="none"||n&&r[pr]==="none"&&u+f>a)?"vertical":"horizontal"},$c=function(o,t,r){var a=r?o.left:o.top,s=r?o.right:o.bottom,n=r?o.width:o.height,l=r?t.left:t.top,i=r?t.right:t.bottom,u=r?t.width:t.height;return a===l||s===i||a+n/2===l+u/2},Ec=function(o,t){var r;return Yn.some(function(a){var s=a[et].options.emptyInsertThreshold;if(!(!s||qo(a))){var n=Le(a),l=o>=n.left-s&&o<=n.right+s,i=t>=n.top-s&&t<=n.bottom+s;if(l&&i)return r=a}}),r},ca=function(o){function t(s,n){return function(l,i,u,f){var g=l.options.group.name&&i.options.group.name&&l.options.group.name===i.options.group.name;if(s==null&&(n||g))return!0;if(s==null||s===!1)return!1;if(n&&s==="clone")return s;if(typeof s=="function")return t(s(l,i,u,f),n)(l,i,u,f);var c=(n?l:i).options.group.name;return s===!0||typeof s=="string"&&s===c||s.join&&s.indexOf(c)>-1}}var r={},a=o.group;(!a||jn(a)!="object")&&(a={name:a}),r.name=a.name,r.checkPull=t(a.pull,!0),r.checkPut=t(a.put),r.revertClone=a.revertClone,o.group=r},fa=function(){!ua&&ye&&re(ye,"display","none")},ga=function(){!ua&&ye&&re(ye,"display","")};oo&&document.addEventListener("click",function(e){if(Xn)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Xn=!1,!1},!0);var Lt=function(o){if(Z){o=o.touches?o.touches[0]:o;var t=Ec(o.clientX,o.clientY);if(t){var r={};for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[et]._onDragOver(r)}}},Rc=function(o){Z&&Z.parentNode[et]._isOutsideThisEl(o.target)};function ue(e,o){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=o=gt({},o),e[et]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return da(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(n,l){n.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ue.supportPointer!==!1&&"PointerEvent"in window&&!pn,emptyInsertThreshold:5};Sn.initializePlugins(this,e,t);for(var r in t)!(r in o)&&(o[r]=t[r]);ca(o);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=o.forceFallback?!1:Cc,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?Ee(e,"pointerdown",this._onTapStart):(Ee(e,"mousedown",this._onTapStart),Ee(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ee(e,"dragover",this),Ee(e,"dragenter",this)),Yn.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),gt(this,xc())}ue.prototype={constructor:ue,_isOutsideThisEl:function(o){!this.el.contains(o)&&o!==this.el&&(Bt=null)},_getDirection:function(o,t){return typeof this.options.direction=="function"?this.options.direction.call(this,o,t,Z):this.options.direction},_onTapStart:function(o){if(o.cancelable){var t=this,r=this.el,a=this.options,s=a.preventOnFilter,n=o.type,l=o.touches&&o.touches[0]||o.pointerType&&o.pointerType==="touch"&&o,i=(l||o).target,u=o.target.shadowRoot&&(o.path&&o.path[0]||o.composedPath&&o.composedPath()[0])||i,f=a.filter;if(Mc(r),!Z&&!(/mousedown|pointerdown/.test(n)&&o.button!==0||a.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&pn&&i&&i.tagName.toUpperCase()==="SELECT")&&(i=ht(i,a.draggable,r,!1),!(i&&i.animated)&&Gn!==i)){if(Kt=ke(i),mn=ke(i,a.draggable),typeof f=="function"){if(f.call(this,o,i,this)){tt({sortable:t,rootEl:u,name:"filter",targetEl:i,toEl:r,fromEl:r}),rt("filter",t,{evt:o}),s&&o.cancelable&&o.preventDefault();return}}else if(f&&(f=f.split(",").some(function(g){if(g=ht(u,g.trim(),r,!1),g)return tt({sortable:t,rootEl:g,name:"filter",targetEl:i,fromEl:r,toEl:r}),rt("filter",t,{evt:o}),!0}),f)){s&&o.cancelable&&o.preventDefault();return}a.handle&&!ht(u,a.handle,r,!1)||this._prepareDragStart(o,l,i)}}},_prepareDragStart:function(o,t,r){var a=this,s=a.el,n=a.options,l=s.ownerDocument,i;if(r&&!Z&&r.parentNode===s){var u=Le(r);if(Ve=s,Z=r,He=Z.parentNode,Nt=Z.nextSibling,Gn=r,On=n.group,ue.dragged=Z,Vt={target:Z,clientX:(t||o).clientX,clientY:(t||o).clientY},fr=Vt.clientX-u.left,gr=Vt.clientY-u.top,this._lastX=(t||o).clientX,this._lastY=(t||o).clientY,Z.style["will-change"]="all",i=function(){if(rt("delayEnded",a,{evt:o}),ue.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!lr&&a.nativeDraggable&&(Z.draggable=!0),a._triggerDragStart(o,t),tt({sortable:a,name:"choose",originalEvent:o}),Ue(Z,n.chosenClass,!0)},n.ignore.split(",").forEach(function(f){sa(Z,f.trim(),So)}),Ee(l,"dragover",Lt),Ee(l,"mousemove",Lt),Ee(l,"touchmove",Lt),Ee(l,"mouseup",a._onDrop),Ee(l,"touchend",a._onDrop),Ee(l,"touchcancel",a._onDrop),lr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Z.draggable=!0),rt("delayStart",this,{evt:o}),n.delay&&(!n.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(bn||Rt))){if(ue.eventCanceled){this._onDrop();return}Ee(l,"mouseup",a._disableDelayedDrag),Ee(l,"touchend",a._disableDelayedDrag),Ee(l,"touchcancel",a._disableDelayedDrag),Ee(l,"mousemove",a._delayedDragTouchMoveHandler),Ee(l,"touchmove",a._delayedDragTouchMoveHandler),n.supportPointer&&Ee(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(i,n.delay)}else i()}},_delayedDragTouchMoveHandler:function(o){var t=o.touches?o.touches[0]:o;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Z&&So(Z),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var o=this.el.ownerDocument;Ce(o,"mouseup",this._disableDelayedDrag),Ce(o,"touchend",this._disableDelayedDrag),Ce(o,"touchcancel",this._disableDelayedDrag),Ce(o,"mousemove",this._delayedDragTouchMoveHandler),Ce(o,"touchmove",this._delayedDragTouchMoveHandler),Ce(o,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(o,t){t=t||o.pointerType=="touch"&&o,!this.nativeDraggable||t?this.options.supportPointer?Ee(document,"pointermove",this._onTouchMove):t?Ee(document,"touchmove",this._onTouchMove):Ee(document,"mousemove",this._onTouchMove):(Ee(Z,"dragend",this),Ee(Ve,"dragstart",this._onDragStart));try{document.selection?Hn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(o,t){if(zt=!1,Ve&&Z){rt("dragStarted",this,{evt:t}),this.nativeDraggable&&Ee(document,"dragover",Rc);var r=this.options;!o&&Ue(Z,r.dragClass,!1),Ue(Z,r.ghostClass,!0),ue.active=this,o&&this._appendGhost(),tt({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(vt){this._lastX=vt.clientX,this._lastY=vt.clientY,fa();for(var o=document.elementFromPoint(vt.clientX,vt.clientY),t=o;o&&o.shadowRoot&&(o=o.shadowRoot.elementFromPoint(vt.clientX,vt.clientY),o!==t);)t=o;if(Z.parentNode[et]._isOutsideThisEl(o),t)do{if(t[et]){var r=void 0;if(r=t[et]._onDragOver({clientX:vt.clientX,clientY:vt.clientY,target:o,rootEl:t}),r&&!this.options.dragoverBubble)break}o=t}while(t=t.parentNode);ga()}},_onTouchMove:function(o){if(Vt){var t=this.options,r=t.fallbackTolerance,a=t.fallbackOffset,s=o.touches?o.touches[0]:o,n=ye&&Gt(ye,!0),l=ye&&n&&n.a,i=ye&&n&&n.d,u=Pn&&_e&&dr(_e),f=(s.clientX-Vt.clientX+a.x)/(l||1)+(u?u[0]-bo[0]:0)/(l||1),g=(s.clientY-Vt.clientY+a.y)/(i||1)+(u?u[1]-bo[1]:0)/(i||1);if(!ue.active&&!zt){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(o,!0)}if(ye){n?(n.e+=f-(yo||0),n.f+=g-(xo||0)):n={a:1,b:0,c:0,d:1,e:f,f:g};var c="matrix(".concat(n.a,",").concat(n.b,",").concat(n.c,",").concat(n.d,",").concat(n.e,",").concat(n.f,")");re(ye,"webkitTransform",c),re(ye,"mozTransform",c),re(ye,"msTransform",c),re(ye,"transform",c),yo=f,xo=g,vt=s}o.cancelable&&o.preventDefault()}},_appendGhost:function(){if(!ye){var o=this.options.fallbackOnBody?document.body:Ve,t=Le(Z,!0,Pn,!0,o),r=this.options;if(Pn){for(_e=o;re(_e,"position")==="static"&&re(_e,"transform")==="none"&&_e!==document;)_e=_e.parentNode;_e!==document.body&&_e!==document.documentElement?(_e===document&&(_e=wt()),t.top+=_e.scrollTop,t.left+=_e.scrollLeft):_e=wt(),bo=dr(_e)}ye=Z.cloneNode(!0),Ue(ye,r.ghostClass,!1),Ue(ye,r.fallbackClass,!0),Ue(ye,r.dragClass,!0),re(ye,"transition",""),re(ye,"transform",""),re(ye,"box-sizing","border-box"),re(ye,"margin",0),re(ye,"top",t.top),re(ye,"left",t.left),re(ye,"width",t.width),re(ye,"height",t.height),re(ye,"opacity","0.8"),re(ye,"position",Pn?"absolute":"fixed"),re(ye,"zIndex","100000"),re(ye,"pointerEvents","none"),ue.ghost=ye,o.appendChild(ye),re(ye,"transform-origin",fr/parseInt(ye.style.width)*100+"% "+gr/parseInt(ye.style.height)*100+"%")}},_onDragStart:function(o,t){var r=this,a=o.dataTransfer,s=r.options;if(rt("dragStart",this,{evt:o}),ue.eventCanceled){this._onDrop();return}rt("setupClone",this),ue.eventCanceled||(Be=_o(Z),Be.draggable=!1,Be.style["will-change"]="",this._hideClone(),Ue(Be,this.options.chosenClass,!1),ue.clone=Be),r.cloneId=Hn(function(){rt("clone",r),!ue.eventCanceled&&(r.options.removeCloneOnHide||Ve.insertBefore(Be,Z),r._hideClone(),tt({sortable:r,name:"clone"}))}),!t&&Ue(Z,s.dragClass,!0),t?(Xn=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Ce(document,"mouseup",r._onDrop),Ce(document,"touchend",r._onDrop),Ce(document,"touchcancel",r._onDrop),a&&(a.effectAllowed="move",s.setData&&s.setData.call(r,a,Z)),Ee(document,"drop",r),re(Z,"transform","translateZ(0)")),zt=!0,r._dragStartId=Hn(r._dragStarted.bind(r,t,o)),Ee(document,"selectstart",r),sn=!0,pn&&re(document.body,"user-select","none")},_onDragOver:function(o){var t=this.el,r=o.target,a,s,n,l=this.options,i=l.group,u=ue.active,f=On===i,g=l.sort,c=Ze||u,d,p=this,h=!1;if(jo)return;function m(le,me){rt(le,p,Ct({evt:o,isOwner:f,axis:d?"vertical":"horizontal",revert:n,dragRect:a,targetRect:s,canSort:g,fromSortable:c,target:r,completed:S,onMove:function(J,ge){return Tn(Ve,t,Z,a,J,Le(J),o,ge)},changed:O},me))}function y(){m("dragOverAnimationCapture"),p.captureAnimationState(),p!==c&&c.captureAnimationState()}function S(le){return m("dragOverCompleted",{insertion:le}),le&&(f?u._hideClone():u._showClone(p),p!==c&&(Ue(Z,Ze?Ze.options.ghostClass:u.options.ghostClass,!1),Ue(Z,l.ghostClass,!0)),Ze!==p&&p!==ue.active?Ze=p:p===ue.active&&Ze&&(Ze=null),c===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){m("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==c&&(c.animateAll(),c._ignoreWhileAnimating=null)),(r===Z&&!Z.animated||r===t&&!r.animated)&&(Bt=null),!l.dragoverBubble&&!o.rootEl&&r!==document&&(Z.parentNode[et]._isOutsideThisEl(o.target),!le&&Lt(o)),!l.dragoverBubble&&o.stopPropagation&&o.stopPropagation(),h=!0}function O(){lt=ke(Z),Ot=ke(Z,l.draggable),tt({sortable:p,name:"change",toEl:t,newIndex:lt,newDraggableIndex:Ot,originalEvent:o})}if(o.preventDefault!==void 0&&o.cancelable&&o.preventDefault(),r=ht(r,l.draggable,t,!0),m("dragOver"),ue.eventCanceled)return h;if(Z.contains(o.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return S(!1);if(Xn=!1,u&&!l.disabled&&(f?g||(n=He!==Ve):Ze===this||(this.lastPutMode=On.checkPull(this,u,Z,o))&&i.checkPut(this,u,Z,o))){if(d=this._getDirection(o,r)==="vertical",a=Le(Z),m("dragOverValid"),ue.eventCanceled)return h;if(n)return He=Ve,y(),this._hideClone(),m("revert"),ue.eventCanceled||(Nt?Ve.insertBefore(Z,Nt):Ve.appendChild(Z)),S(!0);var R=qo(t,l.draggable);if(!R||Pc(o,d,this)&&!R.animated){if(R===Z)return S(!1);if(R&&t===o.target&&(r=R),r&&(s=Le(r)),Tn(Ve,t,Z,a,r,s,o,!!r)!==!1)return y(),t.appendChild(Z),He=t,O(),S(!0)}else if(R&&Dc(o,d,this)){var P=Wt(t,0,l,!0);if(P===Z)return S(!1);if(r=P,s=Le(r),Tn(Ve,t,Z,a,r,s,o,!1)!==!1)return y(),t.insertBefore(Z,P),He=t,O(),S(!0)}else if(r.parentNode===t){s=Le(r);var A=0,X,ee=Z.parentNode!==t,E=!$c(Z.animated&&Z.toRect||a,r.animated&&r.toRect||s,d),b=d?"top":"left",V=ur(r,"top","top")||ur(Z,"top","top"),ne=V?V.scrollTop:void 0;Bt!==r&&(X=s[b],yn=!1,Dn=!E&&l.invertSwap||ee),A=Tc(o,r,s,d,E?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,Dn,Bt===r);var L;if(A!==0){var U=ke(Z);do U-=A,L=He.children[U];while(L&&(re(L,"display")==="none"||L===ye))}if(A===0||L===r)return S(!1);Bt=r,hn=A;var k=r.nextElementSibling,j=!1;j=A===1;var q=Tn(Ve,t,Z,a,r,s,o,j);if(q!==!1)return(q===1||q===-1)&&(j=q===1),jo=!0,setTimeout(Oc,30),y(),j&&!k?t.appendChild(Z):r.parentNode.insertBefore(Z,j?k:r),V&&ia(V,0,ne-V.scrollTop),He=Z.parentNode,X!==void 0&&!Dn&&(Un=Math.abs(X-Le(r)[b])),O(),S(!0)}if(t.contains(Z))return S(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ce(document,"mousemove",this._onTouchMove),Ce(document,"touchmove",this._onTouchMove),Ce(document,"pointermove",this._onTouchMove),Ce(document,"dragover",Lt),Ce(document,"mousemove",Lt),Ce(document,"touchmove",Lt)},_offUpEvents:function(){var o=this.el.ownerDocument;Ce(o,"mouseup",this._onDrop),Ce(o,"touchend",this._onDrop),Ce(o,"pointerup",this._onDrop),Ce(o,"touchcancel",this._onDrop),Ce(document,"selectstart",this)},_onDrop:function(o){var t=this.el,r=this.options;if(lt=ke(Z),Ot=ke(Z,r.draggable),rt("drop",this,{evt:o}),He=Z&&Z.parentNode,lt=ke(Z),Ot=ke(Z,r.draggable),ue.eventCanceled){this._nulling();return}zt=!1,Dn=!1,yn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Go(this.cloneId),Go(this._dragStartId),this.nativeDraggable&&(Ce(document,"drop",this),Ce(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),pn&&re(document.body,"user-select",""),re(Z,"transform",""),o&&(sn&&(o.cancelable&&o.preventDefault(),!r.dropBubble&&o.stopPropagation()),ye&&ye.parentNode&&ye.parentNode.removeChild(ye),(Ve===He||Ze&&Ze.lastPutMode!=="clone")&&Be&&Be.parentNode&&Be.parentNode.removeChild(Be),Z&&(this.nativeDraggable&&Ce(Z,"dragend",this),So(Z),Z.style["will-change"]="",sn&&!zt&&Ue(Z,Ze?Ze.options.ghostClass:this.options.ghostClass,!1),Ue(Z,this.options.chosenClass,!1),tt({sortable:this,name:"unchoose",toEl:He,newIndex:null,newDraggableIndex:null,originalEvent:o}),Ve!==He?(lt>=0&&(tt({rootEl:He,name:"add",toEl:He,fromEl:Ve,originalEvent:o}),tt({sortable:this,name:"remove",toEl:He,originalEvent:o}),tt({rootEl:He,name:"sort",toEl:He,fromEl:Ve,originalEvent:o}),tt({sortable:this,name:"sort",toEl:He,originalEvent:o})),Ze&&Ze.save()):lt!==Kt&&lt>=0&&(tt({sortable:this,name:"update",toEl:He,originalEvent:o}),tt({sortable:this,name:"sort",toEl:He,originalEvent:o})),ue.active&&((lt==null||lt===-1)&&(lt=Kt,Ot=mn),tt({sortable:this,name:"end",toEl:He,originalEvent:o}),this.save()))),this._nulling()},_nulling:function(){rt("nulling",this),Ve=Z=He=ye=Nt=Be=Gn=Dt=Vt=vt=sn=lt=Ot=Kt=mn=Bt=hn=Ze=On=ue.dragged=ue.ghost=ue.clone=ue.active=null,Qn.forEach(function(o){o.checked=!0}),Qn.length=yo=xo=0},handleEvent:function(o){switch(o.type){case"drop":case"dragend":this._onDrop(o);break;case"dragenter":case"dragover":Z&&(this._onDragOver(o),Ic(o));break;case"selectstart":o.preventDefault();break}},toArray:function(){for(var o=[],t,r=this.el.children,a=0,s=r.length,n=this.options;a<s;a++)t=r[a],ht(t,n.draggable,this.el,!1)&&o.push(t.getAttribute(n.dataIdAttr)||Ac(t));return o},sort:function(o,t){var r={},a=this.el;this.toArray().forEach(function(s,n){var l=a.children[n];ht(l,this.options.draggable,a,!1)&&(r[s]=l)},this),t&&this.captureAnimationState(),o.forEach(function(s){r[s]&&(a.removeChild(r[s]),a.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var o=this.options.store;o&&o.set&&o.set(this)},closest:function(o,t){return ht(o,t||this.options.draggable,this.el,!1)},option:function(o,t){var r=this.options;if(t===void 0)return r[o];var a=Sn.modifyOption(this,o,t);typeof a<"u"?r[o]=a:r[o]=t,o==="group"&&ca(r)},destroy:function(){rt("destroy",this);var o=this.el;o[et]=null,Ce(o,"mousedown",this._onTapStart),Ce(o,"touchstart",this._onTapStart),Ce(o,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ce(o,"dragover",this),Ce(o,"dragenter",this)),Array.prototype.forEach.call(o.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Yn.splice(Yn.indexOf(this.el),1),this.el=o=null},_hideClone:function(){if(!Dt){if(rt("hideClone",this),ue.eventCanceled)return;re(Be,"display","none"),this.options.removeCloneOnHide&&Be.parentNode&&Be.parentNode.removeChild(Be),Dt=!0}},_showClone:function(o){if(o.lastPutMode!=="clone"){this._hideClone();return}if(Dt){if(rt("showClone",this),ue.eventCanceled)return;Z.parentNode==Ve&&!this.options.group.revertClone?Ve.insertBefore(Be,Z):Nt?Ve.insertBefore(Be,Nt):Ve.appendChild(Be),this.options.group.revertClone&&this.animate(Z,Be),re(Be,"display",""),Dt=!1}}};function Ic(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Tn(e,o,t,r,a,s,n,l){var i,u=e[et],f=u.options.onMove,g;return window.CustomEvent&&!Rt&&!bn?i=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(i=document.createEvent("Event"),i.initEvent("move",!0,!0)),i.to=o,i.from=e,i.dragged=t,i.draggedRect=r,i.related=a||o,i.relatedRect=s||Le(o),i.willInsertAfter=l,i.originalEvent=n,e.dispatchEvent(i),f&&(g=f.call(u,i,n)),g}function So(e){e.draggable=!1}function Oc(){jo=!1}function Dc(e,o,t){var r=Le(Wt(t.el,0,t.options,!0)),a=10;return o?e.clientX<r.left-a||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-a||e.clientY<r.bottom&&e.clientX<r.left}function Pc(e,o,t){var r=Le(qo(t.el,t.options.draggable)),a=10;return o?e.clientX>r.right+a||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+a}function Tc(e,o,t,r,a,s,n,l){var i=r?e.clientY:e.clientX,u=r?t.height:t.width,f=r?t.top:t.left,g=r?t.bottom:t.right,c=!1;if(!n){if(l&&Un<u*a){if(!yn&&(hn===1?i>f+u*s/2:i<g-u*s/2)&&(yn=!0),yn)c=!0;else if(hn===1?i<f+Un:i>g-Un)return-hn}else if(i>f+u*(1-a)/2&&i<g-u*(1-a)/2)return Fc(o)}return c=c||n,c&&(i<f+u*s/2||i>g-u*s/2)?i>f+u/2?1:-1:0}function Fc(e){return ke(Z)<ke(e)?1:-1}function Ac(e){for(var o=e.tagName+e.className+e.src+e.href+e.textContent,t=o.length,r=0;t--;)r+=o.charCodeAt(t);return r.toString(36)}function Mc(e){Qn.length=0;for(var o=e.getElementsByTagName("input"),t=o.length;t--;){var r=o[t];r.checked&&Qn.push(r)}}function Hn(e){return setTimeout(e,0)}function Go(e){return clearTimeout(e)}oo&&Ee(document,"touchmove",function(e){(ue.active||zt)&&e.cancelable&&e.preventDefault()});ue.utils={on:Ee,off:Ce,css:re,find:sa,is:function(o,t){return!!ht(o,t,o,!1)},extend:hc,throttle:la,closest:ht,toggleClass:Ue,clone:_o,index:ke,nextTick:Hn,cancelNextTick:Go,detectDirection:da,getChild:Wt};ue.get=function(e){return e[et]};ue.mount=function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];o[0].constructor===Array&&(o=o[0]),o.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(ue.utils=Ct(Ct({},ue.utils),r.utils)),Sn.mount(r)})};ue.create=function(e,o){return new ue(e,o)};ue.version=gc;var We=[],ln,Uo,Ho=!1,wo,Co,Jn,un;function Vc(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return e.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?Ee(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ee(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ee(document,"touchmove",this._handleFallbackAutoScroll):Ee(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Ce(document,"dragover",this._handleAutoScroll):(Ce(document,"pointermove",this._handleFallbackAutoScroll),Ce(document,"touchmove",this._handleFallbackAutoScroll),Ce(document,"mousemove",this._handleFallbackAutoScroll)),vr(),Bn(),yc()},nulling:function(){Jn=Uo=ln=Ho=un=wo=Co=null,We.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var a=this,s=(t.touches?t.touches[0]:t).clientX,n=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(s,n);if(Jn=t,r||this.options.forceAutoScrollFallback||bn||Rt||pn){$o(t,this.options,l,r);var i=Tt(l,!0);Ho&&(!un||s!==wo||n!==Co)&&(un&&vr(),un=setInterval(function(){var u=Tt(document.elementFromPoint(s,n),!0);u!==i&&(i=u,Bn()),$o(t,a.options,u,r)},10),wo=s,Co=n)}else{if(!this.options.bubbleScroll||Tt(l,!0)===wt()){Bn();return}$o(t,this.options,Tt(l,!1),!1)}}},gt(e,{pluginName:"scroll",initializeByDefault:!0})}function Bn(){We.forEach(function(e){clearInterval(e.pid)}),We=[]}function vr(){clearInterval(un)}var $o=la(function(e,o,t,r){if(o.scroll){var a=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,n=o.scrollSensitivity,l=o.scrollSpeed,i=wt(),u=!1,f;Uo!==t&&(Uo=t,Bn(),ln=o.scroll,f=o.scrollFn,ln===!0&&(ln=Tt(t,!0)));var g=0,c=ln;do{var d=c,p=Le(d),h=p.top,m=p.bottom,y=p.left,S=p.right,O=p.width,R=p.height,P=void 0,A=void 0,X=d.scrollWidth,ee=d.scrollHeight,E=re(d),b=d.scrollLeft,V=d.scrollTop;d===i?(P=O<X&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),A=R<ee&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(P=O<X&&(E.overflowX==="auto"||E.overflowX==="scroll"),A=R<ee&&(E.overflowY==="auto"||E.overflowY==="scroll"));var ne=P&&(Math.abs(S-a)<=n&&b+O<X)-(Math.abs(y-a)<=n&&!!b),L=A&&(Math.abs(m-s)<=n&&V+R<ee)-(Math.abs(h-s)<=n&&!!V);if(!We[g])for(var U=0;U<=g;U++)We[U]||(We[U]={});(We[g].vx!=ne||We[g].vy!=L||We[g].el!==d)&&(We[g].el=d,We[g].vx=ne,We[g].vy=L,clearInterval(We[g].pid),(ne!=0||L!=0)&&(u=!0,We[g].pid=setInterval((function(){r&&this.layer===0&&ue.active._onTouchMove(Jn);var k=We[this.layer].vy?We[this.layer].vy*l:0,j=We[this.layer].vx?We[this.layer].vx*l:0;typeof f=="function"&&f.call(ue.dragged.parentNode[et],j,k,e,Jn,We[this.layer].el)!=="continue"||ia(We[this.layer].el,j,k)}).bind({layer:g}),24))),g++}while(o.bubbleScroll&&c!==i&&(c=Tt(c,!1)));Ho=u}},30),pa=function(o){var t=o.originalEvent,r=o.putSortable,a=o.dragEl,s=o.activeSortable,n=o.dispatchSortableEvent,l=o.hideGhostForTarget,i=o.unhideGhostForTarget;if(t){var u=r||s;l();var f=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,g=document.elementFromPoint(f.clientX,f.clientY);i(),u&&!u.el.contains(g)&&(n("spill"),this.onSpill({dragEl:a,putSortable:r}))}};function er(){}er.prototype={startIndex:null,dragStart:function(o){var t=o.oldDraggableIndex;this.startIndex=t},onSpill:function(o){var t=o.dragEl,r=o.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var a=Wt(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:pa};gt(er,{pluginName:"revertOnSpill"});function tr(){}tr.prototype={onSpill:function(o){var t=o.dragEl,r=o.putSortable,a=r||this.sortable;a.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),a.animateAll()},drop:pa};gt(tr,{pluginName:"removeOnSpill"});var ft;function Lc(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(t){var r=t.dragEl;ft=r},dragOverValid:function(t){var r=t.completed,a=t.target,s=t.onMove,n=t.activeSortable,l=t.changed,i=t.cancel;if(n.options.swap){var u=this.sortable.el,f=this.options;if(a&&a!==u){var g=ft;s(a)!==!1?(Ue(a,f.swapClass,!0),ft=a):ft=null,g&&g!==ft&&Ue(g,f.swapClass,!1)}l(),r(!0),i()}},drop:function(t){var r=t.activeSortable,a=t.putSortable,s=t.dragEl,n=a||this.sortable,l=this.options;ft&&Ue(ft,l.swapClass,!1),ft&&(l.swap||a&&a.options.swap)&&s!==ft&&(n.captureAnimationState(),n!==r&&r.captureAnimationState(),Nc(s,ft),n.animateAll(),n!==r&&r.animateAll())},nulling:function(){ft=null}},gt(e,{pluginName:"swap",eventProperties:function(){return{swapItem:ft}}})}function Nc(e,o){var t=e.parentNode,r=o.parentNode,a,s;!t||!r||t.isEqualNode(o)||r.isEqualNode(e)||(a=ke(e),s=ke(o),t.isEqualNode(r)&&a<s&&s++,t.insertBefore(o,t.children[a]),r.insertBefore(e,r.children[s]))}var he=[],st=[],tn,mt,nn=!1,at=!1,kt=!1,Me,on,Fn;function jc(){function e(o){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));o.options.supportPointer?Ee(document,"pointerup",this._deselectMultiDrag):(Ee(document,"mouseup",this._deselectMultiDrag),Ee(document,"touchend",this._deselectMultiDrag)),Ee(document,"keydown",this._checkKeyDown),Ee(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(a,s){var n="";he.length&&mt===o?he.forEach(function(l,i){n+=(i?", ":"")+l.textContent}):n=s.textContent,a.setData("Text",n)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;Me=r},delayEnded:function(){this.isMultiDrag=~he.indexOf(Me)},setupClone:function(t){var r=t.sortable,a=t.cancel;if(this.isMultiDrag){for(var s=0;s<he.length;s++)st.push(_o(he[s])),st[s].sortableIndex=he[s].sortableIndex,st[s].draggable=!1,st[s].style["will-change"]="",Ue(st[s],this.options.selectedClass,!1),he[s]===Me&&Ue(st[s],this.options.chosenClass,!1);r._hideClone(),a()}},clone:function(t){var r=t.sortable,a=t.rootEl,s=t.dispatchSortableEvent,n=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||he.length&&mt===r&&(mr(!0,a),s("clone"),n()))},showClone:function(t){var r=t.cloneNowShown,a=t.rootEl,s=t.cancel;this.isMultiDrag&&(mr(!1,a),st.forEach(function(n){re(n,"display","")}),r(),Fn=!1,s())},hideClone:function(t){var r=this;t.sortable;var a=t.cloneNowHidden,s=t.cancel;this.isMultiDrag&&(st.forEach(function(n){re(n,"display","none"),r.options.removeCloneOnHide&&n.parentNode&&n.parentNode.removeChild(n)}),a(),Fn=!0,s())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&mt&&mt.multiDrag._deselectMultiDrag(),he.forEach(function(r){r.sortableIndex=ke(r)}),he=he.sort(function(r,a){return r.sortableIndex-a.sortableIndex}),kt=!0},dragStarted:function(t){var r=this,a=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){he.forEach(function(n){n!==Me&&re(n,"position","absolute")});var s=Le(Me,!1,!0,!0);he.forEach(function(n){n!==Me&&cr(n,s)}),at=!0,nn=!0}a.animateAll(function(){at=!1,nn=!1,r.options.animation&&he.forEach(function(n){mo(n)}),r.options.sort&&An()})}},dragOver:function(t){var r=t.target,a=t.completed,s=t.cancel;at&&~he.indexOf(r)&&(a(!1),s())},revert:function(t){var r=t.fromSortable,a=t.rootEl,s=t.sortable,n=t.dragRect;he.length>1&&(he.forEach(function(l){s.addAnimationState({target:l,rect:at?Le(l):n}),mo(l),l.fromRect=n,r.removeAnimationState(l)}),at=!1,Gc(!this.options.removeCloneOnHide,a))},dragOverCompleted:function(t){var r=t.sortable,a=t.isOwner,s=t.insertion,n=t.activeSortable,l=t.parentEl,i=t.putSortable,u=this.options;if(s){if(a&&n._hideClone(),nn=!1,u.animation&&he.length>1&&(at||!a&&!n.options.sort&&!i)){var f=Le(Me,!1,!0,!0);he.forEach(function(c){c!==Me&&(cr(c,f),l.appendChild(c))}),at=!0}if(!a)if(at||An(),he.length>1){var g=Fn;n._showClone(r),n.options.animation&&!Fn&&g&&st.forEach(function(c){n.addAnimationState({target:c,rect:on}),c.fromRect=on,c.thisAnimationDuration=null})}else n._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,a=t.isOwner,s=t.activeSortable;if(he.forEach(function(l){l.thisAnimationDuration=null}),s.options.animation&&!a&&s.multiDrag.isMultiDrag){on=gt({},r);var n=Gt(Me,!0);on.top-=n.f,on.left-=n.e}},dragOverAnimationComplete:function(){at&&(at=!1,An())},drop:function(t){var r=t.originalEvent,a=t.rootEl,s=t.parentEl,n=t.sortable,l=t.dispatchSortableEvent,i=t.oldIndex,u=t.putSortable,f=u||this.sortable;if(r){var g=this.options,c=s.children;if(!kt)if(g.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Ue(Me,g.selectedClass,!~he.indexOf(Me)),~he.indexOf(Me))he.splice(he.indexOf(Me),1),tn=null,an({sortable:n,rootEl:a,name:"deselect",targetEl:Me});else{if(he.push(Me),an({sortable:n,rootEl:a,name:"select",targetEl:Me}),r.shiftKey&&tn&&n.el.contains(tn)){var d=ke(tn),p=ke(Me);if(~d&&~p&&d!==p){var h,m;for(p>d?(m=d,h=p):(m=p,h=d+1);m<h;m++)~he.indexOf(c[m])||(Ue(c[m],g.selectedClass,!0),he.push(c[m]),an({sortable:n,rootEl:a,name:"select",targetEl:c[m]}))}}else tn=Me;mt=f}if(kt&&this.isMultiDrag){if(at=!1,(s[et].options.sort||s!==a)&&he.length>1){var y=Le(Me),S=ke(Me,":not(."+this.options.selectedClass+")");if(!nn&&g.animation&&(Me.thisAnimationDuration=null),f.captureAnimationState(),!nn&&(g.animation&&(Me.fromRect=y,he.forEach(function(R){if(R.thisAnimationDuration=null,R!==Me){var P=at?Le(R):y;R.fromRect=P,f.addAnimationState({target:R,rect:P})}})),An(),he.forEach(function(R){c[S]?s.insertBefore(R,c[S]):s.appendChild(R),S++}),i===ke(Me))){var O=!1;he.forEach(function(R){if(R.sortableIndex!==ke(R)){O=!0;return}}),O&&l("update")}he.forEach(function(R){mo(R)}),f.animateAll()}mt=f}(a===s||u&&u.lastPutMode!=="clone")&&st.forEach(function(R){R.parentNode&&R.parentNode.removeChild(R)})}},nullingGlobal:function(){this.isMultiDrag=kt=!1,st.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Ce(document,"pointerup",this._deselectMultiDrag),Ce(document,"mouseup",this._deselectMultiDrag),Ce(document,"touchend",this._deselectMultiDrag),Ce(document,"keydown",this._checkKeyDown),Ce(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof kt<"u"&&kt)&&mt===this.sortable&&!(t&&ht(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;he.length;){var r=he[0];Ue(r,this.options.selectedClass,!1),he.shift(),an({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},gt(e,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[et];!r||!r.options.multiDrag||~he.indexOf(t)||(mt&&mt!==r&&(mt.multiDrag._deselectMultiDrag(),mt=r),Ue(t,r.options.selectedClass,!0),he.push(t))},deselect:function(t){var r=t.parentNode[et],a=he.indexOf(t);!r||!r.options.multiDrag||!~a||(Ue(t,r.options.selectedClass,!1),he.splice(a,1))}},eventProperties:function(){var t=this,r=[],a=[];return he.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var n;at&&s!==Me?n=-1:at?n=ke(s,":not(."+t.options.selectedClass+")"):n=ke(s),a.push({multiDragElement:s,index:n})}),{items:ic(he),clones:[].concat(st),oldIndicies:r,newIndicies:a}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function Gc(e,o){he.forEach(function(t,r){var a=o.children[t.sortableIndex+(e?Number(r):0)];a?o.insertBefore(t,a):o.appendChild(t)})}function mr(e,o){st.forEach(function(t,r){var a=o.children[t.sortableIndex+(e?Number(r):0)];a?o.insertBefore(t,a):o.appendChild(t)})}function An(){he.forEach(function(e){e!==Me&&e.parentNode&&e.parentNode.removeChild(e)})}ue.mount(new Vc);ue.mount(tr,er);const Uc=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:jc,Sortable:ue,Swap:Lc,default:ue},Symbol.toStringTag,{value:"Module"})),Hc=na(Uc);(function(e,o){(function(r,a){e.exports=a(rc,Hc)})(typeof self<"u"?self:nc,function(t,r){return function(a){var s={};function n(l){if(s[l])return s[l].exports;var i=s[l]={i:l,l:!1,exports:{}};return a[l].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=a,n.c=s,n.d=function(l,i,u){n.o(l,i)||Object.defineProperty(l,i,{enumerable:!0,get:u})},n.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,i){if(i&1&&(l=n(l)),i&8||i&4&&typeof l=="object"&&l&&l.__esModule)return l;var u=Object.create(null);if(n.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:l}),i&2&&typeof l!="string")for(var f in l)n.d(u,f,(function(g){return l[g]}).bind(null,f));return u},n.n=function(l){var i=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(i,"a",i),i},n.o=function(l,i){return Object.prototype.hasOwnProperty.call(l,i)},n.p="",n(n.s="fb15")}({"00ee":function(a,s,n){var l=n("b622"),i=l("toStringTag"),u={};u[i]="z",a.exports=String(u)==="[object z]"},"0366":function(a,s,n){var l=n("1c0b");a.exports=function(i,u,f){if(l(i),u===void 0)return i;switch(f){case 0:return function(){return i.call(u)};case 1:return function(g){return i.call(u,g)};case 2:return function(g,c){return i.call(u,g,c)};case 3:return function(g,c,d){return i.call(u,g,c,d)}}return function(){return i.apply(u,arguments)}}},"057f":function(a,s,n){var l=n("fc6a"),i=n("241c").f,u={}.toString,f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],g=function(c){try{return i(c)}catch{return f.slice()}};a.exports.f=function(d){return f&&u.call(d)=="[object Window]"?g(d):i(l(d))}},"06cf":function(a,s,n){var l=n("83ab"),i=n("d1e7"),u=n("5c6c"),f=n("fc6a"),g=n("c04e"),c=n("5135"),d=n("0cfb"),p=Object.getOwnPropertyDescriptor;s.f=l?p:function(m,y){if(m=f(m),y=g(y,!0),d)try{return p(m,y)}catch{}if(c(m,y))return u(!i.f.call(m,y),m[y])}},"0cfb":function(a,s,n){var l=n("83ab"),i=n("d039"),u=n("cc12");a.exports=!l&&!i(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(a,s,n){var l=n("23e7"),i=n("d58f").left,u=n("a640"),f=n("ae40"),g=u("reduce"),c=f("reduce",{1:0});l({target:"Array",proto:!0,forced:!g||!c},{reduce:function(p){return i(this,p,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(a,s,n){var l=n("c6b6"),i=n("9263");a.exports=function(u,f){var g=u.exec;if(typeof g=="function"){var c=g.call(u,f);if(typeof c!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return c}if(l(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return i.call(u,f)}},"159b":function(a,s,n){var l=n("da84"),i=n("fdbc"),u=n("17c2"),f=n("9112");for(var g in i){var c=l[g],d=c&&c.prototype;if(d&&d.forEach!==u)try{f(d,"forEach",u)}catch{d.forEach=u}}},"17c2":function(a,s,n){var l=n("b727").forEach,i=n("a640"),u=n("ae40"),f=i("forEach"),g=u("forEach");a.exports=!f||!g?function(d){return l(this,d,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(a,s,n){var l=n("d066");a.exports=l("document","documentElement")},"1c0b":function(a,s){a.exports=function(n){if(typeof n!="function")throw TypeError(String(n)+" is not a function");return n}},"1c7e":function(a,s,n){var l=n("b622"),i=l("iterator"),u=!1;try{var f=0,g={next:function(){return{done:!!f++}},return:function(){u=!0}};g[i]=function(){return this},Array.from(g,function(){throw 2})}catch{}a.exports=function(c,d){if(!d&&!u)return!1;var p=!1;try{var h={};h[i]=function(){return{next:function(){return{done:p=!0}}}},c(h)}catch{}return p}},"1d80":function(a,s){a.exports=function(n){if(n==null)throw TypeError("Can't call method on "+n);return n}},"1dde":function(a,s,n){var l=n("d039"),i=n("b622"),u=n("2d00"),f=i("species");a.exports=function(g){return u>=51||!l(function(){var c=[],d=c.constructor={};return d[f]=function(){return{foo:1}},c[g](Boolean).foo!==1})}},"23cb":function(a,s,n){var l=n("a691"),i=Math.max,u=Math.min;a.exports=function(f,g){var c=l(f);return c<0?i(c+g,0):u(c,g)}},"23e7":function(a,s,n){var l=n("da84"),i=n("06cf").f,u=n("9112"),f=n("6eeb"),g=n("ce4e"),c=n("e893"),d=n("94ca");a.exports=function(p,h){var m=p.target,y=p.global,S=p.stat,O,R,P,A,X,ee;if(y?R=l:S?R=l[m]||g(m,{}):R=(l[m]||{}).prototype,R)for(P in h){if(X=h[P],p.noTargetGet?(ee=i(R,P),A=ee&&ee.value):A=R[P],O=d(y?P:m+(S?".":"#")+P,p.forced),!O&&A!==void 0){if(typeof X==typeof A)continue;c(X,A)}(p.sham||A&&A.sham)&&u(X,"sham",!0),f(R,P,X,p)}}},"241c":function(a,s,n){var l=n("ca84"),i=n("7839"),u=i.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(g){return l(g,u)}},"25f0":function(a,s,n){var l=n("6eeb"),i=n("825a"),u=n("d039"),f=n("ad6d"),g="toString",c=RegExp.prototype,d=c[g],p=u(function(){return d.call({source:"a",flags:"b"})!="/a/b"}),h=d.name!=g;(p||h)&&l(RegExp.prototype,g,function(){var y=i(this),S=String(y.source),O=y.flags,R=String(O===void 0&&y instanceof RegExp&&!("flags"in c)?f.call(y):O);return"/"+S+"/"+R},{unsafe:!0})},"2ca0":function(a,s,n){var l=n("23e7"),i=n("06cf").f,u=n("50c4"),f=n("5a34"),g=n("1d80"),c=n("ab13"),d=n("c430"),p="".startsWith,h=Math.min,m=c("startsWith"),y=!d&&!m&&!!function(){var S=i(String.prototype,"startsWith");return S&&!S.writable}();l({target:"String",proto:!0,forced:!y&&!m},{startsWith:function(O){var R=String(g(this));f(O);var P=u(h(arguments.length>1?arguments[1]:void 0,R.length)),A=String(O);return p?p.call(R,A,P):R.slice(P,P+A.length)===A}})},"2d00":function(a,s,n){var l=n("da84"),i=n("342f"),u=l.process,f=u&&u.versions,g=f&&f.v8,c,d;g?(c=g.split("."),d=c[0]+c[1]):i&&(c=i.match(/Edge\/(\d+)/),(!c||c[1]>=74)&&(c=i.match(/Chrome\/(\d+)/),c&&(d=c[1]))),a.exports=d&&+d},"342f":function(a,s,n){var l=n("d066");a.exports=l("navigator","userAgent")||""},"35a1":function(a,s,n){var l=n("f5df"),i=n("3f8c"),u=n("b622"),f=u("iterator");a.exports=function(g){if(g!=null)return g[f]||g["@@iterator"]||i[l(g)]}},"37e8":function(a,s,n){var l=n("83ab"),i=n("9bf2"),u=n("825a"),f=n("df75");a.exports=l?Object.defineProperties:function(c,d){u(c);for(var p=f(d),h=p.length,m=0,y;h>m;)i.f(c,y=p[m++],d[y]);return c}},"3bbe":function(a,s,n){var l=n("861d");a.exports=function(i){if(!l(i)&&i!==null)throw TypeError("Can't set "+String(i)+" as a prototype");return i}},"3ca3":function(a,s,n){var l=n("6547").charAt,i=n("69f3"),u=n("7dd0"),f="String Iterator",g=i.set,c=i.getterFor(f);u(String,"String",function(d){g(this,{type:f,string:String(d),index:0})},function(){var p=c(this),h=p.string,m=p.index,y;return m>=h.length?{value:void 0,done:!0}:(y=l(h,m),p.index+=y.length,{value:y,done:!1})})},"3f8c":function(a,s){a.exports={}},4160:function(a,s,n){var l=n("23e7"),i=n("17c2");l({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"428f":function(a,s,n){var l=n("da84");a.exports=l},"44ad":function(a,s,n){var l=n("d039"),i=n("c6b6"),u="".split;a.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(f){return i(f)=="String"?u.call(f,""):Object(f)}:Object},"44d2":function(a,s,n){var l=n("b622"),i=n("7c73"),u=n("9bf2"),f=l("unscopables"),g=Array.prototype;g[f]==null&&u.f(g,f,{configurable:!0,value:i(null)}),a.exports=function(c){g[f][c]=!0}},"44e7":function(a,s,n){var l=n("861d"),i=n("c6b6"),u=n("b622"),f=u("match");a.exports=function(g){var c;return l(g)&&((c=g[f])!==void 0?!!c:i(g)=="RegExp")}},4930:function(a,s,n){var l=n("d039");a.exports=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())})},"4d64":function(a,s,n){var l=n("fc6a"),i=n("50c4"),u=n("23cb"),f=function(g){return function(c,d,p){var h=l(c),m=i(h.length),y=u(p,m),S;if(g&&d!=d){for(;m>y;)if(S=h[y++],S!=S)return!0}else for(;m>y;y++)if((g||y in h)&&h[y]===d)return g||y||0;return!g&&-1}};a.exports={includes:f(!0),indexOf:f(!1)}},"4de4":function(a,s,n){var l=n("23e7"),i=n("b727").filter,u=n("1dde"),f=n("ae40"),g=u("filter"),c=f("filter");l({target:"Array",proto:!0,forced:!g||!c},{filter:function(p){return i(this,p,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(a,s,n){var l=n("0366"),i=n("7b0b"),u=n("9bdd"),f=n("e95a"),g=n("50c4"),c=n("8418"),d=n("35a1");a.exports=function(h){var m=i(h),y=typeof this=="function"?this:Array,S=arguments.length,O=S>1?arguments[1]:void 0,R=O!==void 0,P=d(m),A=0,X,ee,E,b,V,ne;if(R&&(O=l(O,S>2?arguments[2]:void 0,2)),P!=null&&!(y==Array&&f(P)))for(b=P.call(m),V=b.next,ee=new y;!(E=V.call(b)).done;A++)ne=R?u(b,O,[E.value,A],!0):E.value,c(ee,A,ne);else for(X=g(m.length),ee=new y(X);X>A;A++)ne=R?O(m[A],A):m[A],c(ee,A,ne);return ee.length=A,ee}},"4fad":function(a,s,n){var l=n("23e7"),i=n("6f53").entries;l({target:"Object",stat:!0},{entries:function(f){return i(f)}})},"50c4":function(a,s,n){var l=n("a691"),i=Math.min;a.exports=function(u){return u>0?i(l(u),9007199254740991):0}},5135:function(a,s){var n={}.hasOwnProperty;a.exports=function(l,i){return n.call(l,i)}},5319:function(a,s,n){var l=n("d784"),i=n("825a"),u=n("7b0b"),f=n("50c4"),g=n("a691"),c=n("1d80"),d=n("8aa5"),p=n("14c3"),h=Math.max,m=Math.min,y=Math.floor,S=/\$([$&'`]|\d\d?|<[^>]*>)/g,O=/\$([$&'`]|\d\d?)/g,R=function(P){return P===void 0?P:String(P)};l("replace",2,function(P,A,X,ee){var E=ee.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=ee.REPLACE_KEEPS_$0,V=E?"$":"$0";return[function(U,k){var j=c(this),q=U==null?void 0:U[P];return q!==void 0?q.call(U,j,k):A.call(String(j),U,k)},function(L,U){if(!E&&b||typeof U=="string"&&U.indexOf(V)===-1){var k=X(A,L,this,U);if(k.done)return k.value}var j=i(L),q=String(this),le=typeof U=="function";le||(U=String(U));var me=j.global;if(me){var Q=j.unicode;j.lastIndex=0}for(var J=[];;){var ge=p(j,q);if(ge===null||(J.push(ge),!me))break;var G=String(ge[0]);G===""&&(j.lastIndex=d(q,f(j.lastIndex),Q))}for(var N="",H=0,Y=0;Y<J.length;Y++){ge=J[Y];for(var te=String(ge[0]),De=h(m(g(ge.index),q.length),0),W=[],$=1;$<ge.length;$++)W.push(R(ge[$]));var B=ge.groups;if(le){var Ae=[te].concat(W,De,q);B!==void 0&&Ae.push(B);var Ge=String(U.apply(void 0,Ae))}else Ge=ne(te,q,De,W,B,U);De>=H&&(N+=q.slice(H,De)+Ge,H=De+te.length)}return N+q.slice(H)}];function ne(L,U,k,j,q,le){var me=k+L.length,Q=j.length,J=O;return q!==void 0&&(q=u(q),J=S),A.call(le,J,function(ge,G){var N;switch(G.charAt(0)){case"$":return"$";case"&":return L;case"`":return U.slice(0,k);case"'":return U.slice(me);case"<":N=q[G.slice(1,-1)];break;default:var H=+G;if(H===0)return ge;if(H>Q){var Y=y(H/10);return Y===0?ge:Y<=Q?j[Y-1]===void 0?G.charAt(1):j[Y-1]+G.charAt(1):ge}N=j[H-1]}return N===void 0?"":N})}})},5692:function(a,s,n){var l=n("c430"),i=n("c6cd");(a.exports=function(u,f){return i[u]||(i[u]=f!==void 0?f:{})})("versions",[]).push({version:"3.6.5",mode:l?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(a,s,n){var l=n("d066"),i=n("241c"),u=n("7418"),f=n("825a");a.exports=l("Reflect","ownKeys")||function(c){var d=i.f(f(c)),p=u.f;return p?d.concat(p(c)):d}},"5a34":function(a,s,n){var l=n("44e7");a.exports=function(i){if(l(i))throw TypeError("The method doesn't accept regular expressions");return i}},"5c6c":function(a,s){a.exports=function(n,l){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:l}}},"5db7":function(a,s,n){var l=n("23e7"),i=n("a2bf"),u=n("7b0b"),f=n("50c4"),g=n("1c0b"),c=n("65f0");l({target:"Array",proto:!0},{flatMap:function(p){var h=u(this),m=f(h.length),y;return g(p),y=c(h,0),y.length=i(y,h,h,m,0,1,p,arguments.length>1?arguments[1]:void 0),y}})},6547:function(a,s,n){var l=n("a691"),i=n("1d80"),u=function(f){return function(g,c){var d=String(i(g)),p=l(c),h=d.length,m,y;return p<0||p>=h?f?"":void 0:(m=d.charCodeAt(p),m<55296||m>56319||p+1===h||(y=d.charCodeAt(p+1))<56320||y>57343?f?d.charAt(p):m:f?d.slice(p,p+2):(m-55296<<10)+(y-56320)+65536)}};a.exports={codeAt:u(!1),charAt:u(!0)}},"65f0":function(a,s,n){var l=n("861d"),i=n("e8b5"),u=n("b622"),f=u("species");a.exports=function(g,c){var d;return i(g)&&(d=g.constructor,typeof d=="function"&&(d===Array||i(d.prototype))?d=void 0:l(d)&&(d=d[f],d===null&&(d=void 0))),new(d===void 0?Array:d)(c===0?0:c)}},"69f3":function(a,s,n){var l=n("7f9a"),i=n("da84"),u=n("861d"),f=n("9112"),g=n("5135"),c=n("f772"),d=n("d012"),p=i.WeakMap,h,m,y,S=function(E){return y(E)?m(E):h(E,{})},O=function(E){return function(b){var V;if(!u(b)||(V=m(b)).type!==E)throw TypeError("Incompatible receiver, "+E+" required");return V}};if(l){var R=new p,P=R.get,A=R.has,X=R.set;h=function(E,b){return X.call(R,E,b),b},m=function(E){return P.call(R,E)||{}},y=function(E){return A.call(R,E)}}else{var ee=c("state");d[ee]=!0,h=function(E,b){return f(E,ee,b),b},m=function(E){return g(E,ee)?E[ee]:{}},y=function(E){return g(E,ee)}}a.exports={set:h,get:m,has:y,enforce:S,getterFor:O}},"6eeb":function(a,s,n){var l=n("da84"),i=n("9112"),u=n("5135"),f=n("ce4e"),g=n("8925"),c=n("69f3"),d=c.get,p=c.enforce,h=String(String).split("String");(a.exports=function(m,y,S,O){var R=O?!!O.unsafe:!1,P=O?!!O.enumerable:!1,A=O?!!O.noTargetGet:!1;if(typeof S=="function"&&(typeof y=="string"&&!u(S,"name")&&i(S,"name",y),p(S).source=h.join(typeof y=="string"?y:"")),m===l){P?m[y]=S:f(y,S);return}else R?!A&&m[y]&&(P=!0):delete m[y];P?m[y]=S:i(m,y,S)})(Function.prototype,"toString",function(){return typeof this=="function"&&d(this).source||g(this)})},"6f53":function(a,s,n){var l=n("83ab"),i=n("df75"),u=n("fc6a"),f=n("d1e7").f,g=function(c){return function(d){for(var p=u(d),h=i(p),m=h.length,y=0,S=[],O;m>y;)O=h[y++],(!l||f.call(p,O))&&S.push(c?[O,p[O]]:p[O]);return S}};a.exports={entries:g(!0),values:g(!1)}},"73d9":function(a,s,n){var l=n("44d2");l("flatMap")},7418:function(a,s){s.f=Object.getOwnPropertySymbols},"746f":function(a,s,n){var l=n("428f"),i=n("5135"),u=n("e538"),f=n("9bf2").f;a.exports=function(g){var c=l.Symbol||(l.Symbol={});i(c,g)||f(c,g,{value:u.f(g)})}},7839:function(a,s){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(a,s,n){var l=n("1d80");a.exports=function(i){return Object(l(i))}},"7c73":function(a,s,n){var l=n("825a"),i=n("37e8"),u=n("7839"),f=n("d012"),g=n("1be4"),c=n("cc12"),d=n("f772"),p=">",h="<",m="prototype",y="script",S=d("IE_PROTO"),O=function(){},R=function(E){return h+y+p+E+h+"/"+y+p},P=function(E){E.write(R("")),E.close();var b=E.parentWindow.Object;return E=null,b},A=function(){var E=c("iframe"),b="java"+y+":",V;return E.style.display="none",g.appendChild(E),E.src=String(b),V=E.contentWindow.document,V.open(),V.write(R("document.F=Object")),V.close(),V.F},X,ee=function(){try{X=document.domain&&new ActiveXObject("htmlfile")}catch{}ee=X?P(X):A();for(var E=u.length;E--;)delete ee[m][u[E]];return ee()};f[S]=!0,a.exports=Object.create||function(b,V){var ne;return b!==null?(O[m]=l(b),ne=new O,O[m]=null,ne[S]=b):ne=ee(),V===void 0?ne:i(ne,V)}},"7dd0":function(a,s,n){var l=n("23e7"),i=n("9ed3"),u=n("e163"),f=n("d2bb"),g=n("d44e"),c=n("9112"),d=n("6eeb"),p=n("b622"),h=n("c430"),m=n("3f8c"),y=n("ae93"),S=y.IteratorPrototype,O=y.BUGGY_SAFARI_ITERATORS,R=p("iterator"),P="keys",A="values",X="entries",ee=function(){return this};a.exports=function(E,b,V,ne,L,U,k){i(V,b,ne);var j=function(Y){if(Y===L&&J)return J;if(!O&&Y in me)return me[Y];switch(Y){case P:return function(){return new V(this,Y)};case A:return function(){return new V(this,Y)};case X:return function(){return new V(this,Y)}}return function(){return new V(this)}},q=b+" Iterator",le=!1,me=E.prototype,Q=me[R]||me["@@iterator"]||L&&me[L],J=!O&&Q||j(L),ge=b=="Array"&&me.entries||Q,G,N,H;if(ge&&(G=u(ge.call(new E)),S!==Object.prototype&&G.next&&(!h&&u(G)!==S&&(f?f(G,S):typeof G[R]!="function"&&c(G,R,ee)),g(G,q,!0,!0),h&&(m[q]=ee))),L==A&&Q&&Q.name!==A&&(le=!0,J=function(){return Q.call(this)}),(!h||k)&&me[R]!==J&&c(me,R,J),m[b]=J,L)if(N={values:j(A),keys:U?J:j(P),entries:j(X)},k)for(H in N)(O||le||!(H in me))&&d(me,H,N[H]);else l({target:b,proto:!0,forced:O||le},N);return N}},"7f9a":function(a,s,n){var l=n("da84"),i=n("8925"),u=l.WeakMap;a.exports=typeof u=="function"&&/native code/.test(i(u))},"825a":function(a,s,n){var l=n("861d");a.exports=function(i){if(!l(i))throw TypeError(String(i)+" is not an object");return i}},"83ab":function(a,s,n){var l=n("d039");a.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(a,s,n){var l=n("c04e"),i=n("9bf2"),u=n("5c6c");a.exports=function(f,g,c){var d=l(g);d in f?i.f(f,d,u(0,c)):f[d]=c}},"861d":function(a,s){a.exports=function(n){return typeof n=="object"?n!==null:typeof n=="function"}},8875:function(a,s,n){var l,i,u;(function(f,g){i=[],l=g,u=typeof l=="function"?l.apply(s,i):l,u!==void 0&&(a.exports=u)})(typeof self<"u"?self:this,function(){function f(){var g=Object.getOwnPropertyDescriptor(document,"currentScript");if(!g&&"currentScript"in document&&document.currentScript||g&&g.get!==f&&document.currentScript)return document.currentScript;try{throw new Error}catch(X){var c=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,d=/@([^@]*):(\d+):(\d+)\s*$/ig,p=c.exec(X.stack)||d.exec(X.stack),h=p&&p[1]||!1,m=p&&p[2]||!1,y=document.location.href.replace(document.location.hash,""),S,O,R,P=document.getElementsByTagName("script");h===y&&(S=document.documentElement.outerHTML,O=new RegExp("(?:[^\\n]+?\\n){0,"+(m-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),R=S.replace(O,"$1").trim());for(var A=0;A<P.length;A++)if(P[A].readyState==="interactive"||P[A].src===h||h===y&&P[A].innerHTML&&P[A].innerHTML.trim()===R)return P[A];return null}}return f})},8925:function(a,s,n){var l=n("c6cd"),i=Function.toString;typeof l.inspectSource!="function"&&(l.inspectSource=function(u){return i.call(u)}),a.exports=l.inspectSource},"8aa5":function(a,s,n){var l=n("6547").charAt;a.exports=function(i,u,f){return u+(f?l(i,u).length:1)}},"8bbf":function(a,s){a.exports=t},"90e3":function(a,s){var n=0,l=Math.random();a.exports=function(i){return"Symbol("+String(i===void 0?"":i)+")_"+(++n+l).toString(36)}},9112:function(a,s,n){var l=n("83ab"),i=n("9bf2"),u=n("5c6c");a.exports=l?function(f,g,c){return i.f(f,g,u(1,c))}:function(f,g,c){return f[g]=c,f}},9263:function(a,s,n){var l=n("ad6d"),i=n("9f7f"),u=RegExp.prototype.exec,f=String.prototype.replace,g=u,c=function(){var m=/a/,y=/b*/g;return u.call(m,"a"),u.call(y,"a"),m.lastIndex!==0||y.lastIndex!==0}(),d=i.UNSUPPORTED_Y||i.BROKEN_CARET,p=/()??/.exec("")[1]!==void 0,h=c||p||d;h&&(g=function(y){var S=this,O,R,P,A,X=d&&S.sticky,ee=l.call(S),E=S.source,b=0,V=y;return X&&(ee=ee.replace("y",""),ee.indexOf("g")===-1&&(ee+="g"),V=String(y).slice(S.lastIndex),S.lastIndex>0&&(!S.multiline||S.multiline&&y[S.lastIndex-1]!==`
`)&&(E="(?: "+E+")",V=" "+V,b++),R=new RegExp("^(?:"+E+")",ee)),p&&(R=new RegExp("^"+E+"$(?!\\s)",ee)),c&&(O=S.lastIndex),P=u.call(X?R:S,V),X?P?(P.input=P.input.slice(b),P[0]=P[0].slice(b),P.index=S.lastIndex,S.lastIndex+=P[0].length):S.lastIndex=0:c&&P&&(S.lastIndex=S.global?P.index+P[0].length:O),p&&P&&P.length>1&&f.call(P[0],R,function(){for(A=1;A<arguments.length-2;A++)arguments[A]===void 0&&(P[A]=void 0)}),P}),a.exports=g},"94ca":function(a,s,n){var l=n("d039"),i=/#|\.prototype\./,u=function(p,h){var m=g[f(p)];return m==d?!0:m==c?!1:typeof h=="function"?l(h):!!h},f=u.normalize=function(p){return String(p).replace(i,".").toLowerCase()},g=u.data={},c=u.NATIVE="N",d=u.POLYFILL="P";a.exports=u},"99af":function(a,s,n){var l=n("23e7"),i=n("d039"),u=n("e8b5"),f=n("861d"),g=n("7b0b"),c=n("50c4"),d=n("8418"),p=n("65f0"),h=n("1dde"),m=n("b622"),y=n("2d00"),S=m("isConcatSpreadable"),O=9007199254740991,R="Maximum allowed index exceeded",P=y>=51||!i(function(){var E=[];return E[S]=!1,E.concat()[0]!==E}),A=h("concat"),X=function(E){if(!f(E))return!1;var b=E[S];return b!==void 0?!!b:u(E)},ee=!P||!A;l({target:"Array",proto:!0,forced:ee},{concat:function(b){var V=g(this),ne=p(V,0),L=0,U,k,j,q,le;for(U=-1,j=arguments.length;U<j;U++)if(le=U===-1?V:arguments[U],X(le)){if(q=c(le.length),L+q>O)throw TypeError(R);for(k=0;k<q;k++,L++)k in le&&d(ne,L,le[k])}else{if(L>=O)throw TypeError(R);d(ne,L++,le)}return ne.length=L,ne}})},"9bdd":function(a,s,n){var l=n("825a");a.exports=function(i,u,f,g){try{return g?u(l(f)[0],f[1]):u(f)}catch(d){var c=i.return;throw c!==void 0&&l(c.call(i)),d}}},"9bf2":function(a,s,n){var l=n("83ab"),i=n("0cfb"),u=n("825a"),f=n("c04e"),g=Object.defineProperty;s.f=l?g:function(d,p,h){if(u(d),p=f(p,!0),u(h),i)try{return g(d,p,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(d[p]=h.value),d}},"9ed3":function(a,s,n){var l=n("ae93").IteratorPrototype,i=n("7c73"),u=n("5c6c"),f=n("d44e"),g=n("3f8c"),c=function(){return this};a.exports=function(d,p,h){var m=p+" Iterator";return d.prototype=i(l,{next:u(1,h)}),f(d,m,!1,!0),g[m]=c,d}},"9f7f":function(a,s,n){var l=n("d039");function i(u,f){return RegExp(u,f)}s.UNSUPPORTED_Y=l(function(){var u=i("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),s.BROKEN_CARET=l(function(){var u=i("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},a2bf:function(a,s,n){var l=n("e8b5"),i=n("50c4"),u=n("0366"),f=function(g,c,d,p,h,m,y,S){for(var O=h,R=0,P=y?u(y,S,3):!1,A;R<p;){if(R in d){if(A=P?P(d[R],R,c):d[R],m>0&&l(A))O=f(g,c,A,i(A.length),O,m-1)-1;else{if(O>=9007199254740991)throw TypeError("Exceed the acceptable array length");g[O]=A}O++}R++}return O};a.exports=f},a352:function(a,s){a.exports=r},a434:function(a,s,n){var l=n("23e7"),i=n("23cb"),u=n("a691"),f=n("50c4"),g=n("7b0b"),c=n("65f0"),d=n("8418"),p=n("1dde"),h=n("ae40"),m=p("splice"),y=h("splice",{ACCESSORS:!0,0:0,1:2}),S=Math.max,O=Math.min,R=9007199254740991,P="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!m||!y},{splice:function(X,ee){var E=g(this),b=f(E.length),V=i(X,b),ne=arguments.length,L,U,k,j,q,le;if(ne===0?L=U=0:ne===1?(L=0,U=b-V):(L=ne-2,U=O(S(u(ee),0),b-V)),b+L-U>R)throw TypeError(P);for(k=c(E,U),j=0;j<U;j++)q=V+j,q in E&&d(k,j,E[q]);if(k.length=U,L<U){for(j=V;j<b-U;j++)q=j+U,le=j+L,q in E?E[le]=E[q]:delete E[le];for(j=b;j>b-U+L;j--)delete E[j-1]}else if(L>U)for(j=b-U;j>V;j--)q=j+U-1,le=j+L-1,q in E?E[le]=E[q]:delete E[le];for(j=0;j<L;j++)E[j+V]=arguments[j+2];return E.length=b-U+L,k}})},a4d3:function(a,s,n){var l=n("23e7"),i=n("da84"),u=n("d066"),f=n("c430"),g=n("83ab"),c=n("4930"),d=n("fdbf"),p=n("d039"),h=n("5135"),m=n("e8b5"),y=n("861d"),S=n("825a"),O=n("7b0b"),R=n("fc6a"),P=n("c04e"),A=n("5c6c"),X=n("7c73"),ee=n("df75"),E=n("241c"),b=n("057f"),V=n("7418"),ne=n("06cf"),L=n("9bf2"),U=n("d1e7"),k=n("9112"),j=n("6eeb"),q=n("5692"),le=n("f772"),me=n("d012"),Q=n("90e3"),J=n("b622"),ge=n("e538"),G=n("746f"),N=n("d44e"),H=n("69f3"),Y=n("b727").forEach,te=le("hidden"),De="Symbol",W="prototype",$=J("toPrimitive"),B=H.set,Ae=H.getterFor(De),Ge=Object[W],Pe=i.Symbol,Je=u("JSON","stringify"),dt=ne.f,ct=L.f,wn=b.f,ro=U.f,pt=q("symbols"),It=q("op-symbols"),Ut=q("string-to-symbol-registry"),Yt=q("symbol-to-string-registry"),Qt=q("wks"),Jt=i.QObject,Zt=!Jt||!Jt[W]||!Jt[W].findChild,qt=g&&p(function(){return X(ct({},"a",{get:function(){return ct(this,"a",{value:7}).a}})).a!=7})?function(ve,ae,ie){var Ie=dt(Ge,ae);Ie&&delete Ge[ae],ct(ve,ae,ie),Ie&&ve!==Ge&&ct(Ge,ae,Ie)}:ct,_t=function(ve,ae){var ie=pt[ve]=X(Pe[W]);return B(ie,{type:De,tag:ve,description:ae}),g||(ie.description=ae),ie},D=d?function(ve){return typeof ve=="symbol"}:function(ve){return Object(ve)instanceof Pe},I=function(ae,ie,Ie){ae===Ge&&I(It,ie,Ie),S(ae);var Te=P(ie,!0);return S(Ie),h(pt,Te)?(Ie.enumerable?(h(ae,te)&&ae[te][Te]&&(ae[te][Te]=!1),Ie=X(Ie,{enumerable:A(0,!1)})):(h(ae,te)||ct(ae,te,A(1,{})),ae[te][Te]=!0),qt(ae,Te,Ie)):ct(ae,Te,Ie)},M=function(ae,ie){S(ae);var Ie=R(ie),Te=ee(Ie).concat(Fe(Ie));return Y(Te,function(ot){(!g||oe.call(Ie,ot))&&I(ae,ot,Ie[ot])}),ae},z=function(ae,ie){return ie===void 0?X(ae):M(X(ae),ie)},oe=function(ae){var ie=P(ae,!0),Ie=ro.call(this,ie);return this===Ge&&h(pt,ie)&&!h(It,ie)?!1:Ie||!h(this,ie)||!h(pt,ie)||h(this,te)&&this[te][ie]?Ie:!0},pe=function(ae,ie){var Ie=R(ae),Te=P(ie,!0);if(!(Ie===Ge&&h(pt,Te)&&!h(It,Te))){var ot=dt(Ie,Te);return ot&&h(pt,Te)&&!(h(Ie,te)&&Ie[te][Te])&&(ot.enumerable=!0),ot}},xe=function(ae){var ie=wn(R(ae)),Ie=[];return Y(ie,function(Te){!h(pt,Te)&&!h(me,Te)&&Ie.push(Te)}),Ie},Fe=function(ae){var ie=ae===Ge,Ie=wn(ie?It:R(ae)),Te=[];return Y(Ie,function(ot){h(pt,ot)&&(!ie||h(Ge,ot))&&Te.push(pt[ot])}),Te};if(c||(Pe=function(){if(this instanceof Pe)throw TypeError("Symbol is not a constructor");var ae=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ie=Q(ae),Ie=function(Te){this===Ge&&Ie.call(It,Te),h(this,te)&&h(this[te],ie)&&(this[te][ie]=!1),qt(this,ie,A(1,Te))};return g&&Zt&&qt(Ge,ie,{configurable:!0,set:Ie}),_t(ie,ae)},j(Pe[W],"toString",function(){return Ae(this).tag}),j(Pe,"withoutSetter",function(ve){return _t(Q(ve),ve)}),U.f=oe,L.f=I,ne.f=pe,E.f=b.f=xe,V.f=Fe,ge.f=function(ve){return _t(J(ve),ve)},g&&(ct(Pe[W],"description",{configurable:!0,get:function(){return Ae(this).description}}),f||j(Ge,"propertyIsEnumerable",oe,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:Pe}),Y(ee(Qt),function(ve){G(ve)}),l({target:De,stat:!0,forced:!c},{for:function(ve){var ae=String(ve);if(h(Ut,ae))return Ut[ae];var ie=Pe(ae);return Ut[ae]=ie,Yt[ie]=ae,ie},keyFor:function(ae){if(!D(ae))throw TypeError(ae+" is not a symbol");if(h(Yt,ae))return Yt[ae]},useSetter:function(){Zt=!0},useSimple:function(){Zt=!1}}),l({target:"Object",stat:!0,forced:!c,sham:!g},{create:z,defineProperty:I,defineProperties:M,getOwnPropertyDescriptor:pe}),l({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:xe,getOwnPropertySymbols:Fe}),l({target:"Object",stat:!0,forced:p(function(){V.f(1)})},{getOwnPropertySymbols:function(ae){return V.f(O(ae))}}),Je){var ze=!c||p(function(){var ve=Pe();return Je([ve])!="[null]"||Je({a:ve})!="{}"||Je(Object(ve))!="{}"});l({target:"JSON",stat:!0,forced:ze},{stringify:function(ae,ie,Ie){for(var Te=[ae],ot=1,ao;arguments.length>ot;)Te.push(arguments[ot++]);if(ao=ie,!(!y(ie)&&ae===void 0||D(ae)))return m(ie)||(ie=function(ya,Cn){if(typeof ao=="function"&&(Cn=ao.call(this,ya,Cn)),!D(Cn))return Cn}),Te[1]=ie,Je.apply(null,Te)}})}Pe[W][$]||k(Pe[W],$,Pe[W].valueOf),N(Pe,De),me[te]=!0},a630:function(a,s,n){var l=n("23e7"),i=n("4df4"),u=n("1c7e"),f=!u(function(g){Array.from(g)});l({target:"Array",stat:!0,forced:f},{from:i})},a640:function(a,s,n){var l=n("d039");a.exports=function(i,u){var f=[][i];return!!f&&l(function(){f.call(null,u||function(){throw 1},1)})}},a691:function(a,s){var n=Math.ceil,l=Math.floor;a.exports=function(i){return isNaN(i=+i)?0:(i>0?l:n)(i)}},ab13:function(a,s,n){var l=n("b622"),i=l("match");a.exports=function(u){var f=/./;try{"/./"[u](f)}catch{try{return f[i]=!1,"/./"[u](f)}catch{}}return!1}},ac1f:function(a,s,n){var l=n("23e7"),i=n("9263");l({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(a,s,n){var l=n("825a");a.exports=function(){var i=l(this),u="";return i.global&&(u+="g"),i.ignoreCase&&(u+="i"),i.multiline&&(u+="m"),i.dotAll&&(u+="s"),i.unicode&&(u+="u"),i.sticky&&(u+="y"),u}},ae40:function(a,s,n){var l=n("83ab"),i=n("d039"),u=n("5135"),f=Object.defineProperty,g={},c=function(d){throw d};a.exports=function(d,p){if(u(g,d))return g[d];p||(p={});var h=[][d],m=u(p,"ACCESSORS")?p.ACCESSORS:!1,y=u(p,0)?p[0]:c,S=u(p,1)?p[1]:void 0;return g[d]=!!h&&!i(function(){if(m&&!l)return!0;var O={length:-1};m?f(O,1,{enumerable:!0,get:c}):O[1]=1,h.call(O,y,S)})}},ae93:function(a,s,n){var l=n("e163"),i=n("9112"),u=n("5135"),f=n("b622"),g=n("c430"),c=f("iterator"),d=!1,p=function(){return this},h,m,y;[].keys&&(y=[].keys(),"next"in y?(m=l(l(y)),m!==Object.prototype&&(h=m)):d=!0),h==null&&(h={}),!g&&!u(h,c)&&i(h,c,p),a.exports={IteratorPrototype:h,BUGGY_SAFARI_ITERATORS:d}},b041:function(a,s,n){var l=n("00ee"),i=n("f5df");a.exports=l?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(a,s,n){var l=n("83ab"),i=n("9bf2").f,u=Function.prototype,f=u.toString,g=/^\s*function ([^ (]*)/,c="name";l&&!(c in u)&&i(u,c,{configurable:!0,get:function(){try{return f.call(this).match(g)[1]}catch{return""}}})},b622:function(a,s,n){var l=n("da84"),i=n("5692"),u=n("5135"),f=n("90e3"),g=n("4930"),c=n("fdbf"),d=i("wks"),p=l.Symbol,h=c?p:p&&p.withoutSetter||f;a.exports=function(m){return u(d,m)||(g&&u(p,m)?d[m]=p[m]:d[m]=h("Symbol."+m)),d[m]}},b64b:function(a,s,n){var l=n("23e7"),i=n("7b0b"),u=n("df75"),f=n("d039"),g=f(function(){u(1)});l({target:"Object",stat:!0,forced:g},{keys:function(d){return u(i(d))}})},b727:function(a,s,n){var l=n("0366"),i=n("44ad"),u=n("7b0b"),f=n("50c4"),g=n("65f0"),c=[].push,d=function(p){var h=p==1,m=p==2,y=p==3,S=p==4,O=p==6,R=p==5||O;return function(P,A,X,ee){for(var E=u(P),b=i(E),V=l(A,X,3),ne=f(b.length),L=0,U=ee||g,k=h?U(P,ne):m?U(P,0):void 0,j,q;ne>L;L++)if((R||L in b)&&(j=b[L],q=V(j,L,E),p)){if(h)k[L]=q;else if(q)switch(p){case 3:return!0;case 5:return j;case 6:return L;case 2:c.call(k,j)}else if(S)return!1}return O?-1:y||S?S:k}};a.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6)}},c04e:function(a,s,n){var l=n("861d");a.exports=function(i,u){if(!l(i))return i;var f,g;if(u&&typeof(f=i.toString)=="function"&&!l(g=f.call(i))||typeof(f=i.valueOf)=="function"&&!l(g=f.call(i))||!u&&typeof(f=i.toString)=="function"&&!l(g=f.call(i)))return g;throw TypeError("Can't convert object to primitive value")}},c430:function(a,s){a.exports=!1},c6b6:function(a,s){var n={}.toString;a.exports=function(l){return n.call(l).slice(8,-1)}},c6cd:function(a,s,n){var l=n("da84"),i=n("ce4e"),u="__core-js_shared__",f=l[u]||i(u,{});a.exports=f},c740:function(a,s,n){var l=n("23e7"),i=n("b727").findIndex,u=n("44d2"),f=n("ae40"),g="findIndex",c=!0,d=f(g);g in[]&&Array(1)[g](function(){c=!1}),l({target:"Array",proto:!0,forced:c||!d},{findIndex:function(h){return i(this,h,arguments.length>1?arguments[1]:void 0)}}),u(g)},c8ba:function(a,s){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}a.exports=n},c975:function(a,s,n){var l=n("23e7"),i=n("4d64").indexOf,u=n("a640"),f=n("ae40"),g=[].indexOf,c=!!g&&1/[1].indexOf(1,-0)<0,d=u("indexOf"),p=f("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:c||!d||!p},{indexOf:function(m){return c?g.apply(this,arguments)||0:i(this,m,arguments.length>1?arguments[1]:void 0)}})},ca84:function(a,s,n){var l=n("5135"),i=n("fc6a"),u=n("4d64").indexOf,f=n("d012");a.exports=function(g,c){var d=i(g),p=0,h=[],m;for(m in d)!l(f,m)&&l(d,m)&&h.push(m);for(;c.length>p;)l(d,m=c[p++])&&(~u(h,m)||h.push(m));return h}},caad:function(a,s,n){var l=n("23e7"),i=n("4d64").includes,u=n("44d2"),f=n("ae40"),g=f("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:!g},{includes:function(d){return i(this,d,arguments.length>1?arguments[1]:void 0)}}),u("includes")},cc12:function(a,s,n){var l=n("da84"),i=n("861d"),u=l.document,f=i(u)&&i(u.createElement);a.exports=function(g){return f?u.createElement(g):{}}},ce4e:function(a,s,n){var l=n("da84"),i=n("9112");a.exports=function(u,f){try{i(l,u,f)}catch{l[u]=f}return f}},d012:function(a,s){a.exports={}},d039:function(a,s){a.exports=function(n){try{return!!n()}catch{return!0}}},d066:function(a,s,n){var l=n("428f"),i=n("da84"),u=function(f){return typeof f=="function"?f:void 0};a.exports=function(f,g){return arguments.length<2?u(l[f])||u(i[f]):l[f]&&l[f][g]||i[f]&&i[f][g]}},d1e7:function(a,s,n){var l={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,u=i&&!l.call({1:2},1);s.f=u?function(g){var c=i(this,g);return!!c&&c.enumerable}:l},d28b:function(a,s,n){var l=n("746f");l("iterator")},d2bb:function(a,s,n){var l=n("825a"),i=n("3bbe");a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,f={},g;try{g=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,g.call(f,[]),u=f instanceof Array}catch{}return function(d,p){return l(d),i(p),u?g.call(d,p):d.__proto__=p,d}}():void 0)},d3b7:function(a,s,n){var l=n("00ee"),i=n("6eeb"),u=n("b041");l||i(Object.prototype,"toString",u,{unsafe:!0})},d44e:function(a,s,n){var l=n("9bf2").f,i=n("5135"),u=n("b622"),f=u("toStringTag");a.exports=function(g,c,d){g&&!i(g=d?g:g.prototype,f)&&l(g,f,{configurable:!0,value:c})}},d58f:function(a,s,n){var l=n("1c0b"),i=n("7b0b"),u=n("44ad"),f=n("50c4"),g=function(c){return function(d,p,h,m){l(p);var y=i(d),S=u(y),O=f(y.length),R=c?O-1:0,P=c?-1:1;if(h<2)for(;;){if(R in S){m=S[R],R+=P;break}if(R+=P,c?R<0:O<=R)throw TypeError("Reduce of empty array with no initial value")}for(;c?R>=0:O>R;R+=P)R in S&&(m=p(m,S[R],R,y));return m}};a.exports={left:g(!1),right:g(!0)}},d784:function(a,s,n){n("ac1f");var l=n("6eeb"),i=n("d039"),u=n("b622"),f=n("9263"),g=n("9112"),c=u("species"),d=!i(function(){var S=/./;return S.exec=function(){var O=[];return O.groups={a:"7"},O},"".replace(S,"$<a>")!=="7"}),p=function(){return"a".replace(/./,"$0")==="$0"}(),h=u("replace"),m=function(){return/./[h]?/./[h]("a","$0")==="":!1}(),y=!i(function(){var S=/(?:)/,O=S.exec;S.exec=function(){return O.apply(this,arguments)};var R="ab".split(S);return R.length!==2||R[0]!=="a"||R[1]!=="b"});a.exports=function(S,O,R,P){var A=u(S),X=!i(function(){var L={};return L[A]=function(){return 7},""[S](L)!=7}),ee=X&&!i(function(){var L=!1,U=/a/;return S==="split"&&(U={},U.constructor={},U.constructor[c]=function(){return U},U.flags="",U[A]=/./[A]),U.exec=function(){return L=!0,null},U[A](""),!L});if(!X||!ee||S==="replace"&&!(d&&p&&!m)||S==="split"&&!y){var E=/./[A],b=R(A,""[S],function(L,U,k,j,q){return U.exec===f?X&&!q?{done:!0,value:E.call(U,k,j)}:{done:!0,value:L.call(k,U,j)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),V=b[0],ne=b[1];l(String.prototype,S,V),l(RegExp.prototype,A,O==2?function(L,U){return ne.call(L,this,U)}:function(L){return ne.call(L,this)})}P&&g(RegExp.prototype[A],"sham",!0)}},d81d:function(a,s,n){var l=n("23e7"),i=n("b727").map,u=n("1dde"),f=n("ae40"),g=u("map"),c=f("map");l({target:"Array",proto:!0,forced:!g||!c},{map:function(p){return i(this,p,arguments.length>1?arguments[1]:void 0)}})},da84:function(a,s,n){(function(l){var i=function(u){return u&&u.Math==Math&&u};a.exports=i(typeof globalThis=="object"&&globalThis)||i(typeof window=="object"&&window)||i(typeof self=="object"&&self)||i(typeof l=="object"&&l)||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(a,s,n){var l=n("23e7"),i=n("83ab"),u=n("56ef"),f=n("fc6a"),g=n("06cf"),c=n("8418");l({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(p){for(var h=f(p),m=g.f,y=u(h),S={},O=0,R,P;y.length>O;)P=m(h,R=y[O++]),P!==void 0&&c(S,R,P);return S}})},dbf1:function(a,s,n){(function(l){n.d(s,"a",function(){return u});function i(){return typeof window<"u"?window.console:globalThis.console}var u=i()}).call(this,n("c8ba"))},ddb0:function(a,s,n){var l=n("da84"),i=n("fdbc"),u=n("e260"),f=n("9112"),g=n("b622"),c=g("iterator"),d=g("toStringTag"),p=u.values;for(var h in i){var m=l[h],y=m&&m.prototype;if(y){if(y[c]!==p)try{f(y,c,p)}catch{y[c]=p}if(y[d]||f(y,d,h),i[h]){for(var S in u)if(y[S]!==u[S])try{f(y,S,u[S])}catch{y[S]=u[S]}}}}},df75:function(a,s,n){var l=n("ca84"),i=n("7839");a.exports=Object.keys||function(f){return l(f,i)}},e01a:function(a,s,n){var l=n("23e7"),i=n("83ab"),u=n("da84"),f=n("5135"),g=n("861d"),c=n("9bf2").f,d=n("e893"),p=u.Symbol;if(i&&typeof p=="function"&&(!("description"in p.prototype)||p().description!==void 0)){var h={},m=function(){var A=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),X=this instanceof m?new p(A):A===void 0?p():p(A);return A===""&&(h[X]=!0),X};d(m,p);var y=m.prototype=p.prototype;y.constructor=m;var S=y.toString,O=String(p("test"))=="Symbol(test)",R=/^Symbol\((.*)\)[^)]+$/;c(y,"description",{configurable:!0,get:function(){var A=g(this)?this.valueOf():this,X=S.call(A);if(f(h,A))return"";var ee=O?X.slice(7,-1):X.replace(R,"$1");return ee===""?void 0:ee}}),l({global:!0,forced:!0},{Symbol:m})}},e163:function(a,s,n){var l=n("5135"),i=n("7b0b"),u=n("f772"),f=n("e177"),g=u("IE_PROTO"),c=Object.prototype;a.exports=f?Object.getPrototypeOf:function(d){return d=i(d),l(d,g)?d[g]:typeof d.constructor=="function"&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?c:null}},e177:function(a,s,n){var l=n("d039");a.exports=!l(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})},e260:function(a,s,n){var l=n("fc6a"),i=n("44d2"),u=n("3f8c"),f=n("69f3"),g=n("7dd0"),c="Array Iterator",d=f.set,p=f.getterFor(c);a.exports=g(Array,"Array",function(h,m){d(this,{type:c,target:l(h),index:0,kind:m})},function(){var h=p(this),m=h.target,y=h.kind,S=h.index++;return!m||S>=m.length?(h.target=void 0,{value:void 0,done:!0}):y=="keys"?{value:S,done:!1}:y=="values"?{value:m[S],done:!1}:{value:[S,m[S]],done:!1}},"values"),u.Arguments=u.Array,i("keys"),i("values"),i("entries")},e439:function(a,s,n){var l=n("23e7"),i=n("d039"),u=n("fc6a"),f=n("06cf").f,g=n("83ab"),c=i(function(){f(1)}),d=!g||c;l({target:"Object",stat:!0,forced:d,sham:!g},{getOwnPropertyDescriptor:function(h,m){return f(u(h),m)}})},e538:function(a,s,n){var l=n("b622");s.f=l},e893:function(a,s,n){var l=n("5135"),i=n("56ef"),u=n("06cf"),f=n("9bf2");a.exports=function(g,c){for(var d=i(c),p=f.f,h=u.f,m=0;m<d.length;m++){var y=d[m];l(g,y)||p(g,y,h(c,y))}}},e8b5:function(a,s,n){var l=n("c6b6");a.exports=Array.isArray||function(u){return l(u)=="Array"}},e95a:function(a,s,n){var l=n("b622"),i=n("3f8c"),u=l("iterator"),f=Array.prototype;a.exports=function(g){return g!==void 0&&(i.Array===g||f[u]===g)}},f5df:function(a,s,n){var l=n("00ee"),i=n("c6b6"),u=n("b622"),f=u("toStringTag"),g=i(function(){return arguments}())=="Arguments",c=function(d,p){try{return d[p]}catch{}};a.exports=l?i:function(d){var p,h,m;return d===void 0?"Undefined":d===null?"Null":typeof(h=c(p=Object(d),f))=="string"?h:g?i(p):(m=i(p))=="Object"&&typeof p.callee=="function"?"Arguments":m}},f772:function(a,s,n){var l=n("5692"),i=n("90e3"),u=l("keys");a.exports=function(f){return u[f]||(u[f]=i(f))}},fb15:function(a,s,n){if(n.r(s),typeof window<"u"){var l=window.document.currentScript;{var i=n("8875");l=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i})}var u=l&&l.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(n.p=u[1])}n("99af"),n("4de4"),n("4160"),n("c975"),n("d81d"),n("a434"),n("159b"),n("a4d3"),n("e439"),n("dbb4"),n("b64b");function f(D,I,M){return I in D?Object.defineProperty(D,I,{value:M,enumerable:!0,configurable:!0,writable:!0}):D[I]=M,D}function g(D,I){var M=Object.keys(D);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(D);I&&(z=z.filter(function(oe){return Object.getOwnPropertyDescriptor(D,oe).enumerable})),M.push.apply(M,z)}return M}function c(D){for(var I=1;I<arguments.length;I++){var M=arguments[I]!=null?arguments[I]:{};I%2?g(Object(M),!0).forEach(function(z){f(D,z,M[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(M)):g(Object(M)).forEach(function(z){Object.defineProperty(D,z,Object.getOwnPropertyDescriptor(M,z))})}return D}function d(D){if(Array.isArray(D))return D}n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function p(D,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(D)))){var M=[],z=!0,oe=!1,pe=void 0;try{for(var xe=D[Symbol.iterator](),Fe;!(z=(Fe=xe.next()).done)&&(M.push(Fe.value),!(I&&M.length===I));z=!0);}catch(ze){oe=!0,pe=ze}finally{try{!z&&xe.return!=null&&xe.return()}finally{if(oe)throw pe}}return M}}n("a630"),n("fb6a"),n("b0c0"),n("25f0");function h(D,I){(I==null||I>D.length)&&(I=D.length);for(var M=0,z=new Array(I);M<I;M++)z[M]=D[M];return z}function m(D,I){if(D){if(typeof D=="string")return h(D,I);var M=Object.prototype.toString.call(D).slice(8,-1);if(M==="Object"&&D.constructor&&(M=D.constructor.name),M==="Map"||M==="Set")return Array.from(D);if(M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return h(D,I)}}function y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(D,I){return d(D)||p(D,I)||m(D,I)||y()}function O(D){if(Array.isArray(D))return h(D)}function R(D){if(typeof Symbol<"u"&&Symbol.iterator in Object(D))return Array.from(D)}function P(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(D){return O(D)||R(D)||m(D)||P()}var X=n("a352"),ee=n.n(X);function E(D){D.parentElement!==null&&D.parentElement.removeChild(D)}function b(D,I,M){var z=M===0?D.children[0]:D.children[M-1].nextSibling;D.insertBefore(I,z)}var V=n("dbf1");n("13d5"),n("4fad"),n("ac1f"),n("5319");function ne(D){var I=Object.create(null);return function(z){var oe=I[z];return oe||(I[z]=D(z))}}var L=/-(\w)/g,U=ne(function(D){return D.replace(L,function(I,M){return M.toUpperCase()})});n("5db7"),n("73d9");var k=["Start","Add","Remove","Update","End"],j=["Choose","Unchoose","Sort","Filter","Clone"],q=["Move"],le=[q,k,j].flatMap(function(D){return D}).map(function(D){return"on".concat(D)}),me={manage:q,manageAndEmit:k,emit:j};function Q(D){return le.indexOf(D)!==-1}n("caad"),n("2ca0");var J=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function ge(D){return J.includes(D)}function G(D){return["transition-group","TransitionGroup"].includes(D)}function N(D){return["id","class","role","style"].includes(D)||D.startsWith("data-")||D.startsWith("aria-")||D.startsWith("on")}function H(D){return D.reduce(function(I,M){var z=S(M,2),oe=z[0],pe=z[1];return I[oe]=pe,I},{})}function Y(D){var I=D.$attrs,M=D.componentData,z=M===void 0?{}:M,oe=H(Object.entries(I).filter(function(pe){var xe=S(pe,2),Fe=xe[0];return xe[1],N(Fe)}));return c(c({},oe),z)}function te(D){var I=D.$attrs,M=D.callBackBuilder,z=H(De(I));Object.entries(M).forEach(function(pe){var xe=S(pe,2),Fe=xe[0],ze=xe[1];me[Fe].forEach(function(ve){z["on".concat(ve)]=ze(ve)})});var oe="[data-draggable]".concat(z.draggable||"");return c(c({},z),{},{draggable:oe})}function De(D){return Object.entries(D).filter(function(I){var M=S(I,2),z=M[0];return M[1],!N(z)}).map(function(I){var M=S(I,2),z=M[0],oe=M[1];return[U(z),oe]}).filter(function(I){var M=S(I,2),z=M[0];return M[1],!Q(z)})}n("c740");function W(D,I){if(!(D instanceof I))throw new TypeError("Cannot call a class as a function")}function $(D,I){for(var M=0;M<I.length;M++){var z=I[M];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(D,z.key,z)}}function B(D,I,M){return I&&$(D.prototype,I),D}var Ae=function(I){var M=I.el;return M},Ge=function(I,M){return I.__draggable_context=M},Pe=function(I){return I.__draggable_context},Je=function(){function D(I){var M=I.nodes,z=M.header,oe=M.default,pe=M.footer,xe=I.root,Fe=I.realList;W(this,D),this.defaultNodes=oe,this.children=[].concat(A(z),A(oe),A(pe)),this.externalComponent=xe.externalComponent,this.rootTransition=xe.transition,this.tag=xe.tag,this.realList=Fe}return B(D,[{key:"render",value:function(M,z){var oe=this.tag,pe=this.children,xe=this._isRootComponent,Fe=xe?{default:function(){return pe}}:pe;return M(oe,z,Fe)}},{key:"updated",value:function(){var M=this.defaultNodes,z=this.realList;M.forEach(function(oe,pe){Ge(Ae(oe),{element:z[pe],index:pe})})}},{key:"getUnderlyingVm",value:function(M){return Pe(M)}},{key:"getVmIndexFromDomIndex",value:function(M,z){var oe=this.defaultNodes,pe=oe.length,xe=z.children,Fe=xe.item(M);if(Fe===null)return pe;var ze=Pe(Fe);if(ze)return ze.index;if(pe===0)return 0;var ve=Ae(oe[0]),ae=A(xe).findIndex(function(ie){return ie===ve});return M<ae?0:pe}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),D}(),dt=n("8bbf");function ct(D,I){var M=D[I];return M?M():[]}function wn(D){var I=D.$slots,M=D.realList,z=D.getKey,oe=M||[],pe=["header","footer"].map(function(ie){return ct(I,ie)}),xe=S(pe,2),Fe=xe[0],ze=xe[1],ve=I.item;if(!ve)throw new Error("draggable element must have an item slot");var ae=oe.flatMap(function(ie,Ie){return ve({element:ie,index:Ie}).map(function(Te){return Te.key=z(ie),Te.props=c(c({},Te.props||{}),{},{"data-draggable":!0}),Te})});if(ae.length!==oe.length)throw new Error("Item slot must have only one child");return{header:Fe,footer:ze,default:ae}}function ro(D){var I=G(D),M=!ge(D)&&!I;return{transition:I,externalComponent:M,tag:M?Object(dt.resolveComponent)(D):I?dt.TransitionGroup:D}}function pt(D){var I=D.$slots,M=D.tag,z=D.realList,oe=D.getKey,pe=wn({$slots:I,realList:z,getKey:oe}),xe=ro(M);return new Je({nodes:pe,root:xe,realList:z})}function It(D,I){var M=this;Object(dt.nextTick)(function(){return M.$emit(D.toLowerCase(),I)})}function Ut(D){var I=this;return function(M,z){if(I.realList!==null)return I["onDrag".concat(D)](M,z)}}function Yt(D){var I=this,M=Ut.call(this,D);return function(z,oe){M.call(I,z,oe),It.call(I,D,z)}}var Qt=null,Jt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(I){return I}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Zt=["update:modelValue","change"].concat(A([].concat(A(me.manageAndEmit),A(me.emit)).map(function(D){return D.toLowerCase()}))),qt=Object(dt.defineComponent)({name:"draggable",inheritAttrs:!1,props:Jt,emits:Zt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var I=this.$slots,M=this.$attrs,z=this.tag,oe=this.componentData,pe=this.realList,xe=this.getKey,Fe=pt({$slots:I,tag:z,realList:pe,getKey:xe});this.componentStructure=Fe;var ze=Y({$attrs:M,componentData:oe});return Fe.render(dt.h,ze)}catch(ve){return this.error=!0,Object(dt.h)("pre",{style:{color:"red"}},ve.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&V.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var I=this;if(!this.error){var M=this.$attrs,z=this.$el,oe=this.componentStructure;oe.updated();var pe=te({$attrs:M,callBackBuilder:{manageAndEmit:function(ze){return Yt.call(I,ze)},emit:function(ze){return It.bind(I,ze)},manage:function(ze){return Ut.call(I,ze)}}}),xe=z.nodeType===1?z:z.parentElement;this._sortable=new ee.a(xe,pe),this.targetDomElement=xe,xe.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var I=this.list;return I||this.modelValue},getKey:function(){var I=this.itemKey;return typeof I=="function"?I:function(M){return M[I]}}},watch:{$attrs:{handler:function(I){var M=this._sortable;M&&De(I).forEach(function(z){var oe=S(z,2),pe=oe[0],xe=oe[1];M.option(pe,xe)})},deep:!0}},methods:{getUnderlyingVm:function(I){return this.componentStructure.getUnderlyingVm(I)||null},getUnderlyingPotencialDraggableComponent:function(I){return I.__draggable_component__},emitChanges:function(I){var M=this;Object(dt.nextTick)(function(){return M.$emit("change",I)})},alterList:function(I){if(this.list){I(this.list);return}var M=A(this.modelValue);I(M),this.$emit("update:modelValue",M)},spliceList:function(){var I=arguments,M=function(oe){return oe.splice.apply(oe,A(I))};this.alterList(M)},updatePosition:function(I,M){var z=function(pe){return pe.splice(M,0,pe.splice(I,1)[0])};this.alterList(z)},getRelatedContextFromMoveEvent:function(I){var M=I.to,z=I.related,oe=this.getUnderlyingPotencialDraggableComponent(M);if(!oe)return{component:oe};var pe=oe.realList,xe={list:pe,component:oe};if(M!==z&&pe){var Fe=oe.getUnderlyingVm(z)||{};return c(c({},Fe),xe)}return xe},getVmIndexFromDomIndex:function(I){return this.componentStructure.getVmIndexFromDomIndex(I,this.targetDomElement)},onDragStart:function(I){this.context=this.getUnderlyingVm(I.item),I.item._underlying_vm_=this.clone(this.context.element),Qt=I.item},onDragAdd:function(I){var M=I.item._underlying_vm_;if(M!==void 0){E(I.item);var z=this.getVmIndexFromDomIndex(I.newIndex);this.spliceList(z,0,M);var oe={element:M,newIndex:z};this.emitChanges({added:oe})}},onDragRemove:function(I){if(b(this.$el,I.item,I.oldIndex),I.pullMode==="clone"){E(I.clone);return}var M=this.context,z=M.index,oe=M.element;this.spliceList(z,1);var pe={element:oe,oldIndex:z};this.emitChanges({removed:pe})},onDragUpdate:function(I){E(I.item),b(I.from,I.item,I.oldIndex);var M=this.context.index,z=this.getVmIndexFromDomIndex(I.newIndex);this.updatePosition(M,z);var oe={element:this.context.element,oldIndex:M,newIndex:z};this.emitChanges({moved:oe})},computeFutureIndex:function(I,M){if(!I.element)return 0;var z=A(M.to.children).filter(function(Fe){return Fe.style.display!=="none"}),oe=z.indexOf(M.related),pe=I.component.getVmIndexFromDomIndex(oe),xe=z.indexOf(Qt)!==-1;return xe||!M.willInsertAfter?pe:pe+1},onDragMove:function(I,M){var z=this.move,oe=this.realList;if(!z||!oe)return!0;var pe=this.getRelatedContextFromMoveEvent(I),xe=this.computeFutureIndex(pe,I),Fe=c(c({},this.context),{},{futureIndex:xe}),ze=c(c({},I),{},{relatedContext:pe,draggedContext:Fe});return z(ze,M)},onDragEnd:function(){Qt=null}}}),_t=qt;s.default=_t},fb6a:function(a,s,n){var l=n("23e7"),i=n("861d"),u=n("e8b5"),f=n("23cb"),g=n("50c4"),c=n("fc6a"),d=n("8418"),p=n("b622"),h=n("1dde"),m=n("ae40"),y=h("slice"),S=m("slice",{ACCESSORS:!0,0:0,1:2}),O=p("species"),R=[].slice,P=Math.max;l({target:"Array",proto:!0,forced:!y||!S},{slice:function(X,ee){var E=c(this),b=g(E.length),V=f(X,b),ne=f(ee===void 0?b:ee,b),L,U,k;if(u(E)&&(L=E.constructor,typeof L=="function"&&(L===Array||u(L.prototype))?L=void 0:i(L)&&(L=L[O],L===null&&(L=void 0)),L===Array||L===void 0))return R.call(E,V,ne);for(U=new(L===void 0?Array:L)(P(ne-V,0)),k=0;V<ne;V++,k++)V in E&&d(U,k,E[V]);return U.length=k,U}})},fc6a:function(a,s,n){var l=n("44ad"),i=n("1d80");a.exports=function(u){return l(i(u))}},fdbc:function(a,s){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(a,s,n){var l=n("4930");a.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(oa);var Bc=oa.exports;const kc=oc(Bc),zc={class:"space-y-4"},Kc={class:"flex items-center justify-between"},Wc=["disabled"],Xc={key:0,class:"text-center py-6 bg-slate-50 rounded-xl border border-dashed border-slate-200"},Yc={class:"bg-white border border-slate-200 rounded-xl p-4 hover:border-slate-300 transition-colors"},Qc={class:"flex items-start gap-3"},Jc={type:"button",class:"drag-handle p-1 text-slate-400 hover:text-slate-600 cursor-grab mt-1"},Zc={class:"flex-1 grid grid-cols-2 gap-3"},qc=["onUpdate:modelValue","onInput"],_c=["onUpdate:modelValue"],ef=["onUpdate:modelValue"],tf={class:"flex items-end gap-4 pb-1"},nf={class:"flex items-center gap-2 cursor-pointer"},of=["onUpdate:modelValue"],rf={class:"flex items-center gap-2 cursor-pointer"},af=["onUpdate:modelValue"],sf=["onClick","disabled"],lf={key:0,class:"mt-2 text-xs text-red-500 ml-8"},uf={key:1,class:"mt-2 text-xs text-red-500 ml-8"},df={key:2,class:"text-xs text-slate-400"},cf=$e({__name:"ColumnEditor",props:{modelValue:{},maxColumns:{}},emits:["update:modelValue"],setup(e,{expose:o,emit:t}){const r=e,a=t,s=r.maxColumns||15,n=_([]);Ke(()=>r.modelValue,h=>{h&&h.length>0&&(n.value=h.map(m=>({...m,id:m.id||l()})))},{immediate:!0});const l=()=>Math.random().toString(36).substring(2,9),i=h=>{if(!h.label){h.name="";return}h.name=Qo(h.label)},u=h=>Vo(h),f=(h,m)=>h?n.value.some((y,S)=>S!==m&&y.name===h):!1,g=()=>{n.value.length>=s||(n.value.push({id:l(),name:"",label:"",type:"text",required:!1,searchable:!1}),d())},c=h=>{n.value.length<=1||(n.value.splice(h,1),d())},d=()=>{const h=n.value.map(({id:m,...y})=>y);a("update:modelValue",h)};return o({isValid:()=>n.value.length===0?!1:n.value.every(h=>h.name&&h.label&&u(h.name)&&!f(h.name,n.value.indexOf(h)))}),(h,m)=>(C(),F("div",zc,[v("div",Kc,[m[2]||(m[2]=v("p",{class:"text-sm font-medium text-slate-700"},"Колонки справочника",-1)),v("button",{type:"button",onClick:g,class:Se(["flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",{"opacity-50 cursor-not-allowed":n.value.length>=x(s)}]),disabled:n.value.length>=x(s)},[w(x(xn),{class:"w-3.5 h-3.5"}),m[1]||(m[1]=se(" Добавить колонку ",-1))],10,Wc)]),n.value.length===0?(C(),F("div",Xc,[...m[3]||(m[3]=[v("p",{class:"text-sm text-slate-500"},"Добавьте хотя бы одну колонку",-1)])])):(C(),we(x(kc),{key:1,modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=y=>n.value=y),"item-key":"id",handle:".drag-handle","ghost-class":"opacity-50",onChange:d,class:"space-y-3"},{item:T(({element:y,index:S})=>[v("div",Yc,[v("div",Qc,[v("button",Jc,[w(x(Gr),{class:"w-4 h-4"})]),v("div",Zc,[v("div",null,[m[4]||(m[4]=v("label",{class:"text-xs font-medium text-slate-500 mb-1 block"},"Название",-1)),Oe(v("input",{"onUpdate:modelValue":O=>y.label=O,type:"text",placeholder:"Цена",class:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-slate-50 focus:bg-white focus:border-indigo-400 focus:ring-1 focus:ring-indigo-100 transition-all",onInput:O=>{i(y),d()}},null,40,qc),[[Xe,y.label]])]),v("div",null,[m[5]||(m[5]=v("label",{class:"text-xs font-medium text-slate-500 mb-1 block"},"Код (slug)",-1)),Oe(v("input",{"onUpdate:modelValue":O=>y.name=O,type:"text",placeholder:"price",pattern:"^[a-z][a-z0-9_]*$",class:Se(["w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-slate-50 focus:bg-white focus:border-indigo-400 focus:ring-1 focus:ring-indigo-100 transition-all font-mono",{"border-red-300 bg-red-50":!u(y.name)&&y.name}]),onInput:d},null,42,_c),[[Xe,y.name]])]),v("div",null,[m[7]||(m[7]=v("label",{class:"text-xs font-medium text-slate-500 mb-1 block"},"Тип данных",-1)),Oe(v("select",{"onUpdate:modelValue":O=>y.type=O,class:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-slate-50 focus:bg-white focus:border-indigo-400 focus:ring-1 focus:ring-indigo-100 transition-all",onChange:d},[...m[6]||(m[6]=[v("option",{value:"text"},"Текст",-1),v("option",{value:"number"},"Число",-1),v("option",{value:"date"},"Дата",-1),v("option",{value:"bool"},"Да/Нет",-1)])],40,ef),[[Xt,y.type]])]),v("div",tf,[v("label",nf,[Oe(v("input",{"onUpdate:modelValue":O=>y.required=O,type:"checkbox",class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500",onChange:d},null,40,of),[[Ft,y.required]]),m[8]||(m[8]=v("span",{class:"text-xs text-slate-600"},"Обязательное",-1))]),v("label",rf,[Oe(v("input",{"onUpdate:modelValue":O=>y.searchable=O,type:"checkbox",class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500",onChange:d},null,40,af),[[Ft,y.searchable]]),m[9]||(m[9]=v("span",{class:"text-xs text-slate-600"},"Поиск",-1))])])]),v("button",{type:"button",onClick:O=>c(S),class:Se(["p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors mt-1",{"opacity-30 cursor-not-allowed":n.value.length<=1}]),disabled:n.value.length<=1},[w(x(eo),{class:"w-4 h-4"})],10,sf)]),y.name&&!u(y.name)?(C(),F("p",lf," Код должен начинаться с буквы, содержать только a-z, 0-9, _ ")):fe("",!0),f(y.name,S)?(C(),F("p",uf," Код колонки должен быть уникальным ")):fe("",!0)])]),_:1},8,["modelValue"])),n.value.length>0?(C(),F("p",df,K(n.value.length)+" из "+K(x(s))+" колонок • Перетащите для сортировки ",1)):fe("",!0)]))}}),va=Er(cf,[["__scopeId","data-v-e9b9e7b8"]]),ff={key:0,class:"p-6"},gf={class:"flex items-center justify-between"},pf={class:"grid grid-cols-2 gap-3"},vf=["onClick","disabled"],mf={class:"font-bold text-slate-900 text-sm"},hf={class:"text-xs text-slate-500 mt-1"},yf={key:0,class:"text-[10px] text-slate-400 mt-1"},xf=["disabled"],bf={key:1,class:"p-6"},Sf={class:"flex items-center justify-between"},wf={class:"flex items-center gap-3"},Cf={class:"relative mt-1"},$f={key:0,class:"mt-1 text-xs text-red-600"},Ef={key:1,class:"mt-1 text-xs text-slate-500"},Rf=["placeholder"],If={key:0,class:"bg-slate-50 rounded-xl p-4 border border-slate-100"},Of={class:"flex flex-wrap gap-2"},Df={class:"text-slate-400 ml-1"},Pf={key:0,class:"text-red-400"},Tf={key:1,class:"text-sm text-red-600"},Ff=["disabled"],Af={key:2,class:"flex flex-col max-h-[85vh]"},Mf={class:"flex items-center justify-between p-6 border-b border-slate-100"},Vf={class:"flex items-center gap-3"},Lf={class:"flex-1 overflow-y-auto p-6"},Nf={class:"flex items-center justify-end gap-3 p-6 border-t border-slate-100 bg-slate-50"},jf=["disabled"],Gf=$e({__name:"CreateDirectoryModal",props:{isOpen:{type:Boolean},existingToolNames:{}},emits:["close","submit"],setup(e,{expose:o,emit:t}){const r=e,a=t,s=[{id:"qa",label:"Вопрос-ответ",description:"Пары вопросов и ответов",icon:Ur,columns:[{name:"question",label:"Вопрос",type:"text",required:!0,searchable:!0},{name:"answer",label:"Ответ",type:"text",required:!0,searchable:!1}],defaultDescription:"Найти ответ на часто задаваемый вопрос"},{id:"service_catalog",label:"Каталог услуг",description:"Название, описание, цена",icon:Ir,columns:[{name:"name",label:"Название",type:"text",required:!0,searchable:!0},{name:"description",label:"Описание",type:"text",required:!1,searchable:!0},{name:"price",label:"Цена",type:"numeric",required:!1,searchable:!1}],defaultDescription:"Найти услугу по названию или описанию"},{id:"product_catalog",label:"Каталог товаров",description:"С ценами и характеристиками",icon:Hr,columns:[{name:"name",label:"Название",type:"text",required:!0,searchable:!0},{name:"description",label:"Описание",type:"text",required:!1,searchable:!0},{name:"price",label:"Цена",type:"numeric",required:!1,searchable:!1},{name:"specs",label:"Характеристики",type:"text",required:!1,searchable:!0}],defaultDescription:"Найти товар по названию, описанию или характеристикам"},{id:"company_info",label:"О компании",description:"Тема → информация",icon:jr,columns:[{name:"topic",label:"Тема",type:"text",required:!0,searchable:!0},{name:"info",label:"Информация",type:"text",required:!0,searchable:!0}],defaultDescription:"Получить информацию о компании по теме"},{id:"custom",label:"Произвольный",description:"Задайте свои колонки",icon:Do,columns:[],defaultDescription:"Поиск по справочнику"},{id:"ai_generate",label:"Создать с ИИ",description:"Опишите — ИИ сгенерирует",icon:ei,columns:[],defaultDescription:""}],n=_("template"),l=_(null),i=_(!1),u=_(""),f=_(""),g=_({name:"",tool_name:"",tool_description:""}),c=_([{id:"1",name:"",label:"",type:"text",required:!0,searchable:!0}]),d=_(null),p=Re(()=>s.find(E=>E.id===l.value)),h=Re(()=>g.value.name.trim()&&g.value.tool_name.trim()&&/^[a-z][a-z0-9_]*$/.test(g.value.tool_name)&&!f.value),m=Re(()=>c.value.length===0?!1:c.value.every(E=>E.name&&E.label&&/^[a-z][a-z0-9_]*$/.test(E.name))),y=E=>{E!=="ai_generate"&&(l.value=E)},S=()=>{l.value&&(n.value="details")},O=()=>{g.value.tool_name=bd(g.value.name,"get_"),R()},R=()=>{f.value=ea(g.value.tool_name,r.existingToolNames||[])},P=()=>{h.value&&(l.value==="custom"?n.value="columns":ee())},A=()=>{n.value="template",l.value=null,g.value={name:"",tool_name:"",tool_description:""},c.value=[{id:"1",name:"",label:"",type:"text",required:!0,searchable:!0}],u.value="",f.value="",i.value=!1},X=()=>{A(),a("close")},ee=()=>{var b,V;if(!l.value)return;u.value="",i.value=!0;let E;if(l.value==="custom"){if(!m.value){u.value="Заполните все колонки корректно",i.value=!1;return}E=c.value.map(({id:ne,...L})=>L)}else E=(((b=p.value)==null?void 0:b.columns)||[]).map(ne=>({...ne,searchable:ne.searchable??!1}));a("submit",{name:g.value.name,tool_name:g.value.tool_name,tool_description:g.value.tool_description||((V=p.value)==null?void 0:V.defaultDescription)||"",template:l.value,columns:E})};return Ke(()=>r.isOpen,E=>{E&&A()}),Ke(()=>g.value.tool_name,()=>{R()}),o({setSubmitting:E=>{i.value=E},setError:E=>{u.value=E},close:X}),(E,b)=>(C(),we(x(Jo),{open:e.isOpen,"onUpdate:open":b[7]||(b[7]=V=>!V&&X())},{default:T(()=>[w(x(Zo),{"class-name":n.value==="columns"?"max-w-3xl":"max-w-xl",onEscapeKeyDown:b[6]||(b[6]=St(()=>{},["prevent"]))},{default:T(()=>{var V,ne;return[n.value==="template"?(C(),F("div",ff,[w(x(Kn),{class:"mb-6"},{default:T(()=>[v("div",gf,[v("div",null,[w(x(fn),null,{default:T(()=>[...b[8]||(b[8]=[se("Создать справочник",-1)])]),_:1}),w(x(gn),null,{default:T(()=>[...b[9]||(b[9]=[se("Выберите тип справочника",-1)])]),_:1})]),w(x(Nn))])]),_:1}),v("div",pf,[(C(),F(Ne,null,je(s,L=>v("button",{key:L.id,onClick:U=>y(L.id),class:Se(["flex flex-col items-start p-4 rounded-xl border border-slate-200 hover:border-indigo-300 hover:bg-indigo-50/50 transition-all text-left group",[l.value===L.id?"border-indigo-400 bg-indigo-50":"",L.id==="ai_generate"?"opacity-50 cursor-not-allowed":""]]),disabled:L.id==="ai_generate"},[v("div",{class:Se(["w-10 h-10 rounded-lg flex items-center justify-center mb-3",[l.value===L.id?"bg-indigo-600 text-white":"bg-slate-100 text-slate-500 group-hover:bg-indigo-100 group-hover:text-indigo-600"]])},[(C(),we(qn(L.icon),{class:"w-5 h-5"}))],2),v("span",mf,K(L.label),1),v("span",hf,K(L.description),1),L.id==="ai_generate"?(C(),F("span",yf,"Скоро")):fe("",!0)],10,vf)),64))]),w(x(Lo),{class:"mt-6"},{default:T(()=>[v("button",{disabled:!l.value,onClick:S,class:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Далее ",8,xf)]),_:1})])):n.value==="details"?(C(),F("div",bf,[w(x(Kn),{class:"mb-6"},{default:T(()=>[v("div",Sf,[v("div",wf,[v("button",{onClick:b[0]||(b[0]=L=>n.value="template"),class:"p-1 text-slate-400 hover:text-slate-600"},[w(x(Oo),{class:"h-5 w-5"})]),v("div",null,[w(x(fn),null,{default:T(()=>[...b[10]||(b[10]=[se("Настройка справочника",-1)])]),_:1}),w(x(gn),null,{default:T(()=>{var L;return[se(K((L=p.value)==null?void 0:L.label),1)]}),_:1})])]),w(x(Nn))])]),_:1}),v("form",{onSubmit:St(P,["prevent"]),class:"space-y-5"},[v("div",null,[b[11]||(b[11]=v("label",{class:"text-sm font-medium text-slate-700"},[se(" Название справочника "),v("span",{class:"text-red-500"},"*")],-1)),Oe(v("input",{"onUpdate:modelValue":b[1]||(b[1]=L=>g.value.name=L),type:"text",required:"",placeholder:"Услуги клиники",class:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all",onInput:O},null,544),[[Xe,g.value.name,void 0,{trim:!0}]])]),v("div",null,[b[12]||(b[12]=v("label",{class:"text-sm font-medium text-slate-700"},[se(" Имя функции для агента "),v("span",{class:"text-red-500"},"*")],-1)),v("div",Cf,[Oe(v("input",{"onUpdate:modelValue":b[2]||(b[2]=L=>g.value.tool_name=L),type:"text",required:"",placeholder:"get_services",pattern:"^[a-z][a-z0-9_]*$",class:Se(["w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 font-mono focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all",{"border-red-300 bg-red-50":f.value}])},null,2),[[Xe,g.value.tool_name,void 0,{trim:!0}]])]),f.value?(C(),F("p",$f,K(f.value),1)):(C(),F("p",Ef," Латиница, цифры и _ • Уникальное в рамках агента "))]),v("div",null,[b[13]||(b[13]=v("label",{class:"text-sm font-medium text-slate-700"},"Описание для агента",-1)),Oe(v("textarea",{"onUpdate:modelValue":b[3]||(b[3]=L=>g.value.tool_description=L),rows:"3",placeholder:(V=p.value)==null?void 0:V.defaultDescription,class:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all resize-none"},null,8,Rf),[[Xe,g.value.tool_description,void 0,{trim:!0}]]),b[14]||(b[14]=v("p",{class:"mt-1 text-xs text-slate-500"}," Помогает агенту понять когда использовать этот справочник ",-1))]),l.value!=="custom"?(C(),F("div",If,[b[15]||(b[15]=v("p",{class:"text-xs font-bold text-slate-600 uppercase tracking-wider mb-2"},"Колонки справочника",-1)),v("div",Of,[(C(!0),F(Ne,null,je((ne=p.value)==null?void 0:ne.columns,L=>(C(),F("span",{key:L.name,class:"px-3 py-1 bg-white border border-slate-200 rounded-lg text-xs text-slate-600"},[se(K(L.label)+" ",1),v("span",Df,"("+K(L.type)+")",1),L.required?(C(),F("span",Pf,"*")):fe("",!0)]))),128))])])):fe("",!0),u.value?(C(),F("p",Tf,K(u.value),1)):fe("",!0),w(x(Lo),null,{default:T(()=>[v("button",{type:"button",class:"px-5 py-2.5 rounded-xl border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors",onClick:X}," Отмена "),v("button",{type:"submit",class:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",disabled:!h.value},[v("span",null,K(l.value==="custom"?"Далее":"Создать"),1)],8,Ff)]),_:1})],32)])):n.value==="columns"?(C(),F("div",Af,[v("div",Mf,[v("div",Vf,[v("button",{onClick:b[4]||(b[4]=L=>n.value="details"),class:"p-1 text-slate-400 hover:text-slate-600"},[w(x(Oo),{class:"h-5 w-5"})]),v("div",null,[w(x(fn),null,{default:T(()=>[...b[16]||(b[16]=[se("Настройка колонок",-1)])]),_:1}),w(x(gn),null,{default:T(()=>[se(K(g.value.name||"Произвольный справочник"),1)]),_:1})])]),w(x(Nn))]),v("div",Lf,[w(va,{modelValue:c.value,"onUpdate:modelValue":b[5]||(b[5]=L=>c.value=L),"max-columns":15,ref_key:"columnEditorRef",ref:d},null,8,["modelValue"])]),v("div",Nf,[v("button",{type:"button",class:"px-5 py-2.5 rounded-xl border border-slate-200 bg-white text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors",onClick:X}," Отмена "),v("button",{onClick:ee,class:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",disabled:i.value||!m.value},[i.value?(C(),we(x(Mt),{key:0,class:"w-4 h-4 animate-spin"})):fe("",!0),v("span",null,K(i.value?"Создание...":"Создать"),1)],8,jf)])])):fe("",!0)]}),_:1},8,["class-name"])]),_:1},8,["open"]))}}),ma=$e({__name:"SheetClose",props:{className:{}},setup(e){return(o,t)=>(C(),we(x(Dr),{class:Se(["p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors","focus:outline-none focus:ring-2 focus:ring-indigo-400",e.className])},{default:T(()=>[Ye(o.$slots,"default",{},()=>[w(x(_n),{class:"h-5 w-5"})]),t[0]||(t[0]=v("span",{class:"sr-only"},"Закрыть",-1))]),_:3},8,["class"]))}}),ha=$e({__name:"SheetFooter",props:{className:{}},setup(e){return(o,t)=>(C(),F("div",{class:Se(["flex-shrink-0 bg-white border-t border-slate-100 px-6 py-4",e.className])},[Ye(o.$slots,"default")],2))}}),Uf={class:"flex items-center justify-between"},Hf={class:"flex-1 overflow-y-auto p-6 space-y-5"},Bf={class:"text-sm font-medium text-slate-700 block mb-1.5"},kf={key:0,class:"text-red-500 ml-0.5"},zf=["onUpdate:modelValue","required","placeholder"],Kf=["onUpdate:modelValue","required","placeholder"],Wf=["onUpdate:modelValue","required"],Xf=["onUpdate:modelValue","required"],Yf={key:4,class:"mt-1 flex items-center gap-3 cursor-pointer p-3 rounded-xl border border-slate-200 bg-slate-50 hover:bg-slate-100 transition-colors"},Qf=["onUpdate:modelValue"],Jf={class:"text-sm text-slate-600"},Zf={key:0,class:"text-sm text-red-600 bg-red-50 p-3 rounded-lg"},qf=["disabled"],_f=$e({__name:"ItemFormModal",props:{isOpen:{type:Boolean},directoryName:{},columns:{},editItem:{}},emits:["close","submit"],setup(e,{expose:o,emit:t}){const r=e,a=t,s=_({}),n=_(!1),l=_(""),i=p=>p.type==="text"&&no(p.name),u=p=>Uu(p.name,p.label),f=p=>{switch(p){case"number":return null;case"bool":return!1;case"date":return"";default:return""}},g=()=>{const p={};for(const h of r.columns)r.editItem?p[h.name]=r.editItem.data[h.name]??f(h.type):p[h.name]=f(h.type);s.value=p},c=()=>{s.value={},l.value="",n.value=!1,a("close")},d=()=>{var h;l.value="";for(const m of r.columns)if(m.required){const y=s.value[m.name];if(y==null||y===""){l.value=`Поле "${m.label}" обязательно для заполнения`;return}}n.value=!0;const p={};for(const m of r.columns){const y=s.value[m.name];y!=null&&y!==""&&(p[m.name]=y)}a("submit",p,(h=r.editItem)==null?void 0:h.id)};return Ke(()=>r.isOpen,p=>{p&&(g(),l.value="",n.value=!1)}),Ke(()=>r.editItem,()=>{r.isOpen&&g()}),o({setSubmitting:p=>{n.value=p},setError:p=>{l.value=p},close:c}),(p,h)=>(C(),we(x(Pr),{open:e.isOpen,"onUpdate:open":h[0]||(h[0]=m=>!m&&c())},{default:T(()=>[w(x(Ar),{side:"right"},{default:T(()=>[w(x(Tr),null,{default:T(()=>[v("div",Uf,[v("div",null,[w(x(Fr),null,{default:T(()=>[se(K(e.editItem?"Редактировать запись":"Добавить запись"),1)]),_:1}),w(x(Zl),null,{default:T(()=>[se(K(e.directoryName),1)]),_:1})]),w(x(ma))])]),_:1}),v("form",{onSubmit:St(d,["prevent"]),class:"flex-1 flex flex-col min-h-0"},[v("div",Hf,[(C(!0),F(Ne,null,je(e.columns,m=>(C(),F("div",{key:m.name},[v("label",Bf,[se(K(m.label)+" ",1),m.required?(C(),F("span",kf,"*")):fe("",!0)]),m.type==="text"&&!i(m)?Oe((C(),F("input",{key:0,"onUpdate:modelValue":y=>s.value[m.name]=y,type:"text",required:m.required,placeholder:u(m),class:"w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all"},null,8,zf)),[[Xe,s.value[m.name]]]):m.type==="text"&&i(m)?Oe((C(),F("textarea",{key:1,"onUpdate:modelValue":y=>s.value[m.name]=y,required:m.required,placeholder:u(m),rows:"4",class:"w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all resize-none"},null,8,Kf)),[[Xe,s.value[m.name]]]):m.type==="number"?Oe((C(),F("input",{key:2,"onUpdate:modelValue":y=>s.value[m.name]=y,type:"number",required:m.required,placeholder:"0",step:"any",class:"w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all font-mono"},null,8,Wf)),[[Xe,s.value[m.name],void 0,{number:!0}]]):m.type==="date"?Oe((C(),F("input",{key:3,"onUpdate:modelValue":y=>s.value[m.name]=y,type:"date",required:m.required,class:"w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all"},null,8,Xf)),[[Xe,s.value[m.name]]]):m.type==="bool"?(C(),F("label",Yf,[Oe(v("input",{"onUpdate:modelValue":y=>s.value[m.name]=y,type:"checkbox",class:"w-5 h-5 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,8,Qf),[[Ft,s.value[m.name]]]),v("span",Jf,K(s.value[m.name]?"Да":"Нет"),1)])):fe("",!0)]))),128)),l.value?(C(),F("p",Zf,K(l.value),1)):fe("",!0)]),w(x(ha),{"class-name":"flex items-center gap-3"},{default:T(()=>[v("button",{type:"button",class:"flex-1 px-5 py-3 rounded-xl border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors",onClick:c}," Отмена "),v("button",{type:"submit",class:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",disabled:n.value},[n.value?(C(),we(x(Mt),{key:0,class:"w-4 h-4 animate-spin"})):fe("",!0),v("span",null,K(n.value?"Сохранение...":e.editItem?"Сохранить":"Добавить"),1)],8,qf)]),_:1})],32)]),_:1})]),_:1},8,["open"]))}}),eg={class:"flex items-center justify-between p-6 border-b border-slate-100"},tg={class:"flex-1 overflow-y-auto p-6"},ng={key:0},og={key:0,class:"mt-4 text-sm text-red-600"},rg={key:1,class:"space-y-5"},ag={class:"flex items-center justify-between bg-slate-50 rounded-xl p-4"},sg={class:"flex items-center gap-3"},lg={class:"w-10 h-10 bg-white rounded-lg flex items-center justify-center border border-slate-200"},ig={class:"font-medium text-slate-900 text-sm"},ug={class:"text-xs text-slate-500"},dg={class:"space-y-3"},cg={class:"flex-1 px-4 py-2.5 bg-slate-50 rounded-lg text-sm text-slate-700 truncate border border-slate-100"},fg=["onUpdate:modelValue"],gg=["value","disabled"],pg={class:"space-y-3 pt-2"},vg={class:"flex items-center gap-3 cursor-pointer"},mg={class:"flex items-center gap-3 cursor-pointer"},hg={key:0,class:"pt-2"},yg={class:"overflow-x-auto rounded-lg border border-slate-200"},xg={class:"w-full text-sm"},bg={class:"bg-slate-50 border-b border-slate-200"},Sg={class:"divide-y divide-slate-100"},wg={key:1,class:"text-sm text-red-600"},Cg={key:2,class:"text-center py-6"},$g={class:"text-lg font-bold text-slate-900"},Eg={class:"text-slate-500 mt-2"},Rg={class:"font-bold text-slate-700"},Ig={key:0,class:"text-slate-500"},Og={class:"font-bold text-yellow-600"},Dg=["disabled"],Pg=$e({__name:"ImportCsvModal",props:{isOpen:{type:Boolean},directoryName:{},columns:{}},emits:["close","import"],setup(e,{expose:o,emit:t}){const r=e,a=t,s=_("upload"),n=_(!1),l=_(null),i=_(null),u=_(""),f=_(""),g=_(!1),c=_(null),d=_({}),p=_(!0),h=_(!1),m=_(null),y=Re(()=>{const U=Object.values(d.value).filter(j=>j!==null);return r.columns.filter(j=>j.required).map(j=>j.name).every(j=>U.includes(j))}),S=(U,k)=>Object.entries(d.value).some(([j,q])=>q===U&&j!==k),O=U=>{const k=d.value[U];if(!k)return null;const j=r.columns.find(q=>q.name===k);return j==null?void 0:j.label},R=()=>{var U;(U=i.value)==null||U.click()},P=U=>{var j;const k=U.target;(j=k.files)!=null&&j[0]&&X(k.files[0])},A=U=>{var j;n.value=!1;const k=(j=U.dataTransfer)==null?void 0:j.files[0];k&&X(k)},X=async U=>{var q;u.value="";const k=[".csv",".xlsx",".xls"],j=U.name.substring(U.name.lastIndexOf(".")).toLowerCase();if(!k.includes(j)){u.value="Поддерживаются только файлы .csv и .xlsx";return}if(U.size>10*1024*1024){u.value="Файл слишком большой. Максимум 10 МБ";return}l.value=U;try{const le=await U.text(),me=le.split(`
`).filter(N=>N.trim()),Q=le.includes(";")?";":",",J=((q=me[0])==null?void 0:q.split(Q).map(N=>N.trim().replace(/^"|"$/g,"")))||[],ge=me.slice(1,4).map(N=>N.split(Q).map(H=>H.trim().replace(/^"|"$/g,"")));c.value={columns:J,rows_count:me.length-1,preview:ge};const G={};for(const N of J){const H=N.toLowerCase(),Y=r.columns.find(te=>te.label.toLowerCase()===H||te.name.toLowerCase()===H);G[N]=(Y==null?void 0:Y.name)||null}d.value=G,s.value="mapping"}catch{u.value="Не удалось прочитать файл"}},ee=()=>{l.value=null,c.value=null,d.value={},s.value="upload"},E=()=>{!l.value||!y.value||(f.value="",g.value=!0,a("import",l.value,d.value,{hasHeader:p.value,replaceAll:h.value}))},b=()=>{var le,me;if(!((me=(le=m.value)==null?void 0:le.errors)!=null&&me.length))return;const U=m.value.errors.map(Q=>`Строка ${Q.row}: ${Q.error}`).join(`
`),k=new Blob([U],{type:"text/plain"}),j=URL.createObjectURL(k),q=document.createElement("a");q.href=j,q.download="import-errors.txt",q.click(),URL.revokeObjectURL(j)},V=()=>{s.value="upload",l.value=null,c.value=null,d.value={},u.value="",f.value="",g.value=!1,m.value=null,p.value=!0,h.value=!1,a("close")},ne=U=>{m.value=U,g.value=!1,s.value="result"},L=U=>{f.value=U,g.value=!1};return Ke(()=>r.isOpen,U=>{U||V()}),o({setResult:ne,setError:L}),(U,k)=>(C(),we(x(Jo),{open:e.isOpen,"onUpdate:open":k[4]||(k[4]=j=>!j&&V())},{default:T(()=>[w(x(Zo),{"class-name":"max-w-2xl max-h-[90vh] overflow-hidden flex flex-col"},{default:T(()=>{var j,q,le,me,Q,J,ge,G,N,H,Y,te,De,W,$,B,Ae,Ge;return[v("div",eg,[w(x(Kn),null,{default:T(()=>[w(x(fn),null,{default:T(()=>[...k[5]||(k[5]=[se("Импорт из CSV",-1)])]),_:1}),w(x(gn),null,{default:T(()=>[se(K(e.directoryName),1)]),_:1})]),_:1}),w(x(Nn))]),v("div",tg,[s.value==="upload"?(C(),F("div",ng,[v("div",{class:Se(["border-2 border-dashed border-slate-200 rounded-xl p-8 text-center hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer",{"border-indigo-400 bg-indigo-50":n.value}]),onDragover:k[0]||(k[0]=St(Pe=>n.value=!0,["prevent"])),onDragleave:k[1]||(k[1]=St(Pe=>n.value=!1,["prevent"])),onDrop:St(A,["prevent"]),onClick:R},[v("input",{ref_key:"fileInputRef",ref:i,type:"file",accept:".csv,.xlsx,.xls",class:"hidden",onChange:P},null,544),w(x(Br),{class:"w-12 h-12 text-slate-400 mx-auto mb-4"}),k[6]||(k[6]=v("p",{class:"text-slate-700 font-medium"},"Перетащите файл сюда",-1)),k[7]||(k[7]=v("p",{class:"text-slate-500 text-sm mt-1"},"или нажмите для выбора",-1)),k[8]||(k[8]=v("p",{class:"text-slate-400 text-xs mt-3"},"Поддерживаются .csv и .xlsx до 10 МБ",-1))],34),u.value?(C(),F("p",og,K(u.value),1)):fe("",!0)])):s.value==="mapping"?(C(),F("div",rg,[v("div",ag,[v("div",sg,[v("div",lg,[w(x(ci),{class:"w-5 h-5 text-emerald-600"})]),v("div",null,[v("p",ig,K((j=l.value)==null?void 0:j.name),1),v("p",ug,K((q=c.value)==null?void 0:q.rows_count)+" строк",1)])]),v("button",{onClick:ee,class:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Удалить файл"},[w(x(eo),{class:"w-4 h-4"})])]),v("div",null,[k[10]||(k[10]=v("p",{class:"text-sm font-medium text-slate-700 mb-3"},"Сопоставьте колонки файла с полями справочника",-1)),v("div",dg,[(C(!0),F(Ne,null,je((le=c.value)==null?void 0:le.columns,Pe=>(C(),F("div",{key:Pe,class:"flex items-center gap-3"},[v("div",cg,' "'+K(Pe)+'" ',1),w(x(ii),{class:"w-4 h-4 text-slate-400 flex-shrink-0"}),Oe(v("select",{"onUpdate:modelValue":Je=>d.value[Pe]=Je,class:"flex-1 px-4 py-2.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100"},[k[9]||(k[9]=v("option",{value:null},"— Пропустить —",-1)),(C(!0),F(Ne,null,je(e.columns,Je=>(C(),F("option",{key:Je.name,value:Je.name,disabled:S(Je.name,Pe)},K(Je.label),9,gg))),128))],8,fg),[[Xt,d.value[Pe]]])]))),128))])]),v("div",pg,[v("label",vg,[Oe(v("input",{"onUpdate:modelValue":k[2]||(k[2]=Pe=>p.value=Pe),type:"checkbox",class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[Ft,p.value]]),k[11]||(k[11]=v("span",{class:"text-sm text-slate-700"},"Первая строка — заголовки",-1))]),v("label",mg,[Oe(v("input",{"onUpdate:modelValue":k[3]||(k[3]=Pe=>h.value=Pe),type:"checkbox",class:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[Ft,h.value]]),k[12]||(k[12]=v("span",{class:"text-sm text-slate-700"},"Заменить все существующие записи",-1))])]),(Q=(me=c.value)==null?void 0:me.preview)!=null&&Q.length?(C(),F("div",hg,[k[13]||(k[13]=v("p",{class:"text-sm font-medium text-slate-700 mb-3"},"Превью (первые 3 записи)",-1)),v("div",yg,[v("table",xg,[v("thead",null,[v("tr",bg,[(C(!0),F(Ne,null,je(c.value.columns,(Pe,Je)=>(C(),F("th",{key:Je,class:"px-3 py-2 text-left text-xs font-bold text-slate-500 uppercase whitespace-nowrap"},K(O(Pe)||Pe),1))),128))])]),v("tbody",Sg,[(C(!0),F(Ne,null,je(c.value.preview,(Pe,Je)=>(C(),F("tr",{key:Je},[(C(!0),F(Ne,null,je(Pe,(dt,ct)=>(C(),F("td",{key:ct,class:"px-3 py-2 text-slate-600 truncate max-w-[200px]"},K(dt||"—"),1))),128))]))),128))])])])])):fe("",!0),f.value?(C(),F("p",wg,K(f.value),1)):fe("",!0)])):s.value==="result"?(C(),F("div",Cg,[v("div",{class:Se(["w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",[(ge=(J=m.value)==null?void 0:J.errors)!=null&&ge.length?"bg-yellow-100":"bg-emerald-100"]])},[(C(),we(qn((N=(G=m.value)==null?void 0:G.errors)!=null&&N.length?x(Vr):x(ti)),{class:Se(["w-8 h-8",[(Y=(H=m.value)==null?void 0:H.errors)!=null&&Y.length?"text-yellow-600":"text-emerald-600"]])},null,8,["class"]))],2),v("h3",$g,K((De=(te=m.value)==null?void 0:te.errors)!=null&&De.length?"Импорт завершён с предупреждениями":"Импорт успешно завершён"),1),v("p",Eg,[k[14]||(k[14]=se(" Добавлено записей: ",-1)),v("span",Rg,K((W=m.value)==null?void 0:W.created),1)]),(B=($=m.value)==null?void 0:$.errors)!=null&&B.length?(C(),F("p",Ig,[k[15]||(k[15]=se(" Пропущено (ошибки): ",-1)),v("span",Og,K(m.value.errors.length),1)])):fe("",!0),(Ge=(Ae=m.value)==null?void 0:Ae.errors)!=null&&Ge.length?(C(),F("button",{key:1,onClick:b,class:"mt-4 px-4 py-2 text-sm text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors"}," Скачать лог ошибок ")):fe("",!0)])):fe("",!0)]),w(x(Lo),{"class-name":"p-6 border-t border-slate-100 bg-slate-50"},{default:T(()=>[s.value!=="result"?(C(),F("button",{key:0,type:"button",class:"px-5 py-2.5 rounded-xl border border-slate-200 bg-white text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors",onClick:V}," Отмена ")):fe("",!0),s.value==="mapping"?(C(),F("button",{key:1,onClick:E,class:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",disabled:g.value||!y.value},[g.value?(C(),we(x(Mt),{key:0,class:"w-4 h-4 animate-spin"})):fe("",!0),v("span",null,K(g.value?"Импорт...":"Импортировать"),1)],8,Dg)):fe("",!0),s.value==="result"?(C(),F("button",{key:2,onClick:V,class:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition-colors"}," Готово ")):fe("",!0)]),_:1})]}),_:1})]),_:1},8,["open"]))}}),Tg={class:"flex items-center justify-between"},Fg={class:"flex-1 overflow-y-auto p-6 space-y-6"},Ag={key:0,class:"mt-1 text-xs text-yellow-600"},Mg={key:1,class:"mt-1 text-xs text-red-600"},Vg={class:"border-t border-slate-100 pt-6"},Lg={class:"flex items-center justify-between mb-4"},Ng={class:"flex items-center gap-2"},jg={key:0,class:"text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded-lg"},Gg={key:0,class:"flex flex-wrap gap-2"},Ug={class:"text-slate-400 ml-1"},Hg={key:0,class:"text-red-400 ml-0.5"},Bg={key:1,class:"space-y-3"},kg={key:0,class:"text-xs text-amber-600 bg-amber-50 p-3 rounded-lg"},zg={class:"border-t border-slate-100 pt-6"},Kg={class:"space-y-3"},Wg={class:"border-t border-slate-100 pt-6"},Xg={class:"border-t border-slate-100 pt-6"},Yg={class:"flex items-center justify-between cursor-pointer"},Qg={key:0,class:"text-sm text-red-600"},Jg=["disabled"],Zg={class:"p-6"},qg={class:"flex items-center gap-3 mt-6"},_g=["disabled"],ep=$e({__name:"DirectorySettingsSheet",props:{isOpen:{type:Boolean},directory:{},existingToolNames:{}},emits:["close","save","delete"],setup(e,{expose:o,emit:t}){const r=e,a=t,s=_({name:"",tool_name:"",tool_description:"",response_mode:"function_result",search_type:"fuzzy",is_enabled:!0,columns:[]}),n=_(!1),l=_(!1),i=_(""),u=_(""),f=_(!1),g=_(!1),c=_(""),d=_([]),p=Re(()=>s.value.tool_name!==c.value),h=Re(()=>JSON.stringify(s.value.columns)!==JSON.stringify(d.value)),m=Re(()=>{if(!h.value)return"";const E=s.value.columns.map(V=>V.name),b=d.value.filter(V=>!E.includes(V.name));return b.length>0&&r.directory&&r.directory.items_count>0?`Удаление колонок (${b.map(V=>V.label).join(", ")}) приведёт к потере данных в ${r.directory.items_count} записях`:""}),y=Re(()=>{if(!s.value.name.trim()||!s.value.tool_name.trim()||!Vo(s.value.tool_name)||u.value||s.value.columns.length===0)return!1;if(g.value&&R.value)return R.value.isValid();const E=s.value.columns.map(ne=>ne.name),b=s.value.columns.some(ne=>!ne.name||!ne.label||!Vo(ne.name)),V=E.length!==new Set(E).size;return!b&&!V}),S=()=>{if(r.directory){const E=(r.directory.columns||[]).map(b=>({name:b.name,label:b.label,type:b.type||"text",required:b.required??!1,searchable:b.searchable??!1}));s.value={name:r.directory.name,tool_name:r.directory.tool_name,tool_description:r.directory.tool_description||"",response_mode:r.directory.response_mode||"function_result",search_type:r.directory.search_type||"fuzzy",is_enabled:r.directory.is_enabled,columns:E},c.value=r.directory.tool_name,d.value=JSON.parse(JSON.stringify(E))}},O=()=>{u.value=ea(s.value.tool_name,r.existingToolNames||[],c.value)},R=_(null),P=Re({get:()=>s.value.columns.map((E,b)=>({id:String(b),name:E.name,label:E.label,type:E.type,required:E.required,searchable:E.searchable??!1})),set:E=>{s.value.columns=E.map(({id:b,...V})=>V)}}),A=()=>{i.value="",u.value="",f.value=!1,g.value=!1,n.value=!1,l.value=!1,a("close")},X=()=>{!y.value||!r.directory||(i.value="",n.value=!0,a("save",{id:r.directory.id,name:s.value.name,tool_name:s.value.tool_name,tool_description:s.value.tool_description,response_mode:s.value.response_mode,search_type:s.value.search_type,is_enabled:s.value.is_enabled,columns:s.value.columns}))},ee=()=>{r.directory&&(l.value=!0,a("delete",r.directory.id))};return Ke(()=>r.isOpen,E=>{E&&(S(),i.value="",u.value="",f.value=!1,g.value=!1)}),Ke(()=>s.value.tool_name,()=>{O()}),o({setSaving:E=>{n.value=E},setDeleting:E=>{l.value=E},setError:E=>{i.value=E},close:A}),(E,b)=>(C(),we(x(Pr),{open:e.isOpen,"onUpdate:open":b[12]||(b[12]=V=>!V&&A())},{default:T(()=>[w(x(Ar),{side:"right","class-name":"max-w-xl"},{default:T(()=>[w(x(Tr),null,{default:T(()=>[v("div",Tg,[w(x(Fr),null,{default:T(()=>[...b[13]||(b[13]=[se("Настройки справочника",-1)])]),_:1}),w(x(ma))])]),_:1}),v("div",Fg,[v("div",null,[b[14]||(b[14]=v("label",{class:"text-sm font-medium text-slate-700"},"Название",-1)),Oe(v("input",{"onUpdate:modelValue":b[0]||(b[0]=V=>s.value.name=V),type:"text",class:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all"},null,512),[[Xe,s.value.name,void 0,{trim:!0}]])]),v("div",null,[b[15]||(b[15]=v("label",{class:"text-sm font-medium text-slate-700"},"Имя функции",-1)),Oe(v("input",{"onUpdate:modelValue":b[1]||(b[1]=V=>s.value.tool_name=V),type:"text",class:Se(["mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 font-mono focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all",{"border-yellow-300 bg-yellow-50":p.value}])},null,2),[[Xe,s.value.tool_name,void 0,{trim:!0}]]),p.value?(C(),F("p",Ag," Изменение повлияет на промпт агента ")):fe("",!0),u.value?(C(),F("p",Mg,K(u.value),1)):fe("",!0)]),v("div",null,[b[16]||(b[16]=v("label",{class:"text-sm font-medium text-slate-700"},"Описание для агента",-1)),Oe(v("textarea",{"onUpdate:modelValue":b[2]||(b[2]=V=>s.value.tool_description=V),rows:"3",class:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all resize-none"},null,512),[[Xe,s.value.tool_description,void 0,{trim:!0}]])]),v("div",Vg,[v("div",Lg,[b[17]||(b[17]=v("label",{class:"text-sm font-medium text-slate-700"},"Колонки справочника",-1)),v("div",Ng,[h.value?(C(),F("span",jg," Изменения не сохранены ")):fe("",!0),v("button",{type:"button",onClick:b[3]||(b[3]=V=>g.value=!g.value),class:"text-xs text-indigo-600 hover:text-indigo-700 font-medium"},K(g.value?"Свернуть":"Редактировать"),1)])]),g.value?(C(),F("div",Bg,[w(va,{modelValue:P.value,"onUpdate:modelValue":b[4]||(b[4]=V=>P.value=V),"max-columns":15,ref_key:"columnEditorRef",ref:R},null,8,["modelValue"]),m.value?(C(),F("p",kg,K(m.value),1)):fe("",!0)])):(C(),F("div",Gg,[(C(!0),F(Ne,null,je(s.value.columns,V=>(C(),F("span",{key:V.name,class:"px-3 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-xs text-slate-600"},[se(K(V.label)+" ",1),v("span",Ug,"("+K(V.type)+")",1),V.required?(C(),F("span",Hg,"*")):fe("",!0)]))),128))]))]),v("div",zg,[b[20]||(b[20]=v("label",{class:"text-sm font-medium text-slate-700 mb-3 block"},"Режим ответа",-1)),v("div",Kg,[v("label",{class:Se(["flex items-start gap-3 p-4 rounded-xl border cursor-pointer transition-all",[s.value.response_mode==="function_result"?"border-indigo-300 bg-indigo-50":"border-slate-200 hover:border-slate-300"]])},[Oe(v("input",{"onUpdate:modelValue":b[5]||(b[5]=V=>s.value.response_mode=V),type:"radio",value:"function_result",class:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 focus:ring-indigo-500"},null,512),[[Io,s.value.response_mode]]),b[18]||(b[18]=v("div",null,[v("span",{class:"font-medium text-slate-900 text-sm"},"Результат функции"),v("p",{class:"text-xs text-slate-500 mt-0.5"}," Агент получит данные и сформулирует ответ самостоятельно ")],-1))],2),v("label",{class:Se(["flex items-start gap-3 p-4 rounded-xl border cursor-pointer transition-all",[s.value.response_mode==="direct_message"?"border-indigo-300 bg-indigo-50":"border-slate-200 hover:border-slate-300"]])},[Oe(v("input",{"onUpdate:modelValue":b[6]||(b[6]=V=>s.value.response_mode=V),type:"radio",value:"direct_message",class:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 focus:ring-indigo-500"},null,512),[[Io,s.value.response_mode]]),b[19]||(b[19]=v("div",null,[v("span",{class:"font-medium text-slate-900 text-sm"},"Прямое сообщение"),v("p",{class:"text-xs text-slate-500 mt-0.5"}," Ответ отправится пользователю напрямую без обработки ")],-1))],2)])]),v("div",Wg,[b[22]||(b[22]=v("label",{class:"text-sm font-medium text-slate-700 mb-3 block"},"Тип поиска",-1)),Oe(v("select",{"onUpdate:modelValue":b[7]||(b[7]=V=>s.value.search_type=V),class:"w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all"},[...b[21]||(b[21]=[v("option",{value:"exact"},"Точный — совпадение ключевых слов",-1),v("option",{value:"fuzzy"},"Нечёткий — учитывает опечатки",-1),v("option",{value:"semantic"},"Семантический — поиск по смыслу",-1)])],512),[[Xt,s.value.search_type]])]),v("div",Xg,[v("label",Yg,[b[23]||(b[23]=v("div",null,[v("span",{class:"font-medium text-slate-900 text-sm"},"Справочник активен"),v("p",{class:"text-xs text-slate-500 mt-0.5"}," Агент сможет использовать этот справочник ")],-1)),w(x(kr),{modelValue:s.value.is_enabled,"onUpdate:modelValue":b[8]||(b[8]=V=>s.value.is_enabled=V)},null,8,["modelValue"])])]),i.value?(C(),F("p",Qg,K(i.value),1)):fe("",!0)]),w(x(ha),{"class-name":"space-y-3"},{default:T(()=>[v("button",{onClick:X,class:"w-full px-6 py-3 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",disabled:n.value||!y.value},[n.value?(C(),we(x(Mt),{key:0,class:"w-4 h-4 animate-spin"})):fe("",!0),v("span",null,K(n.value?"Сохранение...":"Сохранить"),1)],8,Jg),v("button",{onClick:b[9]||(b[9]=V=>f.value=!0),class:"w-full px-6 py-3 bg-white border border-red-200 text-red-600 rounded-xl text-sm font-medium hover:bg-red-50 transition-colors"}," Удалить справочник ")]),_:1}),w(x(Jo),{open:f.value,"onUpdate:open":b[11]||(b[11]=V=>f.value=V)},{default:T(()=>[w(x(Zo),{"class-name":"max-w-sm"},{default:T(()=>[v("div",Zg,[w(x(Kn),{class:"mb-4"},{default:T(()=>[w(x(fn),null,{default:T(()=>[...b[24]||(b[24]=[se("Удалить справочник?",-1)])]),_:1}),w(x(gn),null,{default:T(()=>{var V,ne;return[se(' Справочник "'+K((V=e.directory)==null?void 0:V.name)+'" и все его записи ('+K((ne=e.directory)==null?void 0:ne.items_count)+") будут удалены безвозвратно. ",1)]}),_:1})]),_:1}),v("div",qg,[v("button",{onClick:b[10]||(b[10]=V=>f.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-100 transition-colors"}," Отмена "),v("button",{onClick:ee,class:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-xl text-sm font-bold hover:bg-red-700 transition-colors",disabled:l.value},K(l.value?"Удаление...":"Удалить"),9,_g)])])]),_:1})]),_:1},8,["open"])]),_:1})]),_:1},8,["open"]))}}),nr=Symbol("tabs-context"),tp=$e({__name:"Tabs",props:{value:{},defaultValue:{},className:{}},emits:["update:value"],setup(e,{emit:o}){const t=e,r=o,a=bt(),s=_(t.value??t.defaultValue??"services");return Ke(()=>t.value,i=>{i&&(s.value=i)}),Sr(nr,{value:s,setValue:i=>{s.value!==i&&(s.value=i,r("update:value",i))}}),(i,u)=>(C(),F("div",xt({class:["space-y-4",e.className]},x(a)),[Ye(i.$slots,"default")],16))}}),np=$e({__name:"TabsList",props:{className:{}},setup(e){const o=bt();return(t,r)=>(C(),F("div",xt({class:["flex gap-2 flex-wrap",e.className]},x(o)),[Ye(t.$slots,"default")],16))}}),Eo=$e({__name:"TabsTrigger",props:{value:{}},setup(e){const o=e,t=bt(),r=ko(nr);if(!r)throw new Error("TabsTrigger must be used inside Tabs");const{value:a,setValue:s}=r,n=Re(()=>a.value===o.value),l=o.value;return(i,u)=>(C(),F("button",xt({type:"button",class:["px-4 py-2 rounded-xl text-sm font-bold transition-colors",n.value?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"],onClick:u[0]||(u[0]=f=>x(s)(x(l)))},x(t)),[Ye(i.$slots,"default")],16))}}),Ro=$e({__name:"TabsContent",props:{value:{}},setup(e){const o=e,t=bt(),r=ko(nr);if(!r)throw new Error("TabsContent must be used inside Tabs");const{value:a}=r,s=Re(()=>a.value===o.value);return(n,l)=>Oe((C(),F("div",zo(Bo(x(t))),[Ye(n.$slots,"default")],16)),[[Cr,s.value]])}}),op={class:"space-y-6"},rp={class:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm space-y-5"},ap={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},sp={class:"flex items-center gap-4"},lp={class:"flex items-center gap-2"},ip={class:"text-sm text-slate-500 mt-0.5"},up={class:"flex items-center gap-3"},dp=["disabled"],cp={key:0,class:"mt-6 bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-start gap-3"},fp={class:"flex-1"},gp={class:"text-sm text-yellow-700 mt-0.5"},pp={class:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm space-y-6"},vp={class:"space-y-0.5 border border-slate-100 rounded-2xl overflow-hidden"},mp={class:"p-6 border-b border-slate-100 space-y-4"},hp={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},yp={class:"flex flex-wrap items-center gap-3"},xp={class:"relative"},bp=["value"],Sp={class:"flex items-center gap-2 cursor-pointer"},wp={key:0,class:"bg-indigo-50 px-6 py-3 border-b border-indigo-100 flex items-center justify-between"},Cp={class:"flex items-center gap-4"},$p={class:"text-sm font-bold text-indigo-700"},Ep={class:"flex items-center gap-2"},Rp={class:"overflow-x-auto bg-white"},Ip=["checked"],Op=["checked","onChange"],Dp={class:"text-sm font-bold text-slate-900"},Pp={key:0,class:"text-[10px] text-slate-500 mt-0.5 line-clamp-1"},Tp={class:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium bg-slate-100 text-slate-600"},Fp={class:"text-sm font-mono text-slate-600"},Ap={class:"text-sm text-slate-600"},Mp=["onClick"],Vp=["onUpdate:modelValue","onBlur","onKeyup"],Lp={class:"p-4 border-t border-slate-100 bg-slate-50/30 flex items-center justify-between"},Np={class:"text-xs text-slate-500"},jp={class:"flex items-center gap-2"},Gp=["disabled"],Up={class:"text-xs font-bold text-slate-700"},Hp=["disabled"],Bp={class:"space-y-0.5 border border-slate-100 rounded-2xl overflow-hidden"},kp={class:"p-6 border-b border-slate-100 space-y-4"},zp={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},Kp={class:"flex flex-wrap items-center gap-3"},Wp={class:"relative"},Xp={class:"text-sm text-slate-500"},Yp={class:"overflow-x-auto bg-white"},Qp={class:"text-sm font-bold text-slate-900"},Jp={class:"text-[10px] text-slate-500 mt-0.5"},Zp={class:"text-sm text-slate-600 capitalize"},qp={class:"text-sm text-slate-600"},_p={class:"p-4 border-t border-slate-100 bg-slate-50/30 text-xs text-slate-500"},ev={class:"space-y-0.5 border border-slate-100 rounded-2xl overflow-hidden"},tv={class:"p-6 border-b border-slate-100 space-y-4"},nv={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},ov={class:"flex flex-wrap items-center gap-3"},rv={class:"relative"},av={class:"flex items-center gap-2 cursor-pointer"},sv={class:"overflow-x-auto bg-white"},lv={class:"text-sm font-bold text-slate-900"},iv={key:0,class:"text-[10px] text-slate-500 mt-0.5 line-clamp-1"},uv={class:"text-sm text-slate-600"},dv=["onClick"],cv=["onUpdate:modelValue","onBlur"],fv={class:"p-4 border-t border-slate-100 bg-slate-50/30 text-xs text-slate-500"},gv=$e({__name:"SQNSIntegrationManager",props:{agentId:{},status:{},lastSyncAt:{},warning:{}},emits:["close-warning","sync-complete"],setup(e,{emit:o}){const t=e,r=o,{syncSqns:a,fetchSqnsServicesCached:s,updateSqnsService:n,bulkUpdateSqnsServices:l,fetchSqnsCategories:i,updateSqnsCategory:u}=ni(),{success:f,error:g}=Rr(),c=_(!1),d=_(!1),p=_([]),h=_(0),m=_([]),y=_([]),S=_(!1),O=_(""),R=_(!1),P=_("services"),A=_([]),X=_(!1),ee=_(""),E=_({search:"",category:null,is_enabled:null}),b=_({limit:50,offset:0}),V=Re(()=>Math.floor(b.value.offset/b.value.limit)+1),ne=Re(()=>p.value.length>0&&p.value.every(W=>y.value.includes(W.id))),L=Re(()=>t.lastSyncAt?new Date(t.lastSyncAt).toLocaleString("ru-RU",{dateStyle:"medium",timeStyle:"short"}):"нет данных"),U=Re(()=>{const W=O.value.trim().toLowerCase();return m.value.filter($=>{var B;return R.value&&!$.is_enabled?!1:W?((B=$.name)==null?void 0:B.toLowerCase().includes(W))??!1:!0})}),k=Re(()=>{const W=ee.value.trim().toLowerCase();return W?A.value.filter($=>`${$.name??""} ${$.role??""}`.toLowerCase().includes(W)):A.value}),j=async(W=!1)=>{try{W||(d.value=!0);const $=await s(t.agentId,{...E.value,...b.value,category:E.value.category??void 0,is_enabled:E.value.is_enabled??void 0});p.value=$.services,h.value=$.total}catch($){console.error("Failed to load services:",$)}finally{W||(d.value=!1)}},q=async(W=!1)=>{try{W||(S.value=!0),m.value=await i(t.agentId)}catch($){console.error("Failed to load categories:",$)}finally{W||(S.value=!1)}},le=async()=>{try{X.value=!0,A.value=[]}catch(W){console.error("Failed to load specialists:",W)}finally{X.value=!1}},me=async()=>{try{c.value=!0;const W=await a(t.agentId);f("Синхронизация завершена",`Обновлено: ${W.services_synced} услуг, ${W.categories_synced} категорий`),r("sync-complete"),j(),q(),await le()}catch(W){g("Ошибка синхронизации",W.message)}finally{c.value=!1}},Q=async W=>{const $=!!W.is_enabled,B=!$;W.is_enabled=B,console.log("🔧 Toggle service:",{serviceId:W.id,serviceIdType:typeof W.id,serviceName:W.name,originalState:$,nextState:B,payload:{is_enabled:B}});try{await n(t.agentId,W.id,{is_enabled:B}),console.log("✅ Toggle успешно, перезагружаем список..."),await j(!0),f("Статус обновлен",`Услуга "${W.name}" ${B?"включена":"отключена"}`)}catch(Ae){W.is_enabled=$,g("Ошибка",Ae.message),console.error("❌ Toggle error:",Ae),await j()}},J=async W=>{const $=Number(W.priority);if(!Number.isFinite($)||$<0){g("Ошибка","Приоритет должен быть числом >= 0"),j();return}try{await n(t.agentId,W.id,{priority:$}),await j(!0),f("Приоритет обновлен",`Для услуги "${W.name}" установлен приоритет ${$}`)}catch(B){g("Ошибка",B.message),await j(!0)}},ge=async W=>{if(confirm(`Вы уверены? ${y.value.length} услуг будут ${W?"включены":"отключены"}`))try{await l(t.agentId,{ids:y.value,is_enabled:W}),y.value=[],await j(!0),f("Массовое обновление",`Успешно обновлено ${y.value.length} услуг`)}catch($){g("Ошибка",$.message),await j(!0)}},G=async W=>{const $=W.is_enabled,B=!$;W.is_enabled=B;try{await u(t.agentId,W.id,{is_enabled:B}),await q(!0),f("Статус категории обновлен",`Категория "${W.name}" ${B?"включена":"отключена"}`)}catch(Ae){W.is_enabled=$,g("Ошибка",Ae.message),await q(!0)}},N=async W=>{const $=Number(W.priority);if(!Number.isFinite($)||$<0){g("Ошибка","Приоритет должен быть числом >= 0"),await q(!0);return}try{await u(t.agentId,W.id,{priority:$}),await q(!0),f("Приоритет категории обновлен",`Для категории "${W.name}" установлен приоритет ${$}`)}catch(B){g("Ошибка",B.message),await q(!0)}},H=W=>{const $=y.value.indexOf(W);$===-1?y.value.push(W):y.value.splice($,1)},Y=()=>{ne.value?y.value=y.value.filter(W=>!p.value.some($=>$.id===W)):p.value.forEach(W=>{y.value.includes(W.id)||y.value.push(W.id)})},te=W=>{b.value.offset+=W*b.value.limit,j()};let De=null;return Ke(()=>E.value.search,()=>{clearTimeout(De),De=setTimeout(()=>{b.value.offset=0,j()},300)}),Ke([()=>E.value.category,()=>E.value.is_enabled],()=>{b.value.offset=0,j()}),Ke(P,W=>{W==="specialists"&&A.value.length===0&&le(),W==="categories"&&m.value.length===0&&q()}),Zn(()=>{j(),q(),le()}),(W,$)=>(C(),F("div",op,[v("div",rp,[v("div",ap,[v("div",sp,[v("div",{class:Se(["w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",[e.status==="error"?"bg-red-50 text-red-600":"bg-emerald-50 text-emerald-600"]])},[w(x(oi),{class:"w-6 h-6"})],2),v("div",null,[v("div",lp,[$[13]||($[13]=v("h3",{class:"text-lg font-bold text-slate-900"},"SQNS Интеграция",-1)),v("span",{class:Se(["text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full",[e.status==="error"?"bg-red-50 text-red-600":"bg-emerald-50 text-emerald-600"]])},K(e.status==="error"?"Ошибка":"Активна"),3)]),v("p",ip," Последняя синхронизация: "+K(L.value),1)])]),v("div",up,[v("button",{onClick:me,disabled:c.value,class:"flex items-center gap-2 px-4 py-2 bg-slate-50 text-slate-700 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-100 transition-all disabled:opacity-50"},[w(x(gi),{class:Se(["h-4 w-4",{"animate-spin":c.value}])},null,8,["class"]),se(" "+K(c.value?"Синхронизация...":"Обновить данные"),1)],8,dp)])]),e.warning?(C(),F("div",cp,[w(x(li),{class:"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5"}),v("div",fp,[$[14]||($[14]=v("p",{class:"text-sm text-yellow-800 font-medium"},"Внимание",-1)),v("p",gp,K(e.warning),1)]),v("button",{onClick:$[0]||($[0]=B=>W.$emit("close-warning")),class:"text-yellow-500 hover:text-yellow-600"},[w(x(_n),{class:"h-4 w-4"})])])):fe("",!0)]),v("div",pp,[w(x(tp),{value:P.value,"onUpdate:value":$[12]||($[12]=B=>P.value=B)},{default:T(()=>[w(x(np),{className:"bg-slate-50/70 p-1 rounded-xl"},{default:T(()=>[w(x(Eo),{value:"services"},{default:T(()=>[...$[15]||($[15]=[se("Услуги",-1)])]),_:1}),w(x(Eo),{value:"specialists"},{default:T(()=>[...$[16]||($[16]=[se("Специалисты",-1)])]),_:1}),w(x(Eo),{value:"categories"},{default:T(()=>[...$[17]||($[17]=[se("Категории",-1)])]),_:1})]),_:1}),w(x(Ro),{value:"services"},{default:T(()=>[v("div",vp,[v("div",mp,[v("div",hp,[$[20]||($[20]=v("h3",{class:"text-lg font-bold text-slate-900"},"Управление услугами",-1)),v("div",yp,[v("div",xp,[w(x(dn),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),Oe(v("input",{"onUpdate:modelValue":$[1]||($[1]=B=>E.value.search=B),type:"text",placeholder:"Поиск услуг...",class:"pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all w-64"},null,512),[[Xe,E.value.search]])]),Oe(v("select",{"onUpdate:modelValue":$[2]||($[2]=B=>E.value.category=B),class:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all"},[$[18]||($[18]=v("option",{value:null},"Все категории",-1)),(C(!0),F(Ne,null,je(m.value,B=>(C(),F("option",{key:B.id,value:B.name},K(B.name),9,bp))),128))],512),[[Xt,E.value.category]]),v("label",Sp,[Oe(v("input",{"onUpdate:modelValue":$[3]||($[3]=B=>E.value.is_enabled=B),type:"checkbox",class:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"},null,512),[[Ft,E.value.is_enabled]]),$[19]||($[19]=v("span",{class:"text-sm text-slate-600"},"Только включенные",-1))])])])]),w(hr,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform -translate-y-2 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-2 opacity-0"},{default:T(()=>[y.value.length>0?(C(),F("div",wp,[v("div",Cp,[v("span",$p,"Выбрано: "+K(y.value.length),1),$[21]||($[21]=v("div",{class:"h-4 w-px bg-indigo-200"},null,-1)),v("div",Ep,[v("button",{onClick:$[4]||($[4]=B=>ge(!0)),class:"text-xs font-bold text-indigo-600 hover:text-indigo-800 transition-colors"}," Включить выбранные "),v("button",{onClick:$[5]||($[5]=B=>ge(!1)),class:"text-xs font-bold text-red-600 hover:text-red-800 transition-colors"}," Отключить выбранные ")])]),v("button",{onClick:$[6]||($[6]=B=>y.value=[]),class:"text-xs font-medium text-slate-500 hover:text-slate-700"}," Сбросить выбор ")])):fe("",!0)]),_:1}),v("div",Rp,[w(x(Mn),null,{default:T(()=>[w(x(Vn),null,{default:T(()=>[w(x(nt),null,{default:T(()=>[w(x(Qe),{className:"w-10"},{default:T(()=>[v("input",{type:"checkbox",checked:ne.value,onChange:Y,class:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"},null,40,Ip)]),_:1}),w(x(Qe),null,{default:T(()=>[...$[22]||($[22]=[se("Услуга",-1)])]),_:1}),w(x(Qe),null,{default:T(()=>[...$[23]||($[23]=[se("Категория",-1)])]),_:1}),w(x(Qe),null,{default:T(()=>[...$[24]||($[24]=[se("Цена",-1)])]),_:1}),w(x(Qe),null,{default:T(()=>[...$[25]||($[25]=[se("Длительность",-1)])]),_:1}),w(x(Qe),null,{default:T(()=>[...$[26]||($[26]=[se("Статус",-1)])]),_:1}),w(x(Qe),{className:"w-24"},{default:T(()=>[...$[27]||($[27]=[se("Приоритет",-1)])]),_:1})]),_:1})]),_:1}),w(x(Ln),null,{default:T(()=>[d.value?(C(),F(Ne,{key:0},je(5,B=>w(x(nt),{key:`skeleton-${B}`,class:"animate-pulse"},{default:T(()=>[w(x(be),null,{default:T(()=>[...$[28]||($[28]=[v("div",{class:"h-4 w-4 bg-slate-100 rounded"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[29]||($[29]=[v("div",{class:"h-4 w-48 bg-slate-100 rounded"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[30]||($[30]=[v("div",{class:"h-4 w-24 bg-slate-100 rounded"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[31]||($[31]=[v("div",{class:"h-4 w-16 bg-slate-100 rounded"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[32]||($[32]=[v("div",{class:"h-4 w-16 bg-slate-100 rounded"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[33]||($[33]=[v("div",{class:"h-6 w-10 bg-slate-100 rounded-full"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[34]||($[34]=[v("div",{class:"h-8 w-16 bg-slate-100 rounded"},null,-1)])]),_:1})]),_:1})),64)):p.value.length===0?(C(),we(x(nt),{key:1},{default:T(()=>[w(x(be),{colspan:7,className:"p-12 text-center text-slate-400 italic"},{default:T(()=>[...$[35]||($[35]=[se(" Услуги не найдены ",-1)])]),_:1})]),_:1})):(C(!0),F(Ne,{key:2},je(p.value,B=>(C(),we(x(nt),{key:B.id,class:Se(["hover:bg-slate-50/50 transition-colors",y.value.includes(B.id)?"bg-indigo-50/20":""])},{default:T(()=>[w(x(be),null,{default:T(()=>[v("input",{type:"checkbox",checked:y.value.includes(B.id),onChange:Ae=>H(B.id),class:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"},null,40,Op)]),_:2},1024),w(x(be),null,{default:T(()=>[v("p",Dp,K(B.name),1),B.description?(C(),F("p",Pp,K(B.description),1)):fe("",!0)]),_:2},1024),w(x(be),null,{default:T(()=>[v("span",Tp,K(B.category||"Без категории"),1)]),_:2},1024),w(x(be),null,{default:T(()=>[v("span",Fp,K(B.price_range||"—")+" ₽",1)]),_:2},1024),w(x(be),null,{default:T(()=>[v("span",Ap,K(B.duration)+" мин",1)]),_:2},1024),w(x(be),null,{default:T(()=>[v("button",{onClick:Ae=>Q(B),class:Se(["relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none",[B.is_enabled?"bg-emerald-500":"bg-slate-200"]])},[v("span",{"aria-hidden":"true",class:Se(["pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow transition duration-200 ease-in-out",[B.is_enabled?"translate-x-4":"translate-x-0"]])},null,2)],10,Mp)]),_:2},1024),w(x(be),null,{default:T(()=>[Oe(v("input",{type:"number","onUpdate:modelValue":Ae=>B.priority=Ae,onBlur:Ae=>J(B),onKeyup:zn(Ae=>J(B),["enter"]),class:"w-16 px-2 py-1 bg-slate-50 border border-slate-200 rounded text-xs font-mono focus:ring-1 focus:ring-indigo-500 focus:bg-white transition-all",min:"0",max:"100"},null,40,Vp),[[Xe,B.priority,void 0,{number:!0}]])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),v("div",Lp,[v("p",Np," Показано "+K(b.value.offset+1)+"-"+K(Math.min(b.value.offset+b.value.limit,h.value))+" из "+K(h.value)+" услуг ",1),v("div",jp,[v("button",{onClick:$[7]||($[7]=B=>te(-1)),disabled:b.value.offset===0,class:"p-2 rounded-lg hover:bg-white hover:shadow-sm disabled:opacity-30 transition-all"},[w(x(Lr),{class:"h-4 w-4"})],8,Gp),v("span",Up,"Страница "+K(V.value),1),v("button",{onClick:$[8]||($[8]=B=>te(1)),disabled:b.value.offset+b.value.limit>=h.value,class:"p-2 rounded-lg hover:bg-white hover:shadow-sm disabled:opacity-30 transition-all"},[w(x(Nr),{class:"h-4 w-4"})],8,Hp)])])])]),_:1}),w(x(Ro),{value:"specialists"},{default:T(()=>[v("div",Bp,[v("div",kp,[v("div",zp,[$[36]||($[36]=v("h3",{class:"text-lg font-bold text-slate-900"},"Специалисты",-1)),v("div",Kp,[v("div",Wp,[w(x(dn),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),Oe(v("input",{"onUpdate:modelValue":$[9]||($[9]=B=>ee.value=B),type:"text",placeholder:"Поиск специалистов...",class:"pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all w-64"},null,512),[[Xe,ee.value]])]),v("span",Xp,"Всего: "+K(A.value.length),1)])])]),v("div",Yp,[w(x(Mn),null,{default:T(()=>[w(x(Vn),null,{default:T(()=>[w(x(nt),null,{default:T(()=>[w(x(Qe),null,{default:T(()=>[...$[37]||($[37]=[se("Имя",-1)])]),_:1}),w(x(Qe),null,{default:T(()=>[...$[38]||($[38]=[se("Роль",-1)])]),_:1}),w(x(Qe),null,{default:T(()=>[...$[39]||($[39]=[se("Услуг",-1)])]),_:1}),w(x(Qe),null,{default:T(()=>[...$[40]||($[40]=[se("Статус",-1)])]),_:1})]),_:1})]),_:1}),w(x(Ln),null,{default:T(()=>[X.value?(C(),F(Ne,{key:0},je(5,B=>w(x(nt),{key:`spec-skel-${B}`,class:"animate-pulse"},{default:T(()=>[w(x(be),null,{default:T(()=>[...$[41]||($[41]=[v("div",{class:"h-4 w-24 bg-slate-100 rounded"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[42]||($[42]=[v("div",{class:"h-4 w-32 bg-slate-100 rounded"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[43]||($[43]=[v("div",{class:"h-4 w-16 bg-slate-100 rounded"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[44]||($[44]=[v("div",{class:"h-4 w-12 bg-slate-100 rounded"},null,-1)])]),_:1})]),_:1})),64)):k.value.length===0?(C(),we(x(nt),{key:1},{default:T(()=>[w(x(be),{colspan:4,className:"p-12 text-center text-slate-400 italic"},{default:T(()=>[...$[45]||($[45]=[se(" Специалисты не найдены ",-1)])]),_:1})]),_:1})):(C(!0),F(Ne,{key:2},je(k.value,B=>(C(),we(x(nt),{key:B.id,class:Se(["hover:bg-slate-50/50 transition-colors",B.is_active?"bg-emerald-50/30":""])},{default:T(()=>[w(x(be),null,{default:T(()=>[v("p",Qp,K(B.name),1),v("p",Jp,K(B.email||B.phone||""),1)]),_:2},1024),w(x(be),null,{default:T(()=>[v("span",Zp,K(B.role||"Специалист"),1)]),_:2},1024),w(x(be),null,{default:T(()=>[v("span",qp,K(B.services_count??B.linked_services??"-"),1)]),_:2},1024),w(x(be),null,{default:T(()=>[v("span",{class:Se(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-semibold",B.is_active?"bg-emerald-50 text-emerald-600":"bg-slate-100 text-slate-500"])},K(B.is_active?"Активен":"Отключён"),3)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),v("div",_p,K(k.value.length)+" из "+K(A.value.length)+" специалистов отображаются ",1)])]),_:1}),w(x(Ro),{value:"categories"},{default:T(()=>[v("div",ev,[v("div",tv,[v("div",nv,[$[47]||($[47]=v("h3",{class:"text-lg font-bold text-slate-900"},"Категории",-1)),v("div",ov,[v("div",rv,[w(x(dn),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),Oe(v("input",{"onUpdate:modelValue":$[10]||($[10]=B=>O.value=B),type:"text",placeholder:"Поиск категории...",class:"pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all w-64"},null,512),[[Xe,O.value]])]),v("label",av,[Oe(v("input",{"onUpdate:modelValue":$[11]||($[11]=B=>R.value=B),type:"checkbox",class:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"},null,512),[[Ft,R.value]]),$[46]||($[46]=v("span",{class:"text-sm text-slate-600"},"Только включенные",-1))])])])]),v("div",sv,[w(x(Mn),null,{default:T(()=>[w(x(Vn),null,{default:T(()=>[w(x(nt),null,{default:T(()=>[w(x(Qe),null,{default:T(()=>[...$[48]||($[48]=[se("Категория",-1)])]),_:1}),w(x(Qe),null,{default:T(()=>[...$[49]||($[49]=[se("Услуг",-1)])]),_:1}),w(x(Qe),null,{default:T(()=>[...$[50]||($[50]=[se("Статус",-1)])]),_:1}),w(x(Qe),null,{default:T(()=>[...$[51]||($[51]=[se("Приоритет",-1)])]),_:1})]),_:1})]),_:1}),w(x(Ln),null,{default:T(()=>[S.value?(C(),F(Ne,{key:0},je(5,B=>w(x(nt),{key:`cat-skel-${B}`,class:"animate-pulse"},{default:T(()=>[w(x(be),null,{default:T(()=>[...$[52]||($[52]=[v("div",{class:"h-4 w-32 bg-slate-100 rounded"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[53]||($[53]=[v("div",{class:"h-4 w-16 bg-slate-100 rounded"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[54]||($[54]=[v("div",{class:"h-4 w-12 bg-slate-100 rounded"},null,-1)])]),_:1}),w(x(be),null,{default:T(()=>[...$[55]||($[55]=[v("div",{class:"h-4 w-10 bg-slate-100 rounded"},null,-1)])]),_:1})]),_:1})),64)):U.value.length===0?(C(),we(x(nt),{key:1},{default:T(()=>[w(x(be),{colspan:4,className:"p-12 text-center text-slate-400 italic"},{default:T(()=>[...$[56]||($[56]=[se(" Категории не найдены ",-1)])]),_:1})]),_:1})):(C(!0),F(Ne,{key:2},je(U.value,B=>(C(),we(x(nt),{key:B.id,class:"hover:bg-slate-50/50 transition-colors"},{default:T(()=>[w(x(be),null,{default:T(()=>[v("p",lv,K(B.name),1),B.description?(C(),F("p",iv,K(B.description),1)):fe("",!0)]),_:2},1024),w(x(be),null,{default:T(()=>[v("span",uv,K(B.services_count??"—"),1)]),_:2},1024),w(x(be),null,{default:T(()=>[v("button",{onClick:Ae=>G(B),class:Se(["relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none",[B.is_enabled?"bg-emerald-500":"bg-slate-200"]])},[v("span",{"aria-hidden":"true",class:Se(["pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow transition duration-200 ease-in-out",[B.is_enabled?"translate-x-4":"translate-x-0"]])},null,2)],10,dv)]),_:2},1024),w(x(be),null,{default:T(()=>[Oe(v("input",{type:"number","onUpdate:modelValue":Ae=>B.priority=Ae,onBlur:Ae=>N(B),class:"w-16 px-2 py-1 bg-slate-50 border border-slate-200 rounded text-xs font-mono focus:ring-1 focus:ring-indigo-500 focus:bg-white transition-all",min:"0",max:"100"},null,40,cv),[[Xe,B.priority,void 0,{number:!0}]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),v("div",fv,K(U.value.length)+" из "+K(m.value.length)+" категорий отображаются ",1)])]),_:1})]),_:1},8,["value"])])]))}}),pv={class:"space-y-6"},vv={key:0},mv={key:0},hv={key:1},yv={key:1},xv={key:0,class:"bg-background rounded-md border border-border p-6 sm:p-8 text-center"},bv={class:"max-w-md mx-auto"},Sv={class:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"},wv={key:1},Cv=$e({__name:"AgentKnowledgePanel",setup(e){const o=Bl(),{agent:t,directoriesComposable:r,isSqnsEnabled:a,sqnsToolsList:s,sqnsStatus:n}=Ul(o),{success:l,error:i}=Rr(),u=_("directories"),f=_(!1),g=_(!1),c=_(!1),d=_(!1),p=_(null),h=_(null),m=Re(()=>{var Q;return((Q=r.value)==null?void 0:Q.directories)??[]}),y=Re(()=>{var Q;return((Q=r.value)==null?void 0:Q.isLoading)??!1}),S=Re(()=>{var Q;return((Q=r.value)==null?void 0:Q.error)??null}),O=Re(()=>{var Q;return((Q=r.value)==null?void 0:Q.items)??[]}),R=Re(()=>{var Q;return((Q=r.value)==null?void 0:Q.isLoadingItems)??!1}),P=Re(()=>{var Q;return((Q=r.value)==null?void 0:Q.currentDirectory)??null}),A=Re(()=>[{id:"directories",label:"Справочники",count:m.value.length},{id:"sqns",label:"SQNS",count:a.value?s.value.length:void 0}]),X=async()=>{await o.ensureDirectoriesLoaded()};Zn(()=>{u.value==="directories"?o.ensureDirectoriesLoaded():(o.ensureSqnsStatusLoaded(),o.ensureSqnsHints())}),Ke(t,async Q=>{Q&&(u.value==="directories"?await o.ensureDirectoriesLoaded():(await o.ensureSqnsStatusLoaded(),await o.ensureSqnsHints()))},{immediate:!0}),Ke(u,async Q=>{Q==="directories"?await o.ensureDirectoriesLoaded():(await o.ensureSqnsStatusLoaded(),await o.ensureSqnsHints())});const ee=async Q=>{if(r.value)try{await r.value.createDirectory(Q),f.value=!1,l("Справочник создан")}catch(J){i(J.message||"Не удалось создать справочник")}},E=Q=>{r.value&&r.value.setCurrentDirectory(Q)},b=()=>{r.value&&r.value.setCurrentDirectory(null)},V=async(Q,J)=>{if(!(!r.value||!P.value))try{J?(await r.value.updateItem(P.value.id,J,Q),l("Запись обновлена")):(await r.value.createItem(P.value.id,Q),l("Запись добавлена")),g.value=!1,p.value=null}catch(ge){i(ge.message||"Не удалось сохранить запись")}},ne=async Q=>{if(!(!r.value||!P.value))try{await r.value.createItem(P.value.id,Q),l("Запись добавлена")}catch(J){i(J.message||"Не удалось создать запись")}},L=async(Q,J)=>{if(!(!r.value||!P.value))try{await r.value.updateItem(P.value.id,Q,J)}catch(ge){i(ge.message||"Не удалось обновить запись")}},U=async Q=>{if(!(!r.value||!P.value))try{await r.value.deleteItem(P.value.id,Q),l("Запись удалена")}catch(J){i(J.message||"Не удалось удалить запись")}},k=async Q=>{if(!(!r.value||!P.value))try{await r.value.deleteItems(P.value.id,Q),l("Записи удалены")}catch(J){i(J.message||"Не удалось удалить записи")}},j=async(Q,J,ge)=>{if(!(!r.value||!P.value))try{const G=await r.value.importCsv(P.value.id,Q,J,ge);c.value=!1,l(`Импортировано ${G.created} записей`)}catch(G){i(G.message||"Не удалось импортировать файл")}},q=async()=>{if(!(!r.value||!P.value))try{await r.value.exportCsv(P.value.id)}catch(Q){i(Q.message||"Не удалось экспортировать справочник")}},le=async Q=>{var J,ge;if(!(!r.value||!Q.id))try{await r.value.updateDirectory(Q.id,Q),d.value=!1,l("Настройки сохранены")}catch(G){(J=h.value)==null||J.setError(G.message||"Не удалось сохранить настройки"),i(G.message||"Не удалось сохранить настройки")}finally{(ge=h.value)==null||ge.setSaving(!1)}},me=async Q=>{var J,ge;if(r.value)try{await r.value.deleteDirectory(Q),d.value=!1,l("Справочник удалён")}catch(G){(J=h.value)==null||J.setError(G.message||"Не удалось удалить справочник"),i(G.message||"Не удалось удалить справочник")}finally{(ge=h.value)==null||ge.setDeleting(!1)}};return(Q,J)=>{var ge,G,N,H,Y;return C(),F("div",pv,[w(yi,{modelValue:u.value,"onUpdate:modelValue":J[0]||(J[0]=te=>u.value=te),tabs:A.value},null,8,["modelValue","tabs"]),u.value==="directories"?(C(),F("div",vv,[P.value?(C(),F("div",mv,[w(tc,{directory:P.value,items:O.value,loading:R.value,onBack:b,onSettings:J[1]||(J[1]=te=>d.value=!0),onAdd:J[2]||(J[2]=te=>{g.value=!0,p.value=null}),onCreate:ne,onUpdate:L,onEdit:J[3]||(J[3]=te=>{p.value=te,g.value=!0}),onDelete:U,onDeleteSelected:k,onImport:J[4]||(J[4]=te=>c.value=!0),onExport:q},null,8,["directory","items","loading"])])):(C(),F("div",hv,[w(Hi,{directories:m.value,loading:y.value,error:S.value,onCreate:J[5]||(J[5]=te=>f.value=!0),onSelect:E,onRetry:X},null,8,["directories","loading","error"])]))])):u.value==="sqns"?(C(),F("div",yv,[x(a)?(C(),F("div",wv,[x(t)?(C(),we(gv,{key:0,"agent-id":x(t).id,status:((ge=x(n))==null?void 0:ge.sqnsStatus)==="error"?"error":"active","last-sync-at":(G=x(n))==null?void 0:G.sqnsLastSyncAt,warning:(N=x(n))==null?void 0:N.sqnsWarning,onSyncComplete:x(o).loadSqnsStatusForAgent},null,8,["agent-id","status","last-sync-at","warning","onSyncComplete"])):fe("",!0)])):(C(),F("div",xv,[v("div",bv,[v("div",Sv,[w(x(ri),{class:"h-8 w-8 text-slate-400"})]),J[11]||(J[11]=v("h3",{class:"text-lg font-bold text-slate-900"},"База знаний SQNS",-1)),J[12]||(J[12]=v("p",{class:"text-slate-500 mt-2 mb-6"}," Подключите SQNS интеграцию для управления услугами и категориями. ",-1)),v("button",{onClick:J[6]||(J[6]=te=>{var De;return x(Hl)(`/agents/${(De=x(t))==null?void 0:De.id}/connections`)}),class:"px-6 py-3 bg-indigo-600 text-white rounded-md text-sm font-bold hover:bg-indigo-700 transition-colors"}," Перейти к подключениям ")])]))])):fe("",!0),w(Gf,{"is-open":f.value,"existing-tool-names":((H=x(r))==null?void 0:H.existingToolNames)??[],onClose:J[7]||(J[7]=te=>f.value=!1),onSubmit:ee},null,8,["is-open","existing-tool-names"]),P.value?(C(),we(_f,{key:2,"is-open":g.value,"directory-name":P.value.name,columns:P.value.columns,"edit-item":p.value,onClose:J[8]||(J[8]=te=>{g.value=!1,p.value=null}),onSubmit:V},null,8,["is-open","directory-name","columns","edit-item"])):fe("",!0),P.value?(C(),we(Pg,{key:3,"is-open":c.value,"directory-name":P.value.name,columns:P.value.columns,onClose:J[9]||(J[9]=te=>c.value=!1),onImport:j},null,8,["is-open","directory-name","columns"])):fe("",!0),w(ep,{ref_key:"directorySettingsSheetRef",ref:h,"is-open":d.value,directory:P.value,"existing-tool-names":((Y=x(r))==null?void 0:Y.existingToolNames)??[],onClose:J[10]||(J[10]=te=>d.value=!1),onSave:le,onDelete:me},null,8,["is-open","directory","existing-tool-names"])])}}}),Xv=$e({__name:"knowledge",setup(e){return(o,t)=>(C(),we(xa,{title:"База знаний","hide-actions":!0},{default:T(()=>[w(Cv)]),_:1}))}});export{Xv as default};
