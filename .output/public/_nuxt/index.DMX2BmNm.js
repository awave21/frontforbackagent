import{n as h,i as w,a as L,t as b,b as A,c as k,d as C}from"./index.C5R80SqK.js";import{f as I,b7 as O,B as P,l as S}from"./entry.CBkKRCnV.js";function a(o){var s;const n=A(o);return(s=n==null?void 0:n.$el)!=null?s:n}const g=L?window:void 0;function y(...o){let s,n,r,d;if(typeof o[0]=="string"||Array.isArray(o[0])?([n,r,d]=o,s=g):[s,n,r,d]=o,!s)return h;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const f=[],m=()=>{f.forEach(c=>c()),f.length=0},l=(c,u,e,t)=>(c.addEventListener(u,e,t),()=>c.removeEventListener(u,e,t)),p=I(()=>[a(s),A(d)],([c,u])=>{if(m(),!c)return;const e=C(u)?{...u}:u;f.push(...n.flatMap(t=>r.map(i=>l(c,t,i,e))))},{immediate:!0,flush:"post"}),E=()=>{p(),m()};return b(E),E}let v=!1;function _(o,s,n={}){const{window:r=g,ignore:d=[],capture:f=!0,detectIframe:m=!1}=n;if(!r)return h;w&&!v&&(v=!0,Array.from(r.document.body.children).forEach(e=>e.addEventListener("click",h)),r.document.documentElement.addEventListener("click",h));let l=!0;const p=e=>d.some(t=>{if(typeof t=="string")return Array.from(r.document.querySelectorAll(t)).some(i=>i===e.target||e.composedPath().includes(i));{const i=a(t);return i&&(e.target===i||e.composedPath().includes(i))}}),c=[y(r,"click",e=>{const t=a(o);if(!(!t||t===e.target||e.composedPath().includes(t))){if(e.detail===0&&(l=!p(e)),!l){l=!0;return}s(e)}},{passive:!0,capture:f}),y(r,"pointerdown",e=>{const t=a(o);l=!p(e)&&!!(t&&!e.composedPath().includes(t))},{passive:!0}),m&&y(r,"blur",e=>{setTimeout(()=>{var t;const i=a(o);((t=r.document.activeElement)==null?void 0:t.tagName)==="IFRAME"&&!(i!=null&&i.contains(r.document.activeElement))&&s(e)},0)})].filter(Boolean);return()=>c.forEach(e=>e())}function x(o){const s=S(),n=k(()=>null,()=>o?a(o):s.proxy.$el);return O(n.trigger),P(n.trigger),n}export{_ as o,x as u};
