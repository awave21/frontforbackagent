import{M,_ as $}from"./DashboardSidebar.vue.BCFNDxq8.js";import{_ as S,L as T}from"./AuthModal.vue.Bphu0Ye4.js";import{n as j,c as m,a as e,b as l,u as n,x as p,w as N,T as q,p as w,d as y,J as z,q as B,s as b,v as h,L as P,r as c,D,G,o as i,_ as L}from"./entry.DvavCQ8-.js";import{u as U}from"./useAgents.CkkebVYB.js";import{a as E}from"./useAuth.CA-oUVg2.js";import{A as I}from"./alert-circle.40sqdf6a.js";import{P as H}from"./plus.FDCCvd0I.js";import{S as J}from"./sparkles.C51ejg2H.js";import"./nuxt-link.De5AyltM.js";const O={class:"min-h-screen bg-slate-50"},R={class:"lg:hidden bg-white border-b border-slate-200 px-4 py-3"},F={class:"flex items-center justify-between"},K={class:"flex"},Q={key:0,class:"lg:hidden fixed inset-0 z-50 w-full"},W={class:"flex-1 bg-slate-50 p-4 sm:p-6 lg:p-10"},X={class:"max-w-4xl mx-auto"},Y={key:0,class:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Z={class:"flex items-center justify-between"},ee={class:"flex items-center"},te={class:"flex items-center justify-between mb-8"},se={class:"flex items-center gap-3"},oe=["disabled"],le={class:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},ne={class:"pt-4 flex items-center justify-between border-t border-slate-100"},ie={type:"button",class:"flex items-center gap-2 px-5 py-2.5 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-medium hover:bg-indigo-100 transition-colors"},re=j({__name:"new",setup(de){const{isAuthenticated:_}=E(),f=G(),{createAgent:k}=U(),a=c(!1),r=c(!1),d=c(!1),s=c({name:"",model:"openai:gpt-4o-mini",system_prompt:""}),x=D(()=>s.value.name.trim()!==""&&s.value.model!==""&&s.value.system_prompt.trim()!==""),v=async()=>{if(x.value)try{d.value=!0;const u=await k({...s.value,status:"draft",version:1,llm_params:{temperature:.7,max_tokens:1e3}});f.push(`/agents/${u.id}`)}catch(u){console.error("Error creating agent:",u)}finally{d.value=!1}},C=()=>{f.push("/agents")},A=()=>{r.value=!1};return(u,t)=>{const g=$,V=S;return i(),m("div",O,[e("div",R,[e("div",F,[t[8]||(t[8]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-bold text-xs"},"М")]),e("span",{class:"text-slate-900 font-bold"},"МедиАИ")],-1)),e("button",{onClick:t[0]||(t[0]=o=>a.value=!a.value),class:"p-2 rounded-lg text-slate-600 hover:bg-slate-100"},[l(n(M),{class:"h-5 w-5"})])])]),e("div",K,[l(g,{class:"hidden lg:block"}),a.value?(i(),m("div",{key:0,class:"lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50",onClick:t[1]||(t[1]=o=>a.value=!1)})):p("",!0),l(q,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.34, 1.56, 0.64, 1)","enter-from-class":"-translate-x-full opacity-0 scale-95","enter-to-class":"translate-x-0 opacity-100 scale-100","leave-active-class":"transition-all duration-400 ease-in","leave-from-class":"translate-x-0 opacity-100 scale-100","leave-to-class":"-translate-x-full opacity-0 scale-95"},{default:N(()=>[a.value?(i(),m("div",Q,[l(g,{onClose:t[2]||(t[2]=o=>a.value=!1)})])):p("",!0)]),_:1}),e("main",W,[e("div",X,[n(_)?p("",!0):(i(),m("div",Y,[e("div",Z,[e("div",ee,[l(n(I),{class:"h-5 w-5 text-yellow-400 mr-3"}),t[9]||(t[9]=e("div",null,[e("h3",{class:"text-sm font-medium text-yellow-800"}," Требуется аутентификация "),e("p",{class:"text-sm text-yellow-700 mt-1"}," Войдите в систему для создания агента ")],-1))]),e("button",{onClick:t[3]||(t[3]=o=>r.value=!0),class:"px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700 transition-colors"}," Войти ")])])),e("div",te,[t[11]||(t[11]=e("div",null,[e("h1",{class:"text-3xl font-bold text-slate-900"},"Создать нового агента"),e("p",{class:"text-slate-500 mt-1"},"Настройте базовые параметры вашего будущего AI-помощника")],-1)),e("div",se,[e("button",{onClick:C,class:"px-6 py-2.5 text-slate-600 font-medium hover:text-slate-900 transition-colors"}," Отменить "),e("button",{onClick:v,disabled:d.value||!x.value,class:"px-8 py-2.5 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 shadow-sm shadow-indigo-200"},[d.value?(i(),w(n(T),{key:0,class:"h-4 w-4 animate-spin"})):(i(),w(n(H),{key:1,class:"h-4 w-4"})),t[10]||(t[10]=y(" Создать ",-1))],8,oe)])]),t[18]||(t[18]=z('<div class="flex items-center gap-1 border-b border-slate-200 mb-8 overflow-x-auto no-scrollbar" data-v-e27b85fa><button class="px-5 py-3 text-sm font-medium transition-all relative whitespace-nowrap text-indigo-600 bg-indigo-50 rounded-t-lg" data-v-e27b85fa> Основная настройка <div class="absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600" data-v-e27b85fa></div></button><button disabled class="px-5 py-3 text-sm font-medium text-slate-300 cursor-not-allowed whitespace-nowrap" data-v-e27b85fa> Подключения </button><button disabled class="px-5 py-3 text-sm font-medium text-slate-300 cursor-not-allowed whitespace-nowrap" data-v-e27b85fa> База знаний </button><button disabled class="px-5 py-3 text-sm font-medium text-slate-300 cursor-not-allowed whitespace-nowrap" data-v-e27b85fa> Модель </button></div>',1)),e("div",le,[e("form",{onSubmit:B(v,["prevent"]),class:"space-y-8"},[e("div",ae,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-bold text-slate-900 mb-2"},"Название агента *",-1)),b(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.value.name=o),type:"text",required:"",placeholder:"Например: Агент поддержки",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"},null,512),[[h,s.value.name]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-bold text-slate-900 mb-2"},"Модель ИИ *",-1)),b(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.value.model=o),required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"},[...t[13]||(t[13]=[e("option",{value:""},"Выберите модель",-1),e("option",{value:"openai:gpt-4o-mini"},"GPT-4o Mini",-1),e("option",{value:"openai:gpt-4o"},"GPT-4o",-1),e("option",{value:"anthropic:claude-3-haiku"},"Claude 3 Haiku",-1)])],512),[[P,s.value.model]])])]),e("div",null,[t[15]||(t[15]=e("div",{class:"mb-4"},[e("h3",{class:"text-sm font-bold text-slate-900"},"Системный промпт *"),e("p",{class:"text-xs text-slate-500 mt-1"},"Опишите роль и поведение агента")],-1)),b(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.value.system_prompt=o),required:"",rows:"10",class:"w-full px-5 py-4 text-slate-700 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 focus:bg-white transition-all resize-none leading-relaxed",placeholder:"Вы — помощник для..."},null,512),[[h,s.value.system_prompt]])]),e("div",ne,[e("button",ie,[l(n(J),{class:"h-4 w-4"}),t[16]||(t[16]=y(" Помочь с промптом ",-1))]),t[17]||(t[17]=e("p",{class:"text-xs text-slate-400"},"* Обязательные поля для заполнения",-1))])],32)])])])]),l(V,{"is-open":r.value,onClose:t[7]||(t[7]=o=>r.value=!1),onAuthenticated:A},null,8,["is-open"])])}}}),we=L(re,[["__scopeId","data-v-e27b85fa"]]);export{we as default};
