import{_ as C}from"./AgentPageShell.vue.CAAykDSk.js";import{m as y,y as V,B as S,o,c as l,a as s,u as e,b as n,d as i,p,v as x,O as B,t as u,F as f,C as g,x as v,L,n as D,w as E}from"./entry.CBkKRCnV.js";import{u as N}from"./usePermissions.DJmIznYF.js";import{u as U}from"./useAgentEditorStore.CBOc6_qs.js";import{u as j}from"./useActiveModels.CLW4gmKO.js";import{L as T}from"./loader-2.CrTaI3Us.js";import{C as $}from"./check.B0AA6R8j.js";import{C as F}from"./cpu.DTGJxxT_.js";import{S as P}from"./settings.bgzCNz6L.js";import{D as G}from"./database.rUDIiFFC.js";import"./useLayoutState.B8IzXTUd.js";import"./useAuth.CHSuA4zA.js";import"./useApiFetch.B9YviUBz.js";import"./authSessionManager.BK0upO_P.js";import"./AuthModal.vue.DxMXnGuG.js";import"./eye.DUCx08TH.js";import"./alert-circle.DcUsP5Lj.js";import"./useAgents.C6xV-JRH.js";import"./index.C5R80SqK.js";const O={class:"bg-background rounded-md border border-border p-4 sm:p-5 space-y-6"},R={class:"flex items-center justify-end mb-4"},q={key:0,class:"flex items-center gap-1.5 text-xs text-blue-600"},z={key:1,class:"flex items-center gap-1.5 text-xs text-green-600"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},I={class:"block text-sm font-bold text-slate-900 mb-3 flex items-center gap-2"},J=["disabled"],K={key:0,value:"",disabled:""},Q={key:1,value:"",disabled:""},W={key:2,value:"",disabled:""},X=["value"],Y=["label"],Z=["value"],ee={key:0,class:"mt-2 text-xs text-rose-600"},te={class:"block text-sm font-bold text-slate-900 mb-3 flex items-center justify-between"},se={class:"flex items-center gap-2"},oe={class:"text-indigo-600 font-mono"},ae=["disabled"],le={class:"pt-6 border-t border-slate-100"},re={class:"block text-sm font-bold text-slate-900 mb-3 flex items-center gap-2"},ne={class:"flex items-center gap-4"},ie=["disabled"],de=y({__name:"AgentModelPanel",setup(h){const d=U(),{form:a}=V(d),{canEditAgents:c}=N(),{modelGroups:m,isLoading:k,error:b,fetchActiveModels:w,hasModelValue:M}=j(),A=L(()=>!!a.value.model&&!M(a.value.model));return S(async()=>{await w()}),(me,t)=>(o(),l("div",O,[s("div",R,[e(d).isAutoSaving?(o(),l("span",q,[n(e(T),{class:"h-3 w-3 animate-spin"}),t[3]||(t[3]=i(" Сохранение... ",-1))])):e(d).lastAutoSavedAt?(o(),l("span",z,[n(e($),{class:"h-3 w-3"}),t[4]||(t[4]=i(" Сохранено ",-1))])):p("",!0)]),s("div",H,[s("div",null,[s("label",I,[n(e(F),{class:"w-4 h-4 text-slate-400"}),t[5]||(t[5]=i(" Модель ИИ ",-1))]),x(s("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>e(a).model=r),disabled:!e(c),class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-md focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all appearance-none cursor-pointer disabled:opacity-60 disabled:cursor-not-allowed"},[e(k)&&!e(m).length?(o(),l("option",K," Загрузка моделей... ")):e(b)&&!e(m).length?(o(),l("option",Q," Не удалось загрузить модели ")):e(m).length?p("",!0):(o(),l("option",W," Нет доступных моделей ")),A.value?(o(),l("option",{key:3,value:e(a).model},u(`${e(a).model} (неактивна)`),9,X)):p("",!0),(o(!0),l(f,null,g(e(m),r=>(o(),l("optgroup",{key:r.group,label:r.group},[(o(!0),l(f,null,g(r.options,_=>(o(),l("option",{key:_.value,value:_.value},u(_.label),9,Z))),128))],8,Y))),128))],8,J),[[B,e(a).model]]),e(b)?(o(),l("p",ee,u(e(b)),1)):p("",!0)]),s("div",null,[s("label",te,[s("span",se,[n(e(P),{class:"w-4 h-4 text-slate-400"}),t[6]||(t[6]=i(" Температура ",-1))]),s("span",oe,u(e(a).llm_params.temperature),1)]),x(s("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>e(a).llm_params.temperature=r),disabled:!e(c),type:"range",min:"0",max:"2",step:"0.1",class:"w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer accent-indigo-600 disabled:opacity-60 disabled:cursor-not-allowed"},null,8,ae),[[v,e(a).llm_params.temperature,void 0,{number:!0}]]),t[7]||(t[7]=s("div",{class:"flex justify-between text-[10px] text-slate-400 mt-2 uppercase font-medium"},[s("span",null,"Точный"),s("span",null,"Креативный")],-1))])]),s("div",le,[s("label",re,[n(e(G),{class:"w-4 h-4 text-slate-400"}),t[8]||(t[8]=i(" Максимальное количество токенов ",-1))]),s("div",ne,[x(s("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>e(a).llm_params.max_tokens=r),disabled:!e(c),type:"number",min:"1",max:"4000",class:"w-32 px-4 py-3 bg-slate-50 border border-slate-200 rounded-md focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all text-sm font-mono disabled:opacity-60 disabled:cursor-not-allowed"},null,8,ie),[[v,e(a).llm_params.max_tokens,void 0,{number:!0}]]),t[9]||(t[9]=s("p",{class:"text-xs text-slate-500 italic"}," Определяет максимальную длину ответа агента. ",-1))])])]))}}),Le=y({__name:"model",setup(h){return(d,a)=>(o(),D(C,{title:"Модель","hide-actions":!0},{default:E(()=>[n(de)]),_:1}))}});export{Le as default};
