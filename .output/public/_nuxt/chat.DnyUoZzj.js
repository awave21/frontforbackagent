import{_ as z}from"./AgentPageShell.vue.DS72lrn9.js";import{m as L,y as D,f as E,B as K,o as s,c as o,a as t,u as n,t as l,p as r,b as h,F as M,C as T,A as S,d as _,D as R,s as A,v as $,x as F,E as P,G as q,k as B,H as G,_ as J,n as O,w as U}from"./entry.C3vEAWma.js";import{M as Q}from"./index.BMSQkwth.js";import{u as W}from"./useAgentEditorStore.q8CjWIk4.js";import{M as X}from"./message-square.D60Lf0ub.js";import{S as Y}from"./send.DgcJ8sw0.js";import"./useAuth.aSDdTJTL.js";import"./usePermissions.kc3596Ar.js";import"./AuthModal.vue.TJWQo2PL.js";import"./eye.DZxrhfv6.js";import"./loader-2.C7JGwsi9.js";import"./alert-circle.CL9BFDlJ.js";import"./check.CwYc9Emf.js";import"./useAgents.lyQ9pZ6U.js";import"./index.B9hQrX5B.js";const Z={class:"flex flex-col h-[600px] bg-background rounded-md border border-border overflow-hidden"},ee={class:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between"},te={class:"flex flex-col gap-1"},se={key:0,class:"text-[10px] text-slate-500 uppercase tracking-widest"},oe={key:0,class:"flex flex-col items-center justify-center h-full text-center space-y-4"},ae={class:"w-16 h-16 bg-indigo-50 rounded-full flex items-center justify-center"},ne={key:0,class:"whitespace-pre-wrap"},le=["innerHTML"],re={class:"flex flex-col gap-1.5 mt-1.5"},ie={class:"flex items-center gap-2"},de={class:"text-[10px] text-slate-400 px-1 uppercase font-semibold tracking-wider"},ce={key:0,class:"flex flex-wrap gap-1.5 text-[10px]"},ue={key:0,class:"text-slate-500 px-2 py-0.5 bg-slate-50 rounded-md border border-slate-200"},pe={class:"font-mono font-semibold"},xe={key:1,class:"text-slate-500 px-2 py-0.5 bg-slate-50 rounded-md border border-slate-200"},me={class:"font-mono font-semibold"},fe={key:2,class:"text-slate-500 px-2 py-0.5 bg-slate-50 rounded-md border border-slate-200"},_e={class:"font-mono font-semibold"},he={key:1,class:"flex flex-wrap gap-1.5"},be=["title"],ve={key:1,class:"flex flex-col items-start"},ge={class:"p-4 bg-white border-t border-slate-100"},ye=["onKeydown"],we=["disabled"],ke={class:"text-[10px] text-center text-slate-400 mt-3 uppercase font-medium tracking-widest"},Ce=L({__name:"AgentChatPanel",setup(N){const b=new Q({html:!0,linkify:!0,typographer:!0}),d=W(),{messages:v,userInput:c,isTyping:p,chatContextLabel:g,agent:x}=D(d),u=B(null),i=B(null),V=()=>{i.value&&(i.value.style.height="auto",i.value.style.height=i.value.scrollHeight+"px")},m=async()=>{await G(),u.value&&(u.value.scrollTop=u.value.scrollHeight)},y=async()=>{if(!c.value.trim()||p.value)return;await d.sendMessage()&&i.value&&(i.value.style.height="auto"),await m()},H=async()=>{await d.clearChat(),await m()};return E(x,f=>{f&&(d.ensureChatLoaded(),m())},{immediate:!0}),K(()=>{d.ensureChatLoaded()}),(f,a)=>{var w;return s(),o("div",Z,[t("div",ee,[t("div",te,[a[1]||(a[1]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("h3",{class:"font-bold text-slate-900"},"–¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç —Å –∞–≥–µ–Ω—Ç–æ–º")],-1)),n(g)?(s(),o("p",se,l(n(g)),1)):r("",!0)]),t("button",{onClick:H,class:"text-xs text-slate-500 hover:text-slate-800 transition-colors"}," –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é ")]),t("div",{ref_key:"messagesContainer",ref:u,class:"flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth bg-slate-50/30"},[n(v).length===0?(s(),o("div",oe,[t("div",ae,[h(n(X),{class:"w-8 h-8 text-indigo-500"})]),a[2]||(a[2]=t("div",null,[t("p",{class:"font-medium text-slate-900"},"–ù–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥"),t("p",{class:"text-sm text-slate-500 max-w-[240px] mx-auto mt-1"},"–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤–∞—à–µ–≥–æ –∞–≥–µ–Ω—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏")],-1))])):r("",!0),(s(!0),o(M,null,T(n(v),(e,I)=>{var k;return s(),o("div",{key:I,class:S(["flex flex-col",[e.role==="user"?"items-end":"items-start"]])},[t("div",{class:S(["max-w-[80%] rounded-lg px-5 py-3 text-sm leading-relaxed markdown-content",[e.role==="user"?"bg-indigo-600 text-white rounded-tr-none":"bg-white border border-slate-100 text-slate-800 rounded-tl-none"]])},[e.role==="user"?(s(),o("div",ne,l(e.content),1)):(s(),o("div",{key:1,innerHTML:n(b).render(e.content)},null,8,le))],2),t("div",re,[t("div",ie,[t("span",de,l(e.role==="user"?"–í—ã":((k=n(x))==null?void 0:k.name)||"–ê–≥–µ–Ω—Ç"),1)]),e.role==="agent"&&e.tokens&&(e.tokens.prompt!==null||e.tokens.completion!==null||e.tokens.total!==null)?(s(),o("div",ce,[e.tokens.prompt!==null&&e.tokens.prompt!==void 0?(s(),o("span",ue,[a[3]||(a[3]=_(" –ü—Ä–æ–º–ø—Ç: ",-1)),t("span",pe,l(e.tokens.prompt),1)])):r("",!0),e.tokens.completion!==null&&e.tokens.completion!==void 0?(s(),o("span",xe,[a[4]||(a[4]=_(" –û—Ç–≤–µ—Ç: ",-1)),t("span",me,l(e.tokens.completion),1)])):r("",!0),e.tokens.total!==null&&e.tokens.total!==void 0?(s(),o("span",fe,[a[5]||(a[5]=_(" –í—Å–µ–≥–æ: ",-1)),t("span",_e,l(e.tokens.total),1)])):r("",!0)])):r("",!0),e.role==="agent"&&e.tools_called&&e.tools_called.length>0?(s(),o("div",he,[(s(!0),o(M,null,T(e.tools_called,(C,j)=>(s(),o("span",{key:j,class:"text-[10px] text-indigo-600 px-2 py-0.5 bg-indigo-50 rounded-md font-medium border border-indigo-100",title:`–ê—Ä–≥—É–º–µ–Ω—Ç—ã: ${JSON.stringify(C.args)}`}," üîß "+l(C.name),9,be))),128))])):r("",!0)])],2)}),128)),n(p)?(s(),o("div",ve,[...a[6]||(a[6]=[R('<div class="bg-white border border-slate-100 rounded-lg rounded-tl-none px-5 py-4" data-v-19682e54><div class="flex gap-1.5" data-v-19682e54><div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay:0ms;" data-v-19682e54></div><div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay:150ms;" data-v-19682e54></div><div class="w-1.5 h-1.5 bg-slate-300 rounded-full animate-bounce" style="animation-delay:300ms;" data-v-19682e54></div></div></div>',1)])])):r("",!0)],512),t("div",ge,[t("form",{onSubmit:A(y,["prevent"]),class:"relative flex items-center gap-3"},[$(t("textarea",{ref_key:"inputArea",ref:i,"onUpdate:modelValue":a[0]||(a[0]=e=>q(c)?c.value=e:null),onInput:V,onKeydown:P(A(y,["prevent"]),["enter"]),placeholder:"–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...",rows:"1",class:"flex-1 bg-slate-50 border border-slate-100 rounded-md px-5 py-3 text-sm text-slate-900 placeholder:text-slate-400 focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all resize-none max-h-32"},null,40,ye),[[F,n(c)]]),t("button",{type:"submit",disabled:!n(c).trim()||n(p),class:"absolute right-2 p-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-40 disabled:cursor-not-allowed transition-all"},[h(n(Y),{class:"w-5 h-5"})],8,we)],32),t("p",ke," –ê–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å "+l((w=n(x))==null?void 0:w.model),1)])])}}}),Me=J(Ce,[["__scopeId","data-v-19682e54"]]),$e=L({__name:"chat",setup(N){return(b,d)=>(s(),O(z,{title:"–ß–∞—Ç","hide-actions":!0},{default:U(()=>[h(Me)]),_:1}))}});export{$e as default};
