import{B as U,M as K,_ as W}from"./DashboardSidebar.vue.B26z5fa-.js";import{_ as X}from"./nuxt-link.t2uHRS69.js";import{M as Y,m as j,o as r,c as a,a as t,A as y,b as i,u as o,t as u,d as A,p as b,s as Z,F,C as M,Q as tt,B as et,f as st,w as _,q as ot,n as C,k as L,L as k,b$ as lt}from"./entry.Dw2909n2.js";import{S as nt}from"./sparkles.CVmRtpTC.js";import{S as rt}from"./settings.DdVzARvN.js";import{M as it}from"./more-vertical.CWTsiCiJ.js";import{_ as at}from"./AuthModal.vue.BSzxuO2s.js";import{u as dt}from"./useAgents.B7UkyiZ0.js";import{u as ct}from"./useAuth.jgUYoTAC.js";import{u as ut}from"./usePermissions.B76kzDEP.js";import{A as mt}from"./alert-circle.CFB8cae4.js";import{S as xt}from"./search.DVEG5Gql.js";import{P as pt}from"./plus.DTMN2fIW.js";import"./index.DT79k1l5.js";import"./floating-ui.vue.VILNG3-i.js";import"./chevron-right.Dt1o7IKv.js";import"./chevrons-up-down.C2VhQO3Y.js";import"./link.DpqSbqvX.js";import"./database.CDLRhh8b.js";import"./code.CqfGPh0g.js";import"./cpu.BtB-GUA5.js";import"./message-square.C2TtVjfK.js";import"./eye.B5oT6PQ0.js";import"./loader-2.D-f1OOw-.js";import"./useApiFetch.sBSRwplN.js";import"./authSessionManager.CAWbIGEs.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=Y("SlidersHorizontalIcon",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),bt={class:"group bg-white rounded-2xl border border-slate-200 p-6 hover:shadow-xl hover:shadow-slate-200/50 transition-all duration-300 hover:-translate-y-1"},ft={class:"flex items-start justify-between mb-6"},ht={class:"flex items-start gap-4 flex-1 min-w-0"},vt={class:"absolute -bottom-2 -right-2 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-md"},yt={class:"flex-1 min-w-0"},wt={class:"text-xl font-bold text-slate-900 mb-2 truncate group-hover:text-indigo-600 transition-colors"},_t={class:"flex items-center flex-wrap gap-2"},Ct={class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium bg-slate-100 text-slate-700"},kt={class:"flex items-center gap-2 shrink-0 ml-4"},At={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3"},$t=["title"],St={class:"text-sm font-bold text-slate-900 mb-0.5 truncate group-hover/stat:text-indigo-600 transition-colors"},Dt={class:"text-xs text-slate-500 font-medium"},Bt=j({__name:"AgentDetailCard",props:{title:{},icon:{},avatarColor:{},borderColor:{},type:{},stats:{},statsBgColor:{},statsTextColor:{},agentId:{},status:{default:"draft"}},setup(d){const m=d,p=()=>{m.agentId&&tt(`/agents/${m.agentId}`)},f=()=>{console.log("Menu toggled")};return(w,c)=>(r(),a("div",bt,[t("div",ft,[t("div",ht,[t("div",{class:y(["relative flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br shrink-0 shadow-lg",d.avatarColor])},[i(o(U),{class:"h-8 w-8 text-white"}),t("div",vt,[t("div",{class:y(["w-3 h-3 rounded-full",d.status==="published"?"bg-emerald-500":"bg-amber-500"])},null,2)])],2),t("div",yt,[t("h3",wt,u(d.title),1),t("div",_t,[t("span",{class:y(["inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold",[d.status==="published"?"bg-emerald-50 text-emerald-700":"bg-amber-50 text-amber-700"]])},[t("div",{class:y(["w-1.5 h-1.5 rounded-full",d.status==="published"?"bg-emerald-500":"bg-amber-500"])},null,2),A(" "+u(d.status==="published"?"Активен":"Черновик"),1)],2),t("span",Ct,[i(o(nt),{class:"h-3 w-3"}),A(" "+u(d.type),1)])])])]),t("div",kt,[d.agentId?(r(),a("button",{key:0,onClick:p,class:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-700 transition-all shadow-sm hover:shadow-md"},[i(o(rt),{class:"h-4 w-4"}),c[0]||(c[0]=t("span",{class:"hidden sm:inline"},"Настроить",-1))])):b("",!0),t("button",{class:"p-2.5 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors group/menu",onClick:Z(f,["stop"])},[i(o(it),{class:"h-5 w-5 text-slate-600 group-hover/menu:text-slate-900"})])])]),t("div",At,[(r(!0),a(F,null,M(d.stats,g=>(r(),a("div",{key:g.label,class:"group/stat relative rounded-xl p-3 bg-gradient-to-br from-slate-50 to-slate-100/50 hover:from-indigo-50 hover:to-purple-50 transition-all duration-300 cursor-default border border-slate-100 hover:border-indigo-200",title:g.tooltip||void 0},[t("p",St,u(g.value),1),t("p",Dt,u(g.label),1),c[1]||(c[1]=t("div",{class:"absolute inset-0 rounded-xl ring-2 ring-indigo-400 opacity-0 group-hover/stat:opacity-20 transition-opacity pointer-events-none"},null,-1))],8,$t))),128))])]))}}),Lt={class:"h-screen flex flex-col bg-slate-50 overflow-hidden"},Ut={class:"lg:hidden bg-white border-b border-slate-200 px-4 py-3 shrink-0"},jt={class:"flex items-center justify-between"},Ft={class:"flex items-center gap-2"},Mt={class:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center"},It={class:"text-white font-bold text-xs"},Nt={class:"text-slate-900 font-bold"},Tt={class:"flex flex-1 min-h-0"},Rt={key:0,class:"lg:hidden fixed inset-0 z-50 w-full"},Vt={class:"flex-1 min-w-0 bg-slate-50 overflow-y-auto p-4 sm:p-6 lg:p-10"},zt={class:"max-w-7xl mx-auto"},Et={key:0,class:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Pt={class:"flex items-center justify-between"},qt={class:"flex items-center"},Ht={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 lg:mb-8"},Ot={class:"flex items-center gap-3"},Qt={class:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg border border-slate-200"},Gt={class:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg border border-slate-200 text-slate-900 font-medium"},Jt={class:"grid grid-cols-1 md:grid-cols-3 gap-5 mb-8"},Kt={class:"bg-white rounded-xl border border-slate-200 p-5"},Wt={class:"text-3xl font-bold text-green-600"},Xt={class:"bg-white rounded-xl border border-slate-200 p-5"},Yt={class:"text-3xl font-bold text-slate-900"},Zt={class:"bg-white rounded-xl border border-slate-200 p-5"},te={class:"text-3xl font-bold text-indigo-600"},ee={key:1,class:"flex justify-center py-8"},se={key:2,class:"text-center py-12"},oe={key:3,class:"space-y-5"},Le=j({__name:"index",setup(d){const m=L(!1);lt();const{isAuthenticated:p,tenant:f}=ct(),{canEditAgents:w}=ut(),{agents:c,fetchAgents:g,isLoading:I}=dt(),N=k(()=>c.value.length),T=k(()=>c.value.filter(s=>s.status==="published").length),R=k(()=>c.value.filter(s=>s.status==="draft").length),h=L(!1);et(async()=>{if(p.value)try{await g()}catch(s){console.error("Failed to load agents:",s)}}),st(p,async s=>{s&&await g()});const V=()=>{h.value=!1},z=s=>s.name.toLowerCase().includes("запис")?"UserCheck":s.name.toLowerCase().includes("диагностик")?"Activity":s.name.toLowerCase().includes("документац")?"FileCheck":"Bot",E=s=>{const e=["from-sky-500 to-cyan-500","from-purple-500 to-pink-500","from-emerald-500 to-cyan-500","from-orange-500 to-red-500","from-indigo-500 to-purple-500"],l=s.id.charCodeAt(0)%e.length;return e[l]},P=s=>{const e=["border-sky-100","border-purple-100","border-emerald-100","border-orange-100","border-indigo-100"],l=s.id.charCodeAt(0)%e.length;return e[l]},q=s=>s.system_prompt.toLowerCase().includes("пациент")?"Управление пациентами":s.system_prompt.toLowerCase().includes("диагностик")||s.system_prompt.toLowerCase().includes("анализ")?"Медицинский анализ":s.system_prompt.toLowerCase().includes("документ")?"Документооборот":"Общий помощник",H=s=>{const e=["bg-sky-50","bg-purple-50","bg-emerald-50","bg-orange-50","bg-indigo-50"],l=s.id.charCodeAt(0)%e.length;return e[l]},O=s=>{const e=["text-sky-600","text-purple-600","text-emerald-600","text-orange-600","text-indigo-600"],l=s.id.charCodeAt(0)%e.length;return e[l]},Q=s=>{const e=Number(s??0);return Number.isFinite(e)?e:0},$=(s,e)=>{const l=Q(s),x=l!==0&&Math.abs(l)<1?4:2;return e==="USD"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:x}).format(l):new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:2,maximumFractionDigits:x}).format(l)},S=(s,e)=>`Точное значение: ${typeof s=="string"&&s.trim()?s.trim():"0"} ${e}`,G=s=>{var x,v;const e=s.status==="published"?"Опубликован":"Черновик",l=((x=s.model)==null?void 0:x.split(":")[1])||s.model||"Не указана";return[{value:e,label:"Статус"},{value:l,label:"Модель"},{value:((v=s.version)==null?void 0:v.toString())||"1",label:"Версия"},{value:new Date(s.updated_at).toLocaleDateString("ru-RU"),label:"Обновлен"},{value:$(s.total_cost_usd,"USD"),label:"Расход USD",tooltip:S(s.total_cost_usd,"USD")},{value:$(s.total_cost_rub,"RUB"),label:"Расход RUB",tooltip:S(s.total_cost_rub,"RUB")}]};return(s,e)=>{var D,B;const l=W,x=X,v=Bt,J=at;return r(),a("div",Lt,[t("div",Ut,[t("div",jt,[t("div",Ft,[t("div",Mt,[t("span",It,u((D=o(f))!=null&&D.name?o(f).name.charAt(0).toUpperCase():"О"),1)]),t("span",Nt,u(((B=o(f))==null?void 0:B.name)||"Организация"),1)]),t("button",{onClick:e[0]||(e[0]=n=>m.value=!m.value),class:"p-2 rounded-lg text-slate-600 hover:bg-slate-100"},[i(o(K),{class:"h-5 w-5"})])])]),t("div",Tt,[i(l,{class:"hidden lg:flex"}),m.value?(r(),a("div",{key:0,class:"lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50",onClick:e[1]||(e[1]=n=>m.value=!1)})):b("",!0),i(ot,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.34, 1.56, 0.64, 1)","enter-from-class":"-translate-x-full opacity-0 scale-95","enter-to-class":"translate-x-0 opacity-100 scale-100","leave-active-class":"transition-all duration-400 ease-in","leave-from-class":"translate-x-0 opacity-100 scale-100","leave-to-class":"-translate-x-full opacity-0 scale-95"},{default:_(()=>[m.value?(r(),a("div",Rt,[i(l,{onClose:e[2]||(e[2]=n=>m.value=!1)})])):b("",!0)]),_:1}),t("main",Vt,[t("div",zt,[o(p)?b("",!0):(r(),a("div",Et,[t("div",Pt,[t("div",qt,[i(o(mt),{class:"h-5 w-5 text-yellow-400 mr-3"}),e[5]||(e[5]=t("div",null,[t("h3",{class:"text-sm font-medium text-yellow-800"}," Требуется аутентификация "),t("p",{class:"text-sm text-yellow-700 mt-1"}," Войдите в систему, чтобы получить доступ к управлению агентами ")],-1))]),t("button",{onClick:e[3]||(e[3]=n=>h.value=!0),class:"px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700 transition-colors"}," Войти ")])])),t("div",Ht,[e[10]||(e[10]=t("div",{class:"mb-4 sm:mb-0"},[t("h1",{class:"text-2xl sm:text-3xl font-bold text-slate-900"}," Мои агенты "),t("p",{class:"text-slate-600 mt-1 sm:mt-2 text-sm sm:text-base"}," Управляйте вашими AI-агентами и настраивайте их работу ")],-1)),t("div",Ot,[t("div",Qt,[i(o(xt),{class:"h-4 w-4 text-slate-400"}),e[6]||(e[6]=t("span",{class:"text-sm text-slate-400"},"Поиск агентов...",-1))]),t("button",Gt,[i(o(gt),{class:"h-4 w-4"}),e[7]||(e[7]=t("span",{class:"hidden sm:inline"},"Фильтры",-1))]),o(p)&&o(w)?(r(),C(x,{key:0,to:"/agents/new",class:"flex items-center gap-2 px-5 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-700 transition-colors shadow-sm shadow-indigo-100"},{default:_(()=>[i(o(pt),{class:"h-4 w-4"}),e[8]||(e[8]=t("span",{class:"hidden sm:inline"},"Новый агент",-1)),e[9]||(e[9]=t("span",{class:"sm:hidden"},"Новый",-1))]),_:1})):b("",!0)])]),t("div",Jt,[t("div",Kt,[e[11]||(e[11]=t("div",{class:"flex items-center justify-between mb-3"},[t("p",{class:"text-sm font-normal text-slate-600"},"Активные")],-1)),t("p",Wt,u(T.value),1)]),t("div",Xt,[e[12]||(e[12]=t("div",{class:"flex items-center justify-between mb-3"},[t("p",{class:"text-sm font-normal text-slate-600"},"Всего агентов")],-1)),t("p",Yt,u(N.value),1)]),t("div",Zt,[e[13]||(e[13]=t("div",{class:"flex items-center justify-between mb-3"},[t("p",{class:"text-sm font-normal text-slate-600"}," Черновики ")],-1)),t("p",te,u(R.value),1)])]),o(I)?(r(),a("div",ee,[...e[14]||(e[14]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1)])])):o(c).length===0?(r(),a("div",se,[i(o(U),{class:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e[16]||(e[16]=t("h3",{class:"text-lg font-medium text-slate-900 mb-2"},"Нет агентов",-1)),e[17]||(e[17]=t("p",{class:"text-slate-600 mb-4"},"Создайте своего первого AI-агента",-1)),o(p)&&o(w)?(r(),C(x,{key:0,to:"/agents/new",class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"},{default:_(()=>[...e[15]||(e[15]=[A(" Создать агента ",-1)])]),_:1})):b("",!0)])):(r(),a("div",oe,[(r(!0),a(F,null,M(o(c),n=>(r(),C(v,{key:n.id,"agent-id":n.id,title:n.name,icon:z(n),"avatar-color":E(n),"border-color":P(n),type:q(n),"stats-bg-color":H(n),"stats-text-color":O(n),stats:G(n),status:n.status},null,8,["agent-id","title","icon","avatar-color","border-color","type","stats-bg-color","stats-text-color","stats","status"]))),128))]))])])]),i(J,{"is-open":h.value,onClose:e[4]||(e[4]=n=>h.value=!1),onAuthenticated:V},null,8,["is-open"])])}}});export{Le as default};
