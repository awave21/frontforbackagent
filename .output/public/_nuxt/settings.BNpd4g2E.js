import{_ as T}from"./AgentPageShell.vue.CAAykDSk.js";import{m as _,y as U,o as n,c as u,a as s,u as t,b as a,d as p,p as x,v as w,x as A,w as i,A as f,t as v,F as $,C as h,k as V,L as E,Q as L,n as z}from"./entry.CBkKRCnV.js";import{_ as B,a as N,b as S,c as D,d as K,e as M,f as O,g as Y,h as j}from"./index.CHffY42_.js";import{u as F}from"./usePermissions.DJmIznYF.js";import{u as I}from"./useAgentEditorStore.CBOc6_qs.js";import{L as P}from"./loader-2.CrTaI3Us.js";import{C as g}from"./check.B0AA6R8j.js";import{C as Q}from"./chevrons-up-down.ChXABuTd.js";import"./useLayoutState.B8IzXTUd.js";import"./useAuth.CHSuA4zA.js";import"./useApiFetch.B9YviUBz.js";import"./authSessionManager.BK0upO_P.js";import"./AuthModal.vue.DxMXnGuG.js";import"./eye.DUCx08TH.js";import"./alert-circle.DcUsP5Lj.js";import"./utils.wJwXZMb_.js";import"./PopperContent.CzIkJbyR.js";import"./floating-ui.vue.D2M-ESmY.js";import"./index.C5R80SqK.js";import"./search.CKKCnfcg.js";import"./index.DMX2BmNm.js";import"./useAgents.C6xV-JRH.js";const R={class:"bg-background rounded-md border border-border p-4 sm:p-5 space-y-6"},q={class:"flex items-center justify-end mb-4"},G={key:0,class:"flex items-center gap-1.5 text-xs text-blue-600"},H={key:1,class:"flex items-center gap-1.5 text-xs text-green-600"},J={class:"max-w-2xl space-y-8"},W=["disabled"],X=["aria-expanded","disabled"],Z={class:"flex gap-4"},ee=["disabled"],te=["disabled"],se={key:0,class:"pt-8 border-t border-red-50"},ae=_({__name:"AgentSettingsPanel",setup(C){const r=I(),{form:o}=U(r),{canEditAgents:d}=F(),b=V(!1),k=E(()=>{var m;return((m=c.find(e=>e.value===o.value.timezone))==null?void 0:m.label)??"Выберите часовой пояс"}),c=[{value:"Europe/Moscow",label:"Москва (UTC+3)"},{value:"Europe/Kaliningrad",label:"Калининград (UTC+2)"},{value:"Asia/Yekaterinburg",label:"Екатеринбург (UTC+5)"},{value:"Asia/Omsk",label:"Омск (UTC+6)"},{value:"Asia/Novosibirsk",label:"Новосибирск (UTC+7)"},{value:"Asia/Krasnoyarsk",label:"Красноярск (UTC+7)"},{value:"Asia/Irkutsk",label:"Иркутск (UTC+8)"},{value:"Asia/Yakutsk",label:"Якутск (UTC+9)"},{value:"Asia/Vladivostok",label:"Владивосток (UTC+10)"},{value:"Asia/Magadan",label:"Магадан (UTC+11)"},{value:"Asia/Kamchatka",label:"Камчатка (UTC+12)"},{value:"UTC",label:"UTC"},{value:"Europe/London",label:"Лондон (UTC+0)"},{value:"Europe/Berlin",label:"Берлин (UTC+1)"},{value:"Europe/Istanbul",label:"Стамбул (UTC+3)"},{value:"Asia/Dubai",label:"Дубай (UTC+4)"},{value:"Asia/Almaty",label:"Алматы (UTC+6)"},{value:"Asia/Bangkok",label:"Бангкок (UTC+7)"},{value:"Asia/Shanghai",label:"Шанхай (UTC+8)"},{value:"Asia/Tokyo",label:"Токио (UTC+9)"},{value:"America/New_York",label:"Нью-Йорк (UTC-5)"},{value:"America/Los_Angeles",label:"Лос-Анджелес (UTC-8)"}],y=async()=>{if(!confirm("Вы уверены, что хотите удалить этого агента? Это действие нельзя отменить."))return;await r.removeAgent()&&L("/agents")};return(m,e)=>(n(),u("div",R,[s("div",q,[t(r).isAutoSaving?(n(),u("span",G,[a(t(P),{class:"h-3 w-3 animate-spin"}),e[6]||(e[6]=p(" Сохранение... ",-1))])):t(r).lastAutoSavedAt?(n(),u("span",H,[a(t(g),{class:"h-3 w-3"}),e[7]||(e[7]=p(" Сохранено ",-1))])):x("",!0)]),s("div",J,[s("div",null,[e[8]||(e[8]=s("label",{class:"block text-sm font-bold text-slate-900 mb-3"},"Название агента",-1)),w(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).name=l),disabled:!t(d),type:"text",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-md focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all disabled:opacity-60 disabled:cursor-not-allowed",placeholder:"Введите название..."},null,8,W),[[A,t(o).name]])]),s("div",null,[e[10]||(e[10]=s("label",{class:"block text-sm font-bold text-slate-900 mb-3"},"Часовой пояс",-1)),a(t(j),{open:b.value,"onUpdate:open":e[3]||(e[3]=l=>b.value=l)},{default:i(()=>[a(t(B),{"as-child":""},{default:i(()=>[s("button",{type:"button",role:"combobox","aria-expanded":b.value,disabled:!t(d),class:"w-full flex items-center justify-between px-4 py-3 bg-slate-50 border border-slate-200 rounded-md text-sm transition-all hover:bg-white disabled:opacity-60 disabled:cursor-not-allowed"},[s("span",{class:f(t(o).timezone?"text-slate-900":"text-slate-400")},v(k.value),3),a(t(Q),{class:"ml-2 h-4 w-4 shrink-0 opacity-50"})],8,X)]),_:1}),a(t(N),{class:"w-[--reka-popper-anchor-width] p-0",align:"start"},{default:i(()=>[a(t(S),{modelValue:t(o).timezone,"onUpdate:modelValue":[e[1]||(e[1]=l=>t(o).timezone=l),e[2]||(e[2]=l=>b.value=!1)]},{default:i(()=>[a(t(D),{placeholder:"Поиск часового пояса..."}),a(t(K),null,{default:i(()=>[...e[9]||(e[9]=[p("Часовой пояс не найден",-1)])]),_:1}),a(t(M),null,{default:i(()=>[a(t(O),null,{default:i(()=>[(n(),u($,null,h(c,l=>a(t(Y),{key:l.value,value:l.value},{default:i(()=>[a(t(g),{class:f(["mr-2 h-4 w-4",t(o).timezone===l.value?"opacity-100":"opacity-0"])},null,8,["class"]),p(" "+v(l.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["open"]),e[11]||(e[11]=s("p",{class:"mt-1.5 text-xs text-slate-400"},"Часовой пояс используется агентом при работе с датами и временем",-1))]),s("div",null,[e[14]||(e[14]=s("label",{class:"block text-sm font-bold text-slate-900 mb-3"},"Статус агента",-1)),s("div",Z,[s("button",{type:"button",disabled:!t(d),onClick:e[4]||(e[4]=l=>t(o).status="draft"),class:f(["flex-1 flex flex-col p-4 border-2 rounded-lg transition-all text-left disabled:opacity-60 disabled:cursor-not-allowed",[t(o).status==="draft"?"border-indigo-600 bg-indigo-50/50 ring-4 ring-indigo-50":"border-slate-100 hover:border-slate-200 bg-white"]])},[...e[12]||(e[12]=[s("span",{class:"font-bold text-slate-900"},"Черновик",-1),s("span",{class:"text-xs text-slate-500 mt-1"},"Агент доступен только вам для тестирования",-1)])],10,ee),s("button",{type:"button",disabled:!t(d),onClick:e[5]||(e[5]=l=>t(o).status="published"),class:f(["flex-1 flex flex-col p-4 border-2 rounded-lg transition-all text-left disabled:opacity-60 disabled:cursor-not-allowed",[t(o).status==="published"?"border-emerald-500 bg-emerald-50/50 ring-4 ring-emerald-50":"border-slate-100 hover:border-slate-200 bg-white"]])},[...e[13]||(e[13]=[s("span",{class:"font-bold text-slate-900"},"Опубликован",-1),s("span",{class:"text-xs text-slate-500 mt-1"},"Агент доступен всем сотрудникам клиники",-1)])],10,te)])]),t(d)?(n(),u("div",se,[e[15]||(e[15]=s("h4",{class:"text-sm font-bold text-red-600 mb-2"},"Опасная зона",-1)),e[16]||(e[16]=s("p",{class:"text-xs text-slate-500 mb-4"},"Удаление агента приведет к безвозвратной потере всех его настроек и истории.",-1)),s("button",{type:"button",onClick:y,class:"px-6 py-2.5 bg-white border border-red-200 text-red-600 rounded-md text-sm font-bold hover:bg-red-50 transition-colors"}," Удалить агента ")])):x("",!0)])]))}}),Ae=_({__name:"settings",setup(C){return(r,o)=>(n(),z(T,{title:"Настройки","hide-actions":!0},{default:i(()=>[a(ae)]),_:1}))}});export{Ae as default};
