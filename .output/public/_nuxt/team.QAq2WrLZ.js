import{M as me,_ as ve,U as xe}from"./DashboardSidebar.vue.B26z5fa-.js";import{M as ee,m as te,c1 as se,n as D,b as r,q as B,w as F,T as fe,o as a,c as i,s as z,a as e,u as n,X as J,v as K,x as be,O as ge,t as c,p as v,d as C,k as u,z as le,B as he,f as ye,F as Q,C as W,A as we,L as _e}from"./entry.Dw2909n2.js";import{u as ke}from"./useAuth.jgUYoTAC.js";import{u as Ce}from"./usePermissions.B76kzDEP.js";import{u as oe,g as R}from"./useApiFetch.sBSRwplN.js";import{L}from"./loader-2.D-f1OOw-.js";import{A as Y}from"./alert-circle.CFB8cae4.js";import{P as Z}from"./plus.DTMN2fIW.js";import{C as $e}from"./copy.u-n3Saot.js";import{T as Te}from"./trash-2.Dv1Ml6au.js";import"./nuxt-link.t2uHRS69.js";import"./index.DT79k1l5.js";import"./floating-ui.vue.VILNG3-i.js";import"./chevron-right.Dt1o7IKv.js";import"./chevrons-up-down.C2VhQO3Y.js";import"./settings.DdVzARvN.js";import"./sparkles.CVmRtpTC.js";import"./link.DpqSbqvX.js";import"./database.CDLRhh8b.js";import"./code.CqfGPh0g.js";import"./cpu.BtB-GUA5.js";import"./message-square.C2TtVjfK.js";import"./authSessionManager.CAWbIGEs.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=ee("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=ee("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),je={key:0,class:"p-6"},Le={class:"flex items-center justify-between mb-6"},De={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-3"},Ee={class:"text-sm text-red-800"},Se={class:"flex gap-3 justify-end pt-4"},Ie=["disabled"],Ae={key:1,class:"p-6"},Re={class:"flex items-center justify-between mb-6"},ze={class:"space-y-4"},Be={class:"flex gap-2"},Fe=["value"],Oe=["disabled"],Ve=te({__name:"InviteUserModal",props:{isOpen:{type:Boolean}},emits:["close","invited"],setup(O,{emit:$}){const j=$,T=oe(),x=le(),{public:{siteUrl:_}}=se(),g=u({email:"",role:"manager"}),h=u(!1),y=u(null),m=u(null),w=u(!1),f=()=>_&&!_.includes("localhost")&&!_.includes("127.0.0.1")?_:typeof window<"u"?window.location.origin:_||"",E=d=>{if(!d)return d;const s=f();try{const p=s?new URL(d,s):new URL(d);if(s){const k=new URL(s);p.host&&k.host&&p.host!==k.host&&(p.protocol=k.protocol,p.host=k.host)}return p.toString()}catch{return d}},V=async()=>{var d;h.value=!0,y.value=null;try{const s=await T("/invitations",{method:"POST",headers:{"Content-Type":"application/json"},body:{email:g.value.email,role:g.value.role}});m.value=E(s.invite_link),x.success("Приглашение создано","Ссылка для приглашения готова к использованию")}catch(s){const k=((s==null?void 0:s.status)||(s==null?void 0:s.statusCode)||((d=s==null?void 0:s.response)==null?void 0:d.status))===409?"Приглашение для этого email уже существует. Удалите старое или используйте другой email.":R(s,"Не удалось создать приглашение");y.value=k,x.error("Ошибка",k)}finally{h.value=!1}},I=async()=>{if(m.value)try{await navigator.clipboard.writeText(m.value),w.value=!0,x.success("Скопировано","Ссылка скопирована в буфер обмена"),setTimeout(()=>{w.value=!1},2e3)}catch{x.error("Ошибка","Не удалось скопировать ссылку")}},U=()=>{g.value={email:"",role:"manager"},y.value=null,m.value=null,w.value=!1,j("close")};return(d,s)=>(a(),D(fe,{to:"body"},[r(B,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:F(()=>[O.isOpen?(a(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",onClick:s[5]||(s[5]=z(p=>d.$emit("close"),["self"]))},[r(B,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:F(()=>[O.isOpen?(a(),i("div",{key:0,class:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",onClick:s[4]||(s[4]=z(()=>{},["stop"]))},[m.value?(a(),i("div",Ae,[e("div",Re,[s[10]||(s[10]=e("h2",{class:"text-xl font-bold text-slate-900"}," Приглашение создано ",-1)),e("button",{onClick:U,class:"p-2 text-slate-400 hover:text-slate-600 transition-colors"},[r(n(J),{class:"h-5 w-5"})])]),e("div",ze,[e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"}," Ссылка для приглашения ",-1)),e("div",Be,[e("input",{value:m.value,readonly:"",class:"flex-1 px-3 py-2 text-slate-900 border border-slate-300 rounded-lg bg-slate-50 text-sm"},null,8,Fe),e("button",{onClick:I,disabled:w.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors whitespace-nowrap"},c(w.value?"Скопировано":"Копировать"),9,Oe)])]),s[12]||(s[12]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},[e("p",{class:"text-sm text-blue-800"},[e("strong",null,"Важно:"),C(" Email не отправляется автоматически. Скопируйте ссылку и отправьте её пользователю вручную. ")])],-1)),e("div",{class:"flex justify-end pt-4"},[e("button",{onClick:U,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"}," Готово ")])])])):(a(),i("div",je,[e("div",Le,[s[6]||(s[6]=e("h2",{class:"text-xl font-bold text-slate-900"}," Пригласить пользователя ",-1)),e("button",{onClick:s[0]||(s[0]=p=>d.$emit("close")),class:"p-2 text-slate-400 hover:text-slate-600 transition-colors"},[r(n(J),{class:"h-5 w-5"})])]),e("form",{onSubmit:z(V,["prevent"]),class:"space-y-4"},[e("div",null,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"}," Email ",-1)),K(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>g.value.email=p),type:"email",required:"",class:"w-full px-3 py-2 text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"user@example.com"},null,512),[[be,g.value.email]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"}," Роль ",-1)),K(e("select",{"onUpdate:modelValue":s[2]||(s[2]=p=>g.value.role=p),required:"",class:"w-full px-3 py-2 text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...s[8]||(s[8]=[e("option",{value:"admin"},"Администратор",-1),e("option",{value:"manager"},"Менеджер",-1)])],512),[[ge,g.value.role]])]),y.value?(a(),i("div",De,[e("p",Ee,c(y.value),1)])):v("",!0),e("div",Se,[e("button",{type:"button",onClick:s[3]||(s[3]=p=>d.$emit("close")),class:"px-4 py-2 text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors"}," Отмена "),e("button",{type:"submit",disabled:h.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[h.value?(a(),D(n(L),{key:0,class:"h-4 w-4 animate-spin"})):v("",!0),C(" "+c(h.value?"Создание...":"Создать приглашение"),1)],8,Ie)])],32)]))])):v("",!0)]),_:1})])):v("",!0)]),_:1})]))}}),Pe={class:"h-screen flex flex-col bg-slate-50 overflow-hidden"},Ne={class:"lg:hidden bg-white border-b border-slate-200 px-4 py-3 shrink-0"},qe={class:"flex items-center justify-between"},Ge={class:"flex items-center gap-2"},He={class:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center"},Xe={class:"text-white font-bold text-xs"},Je={class:"text-slate-900 font-bold"},Ke={class:"flex flex-1 min-h-0"},Qe={key:0,class:"lg:hidden fixed inset-0 z-50 w-full"},We={class:"flex-1 min-w-0 bg-slate-50 overflow-y-auto p-4 sm:p-6 lg:p-10"},Ye={class:"max-w-6xl mx-auto"},Ze={key:0,class:"bg-white rounded-xl border border-slate-200 p-8 text-center"},et={class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},tt={key:1},st={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 lg:mb-8"},lt={key:0,class:"bg-white rounded-xl border border-slate-200 p-12 text-center"},ot={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},at={class:"flex items-center"},it={class:"text-sm text-red-700 mt-1"},nt={key:2,class:"bg-white rounded-xl border border-slate-200 overflow-hidden"},rt={class:"overflow-x-auto"},dt={class:"w-full"},ct={class:"bg-white divide-y divide-slate-200"},ut={class:"px-6 py-4 whitespace-nowrap"},pt={class:"flex items-center"},mt={class:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center shrink-0"},vt={class:"text-white font-bold text-sm"},xt={class:"ml-4"},ft={class:"text-sm font-medium text-slate-900"},bt={class:"text-sm text-slate-500"},gt={class:"px-6 py-4 whitespace-nowrap"},ht={class:"flex items-center gap-2"},yt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},wt=["value","onChange","disabled"],_t={class:"px-6 py-4 whitespace-nowrap text-sm text-slate-500"},kt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ct=["onClick","disabled"],$t={key:1},Tt={key:3,class:"bg-white rounded-xl border border-slate-200 p-12 text-center"},Ut={class:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"},Mt={key:4,class:"mt-8"},jt={class:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2"},Lt={class:"text-sm font-normal text-slate-500"},Dt={class:"bg-white rounded-xl border border-slate-200 overflow-hidden"},Et={class:"divide-y divide-slate-200"},St={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-3"},It={class:"flex-1 min-w-0"},At={class:"flex items-center gap-2 mb-1"},Rt={class:"font-medium text-slate-900 truncate"},zt={class:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-slate-500"},Bt={class:"flex items-center gap-1"},Ft={class:"flex items-center gap-2 shrink-0"},Ot=["onClick","disabled"],Vt=["onClick","disabled"],Pt={key:0,class:"mt-2"},Nt={class:"flex items-center gap-2"},qt=["value"],Gt={key:5,class:"mt-8"},Ht={class:"flex items-center gap-2 text-slate-500"},Xt={class:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4"},Jt={class:"p-6"},Kt={class:"text-slate-600 mb-6"},Qt={class:"flex gap-3 justify-end"},Wt=["disabled"],ws=te({__name:"team",setup(O){const $=u(!1),j=u(!1),T=u([]),x=u([]),_=u(!1),g=u(!1),h=u(null),y=u(new Set),m=u(new Set),w=u(new Set),f=u(null),E=u(null),{user:V,tenant:I}=ke(),{canManageMembers:U}=Ce(),d=oe(),s=le(),{public:{siteUrl:p}}=se(),k=_e(()=>{var l;return((l=V.value)==null?void 0:l.id)??null}),ae=l=>{if(!l)return l;const t=p&&!p.includes("localhost")?p:typeof window<"u"?window.location.origin:"";try{const b=t?new URL(l,t):new URL(l);if(t){const M=new URL(t);b.host!==M.host&&(b.protocol=M.protocol,b.host=M.host)}return b.toString()}catch{return l}},A=l=>new Date(l)<new Date,P=l=>{if(!l)return"Никогда";try{return new Date(l).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Неизвестно"}},N=async()=>{if(U.value){_.value=!0,h.value=null;try{const l=await d("/users",{method:"GET"});T.value=l||[]}catch(l){const t=R(l,"Не удалось загрузить список участников");h.value=t,s.error("Ошибка",t)}finally{_.value=!1}}},q=async()=>{if(U.value){g.value=!0;try{const l=await d("/invitations",{method:"GET"});x.value=(l||[]).map(t=>({...t,invite_link:ae(t.invite_link)}))}catch(l){console.warn("Failed to fetch invitations:",l),x.value=[]}finally{g.value=!1}}},ie=async l=>{try{await navigator.clipboard.writeText(l.invite_link),E.value=l.id,s.success("Скопировано","Ссылка скопирована в буфер обмена"),setTimeout(()=>{E.value=null},2e3)}catch{s.error("Ошибка","Не удалось скопировать ссылку")}},ne=async l=>{w.value.add(l);try{await d(`/invitations/${l}`,{method:"DELETE"}),x.value=x.value.filter(t=>t.id!==l),s.success("Приглашение удалено","Приглашение успешно отменено")}catch(t){s.error("Ошибка",R(t,"Не удалось удалить приглашение"))}finally{w.value.delete(l)}},re=async(l,t)=>{if(t!=="admin"&&t!=="manager"){s.error("Ошибка","Некорректная роль");return}y.value.add(l);try{await d(`/users/${l}/role`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:{role:t}});const b=T.value.find(M=>M.id===l);b&&(b.role=t),s.success("Роль обновлена",`Роль участника успешно изменена на "${t==="admin"?"Администратор":"Менеджер"}"`)}catch(b){s.error("Ошибка",R(b,"Не удалось обновить роль"))}finally{y.value.delete(l)}},de=l=>{f.value=l},ce=async l=>{m.value.add(l);try{await d(`/users/${l}`,{method:"DELETE"}),T.value=T.value.filter(t=>t.id!==l),f.value=null,s.success("Участник удален","Участник успешно удален из организации")}catch(t){s.error("Ошибка",R(t,"Не удалось удалить участника"))}finally{m.value.delete(l)}},ue=()=>{j.value=!1,N(),q()},pe=l=>({admin:"Администратор",manager:"Менеджер",owner:"Владелец"})[l]||l,G=u(!1),H=()=>{U.value&&!G.value&&(G.value=!0,N(),q())};return he(()=>{H()}),ye(U,l=>{l&&H()}),(l,t)=>{var M,X;const b=ve;return a(),i("div",Pe,[e("div",Ne,[e("div",qe,[e("div",Ge,[e("div",He,[e("span",Xe,c((M=n(I))!=null&&M.name?n(I).name.charAt(0).toUpperCase():"О"),1)]),e("span",Je,c(((X=n(I))==null?void 0:X.name)||"Организация"),1)]),e("button",{onClick:t[0]||(t[0]=o=>$.value=!$.value),class:"p-2 rounded-lg text-slate-600 hover:bg-slate-100"},[r(n(me),{class:"h-5 w-5"})])])]),e("div",Ke,[r(b,{class:"hidden lg:flex"}),r(B,{"enter-active-class":"transition-all duration-400 ease-out","enter-from-class":"opacity-0 backdrop-blur-0","enter-to-class":"opacity-100 backdrop-blur-sm","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"opacity-100 backdrop-blur-sm","leave-to-class":"opacity-0 backdrop-blur-0"},{default:F(()=>[$.value?(a(),i("div",{key:0,class:"lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50",onClick:t[1]||(t[1]=o=>$.value=!1)})):v("",!0)]),_:1}),r(B,{"enter-active-class":"transition-all duration-500 cubic-bezier(0.34, 1.56, 0.64, 1)","enter-from-class":"-translate-x-full opacity-0 scale-95","enter-to-class":"translate-x-0 opacity-100 scale-100","leave-active-class":"transition-all duration-400 ease-in","leave-from-class":"translate-x-0 opacity-100 scale-100","leave-to-class":"-translate-x-full opacity-0 scale-95"},{default:F(()=>[$.value?(a(),i("div",Qe,[r(b,{onClose:t[2]||(t[2]=o=>$.value=!1)})])):v("",!0)]),_:1}),e("main",We,[e("div",Ye,[n(U)?(a(),i("div",tt,[e("div",st,[t[12]||(t[12]=e("div",{class:"mb-4 sm:mb-0"},[e("h1",{class:"text-2xl sm:text-3xl font-bold text-slate-900"}," Участники организации "),e("p",{class:"text-slate-600 mt-1 sm:mt-2 text-sm sm:text-base"}," Управление участниками и их ролями ")],-1)),e("button",{onClick:t[3]||(t[3]=o=>j.value=!0),class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"},[r(n(Z),{class:"h-4 w-4"}),t[11]||(t[11]=e("span",null,"Пригласить",-1))])]),_.value?(a(),i("div",lt,[r(n(L),{class:"h-8 w-8 text-indigo-600 animate-spin mx-auto mb-4"}),t[13]||(t[13]=e("p",{class:"text-slate-600"},"Загрузка участников...",-1))])):h.value?(a(),i("div",ot,[e("div",at,[r(n(Y),{class:"h-5 w-5 text-red-400 mr-3"}),e("div",null,[t[14]||(t[14]=e("h3",{class:"text-sm font-medium text-red-800"},"Ошибка загрузки",-1)),e("p",it,c(h.value),1)])])])):T.value.length>0?(a(),i("div",nt,[e("div",rt,[e("table",dt,[t[16]||(t[16]=e("thead",{class:"bg-slate-50 border-b border-slate-200"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"}," Пользователь "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"}," Роль "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"}," Дата входа "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider"}," Действия ")])],-1)),e("tbody",ct,[(a(!0),i(Q,null,W(T.value,o=>(a(),i("tr",{key:o.id,class:"hover:bg-slate-50"},[e("td",ut,[e("div",pt,[e("div",mt,[e("span",vt,c(o.full_name?o.full_name.split(" ").map(S=>S.charAt(0)).join("").toUpperCase():o.email.charAt(0).toUpperCase()),1)]),e("div",xt,[e("div",ft,c(o.full_name||"Без имени"),1),e("div",bt,c(o.email),1)])])]),e("td",gt,[e("div",ht,[o.role==="owner"?(a(),i("span",yt," Владелец ")):(a(),i("select",{key:1,value:o.role,onChange:S=>re(o.id,S.target.value),disabled:y.value.has(o.id),class:"text-sm border border-slate-300 rounded-lg px-3 py-1.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[15]||(t[15]=[e("option",{value:"admin"},"Администратор",-1),e("option",{value:"manager"},"Менеджер",-1)])],40,wt)),y.value.has(o.id)?(a(),D(n(L),{key:2,class:"h-4 w-4 text-indigo-600 animate-spin"})):v("",!0)])]),e("td",_t,c(P(o.last_login_at)),1),e("td",kt,[o.role!=="owner"&&o.id!==k.value?(a(),i("button",{key:0,onClick:S=>de(o),disabled:m.value.has(o.id),class:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed"},[m.value.has(o.id)?(a(),D(n(L),{key:0,class:"h-4 w-4 animate-spin inline"})):(a(),i("span",$t,"Удалить"))],8,Ct)):v("",!0)])]))),128))])])])])):(a(),i("div",Tt,[e("div",Ut,[r(n(xe),{class:"h-8 w-8 text-slate-400"})]),t[18]||(t[18]=e("h3",{class:"text-lg font-semibold text-slate-900 mb-2"}," Нет участников ",-1)),t[19]||(t[19]=e("p",{class:"text-slate-600 text-sm mb-4"}," Пригласите первого участника в организацию ",-1)),e("button",{onClick:t[4]||(t[4]=o=>j.value=!0),class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"},[r(n(Z),{class:"h-4 w-4"}),t[17]||(t[17]=e("span",null,"Пригласить",-1))])])),x.value.length>0?(a(),i("div",Mt,[e("h2",jt,[r(n(Me),{class:"h-5 w-5 text-slate-500"}),t[20]||(t[20]=C(" Ожидающие приглашения ",-1)),e("span",Lt,"("+c(x.value.length)+")",1)]),e("div",Dt,[e("div",Et,[(a(!0),i(Q,null,W(x.value,o=>(a(),i("div",{key:o.id,class:"p-4 hover:bg-slate-50 transition-colors"},[e("div",St,[e("div",It,[e("div",At,[e("span",Rt,c(o.email),1),e("span",{class:we(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",A(o.expires_at)?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},c(A(o.expires_at)?"Истекло":"Ожидает"),3)]),e("div",zt,[e("span",null,"Роль: "+c(pe(o.role)),1),e("span",Bt,[r(n(Ue),{class:"h-3.5 w-3.5"}),C(" "+c(A(o.expires_at)?"Истекло":"До")+": "+c(P(o.expires_at)),1)])])]),e("div",Ft,[A(o.expires_at)?v("",!0):(a(),i("button",{key:0,onClick:S=>ie(o),disabled:E.value===o.id,class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 disabled:opacity-50 transition-colors"},[r(n($e),{class:"h-4 w-4"}),C(" "+c(E.value===o.id?"Скопировано":"Копировать"),1)],8,Ot)),e("button",{onClick:S=>ne(o.id),disabled:w.value.has(o.id),class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm text-red-600 bg-red-50 rounded-lg hover:bg-red-100 disabled:opacity-50 transition-colors"},[w.value.has(o.id)?(a(),D(n(L),{key:0,class:"h-4 w-4 animate-spin"})):(a(),D(n(Te),{key:1,class:"h-4 w-4"})),t[21]||(t[21]=C(" Удалить ",-1))],8,Vt)])]),A(o.expires_at)?v("",!0):(a(),i("div",Pt,[e("div",Nt,[e("input",{value:o.invite_link,readonly:"",class:"flex-1 px-3 py-1.5 text-xs text-slate-600 bg-slate-50 border border-slate-200 rounded-lg truncate"},null,8,qt)])]))]))),128))])])])):g.value?(a(),i("div",Gt,[e("div",Ht,[r(n(L),{class:"h-4 w-4 animate-spin"}),t[22]||(t[22]=e("span",{class:"text-sm"},"Загрузка приглашений...",-1))])])):v("",!0)])):(a(),i("div",Ze,[e("div",et,[r(n(Y),{class:"h-8 w-8 text-red-600"})]),t[9]||(t[9]=e("h3",{class:"text-lg font-semibold text-slate-900 mb-2"}," Недостаточно прав ",-1)),t[10]||(t[10]=e("p",{class:"text-slate-600 text-sm"}," У вас нет доступа к управлению участниками организации ",-1))]))])])]),r(Ve,{"is-open":j.value,onClose:t[5]||(t[5]=o=>j.value=!1),onInvited:ue},null,8,["is-open"]),f.value?(a(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:t[8]||(t[8]=z(o=>f.value=null,["self"]))},[e("div",Xt,[e("div",Jt,[t[26]||(t[26]=e("h2",{class:"text-xl font-bold text-slate-900 mb-4"}," Подтверждение удаления ",-1)),e("p",Kt,[t[23]||(t[23]=C(" Вы уверены, что хотите удалить участника ",-1)),e("strong",null,c(f.value.full_name||f.value.email),1),t[24]||(t[24]=C("? Это действие нельзя отменить. ",-1))]),e("div",Qt,[e("button",{onClick:t[6]||(t[6]=o=>f.value=null),class:"px-4 py-2 text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors"}," Отмена "),e("button",{onClick:t[7]||(t[7]=o=>ce(f.value.id)),disabled:m.value.has(f.value.id),class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[m.value.has(f.value.id)?(a(),D(n(L),{key:0,class:"h-4 w-4 animate-spin"})):v("",!0),t[25]||(t[25]=C(" Удалить ",-1))],8,Wt)])])])])):v("",!0)])}}});export{ws as default};
