import{M as Te,m as fe,N as Xe,o as d,c,a as s,t as f,A as I,p as g,F as P,C as z,n as oe,f as Ke,B as Qe,b as x,u as y,v as b,x as A,d as T,O as te,D as _e,q as Ye,w as et,k as _,L as we,X as se,P as tt}from"./entry.B2IFVgKF.js";import{_ as st}from"./Switch.vue.BGnZGGn8.js";import{u as ot,g as ke}from"./useApiFetch.DTQFO30A.js";import{P as pe}from"./plus.C5FiPnXx.js";import{S as lt}from"./search.CsYQl3Fm.js";import{C as Ae}from"./check.DLWzRKND.js";import{C as nt}from"./code.xjqaw9ju.js";import{T as at}from"./trash-2.CqUirFt0.js";import{P as rt}from"./play._HLX4evb.js";import"./index.BzStbfpn.js";import"./floating-ui.vue.CxJzKeZY.js";import"./authSessionManager.DTJsKR5D.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=Te("BrainCircuitIcon",[["path",{d:"M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0-1.32 4.24 3 3 0 0 0 .34 5.58 2.5 2.5 0 0 0 2.96 3.08 2.5 2.5 0 0 0 4.91.05L12 20V4.5Z",key:"ixwj2a"}],["path",{d:"M16 8V5c0-1.1.9-2 2-2",key:"13dx7u"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M20.5 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1s25gz"}],["path",{d:"M16.5 13a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"127460"}],["path",{d:"M20.5 21a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"fys062"}],["path",{d:"M18.5 3a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1vib61"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=Te("ServerIcon",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),dt={class:"field-node pl-4"},ut={class:"flex items-center gap-2 py-1 hover:bg-slate-50 rounded group"},ct=["checked"],pt={class:"text-xs font-mono text-slate-700 font-medium"},ft={key:0,class:"ml-auto text-[10px] text-slate-400 truncate max-w-[150px] opacity-0 group-hover:opacity-100 transition-opacity"},vt={key:0,class:"border-l border-slate-200 ml-[7px]"},xt=fe({__name:"FieldNode",props:{field:{}},emits:["toggle"],setup(w){return(J,$)=>{const B=Xe("FieldNode",!0);return d(),c("div",dt,[s("div",ut,[s("input",{type:"checkbox",checked:w.field.selected,onChange:$[0]||($[0]=S=>J.$emit("toggle",w.field)),class:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 h-3.5 w-3.5 cursor-pointer"},null,40,ct),s("span",pt,f(w.field.key),1),s("span",{class:I(["text-[10px] px-1.5 py-0.5 rounded font-mono border",w.field.type==="array"?"bg-purple-100 text-purple-700 border-purple-200":w.field.type==="object"?"bg-blue-100 text-blue-700 border-blue-200":"bg-slate-100 text-slate-500 border-slate-200"])},f(w.field.type),3),w.field.example!==void 0?(d(),c("span",ft,f(w.field.example),1)):g("",!0)]),w.field.children&&w.field.children.length>0?(d(),c("div",vt,[(d(!0),c(P,null,z(w.field.children,S=>(d(),oe(B,{key:S.path,field:S,onToggle:$[1]||($[1]=W=>J.$emit("toggle",W))},null,8,["field"]))),128))])):g("",!0)])}}}),yt={class:"flex h-full bg-white overflow-hidden"},ht={class:"w-[280px] border-r border-slate-200 flex flex-col bg-slate-50"},mt={class:"p-4 border-b border-slate-200"},bt={class:"flex justify-between items-center mb-3"},gt={class:"relative"},_t={class:"flex-1 overflow-y-auto p-2 space-y-0.5"},wt=["onClick"],kt={class:"flex-1 min-w-0"},At={class:"text-[13px] font-medium text-slate-900 truncate flex items-center gap-1"},It={key:0,class:"text-orange-500"},Tt={class:"text-[11px] text-slate-500 truncate font-mono"},Vt={key:0,class:"flex-1 flex flex-col min-w-[460px] bg-white"},Ct={class:"px-6 py-4 border-b border-slate-200 flex justify-between items-start"},Nt={class:"flex-1"},$t={class:"flex items-center gap-2 mt-0.5"},St={class:"text-[11px] font-mono bg-slate-100 px-1.5 py-0.5 rounded text-slate-500 font-normal flex items-center gap-1"},Pt={key:0,class:"inline-block w-2.5 h-2.5 border border-indigo-400 border-t-transparent rounded-full animate-spin"},Ot={class:"text-[11px] font-mono text-slate-300"},Dt=["disabled"],jt={class:"flex-1 overflow-y-auto p-6"},Et={class:"bg-white border border-slate-200 rounded-lg p-5 mb-6 shadow-sm"},Ut={class:"text-sm font-semibold mb-4 text-slate-900 flex items-center gap-2"},Ft={class:"mb-6"},Jt={class:"flex border border-slate-200 rounded-md overflow-hidden bg-white focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500"},Mt={class:"flex gap-6 border-b border-slate-200 mb-6"},Lt=["onClick"],zt={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-indigo-600"},Bt={key:0},Wt={class:"space-y-4"},qt={key:0},Rt={key:1},Ht={key:0,class:"border border-slate-200 rounded-lg overflow-hidden"},Zt={class:"w-full"},Gt={class:"px-3 py-2"},Xt=["onUpdate:modelValue"],Kt={class:"px-3 py-2"},Qt=["onUpdate:modelValue"],Yt={class:"px-3 py-2 text-center"},es=["onClick"],ts={key:2},ss={class:"flex justify-between items-center mb-4"},os={class:"flex bg-slate-100 rounded-md p-0.5 gap-0.5"},ls={key:0},ns={class:"border border-slate-200 rounded-lg overflow-hidden"},as={class:"w-full"},rs={class:"px-3 py-2"},is=["onUpdate:modelValue"],ds={class:"px-3 py-2"},us=["onUpdate:modelValue"],cs={class:"px-3 py-2"},ps=["onUpdate:modelValue"],fs={class:"px-3 py-2"},vs={class:"flex items-start gap-1.5"},xs=["onClick","title"],ys=["onUpdate:modelValue"],hs={key:1,class:"flex-1 space-y-1.5"},ms=["onUpdate:modelValue"],bs=["onUpdate:modelValue"],gs={class:"px-3 py-2 text-center"},_s=["onClick"],ws={key:1},ks={key:3},As={key:0,class:"p-12 bg-slate-50 rounded-lg border border-dashed border-slate-200 text-center"},Is={class:"text-slate-400 mb-2"},Ts={key:1,class:"grid grid-cols-2 gap-4"},Vs={class:"space-y-3"},Cs={class:"border border-slate-200 rounded-lg overflow-hidden"},Ns={class:"p-3 max-h-[420px] overflow-y-auto bg-white"},$s={class:"space-y-3"},Ss={class:"border border-slate-200 rounded-lg overflow-hidden"},Ps={class:"bg-slate-900 p-3 max-h-[420px] overflow-auto"},Os={class:"text-[11px] font-mono text-slate-50 leading-relaxed"},Ds={class:"bg-white border border-slate-200 rounded-lg p-5 shadow-sm"},js={class:"text-sm font-semibold mb-4 text-slate-900 flex items-center gap-2"},Es={key:1,class:"flex-1 flex items-center justify-center text-slate-400 flex-col gap-4"},Us={class:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center"},Fs={key:2,class:"w-[360px] bg-white border-l border-slate-200 flex flex-col"},Js={class:"px-4 py-3 border-b border-slate-200 flex items-center justify-between bg-white"},Ms={class:"flex items-center gap-2"},Ls={class:"text-sm font-medium text-slate-700"},zs={class:"flex-1 flex flex-col bg-white min-h-0"},Bs={class:"h-10 border-b border-slate-200 flex items-center justify-between px-4 bg-slate-50 text-xs font-semibold text-slate-500 uppercase shrink-0"},Ws=["disabled"],qs={class:"h-20 shrink-0 border-b border-slate-200 relative"},Rs={class:"flex-1 min-h-0 flex flex-col"},Hs={class:"flex items-center gap-2 flex-1 min-w-0"},Zs={class:"font-bold"},Gs={key:0,class:"opacity-75"},Xs={key:1},Ks={key:0,class:"flex-1 p-3 bg-slate-900 text-slate-50 text-xs font-mono overflow-auto min-h-0"},Qs={key:1,class:"flex-1 flex items-center justify-center text-xs text-slate-400"},Ys=fe({__name:"AgentFunctionsPanel",props:{agentId:{}},setup(w){const J={Ð°:"a",Ð±:"b",Ð²:"v",Ð³:"g",Ð´:"d",Ðµ:"e",Ñ‘:"yo",Ð¶:"zh",Ð·:"z",Ð¸:"i",Ð¹:"y",Ðº:"k",Ð»:"l",Ð¼:"m",Ð½:"n",Ð¾:"o",Ð¿:"p",Ñ€:"r",Ñ:"s",Ñ‚:"t",Ñƒ:"u",Ñ„:"f",Ñ…:"kh",Ñ†:"ts",Ñ‡:"ch",Ñˆ:"sh",Ñ‰:"shch",ÑŠ:"",Ñ‹:"y",ÑŒ:"",Ñ:"e",ÑŽ:"yu",Ñ:"ya"},$=o=>o.toLowerCase().split("").map(e=>J[e]??e).join("").replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"").replace(/_+/g,"_"),B=o=>/[^\x00-\x7F]/.test(o);let S=null,W=null;const Ve=async o=>{var e;if(!o.trim()||!B(o))return null;S&&S.abort(),S=new AbortController;try{const t=await $fetch("https://api.mymemory.translated.net/get",{params:{q:o,langpair:"ru|en"},signal:S.signal}),l=(e=t==null?void 0:t.responseData)==null?void 0:e.translatedText;if(l&&l.toLowerCase()!==o.toLowerCase())return $(l)}catch(t){(t==null?void 0:t.name)!=="AbortError"&&console.warn("Translation API failed, using transliteration",t)}return null},le=w,h=_([]),V=_(""),X=_(!1),a=_(null),O=_("Body"),D=_("fields"),q=_(!1),R=_("{}"),v=_(null),j=_([]),E=ot(),U=_(new Set),M=_(null),L=(o,e)=>{M.value={type:o,text:e},setTimeout(()=>{M.value=null},4e3)},k=_([]),F=_("{}"),C=_([]),ne=we(()=>{var n;if(!((n=a.value)!=null&&n.id))return!1;const o=a.value,e=o.id,t=U.value.has(e),l=o.name.trim()!==""&&o.endpoint.trim()!=="";return t&&l}),Ce=o=>{const e=o.input_schema,t=o.parameter_mapping;if(!(e!=null&&e.properties)||Object.keys(e.properties).length===0){k.value=[],F.value="{}";return}k.value=Object.entries(e.properties).map(([l,n])=>{var p;const r=n.type||"string",u=(t==null?void 0:t[l])||"body";if(n["x-fromAI"]===!0)return{key:l,location:u,type:r,value:"",fromAI:!0,aiDescription:n.description||"",aiDefaultValue:n.default!==void 0?typeof n.default=="string"?n.default:JSON.stringify(n.default):""};let i="";return(p=n.description)!=null&&p.startsWith("Parameter: ")?i=`{{${n.description.replace("Parameter: ","")}}}`:n.default!==void 0&&(i=typeof n.default=="string"?n.default:JSON.stringify(n.default)),{key:l,location:u,type:r,value:i,fromAI:!1,aiDescription:"",aiDefaultValue:""}}),ve()};let ae=!1;const re=o=>{var l,n,r;ae=!0,a.value=o,V.value=((l=o.input_schema)==null?void 0:l._displayName)||o.name||"";const e=o.custom_headers||o.headers;e&&typeof e=="object"?C.value=Object.entries(e).map(([u,i])=>({key:u,value:i})):C.value=[];const t=(n=o.response_transform)==null?void 0:n._fieldTree;j.value=Array.isArray(t)?t:[],v.value=null,(r=o.id)!=null&&r.startsWith("new_")?(k.value=[],F.value="{}",R.value="{}"):(Ce(o),Q()),ae=!1},m=()=>{var o;(o=a.value)!=null&&o.id&&U.value.add(a.value.id)},Ne=()=>{if(a.value)if(a.value.name=$(V.value),a.value.input_schema&&(a.value.input_schema._displayName=V.value),m(),W&&clearTimeout(W),B(V.value)){X.value=!0;const o=V.value;W=setTimeout(async()=>{const e=await Ve(o);e&&a.value&&V.value===o&&(a.value.name=e),X.value=!1},600)}else X.value=!1},K=()=>{var o;ae||(o=a.value)!=null&&o.id&&(a.value.id.startsWith("new_")||ge())},$e=()=>{k.value.push({key:"",location:"body",type:"string",value:"",fromAI:!1,aiDescription:"",aiDefaultValue:""}),m()},Se=o=>{k.value.splice(o,1),m(),de(),Q(),K()},Pe=()=>{C.value.push({key:"",value:""}),m()},Oe=o=>{C.value.splice(o,1),m(),K()},H=(o,e)=>{if(o.startsWith("{{")&&o.endsWith("}}"))return o;switch(e){case"integer":case"number":return Number(o)||0;case"boolean":return o==="true"||o==="1";case"array":try{return JSON.parse(o)}catch{return[]}case"object":try{return JSON.parse(o)}catch{return{}}default:return o}},De=o=>{switch(o){case"integer":case"number":return 0;case"boolean":return!1;case"array":return[];case"object":return{};default:return""}},je=(o,e=!1)=>{const t={};return o.forEach(l=>{if(l.key){if(l.fromAI){t[l.key]=l.aiDefaultValue?H(l.aiDefaultValue,l.type):De(l.type);return}if(e&&l.value.startsWith("{{")&&l.value.endsWith("}}")){t[l.key]="";return}t[l.key]=H(l.value,l.type)}}),t},ve=()=>{const o={};k.value.forEach(e=>{if(e.key)if(e.fromAI){const t=JSON.stringify(e.key),l=JSON.stringify(e.aiDescription||""),n=JSON.stringify(e.type||"string"),r=e.aiDefaultValue?JSON.stringify(e.aiDefaultValue):"",u=r?[t,l,n,r]:[t,l,n];o[e.key]=`$fromAI(${u.join(", ")})`}else o[e.key]=H(e.value,e.type)}),F.value=JSON.stringify(o,null,2)},Ee=o=>{const e=o.slice(8,-1),t=[];let l="",n=!1,r=!1;for(const i of e){if(r){l+=i,r=!1;continue}if(i==="\\"){r=!0,l+=i;continue}if(i==='"'){n=!n,l+=i;continue}if(i===","&&!n){t.push(l.trim()),l="";continue}l+=i}l.trim()&&t.push(l.trim());const u=i=>i.startsWith('"')&&i.endsWith('"')?i.slice(1,-1):i;return{key:t[0]?u(t[0]):"",description:t[1]?u(t[1]):"",type:t[2]?u(t[2]):"string",defaultValue:t[3]?u(t[3]):""}},Ue=()=>{try{const o=JSON.parse(F.value);k.value=Object.entries(o).map(([e,t])=>{if(typeof t=="string"&&t.startsWith("$fromAI(")&&t.endsWith(")")){const r=Ee(t);return{key:e,location:"body",type:r.type||"string",value:"",fromAI:!0,aiDescription:r.description,aiDefaultValue:r.defaultValue}}let l="string",n=String(t);return typeof t=="number"?l=Number.isInteger(t)?"integer":"number":typeof t=="boolean"?l="boolean":Array.isArray(t)?(l="array",n=JSON.stringify(t)):typeof t=="object"&&t!==null&&(l="object",n=JSON.stringify(t)),{key:e,location:"body",type:l,value:n,fromAI:!1,aiDescription:"",aiDefaultValue:""}}),m(),de(),Q()}catch(o){console.error("Invalid JSON",o)}},Q=()=>{R.value=JSON.stringify(je(k.value,!0),null,2)},Z=()=>{m(),de(),Q()},xe=()=>{m()},Fe=o=>{switch(o){case"GET":return"text-emerald-600 bg-emerald-100";case"POST":return"text-blue-600 bg-blue-100";case"PUT":return"text-amber-600 bg-amber-100";case"DELETE":return"text-red-600 bg-red-100";case"PATCH":return"text-purple-600 bg-purple-100";default:return"text-slate-600 bg-slate-100"}};function Y(o,e="",t=""){return!o||typeof o!="object"?[]:Array.isArray(o)?o.length===0?[]:[{path:e||"items",key:t||`items [${o.length}]`,type:"array",example:`${o.length} ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚(Ð¾Ð²)`,selected:!0,rename:t||"items",children:o.length>0?Y(o[0],`${e}[]`,""):[]}]:Object.entries(o).map(([l,n])=>{const r=e?`${e}.${l}`:l,u=Array.isArray(n),i={path:r,key:u?`${l} [${n.length}]`:l,type:u?"array":typeof n,example:typeof n=="object"?void 0:n,selected:!0,rename:l};return u&&n.length>0?i.children=Y(n[0],`${r}[]`,l):typeof n=="object"&&n!==null&&!u&&(i.children=Y(n,r,l)),i})}function ye(o,e){const t=new Map(e.map(l=>[l.path,l]));o.forEach(l=>{const n=t.get(l.path);n&&(l.selected=n.selected,l.children&&n.children&&ye(l.children,n.children))})}function he(o){return o.children?o.children.some(e=>e.selected||he(e)):!1}function Je(o){const e=[],t=new Map,l=n=>{n.forEach(r=>{if(r.selected&&!he(r))if(r.path.includes("[]")){const i=r.path.split("[]")[0];t.has(i)||t.set(i,[]),t.get(i).push(r)}else e.push(r);r.children&&l(r.children)})};return l(o),{mode:"fields",fields:e.map(n=>({source:n.path,target:n.path})),arrays:Array.from(t.entries()).map(([n,r])=>({source:n,target:n.split(".").pop()||"items",fields:r.map(u=>{var p;const i=((p=u.path.split("[]")[1])==null?void 0:p.slice(1))||u.key;return{source:i,target:i}})}))}}const Me=async o=>{var t;if(!a.value||(t=a.value.id)!=null&&t.startsWith("new_"))return;const e=o?"active":"deprecated";try{await E(`/tools/${a.value.id}`,{method:"PUT",body:{status:e}}),a.value.status=e,L("success",o?"Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°":"Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´ÐµÐ°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°")}catch(l){console.error("Failed to toggle status",l),L("error","ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ")}},Le=o=>{o.selected=!o.selected,be()},me=o=>o.map(e=>({...e,example:void 0,children:e.children?me(e.children):void 0})),be=()=>{if(a.value){const o=Je(j.value);o._fieldTree=me(j.value),a.value.response_transform=o,m()}};function ee(o,e){return e.split(".").reduce((t,l)=>t==null?void 0:t[l],o)}function ie(o,e,t){const l=e.split(".");let n=o;for(let r=0;r<l.length-1;r++)n[l[r]]||(n[l[r]]={}),n=n[l[r]];n[l[l.length-1]]=t}function ze(o,e){var t,l,n;if(e.mode==="fields"){if(Array.isArray(o)){const u=(t=e.arrays)==null?void 0:t.find(i=>i.source==="items"||i.source===""||i.source==="[]");return u&&u.fields?o.map(i=>{const p={};return u.fields.forEach(({source:N,target:ue})=>{const G=N.replace(/^\[\]\.?/,""),ce=G?ee(i,G):i;ie(p,ue,ce)}),p}):o}const r={};return(l=e.fields)==null||l.forEach(({source:u,target:i})=>{const p=ee(o,u);ie(r,i,p)}),(n=e.arrays)==null||n.forEach(({source:u,target:i,fields:p})=>{const N=ee(o,u);Array.isArray(N)&&(r[i]=N.map(ue=>{const G={};return p.forEach(({source:ce,target:Ze})=>{const Ge=ee(ue,ce);ie(G,Ze,Ge)}),G}))}),r}return o}const Be=we(()=>{var o,e;return!((o=v.value)!=null&&o.raw_body)||!((e=a.value)!=null&&e.response_transform)?null:ze(v.value.raw_body,a.value.response_transform)}),de=()=>{if(!a.value)return;const o={},e=[],t={};k.value.forEach(l=>{if(!l.key)return;const n={};switch(l.type){case"string":n.type="string";break;case"integer":n.type="integer";break;case"number":n.type="number";break;case"boolean":n.type="boolean";break;case"array":n.type="array",n.items={type:"string"};break;case"object":n.type="object";break}l.fromAI?(n.description=l.aiDescription||`Value for ${l.key}`,n["x-fromAI"]=!0,l.aiDefaultValue&&(n.default=H(l.aiDefaultValue,l.type)),e.push(l.key)):l.value&&(l.value.startsWith("{{")&&l.value.endsWith("}}")?n.description=`Parameter: ${l.value.slice(2,-2)}`:n.default=H(l.value,l.type)),o[l.key]=n,t[l.key]=l.location,!l.fromAI&&l.value&&!l.value.startsWith("{{")&&e.push(l.key)}),a.value.input_schema={type:"object",properties:o,...e.length>0?{required:e}:{}},a.value.parameter_mapping=Object.keys(t).length>0?t:null,m()},We=async()=>{var o,e,t,l;if(a.value){q.value=!0;try{let n={};try{n=JSON.parse(R.value)}catch{v.value={status_code:0,latency_ms:0,raw_body:{error:"Invalid JSON in payload"},transformed_body:null,raw_size_bytes:0,transformed_size_bytes:null,error:"Invalid JSON",request_url:((o=a.value)==null?void 0:o.endpoint)||"",request_method:((e=a.value)==null?void 0:e.http_method)||"POST"},q.value=!1;return}const r={};C.value.forEach(p=>{p.key.trim()&&(r[p.key]=p.value)});let u=a.value.parameter_mapping;!u&&k.value.length>0&&(u={},k.value.forEach(p=>{p.key&&(u[p.key]=p.location)}));const i=await E("/tools/test",{method:"POST",body:{endpoint:a.value.endpoint,http_method:a.value.http_method,args:n,parameter_mapping:u,custom_headers:Object.keys(r).length>0?r:void 0,auth_type:a.value.auth_type,credential_id:a.value.credential_id,response_transform:a.value.response_transform}});if(v.value=i,i.raw_body){const p=Y(i.raw_body),N=(l=(t=a.value)==null?void 0:t.response_transform)==null?void 0:l._fieldTree;Array.isArray(N)&&N.length>0&&ye(p,N),j.value=p,be()}}catch(n){console.error("Test failed:",n),v.value={status_code:500,latency_ms:45,raw_body:{error:n.message||"Request failed"},transformed_body:null,raw_size_bytes:0,transformed_size_bytes:null,error:n.message,request_url:a.value.endpoint,request_method:a.value.http_method}}finally{q.value=!1}}},qe=()=>{const o={id:`new_${Date.now()}`,name:"",description:"",endpoint:"",http_method:"POST",execution_type:"http_webhook",auth_type:"none",input_schema:{type:"object",properties:{}},parameter_mapping:null,response_transform:null,headers:null,status:"active",version:1};h.value.unshift(o),a.value=o,V.value="",U.value.add(o.id),k.value=[],F.value="{}"},ge=async()=>{var o;if(!(!a.value||!ne.value))try{const e=(o=a.value.id)==null?void 0:o.startsWith("new_");console.log("ðŸ’¾ Saving with status:",a.value.status);const t={name:a.value.name,description:a.value.description||"",input_schema:a.value.input_schema||{type:"object",properties:{}},execution_type:"http_webhook",endpoint:a.value.endpoint,auth_type:a.value.auth_type||"none",status:a.value.status||"active"};if(a.value.http_method&&(t.http_method=a.value.http_method),C.value.length>0&&(t.custom_headers=C.value.reduce((l,n)=>(n.key.trim()&&(l[n.key]=n.value),l),{})),a.value.response_transform&&(t.response_transform=a.value.response_transform),a.value.parameter_mapping&&(t.parameter_mapping=a.value.parameter_mapping),e){const l=await E("/tools",{method:"POST",body:t});await E(`/agents/${le.agentId}/tools/${l.id}`,{method:"POST",body:{permission_scope:"write",credential_id:null}});const n=a.value.id,r=h.value.findIndex(u=>u.id===n);r!==-1&&(h.value.splice(r,1,l),a.value=l),U.value.delete(n)}else{const l=await E(`/tools/${a.value.id}`,{method:"PUT",body:t}),n=h.value.findIndex(r=>{var u;return r.id===((u=a.value)==null?void 0:u.id)});n!==-1&&(h.value.splice(n,1,l),a.value=l),U.value.delete(a.value.id)}console.log("ðŸ’¾ Save payload sent:",JSON.stringify(t,null,2)),L("success","Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð°")}catch(e){console.error("Failed to save function",e),L("error",`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ: ${ke(e,"Ð½Ðµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ")}`)}},Re=async()=>{if(!a.value)return;const o=a.value.name||"ÐÐ¾Ð²Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ";if(!confirm(`Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ "${o}"?`))return;const e=h.value.findIndex(n=>{var r;return n.id===((r=a.value)==null?void 0:r.id)});if(e===-1)return;const t=a.value.id,l=t.startsWith("new_");try{l||await E(`/agents/${le.agentId}/tools/${t}`,{method:"DELETE"}),h.value.splice(e,1),h.value.length>0?re(h.value[0]):a.value=null,U.value.delete(t),L("success","Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°")}catch(n){console.error("Failed to delete function",n),L("error",`ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ: ${ke(n,"Ð½Ðµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ")}`)}};Ke(D,(o,e)=>{e==="fields"&&o==="json"?ve():e==="json"&&o==="fields"&&Ue()}),Qe(async()=>{await He()});const He=async()=>{var o;try{const e=await E(`/agents/${le.agentId}/tools/details`);console.log("ðŸ“¦ Raw bindings from backend:",JSON.stringify(e[0],null,2)),h.value=e.map(t=>t.tool).filter(t=>t!=null)||[],console.log("ðŸ“¦ First tool status:",(o=h.value[0])==null?void 0:o.status),h.value.length>0&&re(h.value[0]),console.log("ðŸ“¦ Loaded tools from backend:",h.value.map(t=>({id:t.id,name:t.name,status:t.status})))}catch(e){console.error("Failed to load functions",e),h.value=[]}};return(o,e)=>(d(),c(P,null,[s("div",yt,[s("div",ht,[s("div",mt,[s("div",bt,[e[11]||(e[11]=s("span",{class:"font-semibold text-sm text-slate-900"},"Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸",-1)),s("button",{onClick:qe,class:"text-indigo-600 hover:bg-indigo-50 p-1 rounded transition-colors"},[x(y(pe),{class:"w-4 h-4"})])]),s("div",gt,[x(y(lt),{class:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400"}),e[12]||(e[12]=s("input",{type:"text",placeholder:"Filter...",class:"w-full pl-8 pr-3 py-2 text-xs border border-slate-200 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-indigo-500"},null,-1))])]),s("div",_t,[(d(!0),c(P,null,z(h.value,t=>{var l,n;return d(),c("div",{key:t.id,class:I(["flex items-center gap-2.5 p-2.5 rounded-md cursor-pointer border border-transparent hover:bg-slate-100 transition-colors",{"bg-slate-100 border-slate-200":((l=a.value)==null?void 0:l.id)===t.id}]),onClick:r=>re(t)},[s("span",{class:I(["text-[9px] font-bold px-1.5 py-0.5 rounded min-w-[38px] text-center uppercase",Fe(t.http_method)])},f(t.http_method),3),s("div",kt,[s("div",At,[T(f(((n=t.input_schema)==null?void 0:n._displayName)||t.name||"ÐÐ¾Ð²Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ")+" ",1),U.value.has(t.id||"")?(d(),c("span",It,"â—")):g("",!0)]),s("div",Tt,f(t.name||"function_name"),1)]),s("div",{class:I(["w-1.5 h-1.5 rounded-full flex-shrink-0",t.status==="active"?"bg-emerald-500":"bg-slate-300"])},null,2)],10,wt)}),128))])]),a.value?(d(),c("div",Vt,[s("div",Ct,[s("div",Nt,[b(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>V.value=t),onInput:Ne,type:"text",placeholder:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ (Ð½Ð°Ð¿Ñ€: Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ð°Ñ†Ð¸ÐµÐ½Ñ‚Ð°)",class:"text-xl font-semibold text-slate-900 m-0 border-none outline-none bg-transparent w-full placeholder:text-slate-300"},null,544),[[A,V.value]]),s("div",$t,[s("span",St,[T(f(a.value.name||"function_name")+" ",1),X.value?(d(),c("span",Pt)):g("",!0)]),s("span",Ot," ID: "+f(a.value.id),1)]),b(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.description=t),onInput:m,type:"text",placeholder:"ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸",class:"mt-1.5 text-[13px] text-slate-500 border-none outline-none bg-transparent w-full placeholder:text-slate-300"},null,544),[[A,a.value.description]])]),s("button",{onClick:ge,disabled:!ne.value,class:I(["p-1.5 rounded-md transition-colors",ne.value?"text-indigo-600 hover:text-indigo-700":"text-slate-300 cursor-not-allowed"]),title:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"},[x(y(Ae),{class:"w-5 h-5"})],10,Dt)]),s("div",jt,[s("div",Et,[s("div",Ut,[x(y(it),{class:"w-4 h-4 text-indigo-600"}),e[13]||(e[13]=T(" ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Endpoint ",-1))]),s("div",Ft,[e[15]||(e[15]=s("label",{class:"block text-xs font-medium mb-1.5 text-slate-900"},"URL Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°",-1)),s("div",Jt,[b(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.http_method=t),onChange:m,class:"w-[100px] bg-slate-50 border-none border-r border-slate-200 px-3 text-[13px] font-semibold text-slate-900 focus:ring-0 cursor-pointer outline-none"},[...e[14]||(e[14]=[_e('<option value="GET">GET</option><option value="POST">POST</option><option value="PUT">PUT</option><option value="PATCH">PATCH</option><option value="DELETE">DELETE</option>',5)])],544),[[te,a.value.http_method]]),b(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.endpoint=t),onInput:m,type:"text",placeholder:"https://api.example.com/endpoint",class:"flex-1 border-none px-3 py-2.5 text-[13px] font-mono text-slate-900 focus:ring-0 outline-none placeholder:text-slate-300"},null,544),[[A,a.value.endpoint]])])]),s("div",Mt,[(d(),c(P,null,z([{id:"Auth",label:"ÐÐ²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ"},{id:"Body",label:"ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹"},{id:"Headers",label:"Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸"},{id:"Response",label:"Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¾Ñ‚Ð²ÐµÑ‚Ð°"}],t=>s("button",{key:t.id,class:I(["pb-2.5 text-[13px] font-medium relative transition-colors",O.value===t.id?"text-slate-900":"text-slate-500 hover:text-slate-700"]),onClick:l=>O.value=t.id},[T(f(t.label)+" ",1),O.value===t.id?(d(),c("div",zt)):g("",!0)],10,Lt)),64))]),O.value==="Auth"?(d(),c("div",Bt,[s("div",Wt,[s("div",null,[e[17]||(e[17]=s("label",{class:"block text-xs font-medium mb-1.5 text-slate-900"},"Ð¢Ð¸Ð¿ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸",-1)),b(s("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.auth_type=t),onChange:m,class:"w-full px-3 py-2 border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 text-sm"},[...e[16]||(e[16]=[s("option",{value:"none"},"Ð‘ÐµÐ· Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸",-1),s("option",{value:"api_key"},"API Key",-1),s("option",{value:"oauth2"},"OAuth 2.0",-1),s("option",{value:"service"},"Service Auth",-1)])],544),[[te,a.value.auth_type]])]),a.value.auth_type!=="none"?(d(),c("div",qt,[e[18]||(e[18]=s("label",{class:"block text-xs font-medium mb-1.5 text-slate-900"},"Credential ID",-1)),b(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.credential_id=t),onInput:m,type:"text",placeholder:"Enter credential ID or leave empty",class:"w-full px-3 py-2 border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 text-sm font-mono"},null,544),[[A,a.value.credential_id]]),e[19]||(e[19]=s("p",{class:"mt-1.5 text-xs text-slate-500"}," ÐžÐ¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾: ID ÐºÑ€ÐµÐ´ÐµÐ½ÑˆÐ°Ð»Ð° Ð¸Ð· ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐµÐºÑ€ÐµÑ‚Ð°Ð¼Ð¸. ÐžÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð´Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´ÐµÑ„Ð¾Ð»Ñ‚Ð½Ð¾Ð³Ð¾. ",-1))])):g("",!0)])])):g("",!0),O.value==="Headers"?(d(),c("div",Rt,[e[22]||(e[22]=s("div",{class:"text-sm text-slate-500 mb-4"}," Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ HTTP Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸ Ðº Ð·Ð°Ð¿Ñ€Ð¾ÑÑƒ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Authorization, X-API-Key, Content-Type). ",-1)),C.value.length>0?(d(),c("div",Ht,[s("table",Zt,[e[20]||(e[20]=s("thead",{class:"bg-slate-50"},[s("tr",{class:"border-b border-slate-200"},[s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase w-[35%]"},"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ"),s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase"},"Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ"),s("th",{class:"w-[36px]"})])],-1)),s("tbody",{onInput:xe,onChange:xe,onFocusout:K},[(d(!0),c(P,null,z(C.value,(t,l)=>(d(),c("tr",{key:l,class:"border-b border-slate-200 last:border-b-0"},[s("td",Gt,[b(s("input",{"onUpdate:modelValue":n=>t.key=n,type:"text",placeholder:"Authorization",class:"w-full px-2 py-1 text-[13px] border border-transparent hover:border-slate-200 focus:border-indigo-500 rounded outline-none"},null,8,Xt),[[A,t.key]])]),s("td",Kt,[b(s("input",{"onUpdate:modelValue":n=>t.value=n,type:"text",placeholder:"Bearer {{token}}",class:"w-full px-2 py-1 text-[13px] font-mono text-slate-700 border border-transparent hover:border-slate-200 focus:border-indigo-500 rounded outline-none placeholder:text-slate-400"},null,8,Qt),[[A,t.value]])]),s("td",Yt,[s("button",{onClick:n=>Oe(l),class:"text-slate-400 hover:text-red-500 transition-colors"},[x(y(se),{class:"w-3.5 h-3.5"})],8,es)])]))),128))],32)])])):g("",!0),s("button",{onClick:Pe,class:"mt-3 flex items-center gap-1.5 text-[13px] text-indigo-600 hover:text-indigo-700 font-medium"},[x(y(pe),{class:"w-3.5 h-3.5"}),e[21]||(e[21]=T(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ",-1))])])):g("",!0),O.value==="Body"?(d(),c("div",ts,[s("div",ss,[e[23]||(e[23]=s("div",{class:"flex items-center gap-2 text-xs font-medium text-slate-700"},[T(" Content-Type: "),s("span",{class:"bg-slate-100 px-2 py-1 rounded text-xs font-mono border border-slate-200"}," application/json ")],-1)),s("div",os,[s("button",{onClick:e[6]||(e[6]=t=>D.value="fields"),class:I(["px-3 py-1 text-xs font-medium rounded transition-all",D.value==="fields"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"])}," Fields ",2),s("button",{onClick:e[7]||(e[7]=t=>D.value="json"),class:I(["px-3 py-1 text-xs font-medium rounded transition-all",D.value==="json"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"])}," JSON ",2)])]),D.value==="fields"?(d(),c("div",ls,[s("div",ns,[s("table",as,[e[26]||(e[26]=s("thead",{class:"bg-slate-50 border-b border-slate-200"},[s("tr",null,[s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase w-[25%]"},"ÐšÐ»ÑŽÑ‡"),s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase w-[15%]"},"Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ"),s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase w-[15%]"},"Ð¢Ð¸Ð¿"),s("th",{class:"text-left px-3 py-2 text-[11px] font-semibold text-slate-500 uppercase"},"Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ"),s("th",{class:"w-[36px]"})])],-1)),s("tbody",{onInput:Z,onChange:Z,onFocusout:K},[(d(!0),c(P,null,z(k.value,(t,l)=>(d(),c("tr",{key:l,class:"border-b border-slate-200 last:border-b-0"},[s("td",rs,[b(s("input",{"onUpdate:modelValue":n=>t.key=n,type:"text",placeholder:"parameter_name",class:"w-full px-2 py-1 text-[13px] border border-transparent hover:border-slate-200 focus:border-indigo-500 rounded outline-none"},null,8,is),[[A,t.key]])]),s("td",ds,[b(s("select",{"onUpdate:modelValue":n=>t.location=n,class:"w-full px-2 py-1 text-xs text-slate-700 border-none bg-transparent font-semibold cursor-pointer outline-none"},[...e[24]||(e[24]=[s("option",{value:"body"},"Body",-1),s("option",{value:"path"},"Path",-1),s("option",{value:"query"},"Query",-1)])],8,us),[[te,t.location]])]),s("td",cs,[b(s("select",{"onUpdate:modelValue":n=>t.type=n,class:"w-full px-2 py-1 text-xs text-slate-600 border-none bg-transparent font-medium cursor-pointer outline-none"},[...e[25]||(e[25]=[_e('<option value="string">String</option><option value="integer">Integer</option><option value="number">Number</option><option value="boolean">Boolean</option><option value="array">Array</option><option value="object">Object</option>',6)])],8,ps),[[te,t.type]])]),s("td",fs,[s("div",vs,[s("button",{onClick:n=>{t.fromAI=!t.fromAI,Z()},class:I(["shrink-0 mt-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded transition-all cursor-pointer select-none",t.fromAI?"bg-violet-100 text-violet-700 hover:bg-violet-200":"bg-slate-100 text-slate-400 hover:bg-slate-200"]),title:t.fromAI?"AI Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð¸Ð· ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð° Ð´Ð¸Ð°Ð»Ð¾Ð³Ð°. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð´Ð»Ñ ÑÑ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ.":"Ð¡Ñ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð´Ð»Ñ Ñ€ÐµÐ¶Ð¸Ð¼Ð° AI."},f(t.fromAI?"AI":"="),11,xs),t.fromAI?(d(),c("div",hs,[b(s("input",{"onUpdate:modelValue":n=>t.aiDescription=n,onInput:Z,type:"text",placeholder:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð´Ð»Ñ AI (Ð½Ð°Ð¿Ñ€: Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ)",class:"w-full px-2 py-1 text-[13px] text-violet-700 border border-violet-200 bg-violet-50/50 hover:border-violet-300 focus:border-violet-500 focus:ring-1 focus:ring-violet-500 rounded outline-none placeholder:text-violet-300"},null,40,ms),[[A,t.aiDescription]]),b(s("input",{"onUpdate:modelValue":n=>t.aiDefaultValue=n,onInput:Z,type:"text",placeholder:"ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)",class:"w-full px-2 py-1 text-[11px] font-mono text-slate-500 border border-transparent hover:border-slate-200 focus:border-slate-400 rounded outline-none placeholder:text-slate-300"},null,40,bs),[[A,t.aiDefaultValue]])])):b((d(),c("input",{key:0,"onUpdate:modelValue":n=>t.value=n,type:"text",placeholder:"{{variable}}",class:"flex-1 px-2 py-1 text-[13px] font-mono text-indigo-600 font-medium border border-transparent hover:border-slate-200 focus:border-indigo-500 rounded outline-none placeholder:text-indigo-300"},null,8,ys)),[[A,t.value]])])]),s("td",gs,[s("button",{onClick:n=>Se(l),class:"text-slate-400 hover:text-red-500 transition-colors"},[x(y(se),{class:"w-3.5 h-3.5"})],8,_s)])]))),128))],32)])]),s("button",{onClick:$e,class:"mt-3 flex items-center gap-1.5 text-[13px] text-indigo-600 hover:text-indigo-700 font-medium"},[x(y(pe),{class:"w-3.5 h-3.5"}),e[27]||(e[27]=T(" Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»Ðµ ",-1))])])):g("",!0),D.value==="json"?(d(),c("div",ws,[b(s("textarea",{"onUpdate:modelValue":e[8]||(e[8]=t=>F.value=t),onInput:m,class:"w-full h-[300px] px-3 py-2 border border-slate-200 rounded-lg font-mono text-xs text-slate-900 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-none",placeholder:'{\\n  "key": "value"\\n}'},null,544),[[A,F.value]])])):g("",!0)])):g("",!0),O.value==="Response"?(d(),c("div",ks,[j.value.length===0?(d(),c("div",As,[s("div",Is,[x(y(Ie),{class:"w-12 h-12 mx-auto mb-3 opacity-50"})]),e[28]||(e[28]=s("div",{class:"text-sm text-slate-600 font-medium mb-1"}," ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð´Ð»Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ ",-1)),e[29]||(e[29]=s("div",{class:"text-xs text-slate-400"}," Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ñ‚ÐµÑÑ‚ ÑÐ¿Ñ€Ð°Ð²Ð° â†’, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð¾Ñ‚Ð²ÐµÑ‚Ð° ",-1))])):(d(),c("div",Ts,[s("div",Vs,[s("div",Cs,[e[30]||(e[30]=s("div",{class:"bg-slate-50 px-3 py-2 border-b border-slate-200 text-xs font-semibold text-slate-600"}," Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ ",-1)),s("div",Ns,[(d(!0),c(P,null,z(j.value,t=>(d(),oe(xt,{key:t.path,field:t,onToggle:Le},null,8,["field"]))),128))])])]),s("div",$s,[s("div",Ss,[e[31]||(e[31]=s("div",{class:"bg-slate-50 px-3 py-2 border-b border-slate-200"},[s("span",{class:"text-xs font-semibold text-slate-600"},"ÐŸÑ€ÐµÐ²ÑŒÑŽ (Ñ‡Ñ‚Ð¾ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚ LLM)")],-1)),s("div",Ps,[s("pre",Os,f(JSON.stringify(Be.value,null,2)),1)])])])]))])):g("",!0)]),s("div",Ds,[s("div",js,[x(y(Ie),{class:"w-4 h-4 text-indigo-600"}),e[32]||(e[32]=T(" Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ AI ",-1))]),e[33]||(e[33]=s("div",{class:"text-[13px] text-slate-500 mb-3"}," Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ, ÐºÐ¾Ð³Ð´Ð° Ð¸ ÐºÐ°Ðº AI Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑ‚Ñƒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ. ",-1)),e[34]||(e[34]=s("textarea",{class:"w-full border border-slate-200 rounded-md p-3 text-[13px] min-h-[80px] focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-y",placeholder:"Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÑÑ‚Ñƒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ ÐºÐ¾Ð³Ð´Ð°..."},null,-1))])])])):(d(),c("div",Es,[s("div",Us,[x(y(nt),{class:"h-8 w-8 text-slate-400"})]),e[35]||(e[35]=s("p",null,"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð´Ð»Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ",-1))])),a.value?(d(),c("div",Fs,[s("div",Js,[s("div",Ms,[s("span",Ls,f(a.value.status==="active"?"ÐÐºÑ‚Ð¸Ð²Ð½Ð°":"ÐÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ð°"),1),x(st,{"model-value":a.value.status==="active","onUpdate:modelValue":Me},null,8,["model-value"])]),s("button",{onClick:Re,class:"p-2 text-red-500 hover:bg-red-50 rounded-md transition-colors",title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ"},[x(y(at),{class:"w-4 h-4"})])]),s("div",zs,[s("div",Bs,[e[36]||(e[36]=s("span",null,"Ð¢ÐµÑÑ‚Ð¾Ð²Ð°Ñ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ",-1)),s("button",{onClick:We,disabled:q.value,class:"flex items-center gap-1.5 bg-indigo-600 text-white px-3 py-1 rounded text-[11px] font-semibold hover:bg-indigo-700 disabled:opacity-50 transition-colors"},[x(y(rt),{class:"w-3 h-3"}),T(" "+f(q.value?"Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ...":"Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ"),1)],8,Ws)]),s("div",qs,[b(s("textarea",{"onUpdate:modelValue":e[9]||(e[9]=t=>R.value=t),class:"w-full h-full border-none resize-none font-mono text-xs text-slate-900 focus:ring-0 p-3 bg-white",placeholder:"{}"},null,512),[[A,R.value]])]),s("div",Rs,[s("div",{class:I(["h-8 flex items-center justify-between px-4 text-[11px] shrink-0",v.value?v.value.status_code>=200&&v.value.status_code<300?"bg-green-50 text-green-700":"bg-red-50 text-red-700":"bg-slate-50 text-slate-500"])},[v.value?(d(),c(P,{key:0},[s("div",Hs,[s("span",Zs,f(v.value.status_code),1),s("span",null,f(v.value.latency_ms)+"ms",1),Array.isArray(v.value.raw_body)?(d(),c("span",Gs,f(v.value.raw_body.length)+" ÑÐ». ",1)):g("",!0)]),s("button",{onClick:e[10]||(e[10]=t=>{v.value=null,j.value=[]}),class:"hover:opacity-70 ml-2"},[x(y(se),{class:"w-3 h-3"})])],64)):(d(),c("span",Xs,"Ð“Ð¾Ñ‚Ð¾Ð²Ð¾"))],2),v.value?(d(),c("pre",Ks,f(JSON.stringify(v.value.raw_body,null,2)),1)):(d(),c("div",Qs," ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Run Ð´Ð»Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° "))])])])):g("",!0)]),x(Ye,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:et(()=>[M.value?(d(),c("div",{key:0,class:I(["fixed bottom-4 right-4 z-50 px-4 py-2.5 rounded-lg shadow-lg text-sm font-medium flex items-center gap-2",M.value.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"])},[M.value.type==="success"?(d(),oe(y(Ae),{key:0,class:"w-4 h-4"})):(d(),oe(y(se),{key:1,class:"w-4 h-4"})),T(" "+f(M.value.text),1)],2)):g("",!0)]),_:1})],64))}}),eo={class:"h-full"},vo=fe({__name:"functions",setup(w){const J=tt();return($,B)=>(d(),c("div",eo,[x(Ys,{"agent-id":y(J).params.id},null,8,["agent-id"])]))}});export{vo as default};
